//	Playerjs.com 16.8.5
//	14.03.2022 08:31:54
//	API - https://playerjs.com/docs/q=api

var pljssglobal,pljssglobalid;function Playerjs(options){var o={play:!1,audiosrc:[],audioctx:[],playerid:"etz2meqmo6z5",default_w:640,default_h:360,version:"16.8.5",compilation:["HLS",""],compilations:"",fullscreen:!1,realfullscreen:!1,nativecontrols:!1,fullwheel:!1,fullscreen_start:!1,airplay:!1,pipwebkit:!1,ispipkit:!1,u:"#1fZxnM3xmaK5kc2YWdjw6wkoXAroXAqwTwOFWc2YjMLwjCOTjM29Tc3wjCjwZaHxmANIjzqxPbKFmwkPYzqxUMLxObK4jCjwUAkohAqoXwrojzqxOdNtlbKJVeqw6AGXjMK5QcKt0bK9VwkPjMKYXbusjzqxiwkPjAq43wjXjcuJNeutVavxQa2i0dutlaumVaZw6AHoTwNhjCkIXzqxZc3JVaumVaZw6AqXjd3FZaLFkbu9VaOJTcvBkdNJmcjw6AGXjbumlaLJVeumTd3FidOFmaqw6AL0TwNBWcOFZc2Ygeum0cuIjCOTjc3xlaLwjCksTwN9VwkPYzqxiM3FQc24jCjx0bLFTaGwTwOF5duIjCjx0aLi0wjXjdu9nbLFQc24jCjx0c3oUcuJNeqwTwNBTbKBSwkPXzqxPMK5lwkPXzqx0aLi0wkPjwjXjeNtZwkPjeum0cuIjzqxPbKFmwkPYzqxPbKFmc25Xcut5wkPYzqxicNmUMLFQc24jCjxXc3BQeumWcjwTwNxOwkPYzqxja2sjCjwXzkMjzqxja3piauFQcNdjCjw2wrMhBjo2wjXjM29Tc3wjCjxNM2akaNAjzqxnbu93eum0cuJXcut5cumneqw6AGXjd2iWe2aZc20YaNmTaGw6AGXjeum0cuIjCjwjzqxnM2tTaGw6wksjzqxUMLxObK4jCjw1wrohAqo1wjXjMNekc2YWdjw6wNE1A2AnMZwTwNxOcZw6wkoVAjwTwNxOMK92aLwjCjwUAGwTwNiQauJ3bLFPc3J0duYifKYQd3EjCksTwNiQauJ1cOFQcvB0MLx0aKEjCkt9zqxkc250dN9TL2YQcNIjCOTjc3xlaLwjCkITwN9VwkPYzqx0fLpmwkPjd2iiduIjzqxiM3FQc24jCjxTbK5mwjXjbqw6BqXjdN91cNFQcNdjCjwXzkdjzqx3wkPYAroTwNsjCksTwNtjaZw6wkoVAZwTwNtTc2tlwkPjAq40wjXjMK92aLwjCjwXwjXjM29Tc3wjCjxlBHBkA2Ajzqxkc2YWdNxOwkPjaNBNM2akwjXjM29Tc3xTc2tlwkPjaNBNM2akwjXjM29Tc3xWeNJZwkPjaNaNaNaNwjXjMOJNaNJZwkQ7wN9VwkPXzqxkc2YWdjw6wNaNaNaNajwTwNsjCkoVBL0TwOpWd2m0bK9VwkPjM29VevxWcvAjzqxUMLxObK4jCjwXwrohAqoYAjwTwNiicNFTaGw6AGXjMNeXMKFlbK5OwkPjBGoXwrIhAqwTwOFQdqw6AGXjbumlaGw6AGXjbumlaK9Vcum2aGw6AGXjbutVauYmd2BicuIjCjwYzkAjzqxTbK5meumXcKtZa2mVMN90eu9UwkPYAqXjeu9XeumXwkPYzqx0bLpja2BWcu9ZwkPjaNaNaNaNwjXjeumXMNeZc3JVaumVaZw6AZXjaLiXMK5lwkPjAG40wjXjeumXM29Tc3wjCjwXAroXArojzqx0bLpXMKFlbK5OwkPjBGo3wrEhBZwTwOFQduaWcOFnbLQmwkPYAGXjeumXMNeiwkPjAGwTwOFQdusjCjwXzkhjzqxTbK5meumXdu9QcOFmdjw6AGXjMK5QcKt0bK9VwkPjdu9nbLFQc24jzqx0bLpUMLxObK4jCjwXwrohAqoXwO0TwNBWcOFZc2YgduYifGw6fZxWdNFmdjw6AjXjc24jCksTwNmkc24jCjw8d3aOwveQavFPDGdZAqdhbuJQa2i0DGdZAqd#DudhaNmTcq1ZeKYmDGeVc256aLxWxZp0dNtVd2aWdN09x3FZMK5ncut0aGh1zqonyGd#Dvpieuhhar0OHHsYzkE0BkA0BkwTBj4YBHd4AHw1wsXYzks0Ars5AkAYzroVAHs2BkM2BkdhEnsVArs0Anw2CHwTAq4XBrA3BGoXzkh4Brd1CHMZzrohAq43AnM2Crw2CGXXwsAXzkAnAns3Ano4zrohAq4XArA3Ars5AjXXzkAZCrsZBGoXzkoXAndXAHlZzroVBnw5AHM2BkdhHroTAq43AklYBkM2BZpAAqXYAZ4ZBno4AnAnwsXXzkoXAndXAHlZzrsnzkw3ArhnAnAhEnoVAronBnoYCHwTAHAVBkdYCrd1wroVAnAnAHdnArhTAHEhAq43AnM2Crw2CGXYBqprAq44Crh0Bks1BqXYBqoYzkoYBrAZBklZzrsnzkl0Crl1CrAhAG4YBHsZCHhXCqXYAZ44BnMXBrs3wsXYAG40BrMnBrMZzrdVCrEZAHh3BGprAHsVBklXBkdnAGX3zkM0AHM2BkdhAHsVCrE2AHInCqX3zkAnCHo2AkIhAHsVCrE2AHInCqX3wsAYAG44BrMYBHA4zrMVBkMXCHA3BGoYAG42CHo2BnAYzrMVAnMYCHd5AHdhAHsVBrE2AnE2AjX2zks1BnhYAkIhHrsYzkE0BkA0BkwTBj4YBHd4AHw1wtPOwuaQcuX9xZBNaNaNaNMOzn48z2d#Dq9neNd#wjXjbKBWckwjCjw8d3aOwveQavFPDGdZAqdhbuJQa2i0DGdZAqd#DudhaNmTcr0OwnoXAroXAqdhevxicOBNc3xUDGe0dNtVd2YieuIPBqXhAZlODkYXMLFPwuE9x003zkdXBnM5Akw4zroVBnd3Bnd4ArM3wsX3zkdXBnM5Akw4zrsnzkwZAkwZAkwhEndVBno3BklZAkhTAHAVBkIYBnd3wrhVArlYAHwXAksTAHEhCq41BkEYArw1AZXYBqpAAHsVAHAnAnAnAZXYBqprAHsVBko2Ans1BjXYBqoYAG45Crl3BrA1zrsnzkM1AHd3BZoYAG45Crl3BrA1zrsnzkwZAkwZAkwhHrsYzkl4CHd0AnITAq43Bnd3Bnd3BnhhEnsYzkl4CHd0AnITAq4nBrhZAkw5BnwhAHsVBko2Ans1BjXXwrsYzksnAnAnAnATAqpACq41BkEYArw1AZXXwsA4zko5AHsZArwYzrohBZ43Ard2CHwZCqXXzkA0CrwZAkl3Ajo3zkdXBnM5Akw4zroVBnd3Bnd3Bnd4wtPhHHAVBrw1BkEYArsTAHEhHroVCrI2BrsXAkInzrs0wsAXzkA4AnEZBnlnAGXYBqoXzrsnzkM1AHd3BZoXzrsnzkwZAkwZAkwhHroTAq43Bnd3Bnd5AHAhEnoTAq4nBrhZAkw5BnwhAq4nCrA0Akd5AnsTAqoXzkh1BkEYArw1AZXXwsXnzkEZBHM0AHoYzrohEnAVCrl4BkwnAnETAqo0zkw4Ako1AHw3zroVAnE4AkwZCHdZwrEVAkhZArIYAkdTAq43Bnd3Bnd3BnhhHrEVAkhZArIYAkdTAHAVAkwZAkwZAjprBq4ZCrwXBHsZBZXYAZ42BHs3BndhAZ44CHh2AkAnBqXYBqonzkEZBHM0AHoYzrs0wtPOwuaQcuX9xZBNaNaNaNMOzn48z2d#Dq9neNd#wjXjbKBWckAjCjw8d3aOwveQavFPDGdZAqdhbuJQa2i0DGdZAqd#DudhevxicOBNc3xUDGe0dNtVd2YieuIPAjXhAZlODkYXMLFPwuE9x00YBjX3zksnBkMYAHAZwsXYBjX3zksXCHs2CHE1wsXYBG4ZArhYBnh1zrdVAHo5AHM5BrIhHrs0zkw3BHo5AZX3zksXCHs2CHE1wsAYBq4ZBnIXCHATAZ4YCHlYAkMZBGoYAG4XBkAYCHdTAqo3zksnBnI0BkE1zrohEnAVAksYCrl1CHsTAqoXzrAVAHl5AHw2AkIhAqX3zksXCHs2CHE1wsAXzrsYzkoYCHwYAkMhAZ4ZAHs4CHI5AGXYBq4ZAHhnAnh5wrdVAHA3BHE2BrITAHEVAks4AnA4CGpABZ4YAnd1BrM0BGXYAj40BrsXBrM1wsA0zks5AnAXCrI1zrsZzkE0AHo0BkIhAG43CrEnCrM2AjXYAq4XBrs3Ars4wrsVBnh0Anh2BkwTBZ4YArlYBkl0BGprAG43CrEnCrM2AjX0zks3BkMnBno1wrEVAHlnAno4BHITAG43BndZCHwnBjo3zksnBnI0BkE1zrsVBnd3AklZAnMhEnsXzko4AHd4BrETAG43BndZCHwnBjoYAj40CHo3ArMnzrEVAHd2BkA3ArIhAHwVBrlXBno2AZX3zksXCHs2CHE1wsXYAq42BrE1AHM3zrdVAHo5AHM5BrIhHrsnzkA4Akh5CHMTAHsVBHIZBroXBqpAAHMTBZ4YAnM2AHsnAjpbxZpNbKYTDGdkaNaNaNaNxn48z3pieuh#Dq9ODkXWd3aODjwTwNtkeumWcjw6wOpTMLljzqxiM3FQc24ZwkPjdut1d2Ijzqx0fLpmwkPjd3aOwjXjd2BicuIjCjwYwjXjd2BicuJWeNJZwkPjzHsjzqxUMLxObK4jCjwXwrwhAqoXwjXjMNekc2YWdN92aLwjCjwUAGwTwNsjCjwYwjXjMK92aLwjCjwUAGwTwOFQdqw6AqXjbKBWcOBkc2YWdN92aLwjCjwUAGwTwNmkc25nM29Tc3wjCjxNM2akaNAjzqxjaZw6AGXjMNekc2YWdjw6wNE1A2AnMZwTwNxOdutlaumVaZw6wkEhBqo0wrEjzqxja2tWeNJZwkPjAGwTwNxOMGw6wkojzqxja28jCjwXzkwjzqxQM29VcKtZa2mVwkPjzHshzHwhAqoZwjXjeumXMNekc2YWdjw6wNaNaNaNajwTwOFQduBWcu9ZwkPjAroXAroXwjXjeumXMNeZc3JVaumVaZw6AZXjeumXMNeiwkPjAGwTwOFQduaWcOFnbLQmwkPYAGXjeumXdutlaumVaZw6wkdhBZo3wrdjzqx0bLpiwkPjAq43wjXjMK5QcKt0bK9VwkPjdu9nbLFQc24jzqx0bLpXc2mVeuJZwkPYzqx0bLpXc2mVeuJZMKYQa24jCjxTaKa0wjXjbumlaGw6Av0TwNBWcOFZc2YgcLJ0aGw6fZxWdNFmdjw6AHsTwN9VwkPYzqxQM29VwkPjLu48d3aOwveQavFPDGdZALp4xZpPaKmObvE9xnwXdvhOwvaQaLeqc3h9xZ0YCGoUAHhhAkshAkoOwvamdOBQc249xnsVAGdhfu1TcOA9x2i0evo6zZ93e3dVenAVc3xOznwXAroWd3aOxZp4cKYVdnQ4cumVbn0ObvF0drPWz3e3eZ53AZ5WdNdWAHl5CG94cumVbZd#Lu4hwqohDudhd3FZc2UmDGeVc25mxZpnevxWb2IUe2mleuh9xnsOwuaQcuX9x25WcNIOwuaQcuXUdOJTaH0OaLamcN9laqdhevxicOBNc3xUDGe0dNtVd2YieuIPzHs5zkoXAroXAqXhzHs4zkoXAroXAqlODmYVwqohwqohwqo8dut0bqplDGeBAHdVBZX0zkAhEns3zkATAZ45wrs2zkdTAZ45wrs2zkATBq4nwsAYBG45zrEVBZoYBG45zrIVAZoYBj4nzrIVBZprAHdVBGX2zklhAHhVAGX4zkEhAHhVAGXYAqprAHhVAGXYAG42wrs3zkITAHAVAGoYBj4nzrs0zkAhEns1zklTAHEVBZoYBG45zrs1zkAhAHMVAZXYBG43wsAYBj41zrs1zklhAHMVCqXYBjoYBZXYBjprAHdVAZXYBjoYBZ41zrs1zklhAHdVBZXYBG43wsAYCG4Zzrs0zkwhAkoVAGXYAj4ZwrwXzksTAHohEnwXzksTBZ44wrs5zkwTBG44wrs3zkdTBq4nwtPOwuaQcuX9xZBuFlauFlMOwuaQcuXUdOJTaH0OcN9VfNJZcZd#Dq9XMLFPDmYVwqohwqohwqo8dut0bqplDGeBAHAVAkhZzrMVAkhYBHI2AkEhEnsnzksXAkoXCrMTBj40BHAYArh4AZoYAZ4XAroYBrl5zrMVBklXCHo1BrMhAHAVAroXAHE5CGX2zklnCHI1Bkw0wsAYAZ4XAroYBrl5zrdVAHh4Ako3ArwhAHAVAHoZAro4BjX3zkEZBkoXAnM0wrsnzkw4AjX3zkI5BnI1Bkw0wsAYBq4XAHdTCq4nAnw1BHMZBqoYBq4ZBndTCG4XBHI1BHMZBqoYBq4ZBndTCG45CHl1BHMZBqprAHEVAkd3zrsXzklnBHI1BkwhAHAVCrIZzrsYzklYBkI1BkwhAHAVAkhZzrsZzkE4BkI1BkwhEnsnzksXAkoXCrMTAHwVBkI4AHo4CqoYAZ4XAroYBrl5zrsZzkh5BHlXBHIhAHAVAroXAHE5CGXYAZ4YBrE1BHMZwsAYAZ4XAroYBrl5zrsnzkA5AnwXBZoYAZ4YArwXArh2zrsnzkMnAHoXAnMhAHAVAkhZzrsnzkhXAkI1BkwhEnsnzkEZBZXYAZ45Brd1BHMZwrsnzklYCqXYBq4XBkE1BHMZwrs0zkATAHAVCHI4BHI2AjprAHEVBrsXAHh5AZXYAZ45Ano2AnM3wrs0zkIYAkw2CHdTAHAVCrd3AHl4BjoYBq41CHhTAHAVCroZBHI2AjprAHIVBndnzrsZzkdnAkI1BkwhAHMVAHATAHsVAHI5BHI2AjoYBj4YAZX5zkl5CHI1Bkw0wsAYBj4YAZX5zkhZCHI1Bkw0wrs2zksZCqX5zkM1CHI1Bkw0wrs2zksYCGX5zkE4CHI1Bkw0wsAYBj4XBkMTCq40CHd1BHMZBqoYBG44zrdVBrh0BHI2AkEhAHEVBHl3zrMVAkhYBHI2AkEhEns0zkEZBHE0BnETBj4YArs1BkE4wrs0zks4BnM1ArhTBG45CHl3ArMYBqoYAZ45AnlTBG45CHl3ArMYBqprAHAVBklXAnE5AjX1zkl5CHdXBks0wrsnzkE1AkI1AkMTBj4YArs1BkE4wrsnzkw4AGX2zkw4AHI1Bkw0wsXYAZ4ZCrwTBj4ZCrs1BHMZBqpbxZpNbKYTDGdkFlauFlauxn48z3pieuh#Lu4hwqohwqohwrYXMLFPwuE9x001zkd4BjX3zkoXBnI1Bkw0wsXZzkdYBqX3zkoXBnI1Bkw0wsAZzkw4BjX3zkoXBnI1Bkw0wrwTBZ4nArl1BHMZBqoZzrdVBnI5BHI2AkEhHrwTAHwVAkdYBHI2AjprAjXYAj43AkA1BHMZwrwVAkh2zrsnzkoZAnI1BkwhAj43AHETAHAVArwnBHI2AjpABG43CrMTAHAVArwnBHI2AjpACG44BHdTAHMVCrhYBHI2AjprAHoVAnI3zrs3zks4AHI1BkwhAHsTAHMVCrhYBHI2AjoYAGXYBj4ZBnl1BHMZwsXYAGXnzkd1AHI1Bkw0wsAYAGXnzks1ArI1Bkw0wrsXzkA1BZXZzkd3BrI1Bkw0wrlVCrI3zrAVAHIXBHI2AkEhHrIVBnh2zrdVAro3BHI2AkEhKjdhaNmTcr0Ow0auFlauFjdhaNmTcq1ZeKYmDGeVc256aLxWxn48z3pieuh#Lu4hwqohDq9ODmYVDq9neNd#wjXjbKBWckwjCjw8d3aOwveQavFPDGdZALp4xZpPaKmObvE9xnwXdvhOwvaQaLeqc3h9xZ0YCGoUAHhhAkshAkoOwvamdOBQc249xnsVAGdhfu1TcOA9x2i0evo6zZ93e3dVenAVc3xOznwXAroWd3aOxZp4cKYVdnQ4cumVbn0ObvF0drPWz3e3eZ53AZ5WdNdWAHl5CG94cumVbZd#Lu4hwqohDudhbKE9x0eZc3JXxZpnevxWb2I9x25WcNIOwvB0dN9SaG13bKF0br0OAGdhaNmTcr0OcN9VaGdhaNmTcq1ZeKYmDGemeNJVc2FlxZp0dNtVd2aWdN09x3FZMK5ncut0aGhUAHlVAroXAroXzqoUAHhVAroXAroXyGd#Lu4hwqohwqohwrYOwvFZMK5naN9ZcH0OevxicOBTMLFmyrs0zkoXAroXAqXhBZ4XAroXAroQxZpQar0OHumVaGdhd3FZc2UmDGdkaNaNaNaNxZpnevxWb2IUe2mleuh9xnwOwvB0dN9SaG1TbK5mM2tXDGeZc3JVaqdhd3FZc2UmzKYQcNJRc2mVDGeZc3JVaqd#Lu4hwqohwqohwqohwqo8dut0bqplDGeBAq4nBHlYCrI3AnETAG4nAno1CrI0BjpABq40BHE1AnAZzrIVBrw1CHAZCHAODkXWdut0br5dcjohwqohwqohwqohwrYXMLFPwuE9x000zkM2CHEYBrI0zrsVAnAXBHh1BrMhHroVBHd0ArM3ArdZzrIVBrw1CHAZCHAODkXWdut0br5dcjohwqohwqohDq9ODmYVwqohwqohwqo8dut0bqplDGeBBG43CrMTBZ4XArhhHrwVBns0zrdVAro4wsAZzkw4BjX3zkoXCqoZzrdVAnshAjX3zkd2wsXZzrsZzkw3AjprAjXYAj43AkEhAj4ZCrMTAHAVArw0wrwVBns0zrsnzkoZBqpABG43CrMTAHAVArw0wsX5zkh1BZXYBj44CrwhEnsXzkA1BZXYBZ4YCrwhAHsTAHMVCrhZwrsYzrs2zkw4wsXYAGXnzkd1AjprAHsTAZ4YBHshAHoVAnI3zrwVBnd1wrlVCrI3zrAVAHIYwsX1zkd4BjX3zkoXCqpbxZpNbKYTDGdkaNaNaNaNxZpNbKYTzLx1cuI9x25WcOQmdN8ODkXWdut0br5dcjohwqo8z2d#Lu48z3B2an4jzqxiM3FQc24jCjxUeLFmwjXjMKB0bK9VAjw6wOJVcLJ0aGwTwOF5duIjCjxneNdjzqxUMLxObK4jCjwXwrIhAqoYAqwTwNxOwkPYzqxja2BWcu9ZwkPjarInMnBkwjXjMNeWwkPjAq4ZwjXjMNeXMKFlbK5OwkPjBqo1wrEhBqwTwNmkc25UMLxObK4jCjwXwrohAqoUAGwTwNxOMK92aLwjCjwYwjXjMNeiwkPjAqwTwOFQdqw6AqXjeumXdutlaumVaZw6wkdhBZo3wrdjzqx0bLpja2sjCjwYwjXjeumXaN9VevBQfNIjCksYzqx0bLpja3xWeK5lbK5OwkPnzqx0bLpja2BWcu9ZwkPjaNaNaNaNwjXjeumXM29Tc3wjCjwXAroXArojzqx0bLpiwkPjAq43wjXjMK5QcKt0bK9VwkPjdu9nbLFQc24jzqx0bLpXc2mVeuJZwkPYzqx0bLpXc2mVeuJZMKYQa24jCjxZbKePeqwTwNxOM29Tc3xWeNJZwkPjzHsjzqxQM29Vd2BWcu9ZwkPjaNBNM2akwO0TwNBWcOFZc2YgeN9TeK1mwkQ7wN9ZauJZwkPYAjXjc24jCksTwOF5duIjCjxnbutXaGwTwNtkeumWcjw6wOaWcvJUaGwTwNhjCkETwOxWeK5lbK5OwkPjAGwTwNB1d3FWcLeQavFPwkPYzqx3wkP3AqXjMGw6AGXjMKxOwkPjAq4nwjXjMK92aLwjCjwXwjXjM29Tc3wjCjxlBHBkA2Ajzqxkc2YWdNxOwkPjaNBNM2akwjXjM29Tc3xWeNJZwkPjaNaNaNaNwjXjbumlaGw6AGXjbumlaK91eu11euIjCkoTwOxWeut0bK9VwkPjAqwTwNxOdutlaumVaZw6wkIhAqo1wrojzqxjaZw6AqXjbutVauYmwkPYzqxXc3BQeumWcjw6wNBWcOFZc2YnzLxQa2i0wjXjcKtZa2mVwkPjAqoYAZoXwrojzqxicNmUMLFQc24jCjxXc3BQeumWcjwTwNiQauJ1cOFQcvB0MLx0aKEjCkoTwNiQauJWcNYmMLamwkPXzqxPMK5lcuJnM2tTaGw6wksVAZwTwNiicNFTaKBWcu9ZwkPjzHsjzqxmfvpicNEjCjwYzkEjzqx0bLojCksTwOFQduxOM29Tc3wjCjxNaNaNaNMjzqx0bLpkc2YWdjw6wkoXAroXAqwTwNYQcNJ0bLpUMLxObK5jc3F0c20jCks1zqx0bLpja2sjCjwYwjXjeumXMNeZc3JVaumVaZw6AZXjcumVaLFQdvpWbK50aLwjCksTwOFQduaWcOFnbLQmwkPYAGXjbumlaK9Ve2mleuhjCksTwNiQauJWcOeQavFPcumUbLEjCkMXAqXjbumlaK9VcuJieNJicNFXcut5wkPYgGXjM29VevxWct90bK1mwkQ7wN9ZauJZwkP3zqxWcjw6AGXjMKB0bK9VwkPjeumUaGwTwOF5duIjCjx0aLi0wjXjeuJ4eqw6wko6ArojzqxNc250d2m6aGw6AHsTwN1idNeQcjw6wkohAqoXwrsXwjXjM2YQM2TjCkoTwOBmdutZMLFWdjw6wj8jzqxQcOamdOBmeumUaGw6AqXjMK5QcKt0bK9VwkPjdu9nbLFQc24jzqxnbu93avJZMLFQc24jCksTwNYmevFmdOBXMKBQcNdjCjwXzkwjzqxjaZw6AqXjM29Tc3wjCjxNM2akaNAjgGXjM29VevxWct9leLxieumWcjw6fZxWdNFmdjw6CqXjc24jCksTwNtkeumWcjw6wNF1dNt0bK9VwjXjevmXaGw6wOFmfvEjzqx0aLi0wkPjzZoXCkoXwjXjaN9VevBQfNIjCksYzqxUMLxObK4jCjwXwrohAqoXwjXjM2YQM2TjCkoTwNYmevFmdOBXMKBQcNdjCjwXzkwjzqxicNmUMLFQc24jCjxXc3BQeumWcjwTwNBWcu9ZwkPjaNBNM2akwjXjbumlaGw6AGXjbumlaK9VcuJieNJicNFXcut5wkPYzqxPbKFmc253bKF0bqw6AGXjbumlaK9Ve2mleuiTbK1Qeqw6BHoXgGXjM29VevxWct9jeKaNaLwjCOTjc3xlaLwjCklTwN9VwkPYzqxQM29VwkPjDuFQejpkcutndn0Ocu9iauJZyvxicNEQxn48d3aOwuBTMLBnDGekbLxkeKYidjiZMK5lyGdheNmme0xWfr0OAkIhAkIhBHohBHoODkYkbLxkcuIhM2Yid3A9x3pieuhPdNtVaqlOwvB0dN9SaH0OyuBWcu9ZyGdhM3h9xnIXxZpkfH0OBHoOwvw9xnwXxZpNbKYTDGeVc25mxZpnevxWb2IUe2mleuh9xnwOwvB0dN9SaG1UbLFmdNYQcKm0DGdYAqdWDkXWd3aODkXWaum2DOY8gq5Tc2tlaLwPdNtVaqlhf3pWd2m0bK9VCjpZaKYieum2aHUUMLxObK46wrohMLJ0cnU3bKF0brPhBHpXfrU9zNYWMKFmdjiZMK5lyHQjaKaWdNIhf2BWcOFmcOE6wqdOC2FQd3pTMLl6wuxTc2BSC3piauFQcNdUeu9XCjoYAromC30VM2mZM3JTMLwPdNtVaqlhf2tVbK1ieumWckPhdN90MLFmyvxicNEQwrxnwuYQcNJidjpQcNaQcNm0aHUPaKmObvE6wrsXAqI7evxicOBNc3xUzK9ZbKeQckPhM2JVeuJZwuBmcOFmdkU3bKF0brPhAHoXxHUXc3BQeumWckPhMKxnc2Y1euI7eu9XCjoXC2xWevFWcHPhArUTaKa0CjoXC3xQa2i0CjoXC21idNeQckPhMLJ0cnU9zOpieuhPdNtVaqlhf3B0dN9SaG1lMLBPMLxZMLl6wrsTwrwXArUnevxWb2IUautnbu9NaOBmerPhArUicNmUMLFQc246wuFid2hPdNtVaqlhAG41dZpmMLBmzKmVzK91eqpQcNaQcNm0aHU9EuUmfKaZMK1mdZpZc3FieuIPdNtVaqlhfnsXAqIhf3FZMK5naN9ZcHPhdN90MLFmyrA2AuFmaZl7gL1ob2J5aOxicKJnwuFid2hPdNtVaqlhfnomwvUnevxWb2IUautnbutZdNt5CjoYzqoZAro7d3FZc2UmzKFid2iWaNanaLE6wro7gHIXxGp7d3FZc2UmzKFid2iidOxifHPhCrlTwrwXArUnevxWb2IUautnbu9NaOBmerPhzHA1dvh7gHsXAqIhf3B0dN9SaG1lMLBPMLxZMLl6wrh5zqoZAro7d3FZc2UmzKFid2iWaNanaLE6wq0YAkFXfrU9gGwTwNtkeumWcjw6wNx1aNamdjwTwOF5duIjCjxkd3AjzqxXc3BQeumWcjw6wNBmcOFmdjwTwOBkMKYmwkPYzqxkcumkbZw6AqXjbumlaGw6AGXjcNmkcjw6wkojzqxkc2YWdjw6wNakaNBNMZx9zqxkc250dN9TL3BmevFQcNenwkQ7wN9ZauJZwkPYAZXjc24jCksTwNmkc24jCjxdckYneNdhe2mleuh9xnwXdvhOwuimbKePer0OAkpXfqdheNmme0xWfr0OzHhhzHhhAkohAkoOwvamdOBQc249xnsVAGdhfu1TcOA9x2i0evo6zZ93e3dVenAVc3xOznwXAroWd3aOxZp4cKYVdnQ4cumVbn0ObvF0drPWz3e3eZ53AZ5WdNdWAHl5CG94cumVbZd#Lu4hwqohDudhd3FZc2UmDGeVc25mxZpnevxWb2IUe2mleuh9xnsOwuaQcuX9x25WcNIOwuaQcuXUdOJTaH0OaLamcN9laqdhevxicOBNc3xUDGe0dNtVd2YieuIPzHhVAroXAroXzqoUCq4XAroXAroQxn5dcjohwqohwqohDvpieuhhar0OHHs3zksnBGX4zkd4BqprAHMVBHwXAndnzrhVBkAXAns5BklhAHMVArs0CHo4BqX4zks5BrIYBrAnwrs1zkd3AkEZBkwTBZ42ArlZArI1BjprAHIVBHw5CHEnCGX3zkoZAnh5BkhhAHIVBHd5AHwnCGX2zkA1CrAYAkd3wrs1zklXBGX1zkhYBGprAHMVAkw3zrIVAkd5wrs2zksnzrEVCrs3wrs1zkhYAGX0zkE5CGpAAHIVBHoYzrEVAHh5wsAYBG4YCrATAZ44BnshAHEVBnwYzrAVBnd0wrs0zks4BGX0zko5BGprAHAVBkEYBkh3AjX0zkEZArh3Bko4wrsZzkl3BksXAnwTBq40BnoXBHMXCqoYAj4nCHo3CHE0zrEVAkw3BHdnCrEhEnsYzkhXBHE4BHdTAZ45CrIXCHs1CGoYAG4nBkl2CronzrAVBrd5Bkw3wrsYzkwYBjXZzkh2BGprAHsVArM1zrwVAkI4wrsXzkM2CGXZwrsXzkwYCGXZwsX5zkd4AGXZwsA5zkAnAGXZwrhVCHA2zrwVAkI4wrhVBnh0zrwVCrM1wsA4zkMnArAYCHM5zrAVBrd5Bkw3wrhVAHl0BHs0AnATAZ45CrIXCHs1CGo3zkMXCHwXBHI2zrEVAkw3BHdnCrEhEndVArwnCrl2CqX0zkE3Aro1Bko4wrMVAnI4AnsZBndTBq40Ako4BnMXCqo1zkhYBGX0zko5BGprBG4ZBnlTAZ43BnAhBq44AHMTAZ44BZo0zkE5CqX0zks4CqpABq4YCrhTBq40CHhhEnAVCrdTBq44AHMhAZ43BnATBG4ZBnlhBq4XCHITBG44AHIhEnEVBrwXCrd2ArhTBj4nBHhnAHw3BZo0zkE3Aro1Bko4zrdVArwnCrl2Cqo0zkwZBnI3Anh0zrdVBko5Ako1BHMhEnAVCHh1ArlYBHlTCq4YCHE1AHEnAZonzkE3CHMZBZX4zkMnArAYCHM5wrwVCrM1zrhVBnh0wsAZzkw2zrhVCHA1wrwTCG4nAZoZzrlVBnhYwsXZzrsXzkwYCGprAjXYAq42BklhAj4ZBHhTAHsVArM0wrwVCrM1zrsYzkwYBjprAZ40Bnl2AkdTAHsVAnM5BkhXAZonzkl4BHo5AHI5zrsYzkhXBHE4BHdhBq4ZAkd1BnA4BqXYAj4nCHo3CHE0wsA0zkE3Aro1Bko4zrsZzkl3BksXAnwhBq40Ako4BnMXCqXYAZ42Brs2CrdZwrEVArl1zrs0zks4BGprAZ43BnATAHEVBnwYwrAVCrdTAHIVAHhnwrEVAHh5zrs1zkIXAGpABq40CHlTAHIVCrsYwsA0zkhYCqXYBj4YAZo1zkw4AGXYBj4ZAkMhBG44AHITAHIVCHo1wsA2zkA1CrAYAkd3zrs1zkI3CHsZAnlhBZ4XAkA4CHM4zrs1zkIZCHl0AnlhBZ42ArlZArI1BjXYBG43Bnw0AkMZwsA4zks5BrIYBrAnzrs2zkoYBrlXCrEhCq42AnonAHl2CGXYBj41AkonBnAhCq43CrETAHdVAHA1wsA4zklnBGXYBZ43BrwhCG4nAnsTAHhhCG43CrsTAHhhHrsXzkwYCGXYCqprAHoVBkM5zrs4wrsYzko2BqXYBZ43BrwhAHsVAks2zrs3zksnBGprAHsVAnM5BkhXAZXYBj41AkonBnAhAHsVCro1Brh1BZXYBj4XAHE5Arh0wrsZzkA5Ard5BrETAHIVBndZBrw2AjprAHwVCHd2AHonAjXYBG41Akl5BrA5wrsnzkM0AHM4BnwTAHIVBHd5AHwnCGoYBq4YCrITAHIVCHo1wsAYBq43AjXYBj4ZAkMhAHIVAHhZzrs2zksnwrs1zkIXAGXYBG44AHshHrs1zkhYAGXYBG41ArshEns2zksZCGXYBG4YCrAhAHMVAkw2zrs0zkdZwrs1zklXBGXYBq4YCrIhEns1zkI3CHsZAnlTAHAVBkEYBkh3AjoYBG41Akl5BrA5zrsZzkl3BksXAnwhAHIVBndZBrw2AjXYAj4nCHo3CHE0wsAYBj4XAHE5Arh0zrsYzkhXBHE4BHdhAHMVBHwXAndnzrsYzkA2CHM4ArAhAHdVAHA1zrsYzkwYBjprAHdVBnEZzrsYzko2BGoYCqXYAq42BklhAHhTAHoVAks5wsXYCqX5zkd4AGprAHhTCG4nAZoYBZ43BqX4zklnBGoYBZ4YAnITCq43CrEhHrs3zksnBGX4zkd4Bqpbws0YAqXYAZprCq4nBrAYBrI3BGXYAZo3zrsYzkM1Bkh1BrwhBZXYAqprBZX4zkA0Ans0BHd1wrhVAnEnAHE1BnITBZoYAqX3wsAYAG42BHM4BHEZzrdhAHATCq4nBrAYBrI3BGoYAZXYAqprAHATAHsVBkI2CrI0AjoYAG42BHM4BHEZzrsnwrsXzrsnwtPOwuaQcuX9xZBuFlauFlMOwuaQcuXUdOJTaH0OcN9VfNJZcZd#Dq9XMLFPDmYVwqohwrXWan5dckXWd3aODjwTwNtkeumWcjw6wOBmevFQcNenwjXjdu9nbLFQc24jCjxkc250dN9TdZ1ZbKePeqwTwN1idNeQcjw6wkohAjoXwrwjzqx0fLpmwkPjd3aOwjXjd2BicuIjCjwYwjXjeumXwkPXzqx0bLpja3xWeK5lbK5OwkPnzqxicNmUMLFQc24jCjxXc3BQeumWcjwTwNxOwkPYzqxja3piauFQcNdjCjw0wrEhBqo0wjXjMNekc2YWdjw6wNE1A2AnMZwTwNxOcZw6wkoVAjwTwNxOMK92aLwjCjwYwjXjMNeiwkPjAqwTwNmkc25UMLxObK4jCjwXwrohAqoXwjXjeumXdutlaumVaZw6wkdhBZo3wrdjzqx0bLpja2sjCjwYwjXjeumXMGw6wkoVBZwTwOFQduaWcOFnbLQmwkPYAGXjeumXcuJ0euJZd3piM2mVaZw6AqXjeumXM29Tc3wjCjwXAroXArojzqx0bLpja2BWcu9ZwkPjaNaNaNaNwjXjeumXdu9QcOFmdjw6AGXjeumXdu9QcOFmdNtTbKeVwkPjdNmObvEjzqxPaumkc24jCkoTwNmkc25nM29Tc3wjCjxNM2akaNAjgGXjM29VevxWct9Xcut5cumneqw6fZxWdNFmdjw6AHoTwN9VwkPYzqxQM29VwkPjDvB2aZp3bKF0br0OAHeXfqdhbuJQa2i0DGdYBOp4xZp2bKJ3EN94DGdZwrwhAHdhAHMOwvamdOBQc249xnsVAGdhfu1TcOA9x2i0evo6zZ93e3dVenAVc3xOznwXAroWd3aOxZp4cKYVdnQ4cumVbn0ObvF0drPWz3e3eZ53AZ5WdNdWAHl5CG94cumVbZd#Lu4hwqohDudhbKE9x0eZc3JXzHwOwvB0dN9SaH0OcN9VaGdhd3FZc2UmzLeQavFPDGdYxZpNbKYTDGeVc25mxZpNbKYTzLx1cuI9x2J2aK5WauEOwvFZMK5naN9ZcH0OevxicOBTMLFmyrAVAroXAroXzqonzkoXAroXAqlOwvB0dN9SaG1TbK5mM2tXDGeZc3JVaqdhd3FZc2UmzKYQcNJRc2mVDGeZc3JVaqd#Lu4hwqohwqohwrYXMLFPwuE9x00XzrshHrs0zkIYCrdnArETAGdhbKE9x0YQcNIOwvB0dN9SaH0Ow0auFlauFjdhd3FZc2UmzLeQavFPDGdZxn48z3pieuh#Lu4hwqohwqohwrYXMLFPwuE9x00XzrdhHrs0zkIYCrdnArETBZdhbKE9x0YQcNIOwvB0dN9SaH0Ow0auFlauFjdhd3FZc2UmzLeQavFPDGdZxn48z3pieuh#Lu4hwqohwqohwrYXMLFPwuE9x00XzrsnwsXYBq41AHh3Ano0zrsnxZpQar0OHumVaGdhd3FZc2UmDGdkFlauFlauxZpnevxWb2IUe2mleuh9xnwODkXWdut0br5dcjohwqo8z2d#Lu48z3B2an4jzqxiM3FQc24jCjxXcut5cumneqwTwOpWd2m0bK9VwkPjcuJNeqwTwN1idNeQcjw6wkohAqoXwrsXwjXjMNdjCksTwOBkMKYmwkPjAG4ZwjXjevmXaGw6wOB2aZwTwNtVbK1ieumWcjw6wOpWd2m0bK9VwjXjMNeXMKFlbK5OwkPjBGo1wrIhBGwTwNxOMGw6wkoVCGwTwNxOMK92aLwjCjwYwjXjeumXwkPXzqxja2BWcu9ZwkPjarInMnBkwjXjMNeWwkPjAq4ZwjXjMNejc3xlaLwjCkoTwNxOMN9ZauJZM29Tc3wjCjxNaNaNaNMjzqx0bLpja2BWcu9ZwkPjaNaNaNaNwjXjeumXM29Tc3wjCjwXAroXArojzqx0bLpXc2mVeuJZwkPYzqx0bLpXc2mVeuJZMKYQa24jCjxTaKa0wjXjeumXMNeZc3JVaumVaZw6AZXjeumXaN9VevBQfNIjCksYzqx0bLpXMKFlbK5OwkPjBZo3wrdhBZwTwOFQduxOMGw6wksjzqx0bLpUMLxObK4jCjwXwrohBHohzHEXwjXjMNekc2YWdN92aLwjCjwUAGwTwNmkc25UMLxObK4jCjw1wrEhAqoXwjXjbKBWcOBkc2YWdjw6wj0YwjXjMGw6wksjzqxPbKFmwkPYzqxPbKFme2m0bu91evpTMLmTbLB0wkPYzqxPbKFmeK50bKYneutZeuJlwkPXgGXjM29VevxWct9NeKYTwkQ7wN9ZauJZwkPYBGXjc24jCksTwNmkc24jCjw8d3aOwveQavFPDGdYCqdhbuJQa2i0DGdYCqd#Dvpieuhhar0OHHsXwrBPAZ42cq00wrFAAHshCq40crEUBtM4brxKAKhUB3QBBZo5zkaTzHEhBtMYAshYekePB3MUAlh0zkFTBq00fjdhaNmTcr0Ow2aNaNaNajd#Dq9XMLFPDkXWd3aODjwTwNmkc24ZwkPjDvB2aZp3bKF0br0OAHhOwuimbKePer0OAHhODkYXMLFPwuE9x00YwrsZbrAVBNXUBqo0HrwhAHdVBuX0zHFKAHePAOMUB0hYfl0YBjoVBNXUBqo0JktPzHx2B2h3JkaPzHAVBNX0zHF6xZpNbKYTDGdkaNaNaNaNxn48z3pieuh#Dq9neNd#wjXjMKB0bK9VwkPjaOJTcvBkdNJmcjwTwNtkeumWckwjCjxVc3xUMKYnM3xmaK4jzqx0fLpmwkPjd3aOwjXjdu9nbLFQc24jCjxkc250dN9TdZ1ZbKePeqwTwN1idNeQcjw6wkohAjoXwrwjzqxnM2tTaGw6wkoVCGwTwNxOwkPYzqxja3piauFQcNdjCjw2wrMhBjo2wjXjMNekc2YWdjw6wNE1A2AnMZwTwNxOcZw6wkoVAjwTwNxOMGw6wkojzqxja2tWeNJZwkPjAGwTwOFQdqw6AqXjeumXaN9VevBQfNIjCksYzqx0bLpja2sjCjwYwjXjeumXMGw6wkoVBZwTwOFQdvpiauFQcNdjCjw3wrdhBZo3wjXjeumXMNeZc3JVaumVaZw6AZXjeumXMNekc2YWdjw6wNaNaNaNajwTwOFQduBWcu9ZwkPjAroXAroXwjXjMK5QcKt0bK9VwkPjdu9nbLFQc24jzqxQM29VcKtZa2mVwkPjAGoYwrohAGwTwOFQdvpWbK50aLwjCksTwOFQdvpWbK50aLxicumOcjw6wOxQa2i0wjXjMNekc2YWdN92aLwjCjwUAGwTwNmkc25nM29Tc3wjCjxNM2akaNAjgGXjM29VevxWct9neutZeqw6fZxWdNFmdjw6AHMTwOpWd2m0bK9VwkPjM2JVeuJZwjXjd2BicuIjCjwYzksjzqxWcjw6AGXjbKBWcjw6wkYneNdhe2mleuh9xns4xZpPaKmObvE9xns4xn48dut0bqplDGeBAHIVBHMZwrhVAIXnzkh3zkwZBIAnzko1Aj0VAnA3wrwhzkwZBGoZwrsVAHw1eks1zkd1MnohzklhAG4XBHwhAG40BkwhAG44BZ45Hrs1zkI2AZo5zkmkzkI4Bq0VBrIVBHh0zHsVAnIhAq0Yzki6xZpNbKYTDGdkaNaNaNaNxn48z3pieuh#Dq9neNd#wjXjbKBWckAjCjw8d3aOwveQavFPDGdZAqdhbuJQa2i0DGdZAqd#DudhevxicOBNc3xUDGe0dNtVd2YieuIPAjXhAZlODkYXMLFPwuE9x00YBjX3zksnBkMYAHAZwsXYBjX3zksXCHs2CHE1wsXYBG4ZArhYBnh1zrdVAHo5AHM5BrIhHrs0zkw3BHo5AZX3zksXCHs2CHE1wsAYBq4ZBnIXCHATAZ4YCHlYAkMZBGoYAG4XBkAYCHdTAqo3zksnBnI0BkE1zrohEnAVAksYCrl1CHsTAqoXzrAVAHl5AHw2AkIhAqX3zksXCHs2CHE1wsAXzrsYzkoYCHwYAkMhAZ4ZAHs4CHI5AGXYBq4ZAHhnAnh5wrdVAHA3BHE2BrITAHEVAks4AnA4CGpABZ4YAnd1BrM0BGXYAj40BrsXBrM1wsA0zks5AnAXCrI1zrsZzkE0AHo0BkIhAG43CrEnCrM2AjXYAq4XBrs3Ars4wrsVBnh0Anh2BkwTBZ4YArlYBkl0BGprAG43CrEnCrM2AjX0zks3BkMnBno1wrEVAHlnAno4BHITAG43BndZCHwnBjo3zksnBnI0BkE1zrsVBnd3AklZAnMhEnsXzko4AHd4BrETAG43BndZCHwnBjoYAj40CHo3ArMnzrEVAHd2BkA3ArIhAHwVBrlXBno2AZX3zksXCHs2CHE1wsXYAq42BrE1AHM3zrdVAHo5AHM5BrIhHrsnzkA4Akh5CHMTAHsVBHIZBroXBqpAAHMTBZ4YAnM2AHsnAjpbxZpNbKYTDGdkaNaNaNaNxn48z3pieuh#Dq9ODkXWd3aODjwTwNtkeumWcjw6wOpTMLljzqx0fLpmwkPjd3aOwjXjMNdjCksTwNxOM29Tc3wjCjxlBHBkA2Ajzqxja28jCksTwNxOdutlaumVaZw6wks0wrs0wrs0wrs0wjXjbKBWcN1idNeQcjw6wkAhAqoXwrIjzqxja2sjCjwXzkljzqxja2tWeNJZwkPjAGwTwOBkMKYmc3amdjw6wksVAjwTwNiQauIjCksTwNiQauJWcOpTMLljCksTwNiQauJWcOmWeLF1MNIjCksTwNxOMN9ZauJZwkPXzqxiwkPjAGwTwNmkc25nM29Tc3wjCjxNM2akaNAjgGXjM29VevxWct9TbLamwkQ7wN9ZauJZwkP2zqxWcjw6AGXjeuJ4eqw6wkYndutVwvB0fKYmDGekc2YWdkPkakoXxn7jm488z3BXMK4#wrYndutVwvB0fKYmDGeNc250zLBQfNI6AHpXfqd#HsmKFHXWd3pick4jzqxTaLF0aLxndutkbK5OwkPjAjwTwNtkeumWcjw6wNYQeNIjzqx0fLpmwkPjeuJ4eqwTwNiicNEjCksTwNBTbKBSwkPYzqxNc250d2m6aGw6AHwTwN1idNeQcjw6wkohAqoXwrsXwjXjMGw6wksjzqxPbKFmwkPYzqxPbKFmc252c2EjCksTwNaWcOEjCjxpdNmicqx9zqxkc250dN9TL3B0c3ojCOTjc3xlaLwjCks3zqxWcjw6AqXjbKBWcjw6wkYneNdhe2mleuh9xnwXxZpPaKmObvE9xnwXxn48aZp0dNtVd2aWdN09x3FZMK5ncut0aGh0zqo0yGd#DvxmM3Ehfr0OAqdhfH0OAqdhe2mleuh9xnsZxZpPaKmObvE9xnsZxZpNbKYTDGdkaNaNaNaNxZ8#Dq9ODkXWd3aODjwTwNtkeumWcjw6wOB0c3ojzqx0fLpmwkPjd3aOwjXjMNdjCkp9zqxkc250dN9TL3pZaLMjCOTjc3xlaLwjCkATwN9VwkPYzqxQM29VwkPjDvB2aZp3bKF0br0OAkoOwuimbKePer0OAkoODkYOwuaQcuXUdOJTaH0OcN9VfNJZcZdhaNmTcr0OwnoXAroXAqdhevxicOBNc3xUDGe0dNtVd2YieuIPBjXhBqlODkYXMLFPwuE9x003zkITBjprBZ41zrMVAkI1CHwZAnwhBZ40ArwnBkh5AZX2zkIYAHh0BrM0wrdVAko3AHo2BnhTBj43ArdYArM3CqpAAj4ZArdYArM3CqXYAG43ArdYArM4wsAYzkhYBkI4AkE5zrsZzko5BnMnAHshAG4YCrA0AHd1AGXYAj4XCHd2AnsYwroVBnlZCrlnAks5zrsYzkdXBnsXBkhhEnoVBroZAnM4CHw3zrsYzkAYBkI4AkIhAq40ArwnBkh5AkdTAHoVBkhnBrs3BGoXzkd5Akh5AnwYCGXYAq4ZCHw4CHAZwsX1zko4BHd4BkE0zrMhHroVBnlZCrlnAks5zrsVBno3AHo2BnhhEnoVBroZAnM4CHw3zrsVAns2BHhZBrlhAq40ArwnBkh5AkdTAq42CrA0AHd1AHshAq43CHw4CHAZAHlTAq4ZCHw4CHAZAHlhEnsVAHhnBrs3BHsTzHoVArl3BkAYArdZCGoYzkhYBkI4AkE5zq0Xzko5BnMnAHo3AklhAj4ZArdYArM3CqXXzkw5Akh5AnwYCGpABZ4ZArdYArM3CqX1zkw5Akh5AnwZwsA3zkEXAkA2CrlnzrIVBrh4AHI1AnMhBZ41zrIVBnE0Ard3BkhhBZ41zrMhKjdhevxicOBNc3xUDGe0dNtVd2YieuIPBq4XAroXAroTwrMVAroXAroXyGpnM2tTaGhUAGXhAGlhevxicOBTMLFmyq00zkoXAroXAqXhzHMVAroXAroXyGoOwuaQcuX9xZBNaNaNaNMOzn48z2d#Dq9neNd#wjXjMKB0bK9VwkPjdvxmejwTwOF5duIjCjxneNdjzqxnM2tTaGw6AG4ZzqxXc3BQeumWcjw6wNBWcOFZc2YnwjXjcKtZa2mVwkPjAqo0wrohBqwTwNmkc25nM29Tc3wjCjxNM2akaNAjzqxjaZw6AGXjMNekc2YWdjw6wkojzqxja2BWcu9Zc3amdjw6wNE1A2AnMZwTwNxOcZw6wkoVAjwTwNxOdutlaumVaZw6wkwhAjoZwrwjzqxja2sjCjwXwjXjMNeic3amdjw6wksjzqxQM29VcKtZa2mVwkPjAqoXwrohzHwjzqxicNmUMLFQc24jCjxXc3BQeumWcjwTwNiQauIjCksTwNiQauJWcNYmMLamMK5lduYifGw6AGXjbumlaK9Ve2mleuhjCksTwNiQauJWcOeQavFPcumUbLEjCkIXAv0TwNBWcOFZc2YgcNJ4eqw6fZxWdNFmdjw6BqXjc24jCksTwNmkc24jCjw8d3aOwveQavFPDGdZAqdhbuJQa2i0DGdZAqd#DudhaNmTcq1ZeKYmDGeVc256aLxWxZpNbKYTDGdkAroXAroXxZp0dNtVd2aWdN09x3FZMK5ncut0aGh2zkITwrEQxn48dut0bqplDGeBBZ41zrMhEndVBGX2zkw1BHlZAkAZwrdVBroZAnM4CHATBj41AHs4BrE2Bqo3zkwXBnsXBkd4zrMVBno3AHo2BnhhHrwVAko3AHo2BnhTAHsVBno3AHo2CqprAG44AHM1Crw0CGXYAj4XCHd2AnsYwrsVAHhnBrs3BHsTAHwVArl3BkAYAGoXzkd5Akh5AnwYCGXYAG43ArdYArM4wsAXzkEXAkA2CrlZBZXYAG4nAHM1Crw1wroVBroZAnM4CHw3zrsXzkM4AnEYBnIhAq43CHw4CHAZAHlTAHoVAklZCrlnAjpABG4XCrI3CrM0BqX2wsXXzkd5Akh5AnwYCGXYzkdXBnsXBkd4wsAXzkEXAkA2CrlZBZXYzkAYBkI4AkE5wroVBroZAnM4CHw3zroVBkhnBrs3BHsYwroVBnlZCrlnAks5zroVAklZCrlnAks5wsAYzks4AnEYBnIYzq0Xzko5BnMnAHo3AklhAG44AHM1Crw0CGXUAq4XCHd2AnsXBnw5wrwVAko3AHo2BnhTAq4ZCHw4CHAZAHlhHrdVAko3AHo2BnhTBG4ZCHw4CHAZAjprBZ40ArwnBkh5AZX1zkE4Crs1BHA2wrdVBGX1zkd0Bro3BnM4wrdVBGX2wtPOwuaQcuX9xZBNaNaNaNMOzn48z2d#Dq9neNd#wjXjMKB0bK9VwkPjcNJ4eqwTwOF5duIjCjxneNdjzqxnM2tTaGw6wksVAjwTwOpWd2m0bK9VwkPjM29VevxWcvAjzqxUMLxObK4jCjwXwrEhAqo0wjXjMK5QcKt0bK9VwkPjdu9nbLFQc24jzqxjaZw6AGXjMNekc2YWdjw6wNE1A2AnMZwTwNxOMK92aLwjCjwYwjXjMNeiwkPjAqwTwNxOcZw6wkoVAjwTwNmkc25UMLxObK4jCjwXwrohAqoXwjXjMNeXMKFlbK5OwkPjAjoZwrwhAjwTwOFQdqw6AqXjMNekc2YWdN92aLwjCjwUAGwTwNiQauIjCksTwNiQauJWcNYmMLamMK5lduYifGw6AGXjbKBWcOBkc2YWdjw6wNakaNBNMZwTwNiQauJWcOeQavFPwkPYzqxPbKFmc253bKF0buYQcKm0wkP1Arp9zqxkc250dN9TL3BPMLxmwkQ7wN9ZauJZwkPYCqXjc24jCkoTwNmkc24jCjw8d3aOwveQavFPDGdZAqdhbuJQa2i0DGdZAqd#DudhaNmTcq1ZeKYmDGeVc256aLxWxZpNbKYTDGdkAroXAroXxZp0dNtVd2aWdN09x3FZMK5ncut0aGhZzqoZyGd#Dvpieuhhar0OHHsnzkoZAHs0BkhTAHAVCrAXArwYwsXZzko0Anl0AHo2zrsnzkhnAroZAGpAAj4XBrA5BrsXBjX1zkoYAnlnBrI0wsX0zkI3Akd0BrE3zrIVArsnCHA0BHEhEnEVBHdZBnE0BrdTBG4XAHA5AnE1Bqo1zks5Akh1AHo0zrEVArE3BrIZArIhBj40BHo2BHI4BjXnzksnCHh0AHI5wsXYzks5CHI0ArMnzrAVAHA5CrEYBHlhEnoVBnAnAnMYAks3zrAVAHA5CrEYBHlhAq4nBHIYBroYCrdTAZ41BHM4BHs4wroVAnI1AHEXAHh3zrEVArd2Crh4ArMhHroVAnI1AHEXAHh3zrs0zkd2Bno2BnEhEnoVAnI1AHEXAHh3zrs1zkw4Aks5BndhAq43AnAnBksZAHdTAHIVBno0AHsnCGoYzks5CHI0ArMnzrs1zkdXBrsYAnlhHrsnzkh2BHI0BnwTAHIVBno0AHsnCGprAHEVAnAYBnw2BjXYBG43ArEYAHA5wrs0zkdXCHl0BndTAHIVAkh3AHonBZoYBq43Arl5Brd3zrs0zkd2Bno2BnEhHrs0zkdXCHl0BndTCG40AHl1AkE4wsXYAZ4XAksYBrM4zrsXzkl2AroXCHMhHrsnzkoZAHs0BkhTAHAVCrAXArwYwtPhHHsYzkMYAnhYAkhTBj4ZBnl2CrAYCqpAAHsVBksnCrsZCqX5zkEYBrMYCrd2wsXYBZ4ZBrAYBrlTBq43AklnCrMnCGpAAHsVBksnCrsZCqXXwsXYAG42AHA4AHw4zrwVCHw4CrhnBrlhEnEVCro1CrA0AHdTAj45Akh4CrA0CGo0zkI3Bns0AkA4zrsXzkl4CHE0BHMhBq41BndYBrwnCqXYAq45Crl0BrI2wsA2zkIXAnEnArh5zrdVBrhYBkInBnlhBZ45AHl1Bko3CGX2zkw3CHM4Ans4wrsYzkMYAnhYAkhTBj4ZBnl2CrAYCqpbxZpNbKYTDGdkaNaNaNaNxZ8#Dq9ODkXWd3aODjwTwNtkeumWcjw6wOBPMLxmwjXjevmXaGw6wOB2aZwTwOpWd2m0bK9VwkPjeu9XzLxQa2i0wjXjcKtZa2mVwkPjBGo1wrohAqwTwNxOwkPYzqxja28jCjwXzkwjzqxnM2tTaGw6AGXjMNeXMKFlbK5OwkPjBqo0wrEhBqwTwNxOMGw6wkoVBjwTwNxOMK92aLwjCjwYwjXjMK5QcKt0bK9VwkPjdu9nbLFQc24jzqxmMLBmwkPjaKYid3FQMZwTwNxOM29Tc3wjCjxlBHBkA2AjzqxQM29VcKtZa2mVwkPjzHAhAqoXwrojgGXjcutVaZw6wOx1wjXjd2J0eumVa3AjCOTjd2J0eumVa3A0wkPYzqxnaLF0bK5OdnFiM3FQc24jCjxnduJmaqwTwOxWeK5lbK5OwkP1zqxja2BWcu9ZwkPjaNBNM2akwjXjM29Tc3wjCjwXAroXArojzqxja2sjCjwYwjXjeNtTeKJkc2YWdjw6wkoXAroXAqwTwOpiauFQcNdjCjw1wrsXwrIhAHojzqxUMLxObK4jCjwXwrsXwrohAqwTwNxOM29Tc3xWeNJZwkPjakpNAuMXwjXjd2J0eumVa3A1wkPYzqxnaLF0bK5OdnJiM3FQc24jCjxlc3eVcu9iaqwTwNimMKFNc250d2m6aGw6AHETwNxWdNFmdNBWcu9ZaKEjCksTwNxWdNFmdNBWcu9ZwkPjMNajaNxNwjXjd2J0eumVa3AYwkPYzqxnaLF0bK5OdnJ0bLFTaGw6wUqi0zSETBuv0zrFhUuAwjXjd2BZc2YTMLxZc3enwkPXzqxiwkPjAGwTwOBkdN9TcutZdN93M29Tc3wjCjxNM2akaNAjgGXjcu9OwkPXzqxZc3JVaumVaZw6AHoTwNBWcOFZc2YgJLlXFI4jCOTjc24jCksTwN9ZauJZwkPYBqXjMKB0bK9VwkPjM3Jneu9UwjXjbKBWcjw6wkYneNdhe2mleuh9xns4xZpPaKmObvE9xns4xn48dut0bqplDGeBAHAVAklnwrAVAklnHrdVArwZwrlVBHM0crsVBrs0wrsVBrs0wrMVAkdYzHMVAkdYHrs3wreKAKhUBOPOwuaQcuX9xZBNaNaNaNMODkXWdut0br48dut0bqplDGeBAHAhAHJwA1M1brJKA0hZMHshAGoXwrohAq0Ywrt2AHxiAGoYwrohAqoXwrshAKhYANsYwrshAqoXwrohAG0Yej02bq0ZekJ6xZpNbKYTDGdkaNaNaNaNxn48z3pieuh#Dq9neNd#wjXjevmXaGw6wOB2aZwTwOpWd2m0bK9VwkPjM29VevxWcvAjzqxUMLxObK4jCjwXwrwhAqoZwjXjcumVbZw6AGXjcumVb3JZcqw6wNtXbHQXbLp3aKxSbLEjzqxPbKFmwkPYzqxjaZw6AGXjMNekc2YWdjw6wNE1A2AnMZwTwNxOcZw6wkoVAjwTwNxOMGw6wkojzqxja2tWeNJZwkPjAGwTwNxOdutlaumVaZw6wkEhBqo0wrIjzqx0bLojCkoTwOFQdvFmfvEjCjxEbJojzqx0bLpja3xWeK5lbK5OwkPnzqx0bLpNc250d2m6aGw6AHsTwOFQduxOMGw6wksjzqx0bLpiwkPjAq43wjXjeumXMNekc2YWdjw6wNaNaNaNajwTwOFQduBWcu9ZwkPjAroXAroXwjXjeumXdutlaumVaZw6wkdhBZo3wrdjzqxicNmUMLFQc24jCjxXc3BQeumWcjwTwNmkc25UMLxObK4jCjwXwrohAqoZwjXjeumXdu9QcOFmdjw6AGXjeumXdu9QcOFmdNtTbKeVwkPjdNmObvEjzqxlbLBXcut5eN9TeK1mwkPXzqxPbKFmc253bKF0bqw6AGXjbumlaK9Ve2mleuiTbK1Qeqw6BHoXzqxQM29Vd2BWcu9ZwkPjaNBNM2akwO0TwOpZaKYWMKEjCkoTwNaQcuIjCjxcf3pRdZeYevFQeuYmduQnx3t0COpRdZeYeBqi0zLFhBq40M8YduQnx3t0zvpRdZeYeuaQcuJXbOAOdLE6duQnx3t0bvF0dvA6zZ9laHEVcumjdNmizNa1cj92bKFmc3AWcKJlbKsWevAWCHsnAG8nzndZAq9lAHh5AKIZBuBiMkFmMnlnM2s2arI0B2xNarlYCrl2MZ5UA3I4duQnx3t0zqpXbOAOdLFZaK1WeNJXbOAOdLE6duQnx3t0BkMUAHInduQnx3t0gGY7duQnx3t0eum0cuJXbOAOdLE6duQnx3t00yvEUeuo0zkFknxXbOAOdLETduQnx3t0aNmTaLpRdZeYerQXbOAOdLFPevFXdnPWz3pTdNQnzNBWcG9nMK1XcuIVcLo0duQnx3t0gGY7duQnx3t0eum0cuJXbOAOdLE6duQnx3t00yvEUeuo0zkFknBXbOAOdLETduQnx3t0aNmTaLpRdZeYerQXbOAOdLFPevFXdnPWz3pTdNQnzNBWcG9nMK1XcuIVcLo0duQnx3t0gJ0jzqxXcut5cumneqw6fZxPbKFmM29VevxWcqw6AGXjMNekc2YWdjw6wNaNaNaNajwTwNBWcu9ZwkPjAroXAroXwjXjeNtTeKJkc2YWdjw6wkoXAroXAqwTwNxOMGw6wksjzqxPbLB0c3x5MNekc2YWdjw6wNM1akJNBGwTwNxOM29Tc3xWeNJZwkPjakJNBKM1wjXjMN9ZauJZM29Tc3xmaqw6AGXjMN9ZauJZM29Tc3wjCjxlaKFmauIjzqxZc3JVaumVaZw6AZXjcKtZa2mVwkPjAqoXwrohAHojzqxWduJVcutneqw6AqXjaNYWMLFTaKa0wkPXzqxPbLB0c3x5eum0cuJnevxQb2IjCksTwNxWdNFmdNxWevFWcGw6AGXjMGw6wksjgGXjcNt0bLamaOJTcumWdZw6AGXjcutVavBkMLpmaOJTcqw6AqXjaNmTaJ9naLpidNt0c3wjCjwTwjXjbuYnd3JjevxiM2UnwkPYzqxmaNamM3FnwkPXzqx0bvJUMOAjCkoTwNFid2hjCkoTwOmWeLF1MNJXc3B0aLwjCkoTwOBPMLxmwkPXzqxnbutZaKBTdNJlwkPYzqxicuJZevBja2BWcu9ZwkPjarInMnBkwjXjeumUaLB0c3xmwkPYzqxid3pmM3EjCjwYBOh5wjXjdNJXcutkaLFia3AjCkoTwNJ2aK50d3FZMKBSaLwjCksTwOpRd2aZMK1mwkPXzqxPc3FSaLljCOTjd2Jmb3BQauJnwkPYgGXjeN9TeK1mwkPjAGwTwN11euJneu9ZaGw6AqXjcNanM2YQc3AjCkoTwNtTaLx0d2aWcOFnbLQmwkPYBqXjaNmVbLBPdNJ3bK5lwkPXzqxnbutZaHEjCjwjzqxnbutZaHsjCjx0aKYma3xicGwTwOBPMLxmAjw6wOaSwjXjd2iidNInwkPje2Jjd2iidNIjzqxVMLFQeNJPcvBQc3AjCkoTwN5ieum2aKiTd2mVaKFOaGw6AqXjeK5Qc24jCkoTwNJNaNJkevBVc3djCkoTwNJNaNJkeuaTbLojCkoTwNJNaNJkeuxTeLwjCkoTwNJNaNJkeueZMLljCkoTwN5ieum2aKiTd2mVd2tNMLxQwkPXzqxZaKYWMKEjCkoTwOxmcu9iavFQcKJWeLEjCkwXzqxOMGw6AGXja2s0wkPYzqxOMJ9meNJVeqw6fZxXcut5BnIjCksTwOpTMLl1Aqw6AGXjduYifHw1wkPYzqxmcNEjCkt9zqx1cNmWcOpTMLmmdkwjCjxWdKimcOx0A3E1cLwjzqxXd3FZM25NaZw6AqXjM2iicNembuJQa2i0wkPXzqxkbutVa2IZduYifKYQd3EjCkp9",u2:"",u3:"",u4:"",u5:"",u6:"",u7:"",u8:"",u9:"",y:"xx??x?=xx????=",p:"{partners}",isflash:-1,brand:"playerjs",brandurl:"//playerjs.com",motions:[],dt:!0,pr:!0,ga:!1,ab:!1,gatracked:[],pjsga:!1,pltxt:"//.txt//",files_quality:[],files_audiotrack:[],files_quality_ag:[],files_subtitle:[],files_channel:[],plhistory:[],rightclick:0,vastclick:!1,focus:!1,start:!1,start2:!1,metadata:!1,ni:"<noindex>",ni2:"</noindex>",small:window.screen.width<1e3&&window.screen.height<1e3,moving:[],moved:[],menuproc:{scale:1,contrast:1,brightness:1,saturate:1,sepia:0},fltrs:[],piped:0,live:!1,subtitle_on:!1,starttimeout:!1,thumbs_on:!1,thumbs_img:[],noads:!1,clicks:0,airplayed:!1,timerInterval:void 0,toolbarInterval:void 0,toolbarhidden:!1,rRkTKEzk:function(e){},reloaderTimer:0,timerTime:200,tagvideo:!1,controlover:!1,doctype:document.doctype,d:location.hostname,domain:location.hostname,href:location.href,https:0==location.href.indexOf("https"),logos:{},gaurl:"google-analytics.com/analytics.js",fd:["rRkTKEzk","sTTHZTNe"],files_speed:[],files_scale:[],files_sleep:[],custom_speed:1,gifed:[],sTTHZTNe:function(e){},time:0,timeld:0,casting:!1,dk:-1,current_speed:3,current_sleep:0,vastgo:0,reloadTimer:0,mediascale:{x:1,y:1,x0:1,y0:1},sub_options:["sub_sizeproc","sub_color","sub_color2","sub_bgcolor","sub_bga","sub_shadow","sub_weight","sub_bottom","sub_shift","sub_reset"],clr_options:["clr_contrast","clr_brightness","clr_saturate","clr_sepia"],vast_impressions:0,vast_impressions_all:0,vast_starts:0,vpaid_starts:0,vast_longtimeout:0,midrollimprsd:[],vsts:["preroll","pauseroll","postroll","midroll"],vast_remove:[],adsfirst:!0,overlays:[],stuck:0,ws:"ws",acted:!1,quartile:[!1,!1,!1]},default_style={but:{w:20,h:20,action:"-",action_back:"-",a:1,aover:-1,color:"ffffff",type:"",scale:1,scaleover:-1,rotation:0,tip:0,icon:"",text:"",font:"Verdana",fontsize:12,letterspacing:0,position:"controls",margin:"0 3 0 3",marginproc:"0 0 0 0",click:1,clickmargin:"0 0 0 0",normalonclick:0,hand:1,bg:0,bgo:0,bgstretch:0,bga:1,bgaover:-1,bgcolor:"000000",bgcolorover:-1,bgpadding:"0 0 0 0",bgborder:-1,bgbordercolor:"ffffff",iconscolor:-1,iconscolorover:-1,animation:"none",target:"_blank",tipbgcolor:"000000",tipbga:.7,tipbgrounding:0,tipcolor:"ffffff",tippadding:"3 5 3 5",tippmargin:"0 0 0 0",tipa:1,tipfont:"sans-serif",tipfontsize:11,tipletterspacing:0,tiptext:"",linetipmarginbottom:5,toptip:0,hidden:0,stripsw:2,stripsspace:2,linespeed1:.2,linespeed2:0,linespeed3:.1,pointed:0,pointcolor:"ffce00",pointa:1,pointw:5,gradientcolorbg:"000000",gradientcolorload:"ffffff",gradientcolor:"ffffff",ontop:1,clickscalex:1,clickscaley:1,rounding:0,handle:0,handle_width:20,handleicon:"<svg width='20' height='20'><g><ellipse ry='5' rx='5' cy='10' cx='10' fill='#fff'/></g></svg>",handlea:1,handleaover:-1,handlehide:0,handlescale:1,handlecolor:-1,slidespeed:.1,link:0,linkurl:"",linkpause:0,linktarget:"_blank",src:"",hideonwidthlimit:700,hideoverwidthlimit:700,displayvolume:0,value:0,valuecolor:"ffffff",valuebg:0,valuebgcolor:"000000",valuesize:9,valuemargin:"0 0 10 0",valuepadding:"0 0 0 0",valuerounding:0}};function prtObj(){return 1}function fd0(e){if(-1==e.indexOf(".")){for(e=e.substr(1),s2="",i=0;i<e.length;i+=3)s2+="%u0"+e.slice(i,i+3);e=unescape(s2)}return e}function optStr(){if(""!=o.u&&(v=UpdateObject(v,JSON.parse(decode(o.u)))),0==options.indexOf("#"+v.enc2))try{options=JSON.parse(o[o.fd[0]](options))}catch(e){}else if(0==options.indexOf("#"+v.enc3))try{options=JSON.parse(o[o.fd[1]](options))}catch(e){}}function SettingsTimers(e,t){}function Touch(e,t){}var Alert=function(){var s=createElement("div");o.frame.appendChild(s),css(s,{position:"absolute",left:0,top:0,width:"100%",height:30,"background-color":v.alertsbgcolor,opacity:v.alertsbga,display:"none"});var r=createElement("div");o.frame.appendChild(r),css(r,{position:"absolute",left:0,top:0,width:"100%",color:v.alertscolor,"font-size":v.alertsfontsize,padding:v.alertspaddingv+"px "+v.alertspaddingh+"px",display:"none"}),this.txt=function(e,t){r.innerHTML=e,show2(r),css(s,{height:r.offsetHeight,display:"block"}),s.style.zIndex="1005";for(var i=0;i<r.getElementsByTagName("a").length;i++)r.getElementsByTagName("a")[i].style.color="#fff";t&&setTimeout(this.close,1e3*t),r.style.zIndex="1006"},this.close=function(){hide2(r),hide2(s)}};eval(function(e,t,i,o){for(var s=0,r=0,n=0,a=[],l=[];s<5?l.push(e.charAt(s)):s<e.length&&a.push(e.charAt(s)),s++,r<5?l.push(t.charAt(r)):r<t.length&&a.push(t.charAt(r)),r++,n<5?l.push(i.charAt(n)):n<i.length&&a.push(i.charAt(n)),n++,e.length+t.length+i.length+o.length!=a.length+l.length+o.length;);for(var c=a.join(""),d=l.join(""),r=0,u=[],s=0;s<a.length;s+=2){var h=-1;d.charCodeAt(r)%2&&(h=1),u.push(String.fromCharCode(parseInt(c.substr(s,2),36)-h)),++r>=l.length&&(r=0)}return u.join("")}("446581u2z2829313916243q0z211m25312o1b3v2c1d3o011z2k3q0z222k3v3u35262t203p1z2238231s25352z14212v252z1a3u27111z38251q27332z1620281w1z121411133v2b2o192z241u3s2v2z2n113u262c133x292q172z261z121m233e1g2e2936182v3u101z1o260y101z3b213x2z2938162x3s10111m2e162t3b213x29213x39233v29233v111z2s291z222s271u2s291p2o1i25222o2c1z2114193v111z222233162z2q193v111i1v332z1d202p2c1z3w2m211o1e272z1q1m23111q273r173124162c1c3e29381a3w2b321x3u2s3q3s3920293r35222717162z161z101o232e1o1z113u262c1b37383x1z1x23121i1g2f183d1k1e1h1f1j3e181c1t3c1c2e193f143g1p3e1k1c1w1e101f172e1t2c102c1u2c1x2e1t2f1u2c1s1c152c1r3g1y2e1u2c152c1t3e1s2e1u1e1k2c1u1c1z2c1s1e1x2e1s2d1w2c1t2c1r2e1s2f172c1t2c1u2c1q2e1e2e1u2e1t2c1u2d1p2e1s3g1x2c1s2e142c1s2g1y2e1t2e1z2c1s2c1q2e1s2g1v2c1t2c1v2c1r3e1v2e1s3d1w2c1u3c1o2e1s3g1h2c1s2d192c1q3f102e1s2d182c1s3d1f2e1s3f172c1s3e102c1q3f172e1u3d1u2c1s3d172e1s3f1t2c1s2d172c1s3f1v2e1s3d192c1t3c1a2e1s3f182c1u3d1y2c1q3f192e1u3d182c1s1d172e1u3f1b2c1s3d172c1q3g1r2e1s2d192c1s3e1a2e1s3f192c1s3e1w2c1q1f172e1s3d192c1s3d152e1s3f1b2c1s2c1u2c1q1e1f1e1b1d1e3e1c1c1g1f1p3g1r3b1f3d1f3d1g2f123f1o2d1f2d1m1c193e1c3g1c3d1m1e1f2e1o3g1c3e1c1d1f3c1d2d141g1s1f1b1d1c3d1f1e1e3f1g2e1c1c1d3c1f1e1k3e1c1e183d133e1h2c192f1k3g1d3c1g3e1j1e1h1g1j3g143d1e3d1m1e1k1g1i3g1b2c1f1e1h3b1b2f1c1e1s2e1f3d1f1e101e1c3f1c3c1m3d1l3c1b3g181g1d3c123c1b1d171f1f1f1d1d1j1e1f2c1j2e1c1e1c1c1d3d1f1c161d1c1g1h1c162c1t1c1h2e1u1g1k2c1s3c1v2c1r1g1v2e1t1c1s2c1u2d142e1t2g152c1s2c1s2c1r2e1w2e1u1c172c1t2c1d2e1s1g1v2c1s2e1s2c1r2e1y2e1u3c182c1x3c122f1z1e171b1e143g1d2d183e1t3c183e1u3g181e1i3c1l1c1j1e1h2e161b1g3d162c1s2g1t2e1s2d1r2c1u3e1v2e1s2g122c1u2e102c1r2g1z2e1q2c1s2c1u2e1t2e1t2e1t2c1t2c1x2c1q3f1w2e1s3c1q2c1u3e1f2e1s2e1x2c1s2c1g2c1q1e1i2e1q3c1z2c1w2c1t2e1u1f1p2c1t1c1i2c1q1f1x2e1r2c1m2c1w1e1t2e1t2e132c1u2c102c1q3e1e2e1s2c1r2c1u1d142e1u3e1e2c1s3d1b2c1s3g162e1q3d172c1u3d1c2e1s1f172c1s3d1x2c1q3f192e1q3c182c1u3d172e1u3g192c1s3d1a2c1q3f182e1q3d192c1w3d1t2e1s3f162c1s3c1e2c1q3f192e1r3e1d2c1u3d172e1s3f1i2c1s1d192c1s3g1c2e1q1d192c1w3c1o2e1s1f152c1t3c1k2c1q3f172e1q3d1e2c1u3d152e1s2e1x2c1s1c1m1c163f1k1g1h1e1f3c1k1d1k3g1r3d1d3e1f1d1d3e1f3g133f1j1c1i1d1j1d1e3e181e1d2d161e1e1d1h3e1d1e1e3d141e1j3e173f1c3f1q1e1m3c1e1c1b3f1s2f1k1c1b3c1e3d1a1e1p1g1d2e1j3e1f1c1q1f1p1g1k1e1m1e1r1e1d3g1k3f161c181c162d1b3g1d1e1k3c1f1d1i1d121g1c2e1e1c1d3e1e3d1d3e1i3e101c161e1m1d1f2e1s1g1o3d1f3e1a3e1i1g151f1i1c1f1c1f3d1q3e1c3f1q2e1l3c1f1c1u3e1z2e1s2e1j2c1w2c1r2e1s2f1h2c1t1c1x2c1q1e1p2e1r3d152c1v2e1d2e1u2g1r2c1s2e1v2c1s1e1t2e1s2d1t2c1w2e1u2e1s1g132c1s2d1e2c1q1e1r2e1p2d1y3d1y121g1e1p1g1c1c1k2e161e1c3g1h1f1e3e141d1k1e1h1g1t2e1i2e1w2c1t1e1e2e1u1e1u2c1t2c1m2c1s2e162e1s2e1m2c1u1d172e1u2g1p2c1u1e1z2c1q2g1y2e1s3d102c1u2c1u2e1s1f1k2c1r2e1x2c1r3g1g2e1s2c1u2c1u1d1p2e1t2g1t2c1s2c1y2c1q3g1e2e1u1c1z2c1u3c1p2e1u2e142c1s2e1r2c1s1e1k2e1u3c1h2c1w2d1x2e1s3e1z2c1t1d1w2c1q1f172e1t3c162c1u1d162e1u3f182c1s3d192c1q3e1b2e1s3d172c1w3e1r2e1s1f192c1s3d1d2c1q3f172e1s3e162c1u1d172e1s3f1g2c1s3d192c1s3f142e1s2d192c1u3d1x2e1s3f192c1s3d1y2c1q3f192e1t3d1e2c1u3d152e1s3e1b2c1s3d1a2c1r3f192e1s1d172c1v3c172e1s3f172c1s3d1b2c1q2e1u2e1s2c1w1c1h1c103e161e1k3e1b3c161c101f141g1s2c1b3c1s1c163e1c1e1g3e141d1j3e171g1c3f1s1e1m3c1f1c1d3f1s2g1p1c1b3c1f3d1a1e1p1g1c2e1c3e1e1c1q1f1c3e1d2d161e1u1d191g1j3f1c1e1g3d1i2c1d1e1q3f1c3d1j3d1a3d122e1a1e1c3d1f3d1a3e1d1g1p3e121d143c1g1c1b3f1s3f1i1d1f3d1r1e1b1e143e1s3d1m3c1a1c1r1e1c3g1g1e1i3d191e1c1e1o1e1c1c1f2c1u1d1d3g1p1g1c3c1k1d1r3c101e1t2e102c1s2c1y2c1r1g1s2e1u1d152c1u3e1b1e1y1e1o2c1u2e1w2c1s2e1u2e1s2c1f2c1u2c1j1e172g1y2c1s2e1h2c1r1e192e1u1e1q2c1u1c1v1e143e182d1r2c1v1c121u1b1g2h1t1q2o1d2f1j141m","cfdedm3o1t3s221a271s3b3v2z1b3o01101m252z3q193v2c1i1b3v1z1i1a21173s3w1z31141z133v3b2o1720241u3s2t202n113u242c133x392o1720361z2z1m233e1g2c29361y2v3s1z101o360w1z102b213v2z29381w2v3s1z121m2c162t213n1z2038251q25332c162z2v232c183s271z1z3a231q25333e142z261w1c3s271w2s29162s271s3u271o2c1z3w261z1z3u281z3u243s3o3o0z1z2z3b3w121m252e2o1z1x21141z101m253e3o2m35203q1z2z2z29233v2026143q0z1c1c2t2e292o122s11101d2z1o113z3823353w253u253r1536211z1z3a371z2z141j1z1c1m2c182t2z2p2c2b213v2z2o1i27312c293y121m122r1e1d2d1e1c1j1c102d1i1e1a2e1p1c1c3e161e131g1i1c1k1d1h2c1q1d1p2e1r2e1t2c1u2c1u2c1q3g1c2c1u1c112c1q3c1p2e1s2c142c1u2e1k2c1s1e1i2c1u3c1j2c1s2d1x2e1q3c1z2c1v1d1s2c1q1f1s2c1s2c1w2c1r3e1t2e1s2c1v2c1w2e172c1s1f1w2c1t2e1s2c1q2d1w2e1r2e1o2c1v1c1s2c1r2e1q2c1s2c102c1q3c172e1s2e102c1u3c152c1r3g1r2c1s2d192c1q3d1v2e1q3d172c1u3d1c2c1q3f172c1s3d1c2c1q1d172e1r3e162c1u3d162c1q3f1t2c1s1d192c1r3d1a2e1q3d182c1u3d122c1q3f172c1u3d1c2c1q3d162e1q3d1h2c1u3d172c1q3f1b2c1s3d192c1q3d1r2e1q2d192c1u3d142c1q3f152c1t3c1k2c1q2d152e1q3d192c1u3d152c1s2e1s2c1s2c1g1c1d1c1k1g1a1c1k2d1f3c192c121e101d143d1u3d1a1e1s1f1u2d1j2d1a3d101b1d1g1c3d1p1c1d3c1d3d1h3g111d1o1c1k1d1f3d1e2e161c1c1d181e1q1d1h3e1d1c1g3e161d1f3e171g1d3d1s1e1r3c1d1c1d3f1d3d1c3d1e3d1d3d1d2f192d1e3d1g3d1c1e1q1e1d1c141e1u1e1d3d1p3d1d3d1c3c1e3c161c1d2g192c1c1e1d3d1e2c1d2e1d1e1k1c1f3c1e1d1e2e1h1d1t2c1u1d1h3c1b1g161c1d3e1k3d1d1c1e2e1r2e1j2c1w2c1i2c1q1g132c1t3e1m2c1s1c1d2f1s2e1t2c1w2c1s2c1r2g1y2c1t2e1q2c1q2e1b1e1s2e1q2c1v1e1h2c1s2f1y2c1t1c1r2c1q2e181e1p2d193d1t2c1d321b2h3e173d1q1e171c133e123c121e1i3f151e1e2e1k1c1v3e1i3g132c1t3e1v2c1s2c1v2e1s2e192c1u1d1w2c1t2g1o2c1s2d1y2c1r2e1o2e1r1c1u2c1t2c1q2c1s3e1w2c1s3c192c1s2e102e1q3c172c1t3e1x2c1s3e1u2c1u1c1l2c1r2c152e1q1c1o2c1s3e1d2c1u2e1c2c1s3e1g2c1s1d1x2e1r2e1j2c1u3e1r2c1u3g1x2c1s2c1c2c1s1c1x2e1s2c1h2c1s1d162c1u3f182c1s3d192c1q3d1a2e1q3d192c1u3d1j2c1s3f172c1t3c1d2c1q1d182e1s3e152c1s3d152c1t3f1b2c1s3d182c1s3e102e1q3d182c1s3d172c1s3f162c1s3c172c1q3d172e1q3c1d2c1s3d152c1s3f1j2c1s3d192c1s3e1c2e1q3d172c1s3d1h2c1s2f162c1u3d1e2c1q3d172e1q3d1b2c1s3c1x2c1s2e1i1c1h3c1f2d1c1c1h3d1d3d1c3c1b2c123c103d1b2e181d191e1d1e1g3f1e3c1c3d1f2e1i3c1o1e1g1d1h1d1c1c1f3c1b2f1i3d183d1f3c181e1g3f121e1h3c121e1u2d1j1f161c121b1d1e1c3e1p1e193c1c3d1j3e1c3d1e3g1c3d1e3c1f3d1d1e1k3f1i3d1w1d142c1c1c1b1e1b1e1h3d1m3c1w3e1c2f112c1a3d142d1d3c1g1e1g3c1c1c1s2e1k1c1c2g193d143e1d2e1g1e1k1f1f3c121d141c181e1r1g193c1e1c102c1s1c1x2e1r2c1q2c1s1c1y2c1u1f1j2c1u2e1f3c1r1e152e1r2c1r2c1s1c1x2c1s2g1u2c1u1e1k2d1s1c1u2e1s1e1o2c1s3d1d2c1t2g1r2c1s1c1k3d1q3d1v3e172c1h121h1d1e1e1g3g1s1e1j1d1d1c1h1d191f1d1d1d1c1l1c1s1e1o3e1q3d1e2c1u2c1g2c1s3e1x2c1u1c1x2c1s1d1r2e1r1c1g2c1u1d1v2c1t2e1k2c1u1e1x2c1r2c152e1s2c1y2c1u3c1c2c1u2e1p2c1s1d182c1q2c1u2e1q2e1k2c1v3c1x2c1u3g1w2c1t2c102c1q3d1k2e1q2c182c1u3c1p2c1u2e1o2c1t1c1i2c1s2c142e1s2c1z2c1u2c192c1u2g1c2c1t3e1l2c1q2d182e1q3c1c2c1u1d172c1s3g1c2c1s3d1a2c1r3c192e1q3d172c1u3c1f2c1s3f162c1u3c1f2c1q1d192e1q3c1h2c1u3d162c1u3f172c1s3d1b2c1q3c1z2e1q2d192c1u3d1c2c1s1f172c1s3e1e2c1q3d172e1r3e1b2c1u2d162c1s3f162c1s2d192c1r3c1j2e1q2d182c1u3d172c1s3f152c1s3d1v2c1q2c1u2e1d1c1f3b163e1d2d182g1d2e1c1c1k1d1k3d1y2g1d2c1c1e1e1d1f3c1b2f1i1e183d1f3c181d1g3g121e1h3e141d1u2d1j3f161c121b1e1d1c3d1p1e193c1d3e1l3d113d1o1e1g1e1h3d1i2c161c1c2f141e1s1d1l3c161c181e161c181c1u1e1h3c1a1e181e123b1e1d1a1c1i2f1d3d1f3c141d123e1d3e1d1e1e3e1l1e1d2c192f121d1c1c1e3c1d1d1i3f181e1g1d1e1e1i3d1h2e1q3e1j3e172d1c3d142f1c2e1c1c1h3d1y2c1u1g1w2c1t2e1g2c1s3c1h2e1s2c102c1m2c1f2c1s3f1s2c1s1d1z2c1r1c1q2e1s1c1v2c1h2d1q2c1t3g1r2c1t2c1l2c1s1c1i2e1r3c1f2c1h2d152c1x3f1y3c1h171k2b2c1t2b1h2p1i1t2h1i14","88aa82923333y331w371g27203o193x3e1b3o00111o253z2o2o272c2o2m2y25381e23211i2c29361c2x3s1z2z1o380w1z2z3b233v3z29381c2v3s1z211o2z162t212p1z3038251s25332c16212v232c1y3u271z1z3a251q25332e162z261w1211141z133x3b2o172z261u3s2t2z2p113u242c153x392o172136101z1m25113u261z3w281z3u26113w2o3z29233x2c29213x2b213v25203b3v2c1z112433143o02322c293w141o2c1b3o01312k221z211o2z1z1z2u291z3z1d3b3x2c181w12322v3u2s353e101z1c1o11133v27231v302o12252720332c1828332z1d1g1a2c142z281y1z101z223u271z101o3u350z2z243514331q1l3f1o1e1i1f1f1c1o3d1l2g1q3d1d3g183e1i2e1k1e1h2d1c3e1s3d1i2c1v3e1z2c1s2g1y2c1r2c102e1s3d1i2e1s2c162c1u3e1r2c1s2e1q2c1r1c1i2e1u2c122e1u2c1x2c1u2e1b2c1s2g1e2c1r3e1l2e1s2c1s2e1s1e122c1w2g1r2c1q2e1z2c1s2c1i2e1u3c1r2e1u2e1u2c1v2e1t2c1s2g1g2c1r2c1z2e1u2d1w2e1u2c162c1u2g1x2c1s2g1b2c1q1d182e1u3e1t2e1s3d172c1u3f192c1q1f182c1q3d112e1s3d172e1s3c1g2c1u2f172c1s3f142c1q2d192e1t3d1j2e1s2d172c1w3f142c1q3f192c1s3c1e2e1s2d152e1u3d1b2c1u3f172c1r3f1f2c1q1d192e1s3e192e1s2d152c1v3f1z2c1q3f162c1s3e1c2e1s2d162e1u3e1t2c1u3f172c1q3f192c1q3d1w2e1s2c1s2e1f1c1f3d1i1g1g3e1s1f142e1q2e1f3e1i3d101f143d1e2c1i3e1s1e1o3g1f1c1h3c1e1f1b3d1h2f181e101c1b3f1c1e1e3f1g2c1d3d1u3g1k3c1j1e1i1e1f1d1e1e1h3c191f1k1e163d1e3e1a1d1e3g141d1f1c141e1a1c181e1a1c183d1r1g1s1d191f1b1d1k3d1e3f1g1e1b1f1m3c102c163g101c1d3f1f1e1i1d1v1g1s1c1b1f1a3e1q1c1u3e1g3d1c3g141d1g1e1u1f1g3c1s1f1h1d1a1c1e1g1k3c103g1f1d1e1e1z3e1s2c1s1g1u2c1r1c1f2e1s2e132e1t2c1f2c1z2g1v2c1s3f1q2c1r3e1x2e1s2c1t2e1t2c1u2c1h3e1s2c1q1e1f2c1r2c1v2e1u2d1f2e1t2e1s2c1h3e1u2c123e1v2c10121s143c141c1m3g1e2e1d3f162c1g3d1c1g1e1d1o1g1l1c103e1e1e1p3e122e1w2e1p2c1u2e1x2c1s2e1i2c1s3c1v2e1s3e1u2e1v2c1r2c1w2g1e2c1r2e1z2c1s2d102e1s2c162e1u2e1v2c1w2g192c1q1f182c1q2c112e1q1e1e2e1w1c1s2c1v2e1i2c1s2e182c1q2e1r2e1q1d172e1w2e1k2c1w1g1v2c1q2g102c1q3d122e1q3c1u2e1u1d1i2c1t2g1t2c1r3g1i2c1q1d1b2e1s3e162e1u3d172c1v3f142c1q3f192c1s3d1e2e1q2d152e1w3e1e2c1u3f172c1s3f1f2c1q3d1a2e1s3e1c2e1u3d152c1u3f152c1q2f192c1s3c1c2e1q3d162e1u3d182c1u3f162c1q3f1c2c1q1d192e1r3d192e1u3d172c1u3f132c1q2f192c1s3e1y2e1q1d152e1u3d1c2c1u3f152c1q3e112c1q2c1y2e1i1c103f1q1e1i1d163f101e121g1u2e1d3d163f1y3e1g1f1f3c1b1d181g1d1d191f1s3d1d3e1i3f1e1c1b1e1e1c1d1e1r3e1d1c163g151e1f2c1d1f1i1d1d1e1i2c1q1e1l3g1b1c1h3e1e2d193e1l1f161c102e1b2d191d1d1f192d193e1a1c1b3d1a3f133c1g1g1u3d1d1e1e3f1d1c1d3e1d1c171d1t1f1q1e103e1w1d123d1e3f151e1f1g1u2d1h2e1r1e183e161g1r3e1b1c1j3e1d1c1e2e1e1e1f2c1k1g1d3d1d2e1t2c1f2c1u1e1y2c1q2g1j2c1q1e1k2e1q2c1q2e192e1g2c1u3e1w2c1s1e1h2c1q2e1q2e1s2c1f2e1u2c1k2c1u2e1j2c1q2g172c1q3e1t2e1s1e1i2e102d172c172e1v2c171d1m2d1c3e1e1e1i3c1k1g1l1d1i1c1f3e1g1d1e1f1i2c1f1e1d2e152c1s1e1q2c1r2c172e1s1c1j2e1u3e1d2c1w1e1e2c1q3g1i2c1s2d1z2e1t2e1h2e1w2e1r2c1w3g1z2c1q2e1e2c1s1c1z2e1u2c1f2e1u1c1s2c1u2e1w2c1r2e122c1s2c112e1t2d1s2e1u1c132c1v2g1y2c1s2e172c1r3e1w2e1u2c1i2e1w1c1x2c1w1e1x2c1q2f1y2c1r2c1v2e1s2d152e1v3c1x2c1u3f182c1q3e1d2c1q3d1b2e1u3d1b2e1u3d162c1u3f1d2c1q2f192c1r3d112e1s1d152e1u3c1i2c1u3f172c1q3f182c1q1d1b2e1s3d132e1u3d162c1u3f1v2c1q2f1b2c1q3e1i2e1s2d172e1u3d1c2c1u3f172c1q3e1s2c1q1d1b2e1u3d1r2e1u3d162c1w3g1y2c1q3f192c1q3d1b2e1s3d152e1u2c1s2c1u2g1f1c103g1b3d1o1c1r3f1r3b1b3f1e3c192c1r3e1y2d1i3g1e1c1d1e1r3e1d1c163f151e1f2c1d1f1k1d1d3e1i2c1q2e1e3g1c1c1h3e1f2d191e1l3f181c102e1b1d1d1e1i3f1g2c1d3f1u1d1i1c1q1e1i1d1f3f1e2d1i3e1m1g1k3d1i3f1e3d1d1e1l3g1h3d123e1e2e1d3d1u3e1d1c1d1e1k2d101e163g1c2d191f1j3b1q2d1u1f1f3c1b2f161d1j1e1c1g1i3c1h1e1e2e1d1c1z3e122c173f1u2d191d1y1g1s2e1d3e102c1r3e1h2e1u2e1u2e1u2d142c1v3g1z2c1r1e1w2c1p2c192e1t2c1g2e1w2c1f2c1w1g1h2c1r1g1t3c1s2e1c2e1u1e1r2e1u3c1d2c1u2g172c1q2f1u3c1x3d182e182c121e2q1r1j1s2j2s2b1k1s1f161","17ea00d138f6e0f64acba0709f4e6825"));var v={log:0,logout:0,screencolor:"#000000",border:0,bordersize:1,bordercolor:"#000000",bgcolor:"var(--card-background-2)",rounding:0,screenclick:1,doubleclick:1,player:0,stopotherplayers:1,iframe:0,toolbar:{customimage:0,color:"000000",a:"0.4",h:34,stretchonfullscreen:1,hide:1,hidewithoutmoving:1,hidejustfull:0,hidetimeout:3,hideleavetimeout:0,leftandrightpadding:3,animation:"none",position:"bottom",margin:"0 0 0 0",rounding:0,clickarea:0,image:""},hotkey:{on:1,f:1,r:1,m:1,seek:5,leftright:"seek",space:1,updown:"volume",seeksides:0,nums:1,volumewheelfull:1,wheelstep:.2},playlist:{bgcolor:"000000",bgcolorover:"333333",bga:.9,bgaover:-1,position:"left",margin:"0 0 0 0",padding:"7 15 7 15",color:"ffffff",font:"arial, helvetica, sans-serif",fontsize:12,valuefontsize:10,letterspacing:0,valuecolor:"ffdd1f",borderbottom:1,bordercolor:"666666",a:1,aover:-1,posters:0,posterheight:100,posterwidth:177,postertitleonhover:1,historytitlea:1,historycolor:"999999",historybgcolor:"000000",historybga:-1,historybgaover:-1,historytitlestrike:0,activeiconsize:3,headfontsize:16,headbordercolor:"888888",rounding:0,scrollarrows:1,scrollarrowsize:1,scrollarrowcolor:"ffffff",scrollarrowbg:0,scrollarrowbgcolor:"000000",scrollarrowgradient:1,scrollarrowbgover:0,scrollarrowbgovercolor:"333333",limitwidth:0,limitmaxwidth:200,autoplaylist:0,always:0,alwaysjustpause:0,alwaysnotfullscreen:0,autohide:1,floatleft:0,floatheight:50,floatmarginright:0,floatlimitwidth:1,floatwidth:170,marginbg:0,marginbgcolor:"333333",marginbgpadding:"0 0 0 0",hmaxk:30},settings:{bgcolor:"000000",bgcolorover:"222222",bga:.7,bgaover:-1,font:"arial, helvetica, sans-serif",position:"bottom-right",margin:"0 0 0 0",padding:"7 10 7 15",color:"ffffff",fontsize:12,headfontsize:16,valuefontsize:10,letterspacing:0,titlecolor:"ffffff",valuecolor:"ffdd1f",a:1,scale:5,aover:-1,activeicon:1,activeiconsize:3,scrollarrows:1,scrollarrowsize:1,scrollarrowcolor:"ffffff",limitwidth:0,limitmaxwidth:200,rounding:0,settings1:1,settings1action:"quality",settings2:1,settings2action:"audiotrack",settings3:1,settings3action:"subtitle",settings4:0,settings4action:"download",settings5:0,settings5action:"speed",hmaxk:30,bordercolor:"666666"},logo:{position:"bottom-right",margin:"0 10 50 0"},volume:.8,volumestore:1,mutestore:1,loop:0,shuffle:0,finishrewind:1,mute:0,preload:0,preloadhls:0,preloaddash:0,autoplay:0,autoplaymute:1,showtitleplaylist:0,addtitleplaylistbr:0,addtitleplaylist:0,file_separator:",",file2_separator:";",file3_separator:"//",poster_scale:"fill",poster_a:1,poster_aover:-1,poster_float:0,poster_floatmargin:"20 0 0 20",poster_floatposition:"top-left",poster_floatwidth:100,poster_floatheight:100,poster_floatbgcolor:-1,posteronpause:0,alerts:1,alertsbgcolor:"ff0000",alertscolor:"ffffff",alertspaddingv:5,alertspaddingh:10,alertsbga:1,alertsfontsize:10,rightclick:0,youtubeposter:1,ytautoquality:1,posterhide:1,aspect:"16x9",landfullmobile:0,hlschangequality:"next",hlsautoquality:1,hlsdebug:0,hlscookies:0,hlslowquality:0,hlsquality:1,hlsaudio:1,livewakeuptime:5,reload:0,reloadlive:1,livewakeup:0,reloadtimeout:5,dashdebug:0,dashcookies:0,dashlowquality:0,dashquality:1,dashaudio:1,nameofhlsquality:0,nameofyoutubequality:0,nameofdashquality:0,qualitystore:1,eventstracker:0,events:"PlayerjsEvents",errortimeout:5e3,container_h_procent:"100%",ga:0,ga_event:{init:1,error:0,full:0,end:0,play:1,play25:0,play50:0,play75:0,vast_skip:0,vast_click:0,vast_impression:0},yamtr_event:{init:1,error:0,full:0,end:0,play:1,play25:0,play50:0,play75:0},ga_proc:100,playsinlineonmobile:1,subtitle_start:1,sub_size:14,sub_sizeproc:"100%",sub_big_fullscreen:1,sub_size_fullscreen:20,sub_bg:1,sub_bga:.7,sub_bgo:2,sub_bgpadding:3,sub_bottom:10,sub_color:"ffffff",sub_color2:"ffeeab",sub_bgcolor:"000000",sub_shadow:0,sub_weight:400,sub_designstore:1,sub_shift:0,sub_store:1,sub_off:1,sharetitle:1,sharetop:.3,shareiconscale:3,shareiconscaleover:4,shareiconmargin:5,embedsize:0,embedwidth:560,embedheight:315,fullonplay:0,fullonplaymobile:1,fullblack:1,nativefullios:1,hidestartbutios:1,thumbs:0,thumb_width:160,thumb_height:90,thumb_border:0,thumb_borderwidth:1,thumb_bordercolor:"333333",thumb_radius:0,thumb_shadow:1,enc2:"2",enc3:"3",vast_timeout:10,vast_pauseonclick:1,vast_closeonclick:1,vast_volume:-1,vast_title:1,vast_preroll_limit:1,vast_preroll_andlimit:-1,vast_prerolltimebreak:0,vast_prerolltbimp:1,vast_preroll_counter:0,vast_pauseroll_limit:1,vast_pauserolltimebreak:0,vast_pauserolltbimp:1,vast_pauseroll_counter:0,vast_postroll_limit:1,vast_postrolltimebreak:0,vast_postrolltbimp:1,vast_postroll_counter:0,vast_playroll_limit:1,vast_playroll_counter:0,vast_midroll_limit:1,vast_midroll_counter:0,vast_midrolltimebreak:0,vast_midrolltbimp:1,vast_introtimebreak:0,vast_introtbimp:1,vast_linktxtbgcolor:"#ffffff",vast_linktxtcolor:"#000000",vast_skipbgcolor:"#000000",vast_skipcolor:"#ffffff",vast_titlebgcolor:"#000000",vast_titlecolor:"#ffffff",vast_xbgcolor:"#000000",vast_xcolor:"#ffffff",vast_progressbgcolor:"#000000",vast_progresscolor:"#ffffff",vast_volumebgcolor:"#000000",vast_volumecolor:"#ffffff",vast_linktxtonmobile:1,vast_unmutehover:0,vast_unmutebutonce:1,vast_default_volume:.5,vast_unmutebutbgcolor:"#ffffff",vast_unmutebutcolor:"#000000",vast_openclick:1,vast_preroll_vmap:1,vast_pauseroll_vmap:1,vast_postroll_vmap:1,vast_midroll_vmap:1,vpaid_timeout:10,vpaid_timeout2:-1,vast_resound:1,vpaid_slotinframe:1,eventstrackervast:0,pauserollonplay:0,partnerprerollor:"or",partnerpauserollor:"or",partnerpostrollor:"or",partnermidrollor:"or",midrollpoint:"50%",introskiptime:-1,introclickable:0,introclosetime:-1,introtitle:0,introtxt:0,rc_version:1,rc_anyway:0,heartbeatinterval:30,default_channel:2,tagsinterval:10,playedquartile:0,minivis:30,lsfullstart:1,lsfullplay:1,captions:0,pip:{on:0,bgcolor:"000000",border:0,shadow:2,bordercolor:"000000",position:"left",margin:"20 0 0 20",width:150,hide:0},lang:"ru"},Settings=function(is){var i,style=[],f=[],fbg=[],fimg=[],ftitle=[],fvalue=[],faction=[],f2=[],f2bg=[],f2img=[],f2title=[],f2value=[],f2action=[],stout=[],is_visible=!1,open_action,open_settings=-1,empty=!0,key=is,playlist,shuffle=[],shuffle_=[],plid="",plfolder="",plx=-1,sub_settings_on=!1,sub_settings=!1,autonextopenfolder=!1,autoprevopenfolder=!1,justshow=!1,removed=!1,showinterval,arrinterval,wheelinterval,hidetimeout,settimer,shr=[],clr=[],iclr=0,_cstm=0,evntclk="click",evntovr=o.system.mobile?"touchstart":"mouseover",evntout=o.system.mobile?"touchend":"mouseout",style=UpdateObject(style,v[is]);style=MarginPadding(v[is],"margin","margin"),0==style.marginbg&&(style.marginbgpadding="0 0 0 0"),style=MarginPadding(v[is],"bgpadding","marginbgpadding"),style=MarginPadding(v[is],"padding","padding"),style.scrollwidth=0;var _activeIcon="<svg style='margin-top:3px' width='"+2*style.activeiconsize+"' height='"+(2*style.activeiconsize>style.valuefontsize?2*style.activeiconsize:style.valuefontsize)+"' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg'><g><ellipse ry='"+style.activeiconsize+"' rx='"+style.activeiconsize+"' cy='"+(2*style.activeiconsize>style.valuefontsize?style.activeiconsize:style.valuefontsize/2)+"' cx='"+style.activeiconsize+"' fill='#"+style.valuecolor+"'/></g></svg>",_xIcon="<svg width='"+2*style.activeiconsize+"' height='"+style.valuefontsize+"' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg' ><g><ellipse ry='"+(style.activeiconsize-1)+"' rx='"+(style.activeiconsize-1)+"' cy='"+(style.valuefontsize/2+2)+"' cx='"+style.activeiconsize+"' stroke='#"+style.valuecolor+"' stroke='1' fill-opacity='0'/></g></svg>",xx=4,_nextIcon="<pjsdiv style='display:inline-block;'><svg width='"+(xx+2)+"' height='"+style.valuefontsize+"' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg'><g><line x1='1' y1='"+(style.valuefontsize/2-xx)+"' x2='"+xx+"' y2='"+style.valuefontsize/2+"' stroke='#"+style.color+"' stroke-width='1' stroke-linecap='round'/><line x1='"+xx+"' y1='"+style.valuefontsize/2+"' x2='1' y2='"+(style.valuefontsize/2+xx)+"' stroke='#"+style.color+"' stroke-width='1' stroke-linecap='round'/></g></svg></pjsdiv>",_prevIcon="<pjsdiv style='display:inline-block;'><svg width='"+(xx+10)+"' height='"+(style.valuefontsize+1)+"' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg' style='float:left'><g><line x1='1' y1='"+(style.valuefontsize/2+2)+"' x2='"+xx+"' y2='"+(style.valuefontsize/2-xx+2)+"' stroke='#"+style.color+"' stroke-width='1' stroke-linecap='round' /><line x1='1' y1='"+(style.valuefontsize/2+2)+"' x2='"+xx+"' y2='"+(style.valuefontsize/2+xx+2)+"' stroke='#"+style.color+"' stroke-width='1' stroke-linecap='round'/></g></svg></pjsdiv>",bordercolor="rgba("+(style.bordercolor?hexToRgb(style.bordercolor.replace("#","")):"")+","+existv(style.brda,1)+")",container=createElement("div");o.frame.appendChild(container),css(container,{overflow:"hidden",display:"block",opacity:0,"border-radius":style.rounding});var mpi={},i;for(i in o.menuproc)o.menuproc.hasOwnProperty(i)&&(mpi[o.menuproc[i]]=-1);container.style.zIndex="settings"==is?100:99;var control=createElement("div"),control2,arr_up,scrollbgcolor,arr_down,downi,downin;if(o.small&&(0<style.smallfontsize&&(style.fontsize=style.smallfontsize),0<style.floatwidthsmall&&(style.floatwidth=style.floatwidthsmall),0<style.floatheightsmall&&(style.floatheight=style.floatheightsmall)),css(control,{position:"relative",top:0,left:0,display:"block",width:"100%","padding-top":style.bgpaddingtop,"padding-right":style.bgpaddingright+20,"padding-bottom":style.bgpaddingbottom,"padding-left":style.bgpaddingleft,color:style.color,"font-size":style.fontsize*existv(v.globalfs,1),"font-family":checkFont(style.font),"letter-spacing":style.letterspacing+"px"}),o.system.safari&&css(control,{"min-width":220}),"playlist"!==is&&css(control,{"overflow-y":"scroll"}),container.appendChild(control),1!=style.floatleft&&(control2=createElement("div"),css(control2,{display:"block",overflow:"hidden","border-radius":style.rounding}),1!=style.floatleft&&o.system.safari&&css(control2,{"min-width":220}),control.appendChild(control2)),attr(control,{id:v.id+"_"+is}),"playlist"==is&&(1==style.floatleft?(css(control,{width:"100%","padding-right":style.bgpaddingright,"padding-bottom":style.bgpaddingbottom+20,"overflow-x":"scroll","white-space":"nowrap"}),css(container,{width:o.screen_w-style.marginright-style.marginleft,height:style.floatheight+style.bgpaddingtop+style.bgpaddingbottom})):(css(control,{"overflow-y":"scroll"}),1==style.width100&&ResizePlaylist()),1==style.marginbg&&css(container,{"background-color":style.marginbgcolor}),1==v.playlist.droplist&&hide2(container)),1==style.scrollarrows&&(arr_up=createElement("div"),scrollbgcolor=hexToRgb(1==style.marginbg?style.marginbgcolor:style.bgcolor),1==style.floatleft?(StyleArrow(arr_up,"to right, rgba("+scrollbgcolor+","+(+style.bga+.3)+"), rgba("+scrollbgcolor+",0)","left",12,5,7,10,7,10,12,15),arr_up.addEventListener(evntclk,ScrollLeft)):(StyleArrow(arr_up,"to bottom, rgba("+scrollbgcolor+","+(+style.bga+.3)+"), rgba("+scrollbgcolor+",0)","top",5,12,10,7,10,7,15,12),arr_up.addEventListener(evntclk,ScrollUp)),arr_down=createElement("div"),1==style.floatleft?(StyleArrow(arr_down,"to left, rgba("+scrollbgcolor+","+(+style.bga+.3)+"), rgba("+scrollbgcolor+",0)","right",8,5,13,10,13,10,8,15),arr_down.addEventListener(evntclk,ScrollRight)):(StyleArrow(arr_down,"to bottom, rgba("+scrollbgcolor+",0), rgba("+scrollbgcolor+","+(+style.bga+.3)+")","bottom",5,8,10,13,10,13,15,8),arr_down.addEventListener(evntclk,ScrollDown)),arr_up.addEventListener("mouseover",ScrollOverOut),arr_up.addEventListener("mouseout",ScrollOverOut),arr_down.addEventListener("mouseover",ScrollOverOut),arr_down.addEventListener("mouseout",ScrollOverOut),control.addEventListener("wheel",Wheel),arr_up.addEventListener("mouseup",onMouseUp),arr_down.addEventListener("mouseup",onMouseUp),container.appendChild(arr_up),container.appendChild(arr_down),clearInterval(arrinterval),arrinterval=setInterval(ArrowsInterval,1e3)),control.addEventListener(evntovr,ControlOver),control.addEventListener(evntout,ControlOut),"settings"==is)for(var i=1;i<11;i++)exist(v["control_"+is][is+i])&&(v.settings[is+i]=v["control_"+is][is+i],exist(v["control_"+is][is+i+"title"])&&(v.settings[is+i+"title"]=v["control_"+is][is+i+"title"]),exist(v["control_"+is][is+i+"action"])&&(v.settings[is+i+"action"]=v["control_"+is][is+i+"action"])),exist(v.settings[is+i])&&1==v.settings[is+i]&&(CreateItem("f",i),StyleItem(f[i],fbg[i],ftitle[i],fvalue[i]),exist(v.settings[is+i+"action"])||(v.settings[is+i+"action"]="speed"),ftitle[i].innerHTML=Lang(v.settings[is+i+"action"]),exist(v.settings[is+i+"title"])&&""!=v.settings[is+i+"title"]&&(ftitle[i].innerHTML=v.settings[is+i+"title"]),"share"==v.settings[is+i+"action"]&&(o.shareme=!0),faction[i]=v.settings[is+i+"action"],Value(i),faction[i]in o.menuproc&&(mpi[faction[i]]=i),f[i].addEventListener(evntovr,onOver),f[i].addEventListener(evntout,onOut),f[i].addEventListener(evntclk,onClick),f[i].addEventListener("mouseup",onMouseUp),1==v.settings[is+i+"hide"]&&css(f[i],{height:0}));function Wheel(e){"playlist"==is&&1==style.floatleft&&e&&0==e.deltaX&&0!=e.deltaY&&(control.scrollLeft-=e.deltaY,e.preventDefault()),clearInterval(wheelinterval),wheelinterval=setInterval(ControlOut,3e3),Retimer()}function ControlOver(){o.mouseDown=!0}function ControlOut(){1==style.showovercontrol&&(clearTimeout(o.settingsovertimer),o.settingsovertimer=setTimeout(function(){o.mouseDown||HideControl()},0<v.settings.showoverto?1e3*v.settings.showoverto:o.system.tv?2e3:1e3)),o.mouseDown=!1}function onOver(event){o.fullscreen&&o.volumewheel&&o.actions.volumewheel(!1);var i=event.target.getAttribute("fid"),x,opn,id;i?x="f":event.target.getAttribute("f2id")&&(i=event.target.getAttribute("f2id"),x="f2"),i&&(i=parseInt(i),opn=!1,exist(eval(x)[i])&&(-1<style.bgaover&&css(eval(x+"bg")[i],{opacity:style.bgaover}),-1<style.aover&&(css(eval(x+"title")[i],{opacity:style.aover}),css(eval(x+"value")[i],{opacity:style.aover})),"playlist"==is&&0==faction[i].indexOf("playlist")&&(id=faction[i].substr(8),plid==id||plfolder==id?(css(eval(x+"title")[i],{color:style.valuecolor}),css(eval(x+"value")[i],{color:style.valuecolor}),opn=!0):css(eval(x+"title")[i],{color:style.color})),1==style.playbgcolored&&exist(style.playbgcolor)&&opn||css(eval(x+"bg")[i],{backgroundColor:style.bgcolorover})))}function onOut(event){o.fullscreen&&o.volumewheel&&o.actions.volumewheel(!0);var i=event.target.getAttribute("fid"),x,opn=!1,id;clearInterval(downin),Retimer(),i?x="f":event.target.getAttribute("f2id")&&(i=event.target.getAttribute("f2id"),x="f2"),i&&exist(eval(x)[i])&&(-1<style.bgaover&&css(eval(x+"bg")[i],{opacity:style.bga,transition:"opacity 0.1s linear"}),-1<style.aover&&(css(eval(x+"title")[i],{opacity:style.a,transition:"opacity 0.1s linear"}),css(eval(x+"value")[i],{opacity:style.a,transition:"opacity 0.1s linear"})),"playlist"==is&&0==faction[i].indexOf("playlist")&&(id=faction[i].substr(8),plid==id||plfolder==id?(css(eval(x+"title")[i],{color:style.valuecolor}),css(eval(x+"value")[i],{color:style.valuecolor}),opn=!0):exist(o.plhistory[id])?HistoryPlaylist(i):css(eval(x+"title")[i],{color:style.color})),1==style.playbgcolored&&exist(style.playbgcolor)&&opn||css(eval(x+"bg")[i],{backgroundColor:o.plhistory[id]?style.historybgcolor:style.bgcolor}))}function onClick(e){var t;justshow||(t=new Date,o.clicktime=t.getTime(),(e=e.target.getAttribute("fid"))&&exist(f[e])&&exist(faction[e])&&Action(e,0))}function onMouseDown(e){justshow||(e=e.target.getAttribute("f2id"))&&exist(f2action[e])&&open_action in o.menuproc&&(downi=e,downin=setInterval(DownIn,200))}function DownIn(){Action2(downi)}function onMouseUp(e){clearInterval(downin),e.cancelBubble=!0,Retimer()}function onClick2(e){var t;clearInterval(downin),justshow||(t=new Date,o.clicktime=t.getTime(),(e=e.target.getAttribute("f2id"))&&(0==e?"color"==f2action[0]?(Remove2(),Action(iclr)):Home():exist(f2action[e])&&Action2(e)))}function onClickSubtitle(e){e=e.target.getAttribute("setupx");e&&ActionOptions(e)}function onClickSubtitle2(e){Retimer();var t,i=e.target.getAttribute("f2id");exist(f2action[i])&&0<f2i("=",i)&&(t=f2action[i].substr(0,f2i("=",i)),e=f2action[i].substr(f2i("=",i)+1),v[i=open_action+"_reset"]||(v[i]=[]),exist(v[i][t])||(v[i][t]=v[t]+""),StyleSubtitle(t,e))}function StyleSubtitle(e,t){v[e]=t,o.storage&&1==v.sub_designstore&&"sub_shift"!=e&&localStorage.setItem("pljs"+e,t),o.casting&&o.chromecast&&o.chromecast.Sub(),o.actions.RenewSubtitle(),ActionOptions(e)}function onClickTimer2(e){var t=e.target.getAttribute("f2id"),e=f2action[t];exist(e)&&0<e.indexOf("=")&&(t=e.substr(0,e.indexOf("=")),e=e.substr(e.indexOf("=")+1),v[t]=e,SubtitleTimerMenu(),Value(o[open_action+"_i"]),"offsettimer"==open_action&&SettingsTimers("offsetwrite"))}function Value(e){if(exist(faction[e])){var t=!1,i=!1,s="";if("settings"==is){if("quality"==faction[e]&&(s=o.media.getQuality()),"audiotrack"==faction[e]&&(s=o.media.getAudioTrack()),"share"==faction[e]&&(s=" ",i=!0),"channel"==faction[e]&&o.channels&&(s=o.files_channel[o.current_channel]),"audiotrack"!=faction[e]&&"channel"!=faction[e]&&"quality"!=faction[e]||(0!=o["files_"+faction[e]].length&&(1!=o["files_"+faction[e]].length||1==style.show1value&&1!=o["files_"+faction[e]][0])?i=!0:t=!0),"airplay"==faction[e]&&(o.airplay?i=!0:t=!0),"download"==faction[e]&&("native"==o.file_type||v.download?i=!0:t=!0),"subtitle"==faction[e])if(exist(o.subs)){i=!0,o.subtitle_on||1==v.sub_off?o.sbt&&(s=o.files_subtitle[o.subtitle_on?o.current_subtitle:o.sbt.ioff()]):s="";for(var r=0,n=0;n<o.subs.length;n++)""!=o.subs[n]&&r++;1==r&&1==o.subload&&(r=0),1==v.sub_upload&&1==v.sub_upload0||0==r&&(i=!(t=!0))}else t=!0;if("speed"==faction[e]&&(1==(s=o.files_speed[o.current_speed])&&1!=style.speed1&&(s=Lang("normal")),i=!0,("vimeo"==o.file_type||o.media.isLive()&&1!=style.speed4live)&&(i=!(t=!0))),faction[e]in o.menuproc&&(s=FltrVal(faction[e]),i=!0),0<faction[e].indexOf("timer")){for(var a=" ",l=["hour","minute","second"],c=0;c<l.length;c++)exist(v[faction[e]+l[c]])&&" "!=v[faction[e]+l[c]]&&(a+=(" "!=a?":":"")+v[faction[e]+l[c]]);s=" 0:0"!=a&&-1<a.indexOf(":")?a:" ",i=!0}}fvalue[e].innerHTML=s+(""!=s&&1!=style.hidearrow?' &nbsp;<svg width="5px" height="7px" viewBox="-1 -1 5 8" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><polyline stroke="#'+style.valuecolor+'" stroke-width="1" fill="none" points="0 0 3 3 0 6"></polyline></svg>':""),t&&(hide(f[e]),"settings"==is&&(stout[e]&&clearTimeout(stout[e]),o.controls?o.controls.SettingsN(e,!1,s):stout[e]=setTimeout(function(){o.controls.SettingsN(e,!1,s)},200)),css(f[e],{position:"absolute",right:0,top:-100})),i&&(1==style.floatleft?css(f[e],{display:"inline-block"}):show(f[e]),"settings"==is&&(stout[e]&&clearTimeout(stout[e]),o.controls?o.controls.SettingsN(e,!0,s):stout[e]=setTimeout(function(){o.controls.SettingsN(e,!0,s)},500)),css(f[e],{position:"relative",right:0,top:0})),Resize()}for(var d,u=1;u<f.length;u++)f[u]&&isVisible(f[u])&&(d=!!empty,empty=!1,d&&o.controls&&o.controls.refresh())}function Action(e,t,i){if(i&&(faction[e]=i),exist(faction[e])){o.setaction=!0,Retimer();i=VisibleItems();if(open_action!=faction[e]){if("quality"==(open_action=faction[e])||"audiotrack"==open_action||"subtitle"==open_action||"speed"==open_action||"channel"==open_action||open_action in o.menuproc||0<open_action.indexOf("timer")||"share"==open_action||"color"==open_action){open_settings=e;var s=copyObject(o["files_"+open_action]);if("sleeptimer"==open_action&&(s=1==style.sleep2?SettingsTimers("sleep2options"):SettingsTimers("sleepoptions")),"offsettimer"==open_action&&(s=SettingsTimers("offsetoptions")),"share"==open_action&&o.share){s=[];for(var r=1;r<=16;r++)exist(v["share"+r])&&(s.push(Lang(v["share"+r])),shr[s.length]=v["share"+r])}if("color"==open_action&&o.tagvideo){s=[],iclr=e;for(r=0;r<o.clr_options.length;r++){var n=o.clr_options[r].substr(4);s.push(Lang(n)),clr[s.length]=n}}for(var a=o["current_"+open_action],l=o["pressed_"+open_action],r=1;r<f.length;r++)f[r]&&(f[r].style.display="none");f2=[],CreateItem("f2",0),StyleItem(f2[0],f2bg[0],f2title[0],f2value[0]),css(f2[0],{"border-bottom":"1px solid "+(1==style.bordercolored?bordercolor:"rgba(100,100,100,0.7)")}),_cstm=t;var c,t=!1;if(f2title[0].innerHTML=(i[0]<2||1==_cstm||1==style.noprevicon?"":_prevIcon)+(v.settings[is+e+"title"]&&""!=v.settings[is+e+"title"]?v.settings[is+e+"title"]:Lang(v.settings[is+e+"action"])),"subtitle"!=open_action||o.hls_subs||o.dash_subs||((c=createElement("div")).innerHTML=Lang("options"),css(c,{color:style.color,pointerEvents:"auto",cursor:"pointer"}),f2value[0].appendChild(c),c.addEventListener(evntclk,SubtitleSettings),t=!0),"subtitle"==open_action&&1==v.sub_upload&&!o.system.tv&&exist(window.FileReader)&&(c=createElement("div"),o.sbt||(o.sbt=new PluginSub),c.innerHTML="<input type='file' id='"+v.id+"_subfile' accept='.vtt,.ass,.srt' style='display:none'/>"+Lang("upload"),css(c,{color:style.color,pointerEvents:"auto",cursor:"pointer","margin-left":t?"10px":0}),f2value[0].appendChild(c),o.subupld=document.getElementById(v.id+"_subfile"),o.subupld.onchange=o.sbt.SubUpload,c.addEventListener(evntclk,o.sbt.SubUpload)),t&&sub_settings_on)for(2==_cstm&&(s=[],hide2(f2[0])),r=0;r<o.sub_options.length;r++)0==v.sub_all&&"sub_color2"==o.sub_options[r]||s.push("pjslng_"+o.sub_options[r]);if(css(f2title[0],{"font-size":style.headfontsize*existv(v.globalfs,1)}),f2action[0]="home",open_action in o.menuproc&&(Menuproc(open_action),0<iclr&&-1<o.clr_options.indexOf("clr_"+open_action)&&(f2title[0].innerHTML=_prevIcon+Lang(open_action),f2action[0]="color",f2value[0].innerHTML=FltrVal(open_action)),css(f2value[0],{width:2.5*style.valuefontsize,"text-align":"right"})),1!=_cstm&&1<i[0]?(f2[0].addEventListener(evntovr,onOver),f2[0].addEventListener(evntout,onOut),f2[0].addEventListener(evntclk,onClick2),f2[0].addEventListener("mouseup",onMouseUp)):css(f2[0],{cursor:"default"}),1==style.nohead&&hide2(f2[0]),exist(s)){var d="";for(r=0;r<s.length;r++){var u,h=r+1,p=0,g=!1;if(s[r]&&""!=trim(s[r])){if("quality"==open_action&&(s[r]==Lang("auto")&&(p=1),"hls"==o.file_type&&1==v.hlsqhsort&&((u=int(s[r]))&&u<d&&(p=2),d=int(s[r]))),CreateItem("f2",h,p),StyleItem(f2[h],f2bg[h],f2title[h],f2value[h],faction[e]),"speed"==open_action&&1==s[r]&&1!=style.speed1&&(s[r]=Lang("normal")),"string"==typeof s[r]?(0==s[r].indexOf("<<<")&&(s[r]=s[r].replace("<<<",""),g=!0),0<s[r].indexOf("timer")&&(o[open_action+"_i"]=e),0==s[r].indexOf("pjslng")?(0<(p=s[r]).indexOf("timer")?f2title[h].innerHTML=Lang(s[r].substr(p.indexOf("timer")+5)):f2title[h].innerHTML=Lang(s[r].substr(7)),"pjslng_sub_sizeproc"==s[r]&&css(f2[h],{"border-top":"1px solid rgba(100,100,100,0.7)"})):f2title[h].innerHTML=s[r]):f2title[h].innerHTML=s[r],f2action[h]=open_action+r,a!=r&&l!=r||(f2value[h].innerHTML=a==r?_activeIcon:_xIcon,a==r&&css(f2title[h],{color:style.valuecolor})),"string"==typeof s[r])if(0==s[r].indexOf("pjslng")&&(0<(b=s[r].substr(7)).indexOf("color")?f2value[h].innerHTML="<div style='"+("000000"==v[b]?"border:1px solid #999;height:8px;width:8px;":"height:10px;width:10px;")+";background-color:"+(-1==v[b].indexOf("#")?"#":"")+v[b]+";border-radius:10px;'></div>":exist(v[s[r].substr(7)])&&(f2value[h].innerHTML=v[s[r].substr(7)])),"share"==open_action&&exist(shr[h])&&o.share&&(f2value[h].innerHTML=o.share.icon(shr[h],.7,CheckColor(style.valuecolor))),"color"==open_action&&exist(clr[h])&&o.tagvideo&&(f2value[h].innerHTML=FltrVal(clr[h])),"quality"==open_action&&(s[r]==Lang("auto")&&o.media.autoQuality()&&css(f2title[h],{color:style.valuecolor}),exist2(v.forbidden_quality)))for(var m=v.forbidden_quality.split(","),y=0;y<m.length;y++)-1<s[r].indexOf(m[y])&&hide2(f2[h]);var b="";"string"==typeof s[r]&&0==s[r].indexOf("pjslng")&&(attr(f2[h],{f2parent:e,setupx:s[r].substr(7)}),b="onClickSubtitle"),g?css(f2[h],{cursor:"default"}):(f2[h].addEventListener(evntovr,onOver),f2[h].addEventListener(evntout,onOut),"onClickSubtitle"==b?f2[h].addEventListener(evntclk,onClickSubtitle):f2[h].addEventListener(evntclk,onClick2),f2[h].addEventListener("mouseup",onMouseUp),f2[h].addEventListener("mousedown",onMouseDown))}}}Resize()}"download"==faction[e]&&o.actions.Download(),-1<faction[e].indexOf("playlist")&&(i=faction[e].substr(8),exist(o.playlist_dic[i])&&(exist(o.playlist_dic[i].file)?(o.seekto=void 0,ActionPlaylist(e),UpdateStart(i),SettingsTimers("offset"),exist(o.playlist_dic[i].redirect)&&1==v.redirect&&1==v.redirectplaylist?redirect(o.playlist_dic[i].redirect):(UpdateVars0(i),o.actions.NewFile(o.playlist_dic[i].file,1==v.playlist.dontplay?1:void 0),0==v.playlist.always&&1==v.playlist.autohide&&setTimeout(HideControl,200),autoprevopenfolder=autonextopenfolder=!1,UpdateVars(i))):exist(o.playlist_dic[i].folder)&&(UpdatePlaylist(i),autonextopenfolder?-1==plx&&Action(0,0):autoprevopenfolder&&-1==plx&&Action(parseInt(f.length)-2,0))),o.droplist&&o.droplist.Update()),"airplay"==faction[e]&&o.media.Airplay()}}}function ActionOptions(e){if("sub_reset"!=e){Retimer();for(var t=0;t<f2.length;t++)f2[t]&&(f2[t].style.display="none");f2=[],CreateItem("f2",0),StyleItem(f2[0],f2bg[0],f2title[0],f2value[0]),css(f2[0],{"border-bottom":"1px solid "+(1==style.bordercolored?bordercolor:"rgba(100,100,100,0.7)")}),0<e.indexOf("timer")?(f2[0].addEventListener(evntclk,SubtitleTimerMenu),f2title[0].innerHTML=Lang(e.substr(e.indexOf("timer")+5))):(f2[0].addEventListener(evntclk,SubtitleSettingsMenu),f2title[0].innerHTML=(1!=style.noprevicon?_prevIcon:"")+Lang(e)),css(f2title[0],{"font-size":style.headfontsize*existv(v.globalfs,1)}),f2[0].addEventListener(evntovr,onOver),f2[0].addEventListener(evntout,onOut),f2[0].addEventListener("mouseup",onMouseUp);var i,o=[],s=!1;if(0<e.indexOf("size")&&(o=["50%","75%","100%","125%","150%","175%","200%","250%","300%","400%"]),0<e.indexOf("bga")&&(o=["0","0.2","0.3","0.4","0.5","0.6","0.7","0.8","0.9","1"]),0<e.indexOf("shift"))for(t=-5;t<5.5;t+=.5)o.push(Math.round(100*t)/100);if(0<e.indexOf("weight")&&(o=[200,400,600]),0<e.indexOf("bottom"))for(t=0;t<21;t++)o[t]=10*t;if(0<e.indexOf("hour"))for(t=0;t<24;t++)o[t]=t;if(0<e.indexOf("minute")||0<e.indexOf("second"))for(t=0;t<60;t++)o[t]=t;for(0<e.indexOf("shadow")&&(s=!0,o=[0,1]),0<e.indexOf("color")&&(o=["ffffff","ffeeab","72ccf8","62de50","faed54","feba54","e8bbff","ffc7d1","aaaaaa","d9bb8c","b3fee8","4bd9ac","FEF370","D90000","073DA0","409829","644082","000000"],i=v[e].replace("#",""),-1==o.indexOf(i)&&(o[8]=i)),n=1;n<=o.length;n++)CreateItem("f2",n,0),StyleItem(f2[n],f2bg[n],f2title[n],f2value[n]),css(f2value[n],{"padding-left":0}),0<e.indexOf("color")||0<e.indexOf("bottom")||0<e.indexOf("timer")||0<e.indexOf("shift")?(n%3!=0&&css(f2[n],{float:"left"}),css(f2[n],{width:"33.3%"}),0<e.indexOf("color")?(f2title[n].innerHTML="<div style='"+("000000"==o[n-1]?"border:1px solid #999;height:18px;width:18px;":"height:20px;width:20px;")+";background-color:#"+o[n-1]+";border-radius:20px;'></div>",css(f2[n],{"line-height":1})):f2title[n].innerHTML=o[n-1]):0<e.indexOf("weight")?f2title[n].innerHTML=o[n-1]:(n%2!=0&&css(f2[n],{float:"left"}),css(f2[n],{width:"50%"}),f2title[n].innerHTML=s?Lang(o[n-1]+"val"):o[n-1]),f2action[n]=e+"="+o[n-1],(o[n-1]==v[e]&&" "!=String(v[e])||v[e]=="#"+o[n-1])&&(f2value[n].innerHTML=_activeIcon,css(f2title[n],{color:style.valuecolor})),f2[n].addEventListener(evntovr,onOver),f2[n].addEventListener(evntout,onOut),0<e.indexOf("timer")?f2[n].addEventListener(evntclk,onClickTimer2):f2[n].addEventListener(evntclk,onClickSubtitle2),f2[n].addEventListener("mouseup",onMouseUp);Resize()}else{var r=open_action+"_reset";if(v[r]){for(var n in v[r])v[r].hasOwnProperty(n)&&StyleSubtitle(n,v[r][n]);SubtitleSettingsMenu()}}}function UpdateVars0(e){exist(o.playlist_dic[e].poster)&&(v.poster=o.playlist_dic[e].poster,exist(v.poster)&&o.media.Poster(v.poster)),exist(o.playlist_dic[e].title)&&(o.titlestore=o.playlist_dic[e].title)}function UpdateVars(e){exist(o.playlist_dic[e].title)&&1==v.showtitleplaylist&&(o.actions.TitleTemplate(o.playlist_dic[e])||(v.title=(1==v.addtitleplaylist&&exist(o.maintitle)?o.maintitle+(1==v.addtitleplaylistbr?"<br>":" "):"")+o.playlist_dic[e].title),o.actions.Title("title")),1==v.pointed&&(exist(o.playlist_dic[e].points)?v.points=o.playlist_dic[e].points:v.points=[],o.controls.RenewPoints());for(var t=["remove","thumbnails","download","skip","url","url2","url3","vars","embed","end","delete","heartbeat","label","title2"],i=0;i<t.length;i++)exist(o.playlist_dic[e][t[i]])?v[t[i]]=o.playlist_dic[e][t[i]]:i<4&&(v[t[i]]=void 0);v.start=0,UpdateStart(e),exist(o.playlist_dic[e].sub)&&(o.playlist_dic[e].subtitle=o.playlist_dic[e].sub),exist(o.playlist_dic[e].subtitle)&&o.actions.Subtitle(o.playlist_dic[e].subtitle),exist(o.playlist_dic[e].design)&&apiProcessor("design",o.playlist_dic[e].design)}function UpdateStart(e){e=o.playlist_dic[e].start;exist(e)&&("continue"==e?0<o.media.time()&&(v.start=o.seekto=o.media.time()):v.start=o.seekto=e)}function ActionPlaylist(e){var t;0!=plx||o.start?(o.plopenid=e,-1<plx&&HistoryPlaylist(plx),""!=plid&&(o.plhistory[plid]=!0,shuffle=removebykey(shuffle,plid))):(css(ftitle[plx],{color:style.color}),css(fbg[plx],{backgroundColor:style.bgcolor}),fvalue[plx].innerHTML=""),faction[e]&&(t=faction[e].substr(8),fvalue[e].innerHTML=_activeIcon,css(ftitle[e],{color:style.valuecolor,"text-decoration":"none",opacity:style.a}),1==style.playbgcolored&&exist(style.playbgcolor)&&css(fbg[e],{backgroundColor:style.playbgcolor}),plx=e,plid=t,o.plid=plid,v.plstart=plid,o.playlist_title=ftitle[e].innerHTML,o.plopenid=plid,plfolder=o.playlist_dic[t].pjs_parent,o.controls&&o.controls.PlaylistControls())}function UpdatePlaylist(e){var t=0==e?o.playlist:o.playlist_dic[e];o.plopenid=e;for(var i,s,r=0;r<f.length;r++)(1==style.floatleft?control:control2).removeChild(f[r]),f[r]=null;f=[],plx=-1,exist(t.folder)&&(CreateItem("f",n=Object.keys(t.folder).length),faction[n]="playlistfolder",StyleItem(f[n],fbg[n],ftitle[n],fvalue[n]),1==style.floatleft&&css(f[n],{width:1==style.floatlimitwidth?style.floatwidth:"auto",height:style.floatheight}),1==style.borderbottom&&(i="1px solid rgba("+hexToRgb(style.headbordercolor)+","+existv(style.brda,1)+")",1==style.floatleft?css(f[n],{borderRight:i}):css(f[n],{borderBottom:i})),i=t.title,1!=style.noprevicon&&(i=_prevIcon+i),ftitle[n].innerHTML=i,css(ftitle[n],{"font-size":style.headfontsize*existv(v.globalfs,1)}),s=t.pjs_parent,f[n].addEventListener(evntovr,onOver),f[n].addEventListener(evntout,onOut),f[n].addEventListener(evntclk,function(){PlaylistBack(s)}),t=t.folder);var n=Object.keys(t).length;shuffle=[],shuffle_=[];for(var a,r=0;r<n;r++)CreateItem("f",r),faction[r]="playlist"+t[r].id,exist(o.plhistory[t[r].id])||exist(t[r].folder)||(shuffle[t[r].id]=r,shuffle_[t[r].id]=r),StyleItem(f[r],fbg[r],ftitle[r],fvalue[r]),1==style.floatleft&&(0==style.activeiconsize&&(css(ftitle[r],{width:style.floatwidth-style.paddingleft-style.paddingright}),hide2(fvalue[r])),css(f[r],{width:1==style.floatlimitwidth?style.floatwidth:"auto",height:style.floatheight})),1==style.borderbottom&&r<n-1&&(a=createElement("div"),f[r].appendChild(a),1==style.floatleft?css(a,{position:"absolute",top:0,right:0,width:1,height:"100%",background:bordercolor,pointerEvents:"none"}):css(a,{position:"absolute",bottom:0,left:0,width:"100%",height:1,background:bordercolor,pointerEvents:"none"})),ftitle[r].innerHTML=t[r].title||"&nbsp;",1==v.timestore&&1==v.playedstore&&t[r].id&&o.playedstored&&-1<o.playedstored.indexOf(t[r].id)&&(t[r].played=1),exist(t[r].played)&&1==t[r].played&&(o.plhistory[t[r].id]=!0,HistoryPlaylist(r)),exist(t[r].folder)&&(fvalue[r].innerHTML=_nextIcon,css(fvalue[r],{color:style.color})),f[r].addEventListener(evntovr,onOver),f[r].addEventListener(evntout,onOut),f[r].addEventListener(evntclk,onClick),f[r].addEventListener("mouseup",onMouseUp),exist(o.plhistory[t[r].id])&&HistoryPlaylist(r),plid==t[r].id&&ActionPlaylist(r),plfolder==t[r].id&&(css(ftitle[r],{color:style.valuecolor}),css(fvalue[r],{color:style.valuecolor}));Resize(),empty=!1,o.controls&&o.controls.refresh()}function StyleArrow(e,t,i,s,r,n,a,l,c,d,u){var h=1==style.floatleft?"40px":"100%",f=1==style.floatleft?"100%":"40px";css(e,{position:"absolute",display:"inline-block",width:h,height:f,"text-align":"center"}),1==style.scrollarrowgradient&&css(e,{background:"linear-gradient("+t+")"}),1==style.floatleft||o.system.mobile?css(e,{cursor:"pointer"}):css(e,{"pointer-events":"none"}),1==style.limitwidth&&css(e,{"max-width":style.limitmaxwidth+"px!important"}),"top"==i&&css(e,{top:-1,left:0}),"bottom"==i&&css(e,{bottom:-1,left:0}),"left"==i&&css(e,{top:0,left:0}),"right"==i&&css(e,{top:0,right:0}),"right"!=i&&"left"!=i||css(e,{"text-align":"left","padding-top":container.offsetHeight/2-10}),e.innerHTML="<center><div "+(1==style.scrollarrowbgover?"onMouseOver='this.style.backgroundColor=\"#"+style.scrollarrowbgovercolor+"\"' onMouseOut='"+(1==style.scrollarrowbg?'this.style.backgroundColor="#'+style.scrollarrowbgcolor:'this.style.background="none')+"\"'":"")+" style='pointer-events:auto;cursor:pointer;width:20px;height:20px;border-radius:20px;"+(1==style.scrollarrowbg?"background-color:#"+style.scrollarrowbgcolor+";":"")+("top"==i?"margin-top:10px;":"")+("bottom"==i?"margin-top:10px;":"")+("right"==i?"margin-left:0px;":"")+("left"==i?"margin-right:0px;":"")+"'><svg width='20' height='20' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg'><g><line x1='"+s+"' y1='"+r+"' x2='"+n+"' y2='"+a+"' stroke='#"+style.scrollarrowcolor+"' stroke-width='"+style.scrollarrowsize+"' stroke-linecap='round'/><line x1='"+l+"' y1='"+c+"' x2='"+d+"' y2='"+u+"' stroke='#"+style.scrollarrowcolor+"' stroke-width='"+style.scrollarrowsize+"' stroke-linecap='round'/></g></svg></div></center>"}function ArrowsInterval(){is_visible&&Arrows()}function Arrows(e){var t,i,o;1!=style.scrollarrows||removed||(o=1==style.floatleft?(t=control.scrollWidth,i=container.offsetWidth+style.bgpaddingleft+style.bgpaddingright,control.scrollLeft):(t=control.scrollHeight,i=container.offsetHeight,control.scrollTop),i<t?(0<o?isVisible(arr_up)||(show(arr_up),new Motion({mc:arr_up,type:"alpha_div",to:1,time:.3,me:"arr_up"})):(isVisible(arr_up)&&new Motion({mc:arr_up,type:"alpha_div",to:0,time:.3,me:"arr_up",hide:!0}),e&&e.deltaY<0&&e.preventDefault()),o<t-i-10?isVisible(arr_down)||(show(arr_down),new Motion({mc:arr_down,type:"alpha_div",to:1,time:.3,me:"arr_down"})):(isVisible(arr_down)&&new Motion({mc:arr_down,type:"alpha_div",to:0,time:.3,me:"arr_down",hide:!0}),e&&0<e.deltaY&&e.preventDefault())):(hide(arr_up),hide(arr_down)))}function ScrollDown(){var e=control.scrollTop+container.offsetHeight-60;new Motion({mc:control,type:"scroll",to:e,time:.3,me:"scroll_down",ease:"cubic"});setTimeout(Arrows,1e3)}function ScrollUp(){var e=control.scrollTop-container.offsetHeight+60;new Motion({mc:control,type:"scroll",to:e,time:.3,me:"scroll_up",ease:"cubic"});setTimeout(Arrows,1e3)}function ScrollOverOut(e){clearTimeout(o.settingsovertimer),e.stopPropagation()}function ScrollRight(){var e=control.scrollLeft+(container.offsetWidth+style.bgpaddingleft+style.bgpaddingright)-60;new Motion({mc:control,type:"scrollleft",to:e,time:.3,me:"scroll_right",ease:"cubic"});setTimeout(Arrows,1e3)}function ScrollLeft(){var e=control.scrollLeft-(container.offsetWidth+style.bgpaddingleft+style.bgpaddingright)+60;new Motion({mc:control,type:"scrollleft",to:e,time:.3,me:"scroll_left",ease:"cubic"});setTimeout(Arrows,1e3)}function PlaylistBack(e){""==e?UpdatePlaylist(0):exist(o.playlist_dic[e])&&UpdatePlaylist(e),open_action=""}function HistoryPlaylist(e){fvalue[e].innerHTML="",css(ftitle[e],{color:style.historycolor}),1==style.historytitlestrike&&css(ftitle[e],{"text-decoration":"line-through"}),-1<style.historytitlea&&css(ftitle[e],{opacity:style.historytitlea}),css(fbg[e],{backgroundColor:style.historybgcolor}),-1<style.historybga&&css(fbg[e],{opacity:style.historybga})}function Action2(e){if(exist(f2action[e])){for(var t in Retimer(),0==f2i("quality",e)&&o.actions.SetQuality(f2action[e].substr(7)),0==f2i("audiotrack",e)&&o.actions.SetAudioTrack(f2action[e].substr(10)),0==f2i("subtitle",e)&&(o.sbt||(o.sbt=new PluginSub),o.sbt.SetSubtitle(f2action[e].substr(8))),0==f2i("channel",e)&&1==v.channels&&o.channels.SetChannel(f2action[e].substr(7)),0==f2i("share",e)&&(o.share&&o.share.api(shr[e]),HideControl()),0==f2i("color",e)&&(Remove2(),Action(0,0,clr[e])),o.menuproc)o.menuproc.hasOwnProperty(t)&&0==f2i(t,e)&&o.media.menufltr(t,e);0<f2i("timer",e)&&(f2title[e].innerHTML==Lang("off")?(SettingsTimers(open_action+"0"),Value(open_settings),"offsettimer"==open_action&&SettingsTimers("offsetwrite"),Home()):"sleeptimer"==open_action&&1==style.sleep2&&(SettingsTimers("sleep2",e),Value(open_settings),Home())),0==f2i("speed",e)&&(o.actions.SetSpeed(f2action[e].substr(5)),UpdateSpeed(),setTimeout(HideControl,200))}}function UpdateSpeed(){for(var e=0;e<faction.length;e++)"speed"==faction[e]&&(Value(e),"speed"==open_action&&(Remove2(),Action(e,0)))}function CreateItem(x,i,toend){exist(eval(x))&&(eval(x)[i]=createElement("div"),i<2||"f"==x||"quality"!=open_action||1==toend?(1==style.floatleft?control:control2).appendChild(eval(x)[i]):1==style.floatleft?control.insertBefore(eval(x)[i],eval(x)[i-1]):control2.insertBefore(eval(x)[i],eval(x)[2==toend?i-2:i-1]),"f"==x&&attr(eval(x)[i],{fid:i}),"f2"==x&&attr(eval(x)[i],{f2id:i}),eval(x+"bg")[i]=createElement("div"),eval(x)[i].appendChild(eval(x+"bg")[i]),eval(x+"img")[i]=createElement("div"),eval(x)[i].appendChild(eval(x+"img")[i]),css(eval(x+"img")[i],{position:"absolute",right:0,top:0,width:"100%",height:"100%",pointerEvents:"none"}),eval(x+"title")[i]=createElement("div"),eval(x)[i].appendChild(eval(x+"title")[i]),eval(x+"value")[i]=createElement("div"),eval(x)[i].appendChild(eval(x+"value")[i]),"f2"==x&&"settings"==is&&0==style.activeicon&&hide2(eval(x+"value")[i]))}function StyleItem(e,t,i,o,s){css(e,{position:"relative",right:0,top:0,cursor:"pointer",height:"auto",width:"100%",overflow:"hidden",display:"block","line-height":"1.5em"}),style.floatmarginright&&1==style.floatleft&&css(e,{marginRight:style.floatmarginright}),1==style.floatleft&&css(e,{display:"inline-block","vertical-align":"top","white-space":"normal"}),css(t,{position:"absolute",right:0,top:0,width:"100%",height:"100%",backgroundColor:style.bgcolor,opacity:style.bga,pointerEvents:"none",transition:"opacity 0.2s linear,background .2s linear"}),css(i,{position:"relative",right:0,top:0,float:style.align||"left",color:style.color,"padding-top":style.paddingtop,"padding-right":style.paddingright,"padding-bottom":style.paddingbottom,"padding-left":style.paddingleft,pointerEvents:"none",opacity:style.a,transition:"opacity 0.2s linear,color 0.2s linear"}),css(o,{position:"relative",right:0,top:0,float:style.valuealign||"right","padding-top":style.paddingtop,"padding-right":style.paddingright,"padding-left":style.paddingleft,pointerEvents:"none","font-size":style.valuefontsize*existv(v.globalfs,1),opacity:style.a,color:style.valuecolor,transition:"opacity 0.2s linear,color 0.2s linear"}),1==style.limitwidth?(css(e,{"max-width":style.limitmaxwidth+"px!important"}),css(i,{"max-width":style.limitmaxwidth-70+"px!important"})):1==style.floatleft?1==style.floatlimitwidth&&(css(e,{width:style.floatwidth}),css(i,{width:style.floatwidth-70})):(css(i,{"white-space":"nowrap"}),css(o,{"white-space":"nowrap"}))}function Home(){for(var e=1;e<f.length;e++)exist(f[e])&&(1==style.floatleft?f[e].style.display="inline-block":f[e].style.display="block");Retimer(),Remove2(),Resize(),open_action="",open_settings=-1}function Remove2(){for(var e=0;e<f2.length;e++)f2[e]&&((1==style.floatleft?control:control2).removeChild(f2[e]),f2[e]=null);f2=[],open_action=""}function Width(){return control.offsetWidth}function ResizePlaylist(){var e;"playlist"==is&&(1!=style.floatleft&&1!=style.width100||(e=o.screen_w-style.marginright-style.marginleft,css(container,{width:e}),css(control,{width:e}),control2&&css(control2,{width:e})))}function Resize(){var e;removed||("settings"==is&&(o.controls&&o.controls.resizeSettings(),e=1==style.nohead&&1<f.length?f[1]:f[0]),"playlist"==is&&(ResizePlaylist(),o.controls&&o.controls.resizePlaylist(),e=f[0],1==v.change2playlist&&MainUpdateSize()),1<f.length&&!e&&(f[1]&&(e=f[1])),2<f.length&&!e&&(f[2]&&(e=f[2])),e&&0==e.offsetWidth&&0<f2.length&&(e=f2[0]),0<control.offsetWidth-control.clientWidth&&e&&1!=style.floatleft?(exist(arr_up)&&css(arr_up,{width:control2.offsetWidth}),exist(arr_down)&&css(arr_down,{width:control2.offsetWidth}),style.scrollwidth=control.offsetWidth-e.offsetWidth-(control.clientWidth-e.clientWidth)):style.scrollwidth=0)}function VisibleItems(){for(var e=0,t=0,i="",o=1;o<f.length;o++)exist(f[o])&&"visible"==f[o].style.visibility&&(e++,i=faction[t=o]);return[e,t,i]}function SubtitleSettings(e){sub_settings_on=!sub_settings_on,SubtitleSettingsMenu(e)}function SubtitleSettingsMenu(){Home();for(var e=0;e<faction.length;e++)"subtitle"==faction[e]&&Action(e,_cstm)}function Retimer(){clearTimeout(settimer),settimer=setTimeout(function(){o.setaction=!1},2e3)}function SubtitleTimerMenu(){var e=open_action;Home();for(var t=0;t<faction.length;t++)faction[t]==e&&Action(t,0)}function HideControl(e){"playlist"==is&&1==v.playlist.always2||"settings"==is&&1==v.settings.always||("playlist"==is&&1==v.playlist.droplist&&1!=v.playlist.dropnohide?(o.droplist&&o.droplist.Hide(),is_visible=!1):1==e&&(1!=style.hidesmoothly||1!=style.always)||o.system.tv?(css(container,{visibility:"hidden",opacity:0,top:-2e3}),is_visible=!1):(new Motion({mc:container,type:"alpha_div",to:0,time:.1,me:is,ease:"elastic"}),hidetimeout=setTimeout(function(){css(container,{visibility:"hidden",opacity:0,top:-2e3}),is_visible=!1},200)),"playlist"==is&&1==v.playlist.hidecontrol&&o.controls&&o.controls.toggleControl("action","playlist",!0),clearInterval(wheelinterval))}function ShowTimeout(){clearInterval(showinterval),justshow=!1}function showById(e){exist(o.playlist_dic[e])&&(plfolder="",UpdatePlaylist(0),FindPlStart(o.playlist_dic[e]),UpdateVars0(e),Action(o.playlist_dic[e].pjs_i,0),UpdateVars(e))}function ScrollTo(e){var t;f[e]&&!removed&&(1==style.floatleft?(t=f[e].offsetLeft-20,new Motion({mc:control,type:"scrollleft",to:t,time:.3,me:"scroll_left",ease:"cubic"})):(t=f[e].offsetTop-container.offsetHeight/2+20,new Motion({mc:control,type:"scroll",to:t,time:.3,me:"scroll_down",ease:"cubic"})),setTimeout(Arrows,1e3))}function Shuffle(e){for(var t,i=Object.keys(e),o=0;o<i.length&&!(t=e[i[i.length*Math.random()<<0]]);o++);return t}function Menuproc(e){-1<mpi[e]&&Value(mpi[e]),f2value[0]&&(f2value[0].innerHTML="scale"==open_action?Math.round(100*o.mediascale.x)+"%":FltrVal(open_action))}function FltrVal(e){return"scale"==e?Math.round(100*o.mediascale.x)+"%":Math.round(100*existv(o.fltrs[e],o.menuproc[e]))+"%"}function f2i(e,t){return f2action[t].indexOf(e)}function FindPlStart(e){-1!=e.pjs_parent_i?(FindPlStart(o.playlist_dic[e.pjs_parent]),UpdatePlaylist(e.pjs_parent)):UpdatePlaylist(0)}this.UpdateTimer=function(e){Value(o[e+"_i"])},this.Arrows=function(){1==style.scrollarrows&&Arrows()},this.UpdateSpeed=function(){UpdateSpeed()},this.Exist=function(e){for(var t=0;t<faction.length;t++)if(faction[t]==e)return!0;return!1},this.resizePlaylist=function(){ResizePlaylist()},this.SubOpt=function(){sub_settings_on=!0,this.show(),_cstm=2,SubtitleSettingsMenu()},this.c=function(){return container},this.co=function(){if(container.contains(control))return control},this.s=function(e){return style[e]},this.ss=function(e){return style},this.show=function(){var e;Home(),clearTimeout(hidetimeout),is_visible=!0,"playlist"==is&&1==v.playlist.droplist?o.droplist&&o.droplist.Show():(css(container,{visibility:"visible",opacity:1,transition:"opacity 0.2s linear"}),1==(e=VisibleItems())[0]&&("quality"==e[2]||"audiotrack"==e[2]||"subtitle"==e[2]||"speed"==e[2]||e[2]in o.menuproc||0<e[2].indexOf("timer"))&&Action(e[1],0)),o.controls&&("settings"==is&&o.controls.resizeSettings(),"playlist"==is&&(o.controls.resizePlaylist(),1==v.playlist.hidecontrol&&o.controls.toggleControl("action","playlist",!1))),o.system.safari&&(css(control,{"min-width":"auto"}),1!=style.floatleft&&css(control2,{"min-width":"auto"})),justshow=!0,clearInterval(showinterval),showinterval=setInterval(ShowTimeout,100)},this.open=function(e){Action(e,1)},this.hide=function(e){HideControl(e)},this.SetQuality=function(){for(var e=0;e<faction.length;e++)"quality"==faction[e]&&(Value(e),1<o.files_quality.length&&show(f[e]),"quality"==open_action&&(Remove2(),Action(e,_cstm)))},this.Airplay=function(){for(var e=0;e<faction.length;e++)"airplay"==faction[e]&&Value(e)},this.SetSetting=function(e){for(var t=0;t<faction.length;t++)faction[t]==e&&(Value(t),o["files_"+e]&&1<o["files_"+e].length&&show(f[t]),open_action==e&&(Remove2(),Action(t,_cstm)))},this.SetSubtitle=function(){for(var e=0;e<faction.length;e++)if("subtitle"==faction[e]){if(Value(e),o.files_subtitle&&0<o.files_subtitle.length){var t=!1;if(o.subs){for(var i=0;i<o.subs.length;i++)if(""!=o.subs[i]){t=!0;break}}else t=!0;t&&show(f[e])}"subtitle"==open_action&&(Remove2(),Action(e,0))}},this.updatePlaylist=function(e){if(o.playlist=e,UpdatePlaylist(0),exist(v.plstart)){if(0!=v.plstart.indexOf("x-"))for(var t in o.playlist_dic)o.playlist_dic.hasOwnProperty(t)&&o.playlist_dic[t].pjs_id==v.plstart&&(v.plstart=t);exist(o.playlist_dic[v.plstart])?(FindPlStart(o.playlist_dic[v.plstart]),ActionPlaylist(t=o.playlist_dic[v.plstart].pjs_i),1==v.playlist.openplaylistroot&&1!=style.droplist?(UpdatePlaylist(0),setTimeout(function(){Resize()},500)):setTimeout(function(){ScrollTo(t),Resize()},500),v.plstart=void 0):ActionPlaylist(0)}else ActionPlaylist(0);1==style.droplist&&(exist(o.droplist)||(o.droplist=new PluginDroplist))},this.playById=function(e){exist(o.playlist_dic[e])&&(FindPlStart(o.playlist_dic[e]),Action(o.playlist_dic[e].pjs_i,0),ScrollTo(o.playlist_dic[e].pjs_i))},this.openById=function(e){exist(o.playlist_dic[e])&&(FindPlStart(o.playlist_dic[e]),o.playlist_dic[e].file?(ActionPlaylist(o.playlist_dic[e].pjs_i),UpdateVars0(e),o.actions.NewFile(o.playlist_dic[e].file,1),UpdateVars(e),ScrollTo(o.playlist_dic[e].pjs_i),o.droplist&&o.droplist.Update()):o.playlist_dic[e].folder&&UpdatePlaylist(e))},this.PlaylistNext=function(){var e,t;if(autonextopenfolder=!0,i=parseInt(plx)+1,""!=plid&&(o.plhistory[plid]=!0,shuffle=removebykey(shuffle,plid)),1==v.shuffle){if(null==(i=Shuffle(shuffle)))if(1==v.shuffle8||1==v.playlist.autoplaylist){for(var i in shuffle_.sort(function(e,t){return Math.random()-.5}),shuffle_)shuffle_.hasOwnProperty(i)&&(shuffle[i]=shuffle_[i]);i=Shuffle(shuffle)}else o.actions.ShuffleEnd()}else"playlistfolder"!=faction[i]&&-1!=plx||""==plid||(e=Object.keys(o.playlist_dic).indexOf(plid))<Object.keys(o.playlist_dic).length&&((t=o.playlist_dic[Object.keys(o.playlist_dic)[e+1]])&&(exist(t.folder)&&(t=o.playlist_dic[Object.keys(o.playlist_dic)[e+2]]),this.openById(t.id),i=-1,o.actions.Play()));-1<i&&(Action(i,0),ScrollTo(i))},this.menuproc=function(e){Menuproc(e)},this.PlaylistNextExist=function(){if(1==v.shuffle)return 0<Object.keys(shuffle).length;var e=!1;return o.playlist_dic&&(e=Object.keys(o.playlist_dic).indexOf(plid)<Object.keys(o.playlist_dic).length-1),e},this.PlaylistRewind=function(){exist(o.pl_first_id)&&showById(o.pl_first_id)},this.PlaylistPrevExist=function(){var e,t,i=0<plx;return o.playlist_dic&&(i=0<(t=(e=Object.keys(o.playlist_dic)).indexOf(plid)),1==t&&exist(o.playlist_dic[e[0]].folder)&&(i=!1)),i},this.PlaylistExist=function(){return exist(o.playlist_dic)},this.PlaylistPrev=function(){var e,t,i;autoprevopenfolder=!0,this.PlaylistPrevExist()&&((e=parseInt(plx)-1)<0?0<(t=Object.keys(o.playlist_dic).indexOf(plid))&&((i=o.playlist_dic[Object.keys(o.playlist_dic)[t-1]])&&(exist(i.folder)&&(i=o.playlist_dic[Object.keys(o.playlist_dic)[t-2]]),i&&(this.openById(i.id),o.actions.Play()))):(Action(e,0),ScrollTo(e)))},this.PlaylistHere=function(){0<plx&&ScrollTo(plx)},this.g=function(e){switch(e){case"width":return Width();case"height":return container.offsetHeight;case"top":return style.margintop;case"scroll_height":return control.scrollHeight;case"margin_bottom":return style.marginbottom;case"x":return int(container.style.left);case"y":return int(container.style.top);case"opacity":return container.style.opacity;case"show":return is_visible;case"open":return open_settings;case"key":return key;case"motion_id":return key+motion_id;case"empty":return empty;case"playlist":return"playlist"==is;case"activeicon":return _activeIcon;case"butplstart":return o.playlist_dic[o.butplstart]?o.playlist_dic[o.butplstart].title:"";case"title2":return v.title2||""}},this.prenewpl=function(){plid="",v.plstart=""},this.empty=function(){if("settings"!=is)return"playlist"==is?0==f.length:empty;for(var e=0,t=1;t<11;t++){if("quality"==faction[t]){var i=o.files_quality.length;if(exist(v.forbidden_quality))for(var s=v.forbidden_quality.split(","),r=0;r<s.length;r++)-1<o.files_quality.indexOf(s[r])&&i--;0<i&&(1<i||1==i&&1!=o.files_quality&&1==style.show1value)&&e++}if("airplay"==faction[t]&&o.airplay&&e++,"download"==faction[t]&&("native"!=o.file_type&&!v.download||e++),"audiotrack"==faction[t]&&0<o.files_audiotrack.length&&e++,"channel"==faction[t]&&1==v.channels&&0<o.files_channel.length&&e++,"subtitle"==faction[t]){if(exist(o.subs))for(var n=0;n<o.subs.length;n++)if(""!=o.subs[n]){e++;break}1==e&&1==o.subload&&(e=0),1==v.sub_upload&&1==v.sub_upload0&&e++}"speed"==faction[t]&&"vimeo"!=o.file_type&&e++,(faction[t]in o.menuproc||"share"==faction[t]||"color"==faction[t])&&e++,faction[t]&&0<faction[t].indexOf("timer")&&e++,1==v.settings[is+t+"hide"]&&e--}return 0==e},this.Remove=function(){container.parentNode==o.frame&&(container.removeChild(control),o.frame.removeChild(container),o.droplist&&o.droplist.Remove(),removed=!(control=container=null))}};function PluginShare_telegram(){this.share=function(){return"https://t.me/share/url?url="},this.icon=function(e){return"<path d='M15.774328,4.61928677 C15.6001007,4.47186369 15.3186567,4.45846159 14.8361812,4.60588467 L14.8361812,4.60588467 C14.5011287,4.71310145 11.525863,5.83887768 8.89905178,6.92444761 C6.54028255,7.90280076 4.62378254,8.76053503 4.39594688,8.86775181 C4.14130702,8.9481644 3.591821,9.18940216 3.56501681,9.5646609 C3.55161471,9.80589866 3.75264618,10.0203322 4.14130702,10.1945595 C4.55677205,10.4089931 6.39285947,11.0254896 6.78152031,11.1461085 C6.91554129,11.6017798 13.4557651,6.66394451 13.4959714,6.82476969 C13.5495798,7.06600745 8.27203981,11.6399635 8.3524524,11.6935719 C8.3658545,11.706974 7.97987656,14.3468113 8.00668076,14.3602134 C8.04688705,14.3870176 8.0174202,14.6306539 8.13718414,14.7378707 C8.25694808,14.8450875 8.2536879,14.8345227 8.51661242,14.8345227 C9.01249004,14.4324598 9.91761122,13.545084 10.158849,13.2904441 C11.2176147,14.1213742 12.3701951,15.046119 12.4774119,15.1533357 L12.490814,15.1667378 C12.7454539,15.3811714 13.0134958,15.5017903 13.2547336,15.5017903 C13.3351462,15.5017903 13.4155588,15.4883882 13.4959714,15.461584 C13.7774154,15.3677693 13.9784469,15.0997273 14.0454574,14.7378707 C14.0454574,14.7244686 14.0588595,14.6708602 14.0856637,14.5770455 C14.541335,12.593535 14.9031916,10.8512623 15.1980378,9.39043363 C15.4794819,7.95640915 15.7073175,6.54918887 15.8413385,5.79867139 C15.8681427,5.61104201 15.8949469,5.46361894 15.908349,5.36980425 C15.9485553,5.10176229 15.9753595,4.79351404 15.774328,4.61928677 Z' fill='"+e+"' fill-rule='nonzero'></path>"}}function PluginShare_webshare(){this.share=function(){if(navigator.canShare)try{var e={url:exist(v.url)?v.url:o.href};exist2(v.websharetext)&&(e.text=v.websharetext),navigator.share(e)}catch(e){console.log(e)}return""},this.icon=function(e){return navigator.canShare?"<path d='M7.08813333,10 C7.08813333,10.0444889 7.07802222,10.0863778 7.07542222,10.1305778 L11.7333222,12.4588778 C12.1321333,12.1211667 12.6423111,11.9104222 13.2059333,11.9104222 C14.4731444,11.9108556 15.5,12.9377111 15.5,14.2046333 C15.5,15.4731444 14.4731444,16.5 13.2059333,16.5 C11.9377111,16.5 10.9118667,15.4731444 10.9118667,14.2046333 C10.9118667,14.1589889 10.9219778,14.1181111 10.9245778,14.0739111 L6.26667778,11.7456111 C5.86671111,12.0820222 5.35768889,12.2927667 4.79406667,12.2927667 C3.527,12.2927667 2.5,11.2669222 2.5,10 C2.5,8.73177778 3.527,7.70463333 4.79406667,7.70463333 C5.35768889,7.70463333 5.86685556,7.91667778 6.26667778,8.25308889 L10.9245778,5.92478889 C10.9219778,5.8803 10.9118667,5.83841111 10.9118667,5.79276667 C10.9118667,4.527 11.9377111,3.5 13.2059333,3.5 C14.4731444,3.5 15.5,4.527 15.5,5.79276667 C15.5,7.06098889 14.4731444,8.08813333 13.2059333,8.08813333 C12.6410111,8.08813333 12.1317,7.87608889 11.7333222,7.53837778 L7.07542222,9.86797778 C7.07787778,9.91246667 7.08813333,9.95435556 7.08813333,10' fill='"+e+"'  fill-rule='evenodd'></path>":""}}var MediaYoutube=function(t,e){var i=!1;0==t.indexOf("intro")&&(i=!0,t=t.substr(5));var s,r,n,a,l,c,d=YoutubeID(t),u=!1,h=!1,f=!1,p=!1,g=!0,m=[],y=1,b=!1,w=0,k=0,x=!1,A="pljs_yt_"+v.id+(i?"intro":""),T=createElement("div");function _(){show2(a)}function E(){1!=v.ytcl&&hide2(a)}function S(){1==v.preload||i?u||L():o.actions.MediaReady()}function L(){var e;"YT"in window&&exist(YT.Player)&&!u?(log("Youtube Init"),e=0,1==v.youtubecontrols&&(e=1),0<o.seekto&&(w=parseInt(o.seekto)),r=new YT.Player(A,{height:o.container_h,width:o.container_w,videoId:d,playerVars:{enablejsapi:1,playerapiid:A,html5:1,disablekb:1,autohide:1,playsinline:(0==v.playsinlineonmobile||1!=v.playsinlineonmobileiphone&&o.system.iphone)&&o.system.mobile?0:1,iv_load_policy:3,controls:e,showinfo:0,modestbranding:1,rel:0,autoplay:i?1:0,loop:0},events:{onReady:C,onStateChange:P,onError:j,onPlaybackQualityChange:M}}),0<o.seekto&&(o.seekto=void 0),R(),u=!0):setTimeout(L,500)}function C(){if(o.media)if(log("Youtube Ready"),h=!0,clearTimeout(n),o.actions.StopWaiting(),i)o.system.mutedautoplay&&o.actions.Mute(),r.playVideo(),o.vast.ytReady();else if(1==v.autoplay&&o.system.mutedautoplay&&!o.acted&&(o.actions.Mute(),o.system.mobile&&(clearInterval(c),c=setInterval(O,300))),0==v.preload?r.playVideo():o.actions.MediaReady(),o.media.onDuration(),1!=y&&H(y),o.media.onMeta(),o.actions.LoadedData(),R(),1==v.yttitle)try{r.getVideoData()&&exist(r.getVideoData().title)&&(v.title=r.getVideoData().title,o.actions.Title("title"))}catch(e){}}function O(){var e=r.getPlayerState();2!=e&&-1!=e||(o.controls.Pause(),o.controls.StopWaiting(),clearInterval(c)),1==e&&clearInterval(c)}function P(e){if(1==v.ytlog&&log("YT",e.data),i)e.data==YT.PlayerState.ENDED&&o.vast.ytEnded(),e.data,YT.PlayerState.PLAYING;else{if(e.data==YT.PlayerState.PLAYING){if(1==k&&(k=0,C()),o.play||o.actions.Play(),0<w&&(r.seekTo(w,!0),w=0,o.seekto=void 0),_(),h=f=!0,p?r.pauseVideo():(o.media.onPlay(),o.media.onTimeupdate()),function(){if(!x){var e=r.getAvailableQualityLevels()+"";if(""!=e&&null!=e){o.files_quality=e.split(","),o.files_quality=o.files_quality.reverse(),0!=v.ytautoquality||-1<(e=o.files_quality.indexOf("auto"))&&o.files_quality.splice(e,1);for(var t=0;t<o.files_quality.length;t++)o.files_quality[t]=N(o.files_quality[t]);x=!0,B(r.getPlaybackQuality())}}}(),exist(v.default_quality)){for(var t=0;t<o.files_quality.length;t++)v.default_quality==o.files_quality[t]&&z(t);v.default_quality=null}else if(exist(o.default_quality)){for(t=0;t<o.files_quality.length;t++)o.default_quality==o.files_quality[t]&&z(t);o.default_quality=null}b=!1}-1==e.data&&b&&o.play&&(o.actions.StopWaiting(),b=!1,!o.nopause&&o.play&&o.actions.Pause()),e.data,YT.PlayerState.PAUSED,e.data==YT.PlayerState.ENDED&&(0<v.start&&(w=v.start),o.media.onEnded(),o.media.onDuration()),e.data==YT.PlayerState.BUFFERING&&(o.play,o.play&&(b=!0,I())),e.data,YT.PlayerState.CUED}}function j(e){i?o.vast.ytError():(2==e.data&&(s="wrong youtube id"),5==e.data&&(s="network empty"),101!=e.data&&150!=e.data&&100!=e.data||(s="this video is unavailable"),1==v.customyterrors&&exist(v.customyterror)&&(s=v.customyterror),1!=v.yterrors?o.media.onError():hide(o.poster))}function I(){o.media?o.media.onWaiting():n=setTimeout(I,100)}function M(e){B(e.data)}function B(e){o.current_quality=o.files_quality.indexOf(N(e+"")),o.controls.QualityChanged(o.current_quality)}function D(){var e=-1;h&&(e=r.getPlayerState());var t=1!=e&&3!=e?-1==e?"paused":"":"playing";return 2==e&&(t="paused",o.play&&(o.controls.Pause(),o.actions.StopWaiting())),5==e&&(t="paused"),0==e&&(t="ended"),t}function R(){exist(r)&&r.setSize(o.screen_w,o.screen_h)}function N(e){var t="hd1080"==e?"1080p":"hd720"==e?"720p":"large"==e?"480p":"medium"==e?"360p":"small"==e?"240p":"tiny"==e?"160p":e;return 1==v.nameofyoutubequality&&(t=Lang(t)),"auto"==e&&(t=Lang("auto")),m[t]=e,t}function F(){return h?r.getCurrentTime():0}function H(e){r&&r.setPlaybackRate(e),y=e}function z(e){h&&exist(o.files_quality[e])&&(e=m[o.files_quality[e]],g="auto"==e,F(),r.setPlaybackQuality(e))}function q(e){t=e,r&&(k=1,r.loadVideoById(e,0))}T.setAttribute("id",A),e.appendChild(T),o.airplay=!1,i||o.actions.AirplayChanged(),o.system.mobile&&(v.preload=1),1!=v.youtubecontrols&&(a=createElement("div"),e.appendChild(a),css(a,{position:"absolute",top:0,left:0,"background-color":"#ff0000",height:"100%",width:"100%",opacity:0}),a.addEventListener("dblclick",function(e){e.cancelBubble=!0}),o.system.mobile?(a.addEventListener("touchstart",function(e){e.cancelBubble=!0}),a.addEventListener("click",function(e){e.cancelBubble=!0}),a.addEventListener("touchend",function(e){e.cancelBubble=!0,ScreenClick(e),1==v.screenclick&&(setTimeout(E,100),setTimeout(_,1e3))})):a.addEventListener("mousemove",function(e){var t=!0;1==v.vast&&(exist(v.preroll)&&!f&&(t=!1),exist(v.playroll)&&"paused"==D()&&0<F()&&(t=!1)),t&&1==v.screenclick&&1!=v.ytcl&&(hide2(this),setTimeout(_,2e3))}),1==v.screenclick&&1!=v.ytcl1&&hide2(a)),1==v.preload&&0==v.autoplay&&I(),window.YT?S():(window.onYouTubeIframeAPIReady=function(){S();for(var e=0;e<pljssglobal.length;e++)pljssglobal[e].api("id")!=v.id&&pljssglobal[e].api("isyoutube")&&pljssglobal[e].api("youtubeready")},(l=Script("youtube.com/iframe_api","youtube.com/iframe_api","youtube_iframe_api"))&&(l.onerror=function(e){o.actions.MediaReady(),1!=v.yterrors&&(s="YouTube API Error",o.media.onError())})),this.size=function(){return{width:0,height:0}},this.src=function(e){d=YoutubeID(e),0<o.seekto&&(w=parseInt(o.seekto)),q(d)},this.YoutubeReady=function(){S()},this.Play=function(){h?r.playVideo():u||L()},this.Pause=function(){h&&r.pauseVideo()},this.Toggle=function(){h&&("playing"==D()?r.pauseVideo():r.playVideo())},this.Seek=function(e){h&&r.seekTo(e,!0)},this.tag=function(){return!1},this.Mute=function(){h&&r.mute()},this.Unmute=function(){h&&r.unMute()},this.Volume=function(e){h&&r.setVolume(100*e)},this.isPlaying=function(){return"playing"==D()},this.isLive=function(){return!1},this.setQuality=function(e){z(e)},this.setSpeed=function(e){H(e)},this.ready=function(){return h},this.status=D,this.time=F,this.duration=function(){var e=h?r.getDuration():0;return exist(v.end)&&(e=v.end),e},this.loaded=function(){var e=0;return h&&(e=r.getVideoLoadedFraction()*r.getDuration()),e},this.resize=function(){R()},this.errorMessage=function(){return s},this.auto=function(){return 1==v.ytautoquality&&g},this.playId=function(e){q(e)},this.BeforeVast=function(){o.system.mobile&&o.system.android?(this.Play(),p=!0):"playing"==D()&&this.Pause()},this.AfterVast=function(){p=!1},this.nativeControls=function(){return!0},this.Remove=function(){h&&r.destroy(),x=h=!1;try{T&&e.removeChild(T),e.removeChild(a)}catch(e){}}},TimeStore=function(){var e="",t=0,i=0;function s(e){e&&0<e.indexOf("--")&&(e=e.split("--"),t=parseFloat(e[0]),1==v.timestoreunauto&&0<t&&1==v.autoplay&&(v.autoplay=0),1==v.timestorejustbut?o.butseekto=t:(i=parseFloat(e[1]),o.seekto=t))}o.storage&&1!=v.timestoredontuse&&(null!=localStorage.getItem("pljsplayfrom_"+v.id+o.href2)&&(e=localStorage.getItem("pljsplayfrom_"+v.id+o.href2)),1==v.playedstore&&null!=localStorage.getItem("pljsplayed_"+v.id+o.href2)&&(o.playedstore=localStorage.getItem("pljsplayed_"+v.id+o.href2)),exist(v.cuid)&&(null!=localStorage.getItem("pljsplayfrom_"+o.d+v.cuid)&&(e=localStorage.getItem("pljsplayfrom_"+o.d+v.cuid)),1==v.playedstore&&null!=localStorage.getItem("pljsplayed_"+o.d+v.cuid)&&(o.playedstore=localStorage.getItem("pljsplayed_"+o.d+v.cuid))),o.playedstore&&1==v.playedstore&&(o.playedstored=o.playedstore.split(",")),0==e.indexOf("{")&&(1==v.timestorejustbut?o.butplstart=e.substr(1,e.indexOf("}")-1):o.plcontinue=v.plstart=e.substr(1,e.indexOf("}")-1),e=e.substr(e.indexOf("}")+1),1==v.timestore0plroot&&(v.playlist.openplaylistroot=0)),s(e)),this.updateCuid=function(){exist(v.cuid)&&(null!=localStorage.getItem("pljsplayfrom_"+o.d+v.cuid)?(s(e=localStorage.getItem("pljsplayfrom_"+o.d+v.cuid)),o.controls.Played(t,i),o.controls.Duration(t,i),v.duration=i):(o.seekto=0,o.controls.Played(0,0),o.controls.Duration(0,0),v.duration=0))},this.write=function(e,t){var i;o.media.isLive()&&1==v.timestorenolive||(i=(new Date).getTime(),localStorage.setItem("pljsplayfrom_"+(exist(v.cuid)?o.d+v.cuid:v.id+o.href2),(exist(o.plid)?"{"+o.plid+"}":"")+e+"--"+t+"--"+i))},this.writePl=function(e){o.playedstore=(o.playedstore?o.playedstore+",":"")+e,localStorage.setItem("pljsplayed_"+(exist(v.cuid)?o.d+v.cuid:v.id+o.href2),o.playedstore)},this.flag=function(){return{t:t,d:i}}},PluginSub=function(){var n,f=[],s=[],r=!0,a=-1;function p(e){if("11"!=(e=e||"")){var t=0,i=!0,s="";o.subs=e.split(","),o.files_subtitle=[],o.current_subtitle=-1,StorageSupport()&&1==v.sub_store?null!=localStorage.getItem("pljssubtitle")&&(s=localStorage.getItem("pljssubtitle")):o.remember_sub&&(s=o.remember_sub);for(var r=0;r<o.subs.length;r++)0==o.subs[r].indexOf("#0")&&(o.subs[r]=fd0(o.subs[r])),0==o.subs[r].indexOf("#"+v.enc2)&&(o.subs[r]=o[o.fd[0]](o.subs[r])),0==o.subs[r].indexOf("#"+v.enc3)&&0<o.subs[r].indexOf(v.file3_separator)&&(o.subs[r]=o[o.fd[1]](o.subs[r])),0==o.subs[r].indexOf("[")&&1<o.subs[r].indexOf("]")?(o.files_subtitle[r]=o.subs[r].substr(o.subs[r].indexOf("[")+1,o.subs[r].indexOf("]")-1),o.subs[r]=o.subs[r].substr(o.subs[r].indexOf("]")+1),i=!1):(o.files_subtitle[r]=o.subs[r].substr(o.subs[r].lastIndexOf("/")+1),o.files_subtitle[r]=o.files_subtitle[r].substr(0,o.files_subtitle[r].lastIndexOf("."))),0==o.subs[r].indexOf("#0")&&(o.subs[r]=fd0(o.subs[r])),0==o.subs[r].indexOf("#"+v.enc2)&&(o.subs[r]=o[o.fd[0]](o.subs[r])),0==o.subs[r].indexOf("#"+v.enc3)&&0<o.subs[r].indexOf(v.file3_separator)&&(o.subs[r]=o[o.fd[1]](o.subs[r]));1<o.files_subtitle.length&&1==v.sub_all&&(o.files_subtitle.push(StringVar("sub_all_title",Lang("together"))),o.subs.push("all")),0<o.files_subtitle.length&&1==v.sub_off&&(1==v.sub_off0?(n=0,t++,o.files_subtitle.unshift(StringVar("sub_off_title",Lang("off"))),o.subs.unshift("")):(o.files_subtitle.push(StringVar("sub_off_title",Lang("off"))),o.subs.push(""),n=o.files_subtitle.length-1));for(r=0;r<o.subs.length;r++)exist(v.default_subtitle)&&v.default_subtitle==o.files_subtitle[r]&&(t=r,o.current_subtitle=r,v.subtitle_start=1),""!=s&&s==o.files_subtitle[r]&&(t=r,o.current_subtitle=r);1==v.sub_off&&0==v.subtitle_start&&(o.current_subtitle=n),exist(o.controls)&&o.controls.SubtitleChanged(),1==v.subtitle_start?(o.current_subtitle=t,(1==v.sub_all&&"all"==o.subs[t]?c:l)(o.current_subtitle)):(i&&o.subs.length<3&&l(0==n?1:0),1!=v.sub_off&&(o.current_subtitle=-1))}else b()}function l(e){exist(o.subs[e])&&(-1<o.subs[e].indexOf(".")?(o.subsor=o.subs[e].split(" or "),o.sub_or=0,function t(e){var i=trim(o.subsor[o.sub_or]);var s=XHR(i);a=e;o.subload=1;s.onload=function(){o.subload=0,4==this.readyState&&200==this.status?(o.subtitle_on=!0,d(i,this.responseText,e)):o.sub_or+1<o.subsor.length?(o.sub_or++,t(a)):g("loading_error")};s.onerror=function(e){o.subload=0,o.sub_or+1<o.subsor.length?(o.sub_or++,t(a)):g("loading_error")};s.send()}(e)):0==o.subs[e].indexOf("upld")&&s[o.subs[e].substr(4)]&&d(o.files_subtitle[e],s[o.subs[e].substr(4)]))}function c(e){f[e]=Object(),f[e][0]=Array(),f[e][1]=Array();for(var t=0;t<o.subs.length;t++)setTimeout(l,500*t,t)}function g(e){log("subtitle not found or access denied"),o.files_subtitle[o.current_subtitle]&&-1==o.files_subtitle[o.current_subtitle].indexOf(Lang("loading_error"))&&(o.files_subtitle[o.current_subtitle]=o.files_subtitle[o.current_subtitle]+" ("+Lang(e)+")"),1==v.subtitle_errdel&&-1<a&&(o.subs[a]="",o.files_subtitle[a]=""),o.current_subtitle=-1,o.subtitle_on=!1,o.constrols?(o.controls.SubtitleChanged(),o.controls.refresh()):setTimeout(function(){o.controls&&(o.controls.SubtitleChanged(),o.controls.refresh())},100),exist(o.subtitle)&&(o.frame.removeChild(o.subtitle),o.subtitle=null)}function d(e,t,s){if(0==t.indexOf("#"+v.enc2)&&(t=o[o.fd[0]](t)),0==t.indexOf("#"+v.enc3)&&0<t.indexOf(v.file3_separator)&&(t=o[o.fd[1]](t)),-1<e.indexOf(".srt")||-1<e.indexOf(".ass")||-1<e.indexOf(".ssa")||-1<e.indexOf(".vtt")){var r=o.current_subtitle;exist(f[r])&&"all"==o.subs[r]||(f[r]=Object(),f[r][0]=Array(),f[r][1]=Array());var n=Array(),n=t.split(/\r|\n/),a=1,l=0,c=0,d=exist(v.subshift)?v.subshift:0;for(0<e.indexOf("shift=")&&(d=+e.substr(e.indexOf("shift=")+6)),i=0;i<n.length;i++){if(-1<e.indexOf(".srt")||-1<e.indexOf(".vtt"))if(-1<n[i].indexOf("--\x3e")&&-1<n[i].indexOf(":")){0==(l=+m(n[i].substr(0,n[i].indexOf("--\x3e")))+d)&&(l=1),c=+m(n[i].substr(n[i].indexOf("--\x3e")+4,12))+d,exist(f[r][0][l])||(f[r][0][l]="");for(var u=l;u<c;u++)f[r][1][u]=l;a++}else n[i]=trim(n[i]),""!=n[i]&&0<n[i].length&&n[i]!=a&&"WEBVTT"!=n[i]&&(f[r][0][l]=(f[r][0][l]&&""!=f[r][0][l]?f[r][0][l]+"<br>":"")+("all"==o.subs[r]&&0<s?"[sub2]":"")+n[i]+("all"==o.subs[r]&&0<s?"[/sub2]":""));if((-1<e.indexOf(".ass")||-1<e.indexOf(".ssa"))&&-1<n[i].indexOf("Dialogue:")){l=+m(n[i].substr(-1<e.indexOf(".ssa")?n[i].indexOf("=0")+3:12,12))+d,c=+m(n[i].substr(-1<e.indexOf(".ssa")?n[i].indexOf("=0")+14:23,10))+d;var h="";0<n[i].indexOf("0,,")?h=n[i].substr(n[i].indexOf("0,,")+3):0<n[i].indexOf("ffect,")&&(h=n[i].substr(n[i].indexOf("ffect,")+6)),null!=f[r][0][l]?f[r][0][l]+="\n"+("all"==o.subs[r]&&0<s?"[sub2]":"")+h+("all"==o.subs[r]&&0<s?"[/sub2]":""):f[r][0][l]=h,f[r][0][l]=f[r][0][l].replace(/{.*?}/,""),f[r][0][l]=f[r][0][l].replace(/\\\\N/,"<br>"),f[r][0][l]=f[r][0][l].replace(/\\N/,"<br>");for(u=l;u<c;u++)f[r][1][u]=l}}o.controls.SubtitleChanged(),o.actions.RenewSubtitle(),o.controls.refresh()}else""!=t?0==t.indexOf("[")?p(t):g("error"):(b(),o.controls.refresh())}function m(e){var t=e.split(":"),e=0;return 2==t.length&&t.unshift("00"),"00"!=t[0]&&(e+=3600*t[0]),"00"!=t[1]&&(e+=60*t[1]),e=10*(e+=+t[2].substr(0,2))+ +t[2].substr(3,1)}function u(e){exist(o.current_subtitle)&&(o.current_subtitle!=e?-1==e||1==v.sub_off&&e==n?h():(v.sub_shift=0,o.current_subtitle=e,o.subtitle_on=!0,v.subtitle_start=1,t(e),js("subtitle",o.files_subtitle[e]),o.controls.SubtitleChanged()):1!=v.sub_off&&h())}function t(e){exist(o.subs[e])&&(log("Subtitle",e),o.current_subtitle=e,exist(o.files_subtitle[e])&&(o.storage&&1==v.sub_store?localStorage.setItem("pljssubtitle",o.files_subtitle[e]):o.remember_sub=o.files_subtitle[e]),"hls"==o.file_type&&1==o.hls_subs?o.media.hlsDashSub(e,"hls"):"dash"==o.file_type&&1==o.dash_subs?o.media.hlsDashSub(e,"dash"):("all"==o.subs[e]?c:l)(o.current_subtitle))}function h(){js("subtitle","off"),o.current_subtitle=1==v.sub_off?n:-1,v.subtitle_start=0,o.subtitle_on=!1,o.controls.SubtitleChanged(),(o.hls_subs||o.dash_subs)&&t(o.current_subtitle),exist(o.subtitle)&&o.frame.removeChild(o.subtitle),o.subtitle=null}function y(){o.subtitle&&(css(o.subtitle,{position:"absolute",width:"100%","padding-left":"10%","padding-right":"10%",left:0,color:v.sub_color,"text-align":"center","box-sizing":"border-box"}),1==v.sub_fonted&&exist(v.sub_font)&&""!=v.sub_font&&css(o.subtitle,{"font-family":v.sub_font}),1==v.sub_shadow?css(o.subtitle,{"text-shadow":"1px 1px 2px black"}):css(o.subtitle,{"text-shadow":"none"}),1==v.sub_drag?PluginMovable(o.subtitle,"o.subdrag"):css(o.subtitle,{"pointer-events":"none"}))}function b(){o.current_subtitle=-1,o.subtitle_on=!1,o.thumbs_on=!1,v.subtitle=null,v.thumbnails=null,o.sub=null,o.subs=null,exist(o.controls)&&o.controls.SubtitleChanged(),o.files_subtitle=null,exist(o.subtitle)&&(o.frame.removeChild(o.subtitle),o.subtitle=null),o.current_subtitle=null,o.subtitle_on=!1}this.start=function(e){p(e)},this.SubUpload=function(){var t,e;o.subupld&&((t=o.subupld.files)[0]?((e=new FileReader).onload=function(e){e=e.target.result;s.push(e),o.current_subtitle=-1,40<(e=t[0].name).length&&(e=t[0].name.substr(0,15)+"..."+t[0].name.substr(-15)),1==v.sub_off&&1==v.sub_off0?(o.subs.push("upld"+(s.length-1)),o.files_subtitle.push(e+""),u(o.subs.length-1)):(o.subs.unshift("upld"+(s.length-1)),o.files_subtitle.unshift(e+""),1==v.sub_off&&n++,u(0)),o.subupld.value=""},e.readAsText(t[0])):o.subupld.click())},this.SetSubtitle=function(e){u(e)},this.ioff=function(){return n},this.show=function(e){var t,i;t=e,v.sub_shift&&(t-=+v.sub_shift),o.subtitle_on&&exist(o.subs)&&f&&(i=o.current_subtitle,(1!=v.subpausehide||o.play)&&exist(f[i])&&exist(f[i][1])&&(e=parseInt(10*t),exist(f[i][1][e])?(t="",t=f[i][0][f[i][1][e]],exist(o.subtitle)||(o.subtitle=createElement("div"),o.frame.appendChild(o.subtitle),y()),r&&show2(o.subtitle),o.subdrag||(o.controls.ToolbarHidden()||v.sub_bottom>v.toolbar.h?css(o.subtitle,{position:"absolute",top:"auto",left:0,bottom:+v.sub_bottom}):css(o.subtitle,{position:"absolute",top:"auto",left:0,bottom:+v.sub_bottom+ +v.toolbar.h})),1==v.sub_split2words&&(t=PluginSubword(t)),1==v.sub_all&&(t=(t=t.replace(/\[sub2\]/gm,'<span style="color:'+CheckColor(v.sub_color2)+'">')).replace(/\[\/sub2\]/gm,"</span>")),o.subtitle.innerHTML='<span style="'+(1==v.sub_bg?"background-color:"+hexToRGBA(v.sub_bgcolor,v.sub_bga)+";":"")+"-webkit-box-decoration-break: clone;color:"+CheckColor(v.sub_color)+";padding:"+v.sub_bgpadding+"px "+2*v.sub_bgpadding+"px;border-radius:"+v.sub_bgo+"px;margin:0 0;line-height:"+(v.sub_lineheight||1.8)+";font-weight:"+v.sub_weight+'">'+trim(t)+"</span>",1==v.sub_big_fullscreen&&(o.fullscreen?css(o.subtitle,{"font-size":v.sub_size_fullscreen+(parseInt(v.sub_sizeproc)-100)*v.sub_size_fullscreen/100+"px"}):css(o.subtitle,{"font-size":v.sub_size+(parseInt(v.sub_sizeproc)-100)*v.sub_size/100+"px"})),r=!1):!r&&exist(o.subtitle)&&(o.subtitle.innerHTML="",r=!0,hide2(o.subtitle))))},this.style=function(){y()},this.remove=function(){b()}},PluginRounding=function(){o.oo=createElement("div");var e=v.rounding,t=[];t[1]=createElement("div"),t[1].innerHTML='<svg><path d="M0,0 L'+e+",0 Q0,0 0,"+e+' Z" fill="'+v.bgcolor+'"/></svg>',t[2]=createElement("div"),t[2].innerHTML='<svg><path d="M0,0 L'+e+",0 L"+e+","+e+" Q"+e+',0 0,0 Z" fill="'+v.bgcolor+'"/></svg>',t[3]=createElement("div"),t[3].innerHTML='<svg><path d="M'+e+",0 L"+e+","+e+" L0,"+e+" Q"+e+","+e+" "+e+',0 Z" fill="'+v.bgcolor+'"/></svg>',t[4]=createElement("div"),t[4].innerHTML='<svg><path d="M0,0 Q0,'+e+" "+e+","+e+" L0,"+e+' Z" fill="'+v.bgcolor+'"/></svg>',css(o.oo,{position:"absolute",top:0,left:0,"pointer-events":"none",height:"100%",overflow:"hidden",width:"100%"}),o.oo.style.zIndex=2e3,css(t[1],{position:"absolute",top:0,left:0}),css(t[2],{position:"absolute",top:0,right:0}),css(t[3],{position:"absolute",bottom:0,right:0}),css(t[4],{position:"absolute",bottom:0,left:0});for(var i=1;i<5;i++)css(t[i],{width:e,height:e,"line-height":0}),o.oo.appendChild(t[i]);o.container.appendChild(o.oo)},PluginHlsSubtitles=function(e,n){var a,l=e;function c(e){e==a&&1==v.sub_off?(l.subtitleTrack=-1,l.subtitleDisplay=!1):(l.subtitleDisplay=!0,l.subtitleTrack=parseInt(e))}l.on(Hls.Events.SUBTITLE_TRACKS_UPDATED,function(e,t){if(n||1!=v.hlssubtracks)l.subtitleDisplay=!1;else{var i=l.subtitleTracks;if(1<i.length){StorageSupport()&&1==v.sub_store&&null!=localStorage.getItem("pljssubtitle")&&(v.default_subtitle=localStorage.getItem("pljssubtitle")),o.files_subtitle=[],o.current_subtitle=l.subtitleTrack;for(var s,r=0;r<i.length;r++)o.files_subtitle[r]=exist(i[r].name)?i[r].name:r,exist(v.default_subtitle)&&v.default_subtitle==o.files_subtitle[r]&&(l.subtitleDisplay=!0,o.current_subtitle=r,l.subtitleTrack=r,setTimeout(c,100,r));o.hls_subs=!0,1==v.sub_off&&(s=StringVar("sub_off_title",Lang("off")),1==v.sub_off0?(a=0,o.files_subtitle.unshift(s)):(o.files_subtitle.push(s),a=o.files_subtitle.length-1)),o.subs=o.files_subtitle,-1==o.current_subtitle&&(1==v.sub_off?(o.current_subtitle=a,l.subtitleDisplay=!1):(o.current_subtitle=0,l.subtitleDisplay=!0)),o.subtitle_on=l.subtitleDisplay&&-1!=o.current_subtitle,o.controls.SubtitleChanged()}}}),l.on(Hls.Events.SUBTITLE_TRACK_SWITCH,function(e,t){!n&&1==v.hlssubtracks&&o.subtitle_on&&(o.current_subtitle=l.subtitleTrack,o.controls.SubtitleChanged())}),this.HlsSubTrack=function(e){c(e)}};o.lang_ru={auto:"Авто",play:"Пуск",pause:"Пауза",stop:"Стоп",fullscreen:"Во весь экран",normalscreen:"Выйти из полноэкранного режима",settings:"Настройки",options:"Параметры",volume:"Громкость",mute:"Выключить звук",unmute:"Включить звук",live:"В ЭФИРЕ",playlist:"Плейлист",quality:"Качество",download:"Скачать",subtitle:"Субтитры",speed:"Скорость",normal:"Обычная",error:"ошибка",unmute_video:"Включите звук",audiotrack:"Аудио",loading_error:"ошибка загрузки","160p":"Очень низкое","240p":"Низкое","360p":"Среднее","480p":"Высокое","540p":"Высокое",next:"Следующий",prev:"Предыдущий",share:"Поделиться",copied:"Скопировано в буфер обмена",ads:"Реклама",skip:"Пропустить",skip_after_:"Пропустить через ",adsinvitation:"Перейти на сайт рекламодателя",sub_sizeproc:"Размер текста",sub_shift:"Сдвиг по времени",sub_color:"Цвет текста",sub_color2:"Цвет текста 2",sub_bgcolor:"Цвет фона",sub_bga:"Прозрачность фона",sub_shadow:"Тень",sub_weight:"Толщина текста",sub_bottom:"Отступ снизу",sub_reset:"Сбросить",upload:"Загрузить",sleeptimer:"Сон",offsettimer:"Пропуск",hour:"Час",minute:"Минута",second:"Секунда","1val":"Да","0val":"Нет",of:"из",pass:"Пароль",casterror:"Ошибка воспроизведения на устройстве",castdevice:"Играет на устройстве",channel:"Канал",scale:"Масштаб",on:"Вкл.",off:"Выкл.",together:"Все сразу",kbps:"кбит/с",embed:"Код",url:"Ссылка",color:"Цвет",contrast:"Контраст",brightness:"Яркость",saturate:"Насышенность",sepia:"Сепия"};var Motion=function(i){var s,n,r,a,l,c,d,u=0,h=!1;if(null!=i.me&&null!=i.mc&&null!=i.type&&null!=i.to){null==i.time&&(-1<i.type.indexOf("alpha")?0==i.to?i.time=.5:i.time=.2:i.time=.15),s=function(e){switch(e){case"elastic":return[0,.432,.857,1.275,1.372,1.296,1.102,.957,.883,.87,.914,.992,1.029,1.041,1.036,1.019,.996,.984,.981,.988,1.001,1.006,1.007,1.006,1.003,.999,.998,.998,.998,.998,1];case"cubic":return[0,.096,.185,.267,.344,.416,.483,.547,.606,.659,.705,.747,.785,.818,.848,.874,.897,.918,.935,.95,.962,.971,.979,.985,.99,.994,.997,.999,1];case"back":return[0,.146,.28,.403,.513,.613,.702,.78,.848,.907,.956,.997,1.029,1.055,1.072,1.084,1.092,1.095,1.095,1.093,1.088,1.081,1.072,1.06,1.046,1.033,1.023,1.014,1.007,1.003];default:return[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1]}}(i.ease),-1==i.type.indexOf("scale")&&(exist(o.motions[i.me])&&o.motions[i.me].TheEnd(),o.motions[i.me]=this),1==i.show&&i.mc.set("display",!0),n=i.type.split("|"),a=String(i.to).split("|"),r=new Array;for(var e=0;e<n.length;e++)a[e]||(a[e]=a[0]),"alpha"==n[e]&&(r[e]=i.mc.g("opacity")),"alpha_div"==n[e]&&(r[e]=i.mc.style.opacity),"y"==n[e]&&(r[e]=i.mc.g("y")),"x"==n[e]&&(r[e]=i.mc.g("x")),"left"==n[e]&&(r[e]=parseInt(i.mc.style.left)),"scale"==n[e]&&(r[e]=i.mc.g("scaleX")),"scroll"==n[e]&&(r[e]=i.mc.scrollTop),"scrollleft"==n[e]&&(r[e]=i.mc.scrollLeft),"scaleY"==n[e]&&(r[e]=i.mc.g("scaleY")),"scaleX"==n[e]&&(r[e]=i.mc.g("scaleX")),"width"==n[e]&&(r[e]=i.mc.g("width")),"width_div"==n[e]&&(r[e]=i.mc.offsetWidth,a[e]=Math.floor(a[e]),"line_play"==i.me&&log("width",i.me,r[e],a[e],i.mc.offsetWidth)),"height"==n[e]&&(r[e]=i.mc.g("height")),"height_div"==n[e]&&(r[e]=i.mc.offsetHeight),a[e]=Number(a[e]),r[e]=Number(r[e]);c=1e3*i.time/s.length,l=s.length,1==n.length&&r[0]==a[0]?p():setTimeout(f,Math.round(c))}function f(){for(var e=0;e<n.length;e++){var t=r[e]+(a[e]-r[e])*(s[u]||0);v(n[e],t),"y"==n[e]&&i.mc.set("top",t),"x"==n[e]&&i.mc.set("left",t),"left"==n[e]&&(i.mc.style.left=t+"px"),"scale"==n[e]&&i.mc.set("scale",t),"scaleY"==n[e]&&i.mc.set("scaleY",t),"scaleX"==n[e]&&i.mc.set("scaleX",t),"scroll"==n[e]&&(i.mc.scrollTop=t),"scrollleft"==n[e]&&(i.mc.scrollLeft=t),"width"==n[e]&&i.mc.set("width",t),"width_div"==n[e]&&css(i.mc,{width:t}),"height"==n[e]&&i.mc.set("height",t),"height_div"==n[e]&&css(i.mc,{height:t})}u++,h||(u==l?p():d=setTimeout(f,Math.round(c)))}function p(){h=!0,i.hide&&("alpha_div"==n[0]||"left"==n[0]?hide(i.mc):i.mc.set("display",!1)),-1==i.type.indexOf("scale")&&(o.motions[i.me]=null,delete o.motions[i.me]);for(var e=0;e<n.length;e++)v(n[e],a[e]);clearTimeout(d)}function v(e,t){"alpha"==e&&i.mc.set("opacity",t),"alpha_div"==e&&(i.mc.style.opacity=t)}this.TheEnd=function(){p()},this.TheEnd2=function(){u=l-1,f(),p()},this.XY=function(e,t,i,o){for(var s=!1,r=0;r<n.length;r++)"x"==n[r]&&e!=t&&(s=!0),"y"==n[r]&&i!=o&&(s=!0);s&&p()}},System=function(){var e=navigator.appName,t=navigator.userAgent,i=t.match(/(opera|chrome|safari|firefox|msie)\/?\s*(\.?\d+(\.\d+)*)/i);(i=t.match(/(opera|chrome|safari|firefox|msie|trident|edge)\/?\s*(\.?\d+(\.\d+)*)/i))&&null!=(s=t.match(/version\/([\.\d]+)/i))&&(i[2]=s[1]);var s=navigator.maxTouchPoints;this.browser=i?i[1]:e,this.version=i?i[2]:navigator.appVersion,this.touch=1<navigator.maxTouchPoints,this.opera="Opera"==this.browser,this.ie9="MSIE 9.0"==this.browser,this.ie="MSIE"==this.browser||"Trident"==this.browser||"Edge"==this.browser,this.edge=-1<t.search(/(edge)\/?\s*/i),this.firefox="Firefox"==this.browser,this.safari="Safari"==this.browser,this.chrome=window.chrome,this.win=-1<t.search("Windows NT"),this.ios=-1<t.search(/(iphone|ipad|ipod)\/?\s*/i)||"MacIntel"===navigator.platform&&1<s,this.tv=1!=v.notv&&-1<t.search(/(TV|tvOS|webOS|armv|BRAVIA|Roku|Tizen|Philips)\/?\s*/i),this.lg=1!=v.notv&&-1<t.search(/(LG)\/?\s*/i),this.iphone=-1<t.search(/(iphone)\/?\s*/i),this.ipad=this.ios&&!this.iphone,this.webkit="WebkitAppearance"in document.documentElement.style,-1<t.search(/(android)\/?\s*/i)&&(0<s?this.android=!0:this.tv=!0,matchMedia("(pointer:fine)").matches&&(this.tv=!0)),this.mobile=(this.ios||this.android||-1<t.search(/(blackberry|iemobile|opera mini)\/?\s*/i))&&!this.tv,this.mutedautoplay=this.safari||this.chrome,this.fullscreen=!1,this.ios&&(this.iosv=parseFloat(t.substr(t.indexOf("OS ")+3,4).replace("_",".")),this.ipad&&(!1 in window||s<2)&&(this.mobile=this.ios=!1,this.tv=!0)),this.desktop=!this.mobile,this.mobiletv=this.mobile||this.tv,(o.frame.requestFullScreen||o.frame.requestFullscreen||o.frame.mozRequestFullScreen||o.frame.webkitRequestFullScreen||o.frame.msRequestFullscreen)&&(this.fullscreen=!0)};function UpdateObject(e,t){for(var i in t)if("object"==typeof t[i])if("events"==i||"file"==i)e[i]=t[i];else for(var o in t[i])if("object"!=typeof e[i]&&(e[i]={}),"object"==typeof t[i][o])for(var s in t[i][o])if("object"!=typeof e[i][o]&&(e[i][o]={}),"object"==typeof t[i][o][s])for(var r in t[i][o][s])"object"!=typeof e[i][o][s]&&(e[i][o][s]={}),e[i][o][s][r]=t[i][o][s][r],"padding"!=s&&"margin"!=s||(e[i][o][s][r]=parseInt(e[i][o][s][r]));else e[i][o][s]=t[i][o][s],"padding"!=o&&"margin"!=o||(e[i][o][s]=parseInt(e[i][o][s]));else e[i][o]=t[i][o],"padding"!=i&&"margin"!=i||(e[i][o]=parseInt(e[i][o]));else 0<i.indexOf("roll")&&""===trim(t[i])||(e[i]=SettingsParser(i,t[i]));return e}var SettingsParser=function(e,t){return"string"==typeof t&&(t=trim(t),-1<e.indexOf("color")&&-1!=t&&(t=CheckColor(t))),t};function hexToRGBA(t,e){return"rgba("+(t=t.replace("#","")).match(new RegExp("(.{"+t.length/3+"})","g")).map(function(e){return parseInt(t.length%2?e+e:e,16)}).concat(e||1).join(",")+")"}function StorageSupport(){try{var e=window.localStorage,t="__storage_test__";return e.setItem(t,t),e.removeItem(t),!0}catch(e){return!1}}function killMotion(e){e&&exist(o.motions[e])&&o.motions[e].TheEnd()}var Lang=function(e){var t=e;t&&-1<(t=e.charAt(0).toUpperCase()+e.slice(1)).indexOf("_")&&(t=t.replace(/_/gi," "));var i={of:"of",kbps:"kbps",castdevice:"Playback on device",casterror:"Playback error on device",together:"All at once",pass:"Password","0val":"No",sleeptimer:"Sleep",offsettimer:"Skip","1val":"Yes",sub_bottom:"Bottom margin",sub_weight:"Font weight",sub_shadow:"Shadow",sub_bga:"Background opacity",sub_bgcolor:"Background color",sub_sizeproc:"Text size",sub_color:"Text color",sub_color2:"Text color 2",sub_shift:"Time shift",sub_reset:"Reset",prev:"Previous",copied:"Copied to clipboard","160p":"Tiny","240p":"Small","360p":"Medium","480p":"High","540p":"High","720p":"HD","1080p":"Full HD","1296p":"Super HD","1440p":"Quad HD","2160p":"Ultra HD 4K",ads:"Ad",adsinvitation:"Go to the advertiser's website",audiotrack:"Audio",live:"LIVE",fullscreen:"Enter fullscreen",normalscreen:"Exit fullscreen"};return exist(i[e])&&(t=i[e]),exist(o["lang_"+v.lang])&&exist(o["lang_"+v.lang][e])&&(t=o["lang_"+v.lang][e]),v.rename&&v.rename[e]&&(t=v.rename[e]),t},gaTracker=function(e,t,i){if(!exist(o.gatracked[t])&&1!=v.playerjscom){var s,r=o.titlestore||v.title||"";if(exist(v.label)&&(r=v.label),1==v.yamtr_event[e]&&1==v.yamtr&&exist(v.yamtrid)&&("init"==e&&setInterval(yaHit,3e5),exist(window["yaCounter"+v.yamtrid])?(window["yaCounter"+v.yamtrid].reachGoal("playerjs_"+e,{title:r}),log("Yandex","playerjs_"+e)):log("Yandex Metric error")),1==v.ga_event[e])if(1==v.ga)if(1==v.ga4){if(window.gtag){if(s={label:r},v.galabels&&"object"==typeof v.galabels)for(var n in v.galabels)v.galabels.hasOwnProperty(n)&&(s[n]=v.galabels[n]);gtag("event","playerjs_"+e,s)}}else window.ga&&(s={eventCategory:"Player",eventAction:t},""!=r&&(s.eventLabel=r),1!=v.gainact||o.clicktime||(s.nonInteraction=1),ga("user.send","event",s))}i&&(o.gatracked[t]=!0)};function yaHit(){exist(window["yaCounter"+v.yamtrid])&&window["yaCounter"+v.yamtrid].reachGoal("playerjs_hit")}var YoutubeID=function(e){var t,i,o="";return-1<(e=e.replace("v=","{=")).indexOf("youtu.be/")?(o=e.substr(e.indexOf(".be/")+4)).replace("/",""):o=e.split(/(youtu.be\/|v\/|embed\/|watch\?|youtube.capiom\/user\/[^#]*#([^\/]*?\/)*)\??{?=?([^#\&\?]*)/)[3],""!=o&&0<o.indexOf("?t=")&&(v.start=o.substr(o.indexOf("?t=")+3),(e=i=t=0)<v.start.indexOf("h")&&(t=v.start.substr(0,v.start.indexOf("h")),v.start=v.start.substr(v.start.indexOf("h")+1)),0<v.start.indexOf("m")&&(i=v.start.substr(0,v.start.indexOf("m")),v.start=v.start.substr(v.start.indexOf("m")+1)),0<v.start.indexOf("s")&&(e=v.start.substr(0,v.start.indexOf("s")),v.start=v.start.substr(v.start.indexOf("s")+1)),(0<t||0<i||0<e)&&(v.start=3600*t+60*i+ +e),o=o.substr(0,o.indexOf("?t="))),o},js=function(x,y,li,ev){if("init"==x&&(o.init=!0),1==ev)for(var yi in y)y.hasOwnProperty(yi)&&"object"==typeof y[yi]&&(y[yi]="");if(1==v.eventstracker&&o.init)if(1==v.eventlisteners||1==li)JsEvent(x,y);else{if(null!=y&&"object"==typeof y)try{y=JSON.stringify(y)}catch(e){}if("string"==typeof v.events&&0==v.events.indexOf("{"))try{v.events=v.events.replace(/\'/gi,'"'),v.events=JSON.parse(v.events)}catch(e){console.log(e)}if("object"==typeof v.events){if(exist(v.events[x])||exist(v.events.other)){var z=x;!exist(v.events[x])&&exist(v.events.other)&&(z="other"),0==x.indexOf("vast_")&&exist(v.events.vast)&&(z="vast");try{void 0!==y?eval(v.events[z]+"('"+x+"','"+v.id+"','"+y+"')"):eval(v.events[z]+"('"+x+"','"+v.id+"')")}catch(e){log("events",e,x)}}}else{""==v.events&&(v.events="PlayerjsEvents");try{void 0!==y?eval(v.events+"('"+x+"','"+v.id+"','"+y+"')"):eval(v.events+"('"+x+"','"+v.id+"')")}catch(e){log("events",e,x,y)}}}if(o.init&&1==v.pjsframe&&o.pjsfrm)try{o.pjsfrm.contentWindow.postMessage({event:x,info:y},"*")}catch(e){}var zv,z;1==v.postmessage&&1!==li&&(zv={event:x,time:o.media?"seek"==x?o.seeked_time:o.media.time():0},null!=y&&(zv.data=y),"duration"!=x&&"time"!=x||(zv.duration=o.media.duration()),"volume"!=x&&"unmute"!=x||(zv.volume=v.volume),"new"==x&&(zv.id=apiProcessor("playlist_id")),window.parent.postMessage(zv,"*"),z="vast_Impression"==x?"adShown":"seek"==x?"rewound":"unmute"==x?"unmuted":"mute"==x?"muted":"pause"==x?"paused":"play"==x?"resumed":"init"!=x&&"start"!=x&&"end"!=x?x:x+"ed",zv.event=z,""!=z&&z!=x&&(zv=JSON.parse(JSON.stringify(zv)),window.parent.postMessage(zv,"*")))},JsEvent=function(e,t){var i=document.createEvent("Events");void 0!==t&&(i.info=t),i.initEvent(e,!0,!0),o.container.dispatchEvent(i)};this.event=function(e,t){o.events[e]=t};var api=function(e,t,i){return apiProcessor(e,t,i)};function apiProcessor(e,t,i){if(!exist(o.actions)||"string"!=typeof e)return!1;if(1!=o.destroyed){if(i&&"string"==typeof i&&0==i.indexOf("id:")&&(i=o.controls.butByS(i.substr(3),"dom"))&&"button"==e&&"toogle"==t&&i.Click(),"play"==e||"file"==e)if(exist(t)){var s=!1;if("string"==typeof t){var r=-1;if(-1<(t=t.replace(/(\r\n|\n|\r)/gm,"")).indexOf("[seek:")&&t.lastIndexOf("]")==t.length-1){if(r=t.substr(t.indexOf("[seek:")+6,t.length-1),r=parseInt(r.substr(0,r.length-1)),""==(t=t.substr(0,t.indexOf("[seek:"))))return o.actions.Seek(r),void o.actions.Play();o.seekto=r}if(-1<t.indexOf("[skipads]")&&(s=!0,t=t.replace("[skipads]","")),0==t.indexOf("#"+v.enc2)&&(t=o[o.fd[0]](t)),0==t.indexOf("#"+v.enc3)&&0<t.indexOf(v.file3_separator)&&(t=o[o.fd[1]](t)),0==t.indexOf("#0")&&(t=fd0(t)),1==v.fplace&&(t=fplace(t)),t.indexOf(".txt")==t.length-4)return(f=XHR(t)).onload=function(){if(4==this.readyState&&200==this.status)try{apiProcessor("play",JSON.parse(this.responseText))}catch(e){}},void f.send();if(0==t.indexOf("id:")&&exist(o.playlist_dic)){var n=FindIdPl(t);return!!exist(o.playlist_dic[n])&&(o.controls.PlaylistPlayId(n),-1<r&&(o.seekto=r),!0)}if(0==t.indexOf("youtubeid:")){n=t.substr(10);if("youtube"==o.file_type)return o.media.playByYoutubeId(n),!0;t="//youtu.be/"+n}}"play"==e&&(o.controls.PreNewPl(),o.actions.NewFile(t,void 0,void 0,s?1:0)),"file"==e&&(o.newfile=!0,v.autoplay=0,o.actions.NewFile(t,1,void 0,s?1:0),o.controls.Duration(0,0),o.start=!1)}else"play"==e&&o.actions.Play(),"file"==e&&"function"==typeof Papi41&&Papi41();if("preload"==e&&(exist(t)?(o.newfile=!0,o.actions.NewFile(t,1,1)):o.media.Preload()),"pause"==e&&o.play&&(o.actions.Pause(),o.actions.RenewSubtitle()),"channel"==e&&exist(t)&&o.start&&o.channels&&o.channels.SetChannel(t),0==e.indexOf("vpaid_")&&o.vast&&o.vast.VpaidSet(e.substr(6),t),"alert"==e&&(o.alert.close(),o.alert=new Alert,1==v.alert404?o.alert.txt(v.alert404text):o.alert.txt("Test message"),1==v.alert404v&&exist(v.alert404video)&&(o.err404v=new PluginErrorVideo)),"waiting"==e&&(o.controls.Waiting(),o.controls.HideElement("control_start")),"toggle"==e&&(o.play?o.actions.Pause():o.actions.Play()),"stop"==e&&(v.preload=0,v.autoplay=0,o.media.Recover(),o.actions.Stop()),"reload"==e&&(o.time=o.media.time(),o.actions.Reload()),"download"==e&&v.apiprm&&1==v.apiprm.on&&1==v.apiprm.dwn&&o.actions.Download(),"effect"==e&&exist(t)&&o.effects&&o.effects.api(t),"share"==e&&o.controls.showShare(),"startvast"==e&&exist(t)&&1==v.vast)if(0==t.indexOf("js:"))v.midroll=t,v.midrolls=!0,o.actions.advertising("midroll");else if(""!=o.p){var a=JSON.parse(decode(o.p));for(l in a)a.hasOwnProperty(l)&&exist(a[l].id)&&t==a[l].id&&(v.midroll="prt"+(exist(a[l].cpm)?"cpm"+a[l].cpm:"")+t+"_"+a[l].preroll,v.midrolls=!0,o.actions.advertising("midroll"))}if("vastbreak"==e&&"function"==typeof VastBreak&&VastBreak(),"cuid"==e&&t&&(v.cuid=t,o.continue&&o.continue.updateCuid()),"mute"==e&&o.actions.Mute(),"speed"==e){if(!exist(t))return o.files_speed[o.current_speed];o.actions.SetSpeed(t)}if("played"==e&&v.apiprm&&o.pld&&1==v.apiprm.pld)return Math.round((o.pld.filter(Boolean).length-1)/Math.round(o.media.duration())*100);if("speeds"==e)return o.files_speed;if("unmute"==e&&o.actions.Unmute(),"thumbnails"==e&&exist(t)&&(v[e]=t,o.actions.Thumbs()),"qualities"==e)return o.files_quality;if("adblock"==e)return!!o.ab;if("live"==e)return!!o.media&&o.media.isLive();if("subtitles"==e)return 1==v.sub_off?o.files_subtitle.slice(0,-1):o.files_subtitle;if("audiotracks"==e)return o.files_audiotrack;if("volume"==e||"setVolume"==e)return exist(t)&&0<=t&&t<=1&&o.actions.Volume(t),o.muted?0:v.volume;if("muted"==e)return!!exist(o.muted)&&o.muted;if("moveplaylist"==e&&o.controls&&o.controls.PlaylistMove(t),"design"==e&&(t<2&&(t=""),""!=o["u"+t])){var l,c=JSON.parse(decode(o["u"+t])),d=[];for(l in v)v.hasOwnProperty(l)&&0==l.indexOf("control_")&&(v[l]=null);if("object"==typeof c)for(var u in c)c.hasOwnProperty(u)&&(0==u.indexOf("control_")&&(v[u]=c[u]),"toolbar"==u&&(d[u]=c[u]));v=UpdateObject(v,d);s=!1;o.controls.SettingsVisible()&&(o.controls.Settings(),s=!0);var h=!1;o.controls.PlaylistVisible()&&(o.controls.Playlist(),h=!0),o.controls.Remove(),o.controls=null,o.controls=new Controls,"playing"==o.media.status()&&o.controls.Play(),o.controls.Volume(v.volume),exist(v.title)&&Title(v.title),s&&o.controls.Settings(),h&&o.controls.Playlist(),o.fullscreen&&o.controls.Fullscreen(),"control_duration"!=key&&o.controls.Duration(o.media.time(),o.media.duration()),MainResize()}if("vars"==e)return v.vars;var f;if("resize"==e&&(o.controls.resize(!0),log(o.screen_w,o.screen_h)),"resize2"==e&&MainResize(),"seek"==e&&exist(t)&&("string"==typeof t&&(-1<t.indexOf("%")?(t=parseInt(t.substr(0,t.indexOf("%"))),t=o.media.duration()*t/100):(h=o.media.time(),o.continue&&!o.start&&(o.continue.seeked||(m=o.continue.flag()).t&&m.d&&(h=m.t,o.continue.seeked=!0)),0==t.indexOf("+")?t=h+parseInt(t.substr(1)):0==t.indexOf("-")&&(t=h-parseInt(t.substr(1))))),(t=+t)<0&&(t=0),0<o.media.duration()&&t>o.media.duration()&&(t=0),!exist(o.vast)&&!exist(o.vastloader)&&0<o.media.duration()?(o.seekto=void 0,o.actions.Seek(t,!0),o.actions.Playing()):o.seekto=t),"fullscreen"==e&&(o.fullscreen||o.actions.Fullscreen()),"exitfullscreen"==e&&o.fullscreen&&o.actions.Normalscreen(),"isfullscreen"==e)return o.fullscreen;if("size"==e)return o.screen_w+"/"+o.screen_h;if("fix"==e&&exist(o.minify)&&o.minify.Do(),"unfixing"!=e&&"unfix"!=e||exist(o.minify)&&o.minify.Un(),"time"==e){var p=o.media?o.media.time():0;return o.continue&&1==v.timestore&&!o.start&&0==p&&(m=o.continue.flag()).t&&(p=m.t),p}if("timeplay"==e&&(o.butplstart&&apiProcessor("play","id:"+o.butplstart),o.butseekto&&(apiProcessor("seek",o.butseekto),apiProcessor("play"))),"duration"==e)return o.media?o.media.duration():0;if("buffered"==e)return o.media?o.media.loaded():0;if("points"==e&&t&&(v.points=t,o.controls.RenewPoints()),"quality"==e){if(!exist(t))return o.media?NoSpan(o.media.getQuality()):0;i?(v.hd=Switcher(v.hd,t,i),2==o.files_quality.length&&o.actions.SetQuality(v.hd)):o.actions.SetQuality(t)}if("audiotrack"==e){if(!exist(t))return o.media?o.media.getAudioTrack():0;i?(v.ahd=Switcher(v.ahd,t,i),2==o.files_audiotrack.length&&o.actions.SetAudioTrack(v.ahd)):o.actions.SetAudioTrack(t)}if("isyoutube"==e)return"youtube"==o.file_type;if("restart"==e&&(0<o.current_audiotrack&&(o.restart_audio=o.current_audiotrack),o.actions.NewFile(o.files[o.current_file])),"playing"==e)return o.play;if("started"==e)return o.start;if("system"==e)return o.system[t];if("youtubeready"==e&&1!=o.destroyed&&o.media.onYoutubeReady(),"id"==e)return v.id;if("log"==e&&(v.log=t),"eventstracker"==e&&(v.eventstracker=t),"pip"==e&&o.media.PipToggle(),"switchpip"==e&&(o.media.PipSwitch(),i&&(o.piped=Switcher(o.piped,t,i))),"airplay"==e&&o.media.Airplay(),"pipwebkit"==e&&o.media.PipWebkit(),"options"==e&&1!=v.playerjscom&&console.log(options),"castinit"==e&&o.chromecast&&o.chromecast.init(),"subtitle"==e&&(v.subtitle=t,exist(t)&&(t.toString().length<3&&o.sbt?o.sbt.SetSubtitle(+t):o.actions.Subtitle(t))),"quiz"==e&&exist(o.quiz)){if(!exist(t))return o.quiz.Active();o.quiz.api(t)}if("geo"==e)return o.geobj||!1;if("box"==e&&((y=createElement("div")).id=t,y.style.zIndex=1e4,o.frame.appendChild(y)),"screenshot"==e){if(o.tagvideo){var g=createElement("canvas"),m=o.media.size();g.width=0<m.width?m.width:o.normal_w,g.height=0<m.height?m.height:o.normal_h,css(g,{position:"absolute",top:-g.height,left:-g.width,display:"none"}),document.body.appendChild(g);p=g.getContext("2d");p.drawImage(o.media.tag(),0,0,g.width,g.height);var y=document.createElement("canvas");y.width=2*g.width,y.height=2*g.height;var b,m=y.getContext("2d");m.drawImage(o.media.tag(),0,0,2*g.width,2*g.height),1==v.sscopyright&&exist(v.sstext)&&(exist(v.ssfontsize)||(v.ssfontsize=20),exist(v.ssfontcolor)||(v.ssfontcolor="ffffff"),m.font=v.ssfontsize+"px Courier, Arial",m.fillStyle=CheckColor(v.ssfontcolor),m.fillText("domain"==v.sstext?o.domain:v.sstext,v.ssfontsize,2*g.height-v.ssfontsize-5)),p.drawImage(y,0,0,g.width,g.height);try{b=g.toDataURL("image/jpeg")}catch(e){return console.log(e.message),!1}return b}return!1}if("dash"==e)return o.file_type==e?o.media.getDASH():void 0;if("hls"==e)return o.file_type==e?o.media.getHLS():void 0;if("poster"==e)return(!o.play||0===v.posterhide)&&(o.media.Poster(t),!0);if("stretch"==e){if(!exist(t))return existv(v.covervideo,0);"1/0"==t&&(t=1-existv(v.covervideo,0)),v.covervideo=t,o.media.normalscale()}if("scale"==e){if(!exist(t))return[o.mediascale.x,o.mediascale.y,o.mediacontainer.style.left,o.mediacontainer.style.top];0==t?o.media.normalscale():o.media.scale(t)}if("title"==e)return exist(t)?(exist(t)&&(v.title=t),o.actions.Title("title"),!0):v.title;if("invert"==e&&o.actions.InvertPlaylist(),"push"==e&&t&&(o.playlist_source||(o.playlist_source=[]),"object"==typeof t&&(t=o.playlist_source.concat(t),e="playlist")),"playlist"==e)if(t)if("object"==typeof t)try{return o.actions.UpdatePlaylist(t),!0}catch(e){return!1}else if(t.indexOf(".txt")==t.length-4||0<t.indexOf(".txt?"))return(f=XHR(t)).onload=function(){if(4==this.readyState&&200==this.status)try{apiProcessor("playlist",JSON.parse(this.responseText))}catch(e){}},f.send(),!0;if("next"==e&&o.controls&&o.controls.PlaylistNext(),"prev"==e&&o.controls&&o.controls.PlaylistPrev(),"cut"==e&&o.controls&&o.controls.Cut(t),"flip"==e&&o.media&&o.media.flip(),"find"==e&&exist(t)&&exist(o.playlist_dic)){for(var w in o.play||(v.autoplay=0),o.playlist_dic)o.playlist_dic.hasOwnProperty(w)&&o.playlist_dic[w].pjs_id==t&&(t=w);return!!exist(o.playlist_dic[t])&&(o.controls.PlaylistOpenId(t),!0)}if("playlist_folders"==e){var k=[];if(exist(o.playlist_dic))for(var w in o.playlist_dic)o.playlist_dic[w].folder&&-1==o.playlist_dic[w].pjs_parent_i&&k.push({title:o.playlist_dic[w].title,id:o.playlist_dic[w].id});return k}if("playlist_id"==e&&o.plid)return o.playlist_dic[o.plid].pjs_id||o.plid;if("playlist_length"==e)return o.playlist_dic?Object.keys(o.playlist_dic).length:-1;if("playlist_title"==e&&exist(o.playlist_title))return o.playlist_title;if("showplaylist"==e&&o.controls.PlaylistShow(),"toolbar"==e&&o.controls.ShowForce(),"vastnow"==e)return!!o.vast;if("vastinfo"==e)return!!o.vast&&VastInfo();if("vastpause"==e)return!!o.vast&&o.vast.pause();if("vastresume"==e)return!!o.vast&&o.vast.resume();if("vaststart"==e){if(!o.vast)return!1;o.vast.startAd()}if("vastmute"==e){if(!o.vast)return!1;o.vast.mute()}if("captions"==e&&(v.captions=Switcher(v.captions,t,i),o.media.captions()),"loop"==e)if(exist(i))v.loop=Switcher(v.loop,t,i);else{if(!exist(t))return v.loop;"0/1"==t&&(t=1-v.loop),v.loop=t}if("shuffle"==e)if(exist(i))v.shuffle=Switcher(v.shuffle,t,i);else{if(!exist(t))return v.shuffle;v.shuffle=t}if("autonext"==e||"playlistloop"==e){n="playlistloop"==e?"playlistrewind":"autoplaylist";return exist(i)?v.playlist[n]=Switcher(v.playlist[n],t,i):exist(t)&&("0/1"==t&&(t=1-v.playlist[n]),v.playlist[n]=t),v.playlist[n]}if("hd"==e&&2==o.files_quality.length&&(v.hd=o.files_quality[o.current_quality],v.hd=Switcher(v.hd,t,i),o.files_quality[0]==v.hd?o.actions.SetQuality(0):o.actions.SetQuality(1)),"v"==e&&t)return 0==t.indexOf("file")||0==t.indexOf("bk")?void 0:v[t];if(0!=e.indexOf("update:"))return 0==e.indexOf("text:")&&o.controls.customText(e.substr(5),t),"currentfile"==e?o.media?o.media.currentFile():"":"vrsn"==e?o.version+" "+o.playerid:"playerid"==e?o.playerid:"hlserror"==e?o.hlserror:"dasherror"==e?o.dasherror:"visibility"==e?o.visibility:"vastids"==e?o.vast?o.vast_adid:void 0:void("destroy"==e&&(o.actions.StopMedia(),o.destroyed=1,v.hotkey.on=0,o.container.innerHTML=""));var x=e.substr(7);if("object"==typeof t&&"object"==typeof v[x])for(var A in t)t.hasOwnProperty(A)&&(v[x][A]=t[A]);else-1==e.indexOf("rc_")&&(v[x]=t);return!0}}function Switcher(e,t,i){var o=trim(t)+"";return 0<t.indexOf("/")&&(2==(t=t.split("/")).length&&(e==trim(t[0])?(o=trim(t[1]),i&&i.CustomSwitch(1)):(o=trim(t[0]),i&&i.CustomSwitch(0)))),o}function XHR(e){var t=new XMLHttpRequest;return t.open("GET",e,!0),t}function FindIdPl(e){var t=e.substr(3);if(o.playlist_dic)for(var i in o.playlist_dic)o.playlist_dic.hasOwnProperty(i)&&o.playlist_dic[i].pjs_id==t&&(t=i);return t}function VastInfo(){if(o.vast&&o.vast.active()&&(e=o.vast),!e&&o.vastloader&&(e=o.vastloader),e){var e={is:o.vasttype,system:e.info("adsystem"),version:e.info("version"),vpaid:e.info("isVpaid"),url:o.current_vast_url+(e.info("wrapper")?e.info("wrapper0")+e.info("wrapper"):""),type:e.info("filetype"),file:e.info("file"),time:o.media?o.media.time():"",volume:e.getVolume(),id:o.vast_adid};return"midroll"==o.vasttype&&(e.midroll_time=o.midrollcrtm),e}}this.api=function(e,t,i){return apiProcessor(e,t,i)};var createElement=function(e){var t=e;"div"!=e&&"div2"!=e||(t="pjsdiv");t=document.createElement(t);return"div2"==e&&css(t,{cursor:"pointer",display:"block"}),t},log=function(e,t,i,o,s,r,n){1!=v.log&&1!=v.logout||(n=e+(null!=t?" "+t:"")+(null!=i?" "+i:"")+(null!=o?" "+o:"")+(null!=s?" "+s:"")+(null!=r?" "+r:"")+(null!=n?" "+n:""),console.log("Playerjs"+(1==v.pjsframed?"2":"")+": "+n),1==v.logout&&exist(document.getElementById("pjslog"))&&(document.getElementById("pjslog").innerHTML+=n+"<br/>"))},CustomFonts=function(){var e;1==v.fonts&&exist(v.fontnames)&&""!=v.fontnames&&((e=document.createElement("link")).rel="stylesheet",e.href="https://fonts.googleapis.com/css?family="+v.fontnames.replace(/,/gi,"|").replace(/ /gi,"+"),document.head.appendChild(e))},SvgColor=function(e,t){for(var i=["path","polygon","polyline","rect","ellipse","circle"],o=0;o<i.length;o++){var s=e.querySelectorAll("svg "+i[o]);if(0<s.length)for(var r=0;r<s.length;r++)s[r].style.fill=t}},Time=function(e){e<0&&(e=0);var t=600<=o.media.duration,i=3600<=o.media.duration,s=Math.floor(e/60),r=Math.floor(e-60*s),n=Math.floor(s/60),a=Math.floor(n/24);if(s-=60*n,0<a&&(n-=24*a),1==v.dvrtime&&o.media.isLive()){var l=new Date;return String(new Date(l.getTime()+1e3*e).toLocaleTimeString())}return String((0<a?a+":":"")+(0<n||i?n+":":"")+((0<n||t)&&s<10?"0":"")+s+":"+(r<10?"0":"")+r)},timeFormat=function(e){var t=Math.floor(e),i=Math.floor(t/60),s=Math.floor(i/60),i=Math.floor(i%60);0<s&&i<10&&(i="0"+i);i=(0<s?s+":":"")+(0<=i?i:"0")+":"+(t=0<=(t=Math.floor(t%60))?10<=t?t:"0"+t:"00");if(1==v.dvrtime&&o.media.isLive()){t=new Date;return String(new Date(t.getTime()+1e3*e).toLocaleTimeString())}return i},Href=function(){return encodeURIComponent(window.location!=window.parent.location?document.referrer:document.location.href)},NoSpan=function(e){var t;return!e||-1<(t=(e=e.toString()).indexOf(" <span style='opacity"))&&(e=e.substr(0,t)),e},Script=function(e,t,i){var o;return!Scripted(e)&&t&&("same"==t&&(t=e),(o=document.createElement("script")).src=-1==t.indexOf("//")?"//"+t:t,o.async=1,i&&(o.name=i),(i=document.getElementsByTagName("script")[0]).parentNode.insertBefore(o,i)),o},Scripted=function(e){for(var t=!1,i=document.getElementsByTagName("script"),o=0;o<i.length;o++)-1<i[o].src.indexOf(e)&&(t=!0);return t},hex2rgb=function(e,t){e=e.replace("#","");var i=parseInt(3==e.length?e.slice(0,1).repeat(2):e.slice(0,2),16),o=parseInt(3==e.length?e.slice(1,2).repeat(2):e.slice(2,4),16),e=parseInt(3==e.length?e.slice(2,3).repeat(2):e.slice(4,6),16);return t?"rgba("+i+", "+o+", "+e+", "+t+")":"rgb("+i+", "+o+", "+e+")"},css=function(e,t){if(exist(e))for(var i in t)t.hasOwnProperty(i)&&"NaNpx"!=t[i]&&null!=t[i]&&("number"==typeof t[i]&&"opacity"!=i&&"zIndex"!=i&&(t[i]+="px"),(-1<i.indexOf("color")||-1<i.indexOf("Color"))&&-1==t[i].indexOf("#")&&-1==t[i].indexOf("rgba")&&(t[i]="#"+t[i]),"transform"==i&&(e.style["-ms-"+i]=t[i],e.style["-moz-"+i]=t[i],e.style["-webkit-"+i]=t[i],e.style["-o-"+i]=t[i]),"fontFamily"==i&&-1<t[i].indexOf(" ")&&(t[i]='"'+t[i]+'"'),"box-sizing"==i?e.style.setProperty(i,t[i],"important"):e.style[i]=t[i])},Bglines=function(e,t,i,o){i=+existv(i,1),o=+existv(o,1);css(e,{background:"repeating-linear-gradient(-45deg,"+t+","+t+" "+i+"px,rgba(0,0,0,0),"+i+"px,rgba(0,0,0,0) "+(i+o)+"px)"})},CheckColor=function(e){return"#"!=e.substr(0,1)?e="#"+e:e},controlCSS=function(e,t,i){t=CheckColor(t=t||"#fff");var s=random(1e5,1e6),s=(e=(e=e.replace(/\(rand\)/g,s)).replace(/\(color\)/g,t)).substr(0,e.indexOf("|||")),t=e.substr(e.indexOf("|||")+3),e="";o.system.webkit&&(e=(e=(e=(e=t.replace(/animation:/g,"-webkit-animation:")).replace(/animation-/g,"-webkit-animation-")).replace(/@keyframes/g,"@-webkit-keyframes")).replace(/transform/g,"-webkit-transform")),i.innerHTML=s,pushCSS(e+t)},indOf=function(e,t){for(var i,o=0;o<e.length;o++)e[o]&&-1<e[o].indexOf(t)&&(i=!0);return i},pushCSS=function(e){o.css&&(o.css.styleSheet?o.css.styleSheet.cssText=e:o.css.appendChild(document.createTextNode(e)))},Pos0=function(e){css(e,{position:"absolute",top:0,left:0,width:"100%",height:"100%"})},Pnt0=function(e){css(e,{pointerEvents:"none"})},xhr=function(e,t){var i=new XMLHttpRequest;i.open("GET",e,!0),i.onload=t,i.send()},FindPjsDiv=function(e){if(e)for(var t=0;t<5&&"PJSDIV"!=e.nodeName;t++)e.parentElement&&(e=e.parentElement);return e},gif=function(e){var t=document.createElement("img");-1<o.gifed.indexOf(e)?(o.gifed.push(e),e=0<e.indexOf("?")?e+"&"+Math.random():e+"?"+Math.random()):o.gifed.push(e),t.setAttribute("src",e),t.setAttribute("height","1px"),t.setAttribute("width","1px")},attr=function(e,t){for(var i in t)t.hasOwnProperty(i)&&e.setAttribute(i,t[i])},destroy=function(e){if(e)try{e.parentNode.removeChild(e),e=null}catch(e){}},random=function(e,t){return Math.floor(1<arguments.length?(t-e+1)*Math.random()+e:(e+1)*Math.random())},randomstr=function(){return Math.random().toString(36).substring(2,12)},removebykey=function(i,o){return i=Object.keys(i).reduce(function(e,t){return t!=o&&(e[t]=i[t]),e},{})},trim=function(e){return"string"==typeof e?e.replace(/^\s+|\s+$/gm,""):e},cut=function(e,t,i){var o=!1;return e&&-1<e.indexOf(t)&&(o=e.substr(e.indexOf(t)+t.length),i&&-1<o.indexOf(i)&&(o=o.substr(0,o.indexOf(i)))),o},encode=function(e,t){return 0==t?"#0"+salt.e(e):-1==t?salt.e(e):1==t?"#1"+pepper(salt.e(e),1):void 0},str2obj=function(x){if(""!=v[x])if("string"!=typeof v[x])o[x+"o"]=v[x];else if(0==v[x].indexOf("[{"))try{v[x]=v[x].replace(/pjs'qt/gi,'"'),o[x+"o"]=eval(v[x])}catch(e){}},dechar=function(e){return String.fromCharCode(e)},decode=function(e){return"#1"==e.substr(0,2)?salt.d(pepper(e.substr(2),-1)):"#0"==e.substr(0,2)?salt.d(e.substr(2)):e},checkBase64=function(e){return e&&-1==e.indexOf("http")&&-1==e.indexOf(".")&&100<e.length&&-1==e.indexOf("data:")&&(e="data:image/png;base64,"+e),e},hide=function(e){e&&(e.style.visibility="hidden")},show=function(e){e&&(e.style.visibility="visible")},hide2=function(e){e&&(e.style.display="none")},show2=function(e){e&&(e.style.display="block")},isVisible=function(e){return!!e&&("hidden"!=e.style.visibility&&"none"!=e.style.display)},int=function(e){return"string"==typeof e&&0<e.indexOf("px")&&(e=e.substr(0,e.indexOf("px"))),parseInt(e)},hidden=function(e){return"none"==e.style.display},hexToRgb=function(e){if(e){e=parseInt(e,16);return(e>>16&255)+","+(e>>8&255)+","+(255&e)}},MarginPadding=function(e,t,i){return e[t+"top"]=0,e[t+"right"]=0,e[t+"bottom"]=0,e[t+"left"]=0,!exist(e[i])||4==(i=e[i].split(" ")).length&&(e[t+"top"]=i[0]?parseFloat(i[0]):0,e[t+"right"]=i[1]?parseFloat(i[1]):0,e[t+"bottom"]=i[2]?parseFloat(i[2]):0,e[t+"left"]=i[3]?parseFloat(i[3]):0),e},MarPad=function(e){return(e=e&&e.replace(/ /gi,"px "))+"px"},StringVar=function(e,t){return v[e]&&""!=v[e]?v[e]:t},abc=String.fromCharCode(65,66,67,68,69,70,71,72,73,74,75,76,77,97,98,99,100,101,102,103,104,105,106,107,108,109,78,79,80,81,82,83,84,85,86,87,88,89,90,110,111,112,113,114,115,116,117,118,119,120,121,122),salt={_keyStr:abc+"0123456789+/=",e:function(e){var t,i,o,s,r,n,a="",l=0;for(e=salt._ue(e);l<e.length;)o=(n=e.charCodeAt(l++))>>2,s=(3&n)<<4|(t=e.charCodeAt(l++))>>4,r=(15&t)<<2|(i=e.charCodeAt(l++))>>6,n=63&i,isNaN(t)?r=n=64:isNaN(i)&&(n=64),a=a+this._keyStr.charAt(o)+this._keyStr.charAt(s)+this._keyStr.charAt(r)+this._keyStr.charAt(n);return a},d:function(e){var t,i,o,s,r,n,a="",l=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");l<e.length;)o=this._keyStr.indexOf(e.charAt(l++)),t=(15&(s=this._keyStr.indexOf(e.charAt(l++))))<<4|(r=this._keyStr.indexOf(e.charAt(l++)))>>2,i=(3&r)<<6|(n=this._keyStr.indexOf(e.charAt(l++))),a+=dechar(o<<2|s>>4),64!=r&&(a+=dechar(t)),64!=n&&(a+=dechar(i));return a=salt._ud(a)},_ue:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",i=0;i<e.length;i++){var o=e.charCodeAt(i);o<128?t+=dechar(o):(127<o&&o<2048?t+=dechar(o>>6|192):(t+=dechar(o>>12|224),t+=dechar(o>>6&63|128)),t+=dechar(63&o|128))}return t},_ud:function(e){for(var t,i="",o=0,s=0;o<e.length;)(t=e.charCodeAt(o))<128?(i+=dechar(t),o++):191<t&&t<224?(s=e.charCodeAt(o+1),i+=dechar((31&t)<<6|63&s),o+=2):(s=e.charCodeAt(o+1),c3=e.charCodeAt(o+2),i+=dechar((15&t)<<12|(63&s)<<6|63&c3),o+=3);return i}},pepper=function(e,t){e=(e=e.replace(/\+/g,"#")).replace(/#/g,"+");var i=sugar(o.y)*t;t<0&&(i+=abc.length/2);var s=abc.substr(2*i)+abc.substr(0,2*i);return e.replace(/[A-Za-z]/g,function(e){return s.charAt(abc.indexOf(e))})},sugar=function(e){e=e.split(dechar(61));var t,i,o="",s=dechar(120);for(i in e)if(e.hasOwnProperty(i)){var r,n="";for(r in e[i])e[i].hasOwnProperty(r)&&(n+=e[i][r]==s?dechar(49):dechar(48));t=parseInt(n,2),o+=dechar(t.toString(10))}return o.substr(0,o.length-1)},exist=function(e){return null!=e&&void 0!==e&&"undefined"!=e},existv=function(e,t){return exist(e)?e:t},exist2=function(e){return exist(e)&&-1!=e&&""!=e},copyObject=function(e){return"object"==typeof e&&(e=JSON.parse(JSON.stringify(e))),e},findLeft=function(e){return e.getBoundingClientRect().left+(window.scrollX||window.pageXOffset)},checkFont=function(e){return 1==v.globalfont&&exist2(v.globalfontname)&&(e=v.globalfontname),e},findTop=function(e){return e.getBoundingClientRect().top+window.scrollY},redirect=function(e){""!=e&&(1==v.redirectblank?window.open(e):window.location.href=e,e="")},reRightMenu=function(){1==v.rightmenu&&(o.rightmenu&&o.frame.removeChild(o.rightmenu),o.rightmenu=null)},Actions=function(){var _fullscreen_end=!1,volumewheelin;function Prefile(e){return exist(v.prefile)&&-1==e.indexOf("//")&&(e=v.prefile+e),e}function Thumbs(){1==v.thumbs&&"undefined"!=typeof PluginThumbs&&(o.th=new PluginThumbs)}function onPlay(e){o.onplay=!0,o.controls&&o.controls.SettingsVisible()&&o.controls.Settings(),o.droplist&&o.droplist.Close(),e||o.media.Play(),o.checknative||setTimeout(function(){o.media.NativeControls()},500),o.play||o.controls.Play(),1==v.effects&&o.effects.api("play"),1==v.vast&&o.actions.VastRecover("pauseroll"),o.system.mobile&&o.controls.HideInterval(),exist(o.share)&&o.share.isOpen()&&o.share.Hide(),1==v.heartbeats&&exist(v.heartbeat)&&o.dt&&(""==v.heartbeat||exist(o.heartbeatInterval)||(o.heartbeatInterval=setInterval(Heartbeat,1e3*v.heartbeatinterval),Heartbeat()))}function StartTimeout(){o.starttimeout=!1,o.controls.refresh()}function Quartile(e){o.quartile[e]=!0,1==v.timestore&&1==v.playedstore&&v.playedquartile==e&&o.storage&&o.plid&&o.continue&&o.continue.writePl(o.plid)}function gaTrackPlay(e,t,i,s){exist(o.gatracked[t])||s<i&&gaTracker(e,t,1)}function NativeEnterFs(){var e=o.media.tag();e&&(o.nativefull=!0,o.media.nativeSubtitle(),e.webkitEnterFullScreen(),e.addEventListener("webkitendfullscreen",iosExitFullscreen))}function NativeExitFs(){var e=o.media.tag();e&&e.webkitExitFullscreen()}function PostFullscreen(){1!=o.fs_error&&(o.ispipkit&&o.media.PipWebkit(),1==v.hotkey.volumewheelfull&&(VolumeWheelX(!0),o.volumewheel=!0),1==v.effects&&o.effects.api("full"),js("fullscreen"),gaTracker("full","Fullscreen",1))}o.system.tv&&log("tv"),this.Title=function(e){o.controls&&o.controls.title(e)},this.File=function(t){if(!t)return t;if("string"==typeof t&&0==(t=t.replace(/(\r\n|\n|\r)/gm,"")).indexOf("[{"))try{t=t.replace(/pjs'qt/gi,'"'),t=JSON.parse(t)}catch(e){t="incorrect JSON"}if("object"==typeof t&&(o.playlist_dic=[],o.playlist_source=copyObject(t),o.playlist=IndexPlaylist(t),0<o.playlist.length)){var e;1!=v.playlist.openlast||v.plstart||(e=Object.keys(o.playlist_dic).slice(-1)[0])&&(v.plstart=e);var i=FindFileInPlaylist();if(i){t=i.file,o.titlestore=i.title,o.controls&&o.controls.titlepl(i.title),exist(i.poster)&&(o.media?o.media.Poster(i.poster):v.poster=i.poster),exist(i.sub)&&(i.subtitle=i.sub),exist(i.start)&&(v.start=o.seekto=i.start),SettingsTimers("offset"),exist(i.id)&&(o.plid=i.id);var s=["subtitle","vars","embed","url","url2","url3","heartbeat","thumbnails","label","download","points","remove","end","delete","title2","skip"];exist(v.control_title)&&1==v.control_title.showfrom1file&&1==v.control_title.showtitleplaylist&&(s.push("title"),s.push("t1"),s.push("t2"),s.push("t3"),s.push("t4"),s.push("t5"));for(var r=0;r<s.length;r++)exist(i[s[r]])&&(v[s[r]]=i[s[r]]);0<s.indexOf("title")&&(1==v.control_title.templated&&(o.title_template=v.control_title.template,o.actions.TitleTemplate(i)),o.actions.Title("title")),o.controls&&o.controls.UpdatePlaylist(o.playlist),o.droplist&&o.droplist.Update()}}if("string"==typeof t){var n;if(0==(t=fjs(t)).indexOf("#"+v.enc2)&&(t=o[o.fd[0]](t)),t&&(0==t.indexOf("#"+v.enc3)&&0<t.indexOf(v.file3_separator)&&(t=o[o.fd[1]](t)),0==t.indexOf("#0")&&(t=fd0(t)),t=fjs(t)),1==v.fplace&&(t=fplace(t)),""==t&&(log("empty file"),o.media_error=!0,js("error","empty")),o.files_quality=[],o.files_quality_ag=[],o.files_audiotrack=[],o.current_file=0,o.current_quality=0,o.current_audiotrack=0,""==v.file_separator&&(v.file_separator=","),-1<t.indexOf("]")&&-1<t.indexOf("[")||exist(v.qualities)?o.files=t.split(v.file_separator):o.files=[t],o.audiotracks=[],exist(v.qualities)&&(n=v.qualities.split(v.file_separator)),0<o.files.length)for(var a,l=-1,r=0;r<o.files.length;r++)o.files[r]=trim(o.files[r]),""!=o.files[r]&&(0==o.files[r].indexOf("[")&&1<o.files[r].indexOf("]")?(o.files_quality[r]=o.files[r].substr(o.files[r].indexOf("[")+1,o.files[r].indexOf("]")-1),o.files[r]=o.files[r].substr(o.files[r].indexOf("]")+1)):exist(v.qualities)?o.files_quality[r]=exist(n[r])?n[r]:"":o.files_quality[r]=r+1,a=0,exist(v.default_quality)&&-1==l&&(0==String(v.default_quality).indexOf("num:")&&+v.default_quality.substr(4)==r&&(a=1),v.default_quality==o.files_quality[r]&&(a=1),"max"==v.default_quality&&r==o.files.length-1&&(a=1)),exist(o.default_quality)&&o.default_quality==o.files_quality[r]&&(a=1,l=r),1==a&&(o.current_file=r,o.current_quality=r),o.files[r]=Prefile(o.files[r]));else o.files[0]=Prefile(o.files[0]);return o.files[o.current_file]}},this.InvertPlaylist=function(){if(o.playlist){for(var e=o.playlist.reverse(),t=0;t<e.length;t++)e[t].pjs_i=t;o.playlist=e,o.controls.UpdatePlaylist(o.playlist)}},this.UpdatePlaylist=function(e){"object"==typeof e&&(o.playlist_dic=[],o.playlist_source=copyObject(e),o.playlist=IndexPlaylist(e),o.controls&&o.controls.UpdatePlaylist(o.playlist))},this.NewFile=function(e,t,i,s){exist(t)||(v.autoplay=1),exist(i)||(v.preload=0),v.duration=void 0,v.end=void 0,v.delete=void 0,2!=o.media_error&&(o.media_error=!1),o.metadata=!1,o.pipwebkit=!1,o.reloadTimer=0,o.gatracked=[],o.checknative=!1,o.gained=!1,o.dvr=!1,o.bitrate=void 0,o.quartile=[!1,!1,!1],o.sess=randomstr(),o.sesstime=0,o.pld&&(o.pld=[]),"pjs"!=o.file_type&&o.sbt&&o.sbt.remove(),o.err404v&&o.err404v.remove(),"playing"==o.media.status()&&this.Stop(),o.cut&&o.cutted&&o.controls.Cut(),exist(o.share)&&o.share.Remove(),exist(o.reloadto)&&clearTimeout(o.reloadto),js("new"),1==v.vast&&1!=s&&(o.actions.VastRecover(),o.actions.VastRecover("midroll")),e=this.File(e),1==t&&(o.file_type=""),o.media.File(e),!o.system.mobile&&!o.system.safari||exist(t)||o.actions.Play(),exist(o.custom_aspect)&&(o.mediascale={x:1,y:1,x0:1,y0:1},o.media.normalscale()),gaTracker("play","Play"),o.media.NativeControls(),o.controls.QualityChangedNoHand(),o.controls.AudioTrackChangedNoHand(),o.controls.refresh(),o.mediatags&&o.mediatags.read()},this.TitleTemplate=function(e){var t=!1;if(e&&o.title_template){v.title=o.title_template;for(var i=1;i<6;i++)exist(e["t"+i])&&(v.title=v.title.replace("{"+i+"}",e["t"+i]),t=!0)}return t},this.MediaReady=function(){1==v.autoplay&&(1==v.observer?setTimeout(function(){o.actions.Play()},500):this.Play(),v.autoplayed=1),Thumbs()},this.Thumbs=function(){Thumbs()},this.NativeControls=function(){var e=!1;return o.system.mobile&&(e=!0,1==v.nativenotiphone&&o.system.iphone&&(e=!1),1==v.nativenotipad&&o.system.ipad&&(e=!1),1==v.nativenotios&&o.system.ios&&(e=!1),1==v.nativenotandroid&&o.system.android&&(e=!1)),1==v.nativeontv&&o.system.tv&&(e=!0),e},this.Metadata=function(){o.media.Volume(v.volume),o.muted&&o.media.Mute(),o.metadata=!0,o.controls&&o.controls.refresh(),o.play||o.start||1==v.effects&&o.effects.api("pause"),o.casting&&o.tagvideo&&(o.chromecast.Exit(),o.chromecast.Go()),1==v.vast&&1!=v.nomidroll&&1==v.midrolls&&(exist(o.vast)||MidrollOverlay("midroll","metadata"))},this.onPlayTag=function(){o.onplay||onPlay(!0)},this.Play=function(e){if(!o.play&&o.media){var t=!(o.actplay=!0);if("youtube"==o.file_type&&(o.media.YoutubeReady()||1==v.autoplay||1!=v.preload||(t=!0,window.YT&&(v.autoplay=1,o.media.onYoutubeReady()))),1==v.pass&&0==v.passontime&&(o.actions.Password(),t=!0),o.media_error||t)o.media_error&&Advertising("preroll")&&datetime(2);else{if(o.newfile=!1,StopOtherPlayer(!o.start),o.alert.close(),o.start)gaTracker("resume","Resume");else{js("start"),o.start=!0,1==v.toolbar.hideuntilstarted&&setTimeout(function(){o.controls.resizetext()},100),0<v.toolbar.hideleavetimeout&&1==v.autoplay&&(o.starttimeout=!0,setTimeout(StartTimeout,1e3*v.toolbar.hideleavetimeout)),1==v.water&&v.wid&&PluginWater();for(var i=0;i<o.vsts.length;i++)1==v["vast_nofirst"+o.vsts[i]]&&localStorage.setItem("pljsfirst"+o.vsts[i],Date.now());1==v.pjsstat&&v.pjsstatid&&PluginStat("start"),js("new"),o.controls.refresh(),gaTracker("play","Play"),o.ab&&gaTracker("adblock","AdBlock",1)}1!=v.fullonplay||o.fullscreen||(new Date).getTime()-o.clicktime<300&&(1!=v.fullonplaymobile||o.system.mobile)&&this.Fullscreen(),o.subtitle_on&&1==v.subpausehide&&show2(o.subtitle),o.err404v&&o.err404v.remove(),1!=e&&Advertising("preroll")||Advertising("intro")?datetime(2):(1==v.redirect&&exist(v.redirectonplay)&&!exist(options.redirect)&&(redirect(v.redirectonplay),t=!0),t||(log("Play"),"pdf"!=o.file_type&&0<o.media.duration()&&o.controls.Duration(o.media.time(),o.media.duration()),o.start2||(o.start2=!0,0<v.toolbar.hideleavetimeout&&1==v.autoplay&&(o.starttimeout=!0,setTimeout(StartTimeout,1e3*v.toolbar.hideleavetimeout))),t=!1,1<o.media.time()&&1==v.pauserollonplay&&1!=e&&!isVastBgLoad()&&!exist(o.vast)&&!exist(o.vastloader)&&(t=Advertising("pauseroll")),t&&!isVastBgLoad()||onPlay(!1)))}}else o.media&&o.media.Play()},this.Pause=function(){o.play&&(o.actplay=!1,log("Pause"),o.media.Pause(),o.controls.Pause(),js("pause"),1==v.posteronpause&&ShowPoster(),1==v.posterhidepause&&HidePoster2(),1==v.effects&&o.effects.api("pause"),o.subtitle_on&&1==v.subpausehide&&hide2(o.subtitle),exist(o.vast)||exist(o.vastloader)||0!=v.pauserollonplay||Advertising("pauseroll"),o.onplay=!1)},this.Mute=function(){o.media.Mute(),o.controls.Mute(),o.muted=!0,js("mute")},this.Unmute=function(){o.media.Unmute(),o.muted=!1,o.controls.Unmute(),o.media.Volume(v.volume),js("unmute")},this.Volume=function(e,t){e<.01&&(e=0),1<e&&(e=1),e<=0?(this.Mute(),e=v.volume=0):(o.muted&&this.Unmute(),v.volume=e),js("volume",e),o.controls.Volume(e,t),o.media.Volume(e)},this.Waiting=function(){o.controls.Waiting()},this.StopWaiting=function(){o.controls&&o.controls.StopWaiting()},this.Progress=function(){this.StopWaiting()},this.Seeked=function(){o.actions.UpdatePlay(),this.StopWaiting()},this.Duration=function(e,t){var i;!o.continue||o.start||(i=o.continue.flag()).t&&i.d&&(e=i.t),o.controls&&o.controls.Duration(e,t)},this.LoadedData=function(e,t){exist(o.seekto)&&"youtube"!=o.file_type&&!o.media.isLive()&&(o.actions.Seek(o.seekto,!1),o.seekto=void 0)},this.ScreenClick=function(){var e=new Date;o.clicktime=e.getTime();e=!1;o.controls.SettingsVisible()&&1!=v.settings.always&&(o.controls.Settings(),e=!0),o.droplist&&o.droplist.Visible()&&(o.droplist.Close(),e=!0),0==v.playlist.always&&o.controls.PlaylistVisible()&&1==v.playlist.autohide&&(o.controls.Playlist(),e=!0),1==v.redirect&&exist(v.redirectonclick)&&!exist(options.redirect)&&(redirect(v.redirectonclick),e=!0),o.muted&&1==v.unmuteonclick&&(o.actions.Unmute(),e=!(v.unmuteonclick=0)),e||(1==v.hotkey.on&&1==v.hotkey.icons&&1==v.hotkey.playiconbut&&PluginHotIcon("play",o.play?0:1),this.Toggle())},this.ControlsBgClick=function(){o.controls.SettingsVisible()&&o.controls.Settings()},this.Toggle=function(){"playing"==o.media.status()?this.Pause():this.Play(),Sub()},this.Seek=function(e,t){e<o.media.duration()&&(1==v.control_line.dontseekforward&&e>o.media.time()||(0<v.delete&&e<v.delete&&(e=v.delete),o.seeked_time=e,o.media.Seek(e),t&&o.controls.Seek(e,o.media.duration()),o.seeking=!0,o.seeking_time=o.media.time(),Sub(o.seeking_time)))},this.Open=function(e,t,i){"playing"==o.media.status()&&"audio"!=o.mode&&(Pause(),o.fullscreen&&i&&o.actions.Normalscreen()),window.open(e,t)},this.Download=function(){var e=o.media.currentFile();exist(v.download)&&(e=v.download),""!=e&&(js("download"),window.open(e,1==v.downself?"_self":"_blank").focus())},this.UpdatePlay=function(){var e=o.media.time(),t=o.media.duration();o.controls.Played(e,t)},this.Playing=function(){var e=o.media.time(),t=o.media.duration(),i=0<t?e/t:0;o.seeking?e!=o.seeking_time&&(o.seeking=!1):o.controls&&o.controls.Played(0<o.seekto?o.seekto:e,t),(1==v.ga||1==v.yamtr)&&0<t&&(gaTrackPlay("play25","Play 25%",i,.25),gaTrackPlay("play50","Play 50%",i,.5),gaTrackPlay("play75","Play 75%",i,.75));for(var s,r,n,a=0;a<3;a++)o.quartile[a]||.25*a+.25<=i&&Quartile(a);if(1==v.reloadlog&&log(1,e,t),1==v.reload&&o.play&&(r=s=!1,1==v.reloadlive&&(o.media.isLive()||(s=!0)),0<e?(e!=o.time||s?o.reloadTimer=0:r=!0,o.time=e):1==v.reloadstart&&(n=o.media.loaded(),1==v.reloadlog&&log(2,n,o.timeld),s||(n==o.timeld?r=!0:o.reloadTimer=0),o.timeld=n),r&&(o.reloadTimer++,1==v.reloadlog&&log(3,o.reloadTimer),o.reloadTimer==v.reloadtimeout*(1e3/o.timerTime)&&o.actions.Reload())),v.apiprm&&1==v.apiprm.pld&&0<t&&(o.pld||(o.pld=[]),o.pld[Math.round(e)]=1),1==v.vast&&(1!=v.nomidroll&&1==v.midrolls&&(exist(o.vast)||MidrollOverlay("midroll",e,t)),1!=v.nooverlay&&1==v.overlays&&(exist(o.vast)||MidrollOverlay("overlay",e,t))),1==v.intros&&0<v.introstart&&e>=v.introstart&&(exist(o.vast)||(Advertising("intro")&&(o.media.Pause(),o.controls.Pause()),v.introstart=0)),SettingsTimers("play"),1==v.pass&&-1<v.passontime&&PasswordTime(e,t),o.subtitle_on&&Sub(e),o.storage&&1==v.timestore&&o.continue&&o.continue.write(e,t),o.cutted&&o.cut&&o.cut.play(e),exist(v.end)&&0<v.end&&e>v.end&&("youtube"==o.file_type?(o.media.Pause(),o.media.Seek(0<v.start?v.start:0)):(o.media.Recover(),o.actions.Stop()),0<v.start&&(o.seekto=v.start),o.actions.Ended()),exist(v.remove))for(var l=v.remove.split(","),a=0;a<l.length;a++){var c=l[a].split("-");2==c.length&&e>c[0]&&e<c[1]&&o.media.Seek(c[1]+1)}},this.Reload=function(){var e;o.reloadTimer=0,exist(o.reloadto)&&clearTimeout(o.reloadto),1==v.reloadjustevent?js("reload"):(0<o.seekto||o.media.isLive()||(o.seekto=o.media.time()+(0<v.reloadplus?1:0)),e=o.controls.PlaylistVisible(),js("reload"),o.media.reload(),e&&1==v.playlist.autohide&&o.controls.PlaylistShow())},this.Stopped=function(){o.controls.Played(0,0),o.controls.Loaded(0,0),o.actions.Duration(0,0),o.controls.StopWaiting()},this.Loading=function(){var e,t;o.media&&(e=o.media.loaded(),1==v.pjsiframed&&js("loaded",e),t=o.media.duration()),o.controls&&o.controls.Loaded(e,t)},this.Ended=function(){js("fileend"),1==v.loop?("youtube"==o.file_type&&this.Stop(),1==v.vast&&o.actions.VastRecover("preroll"),0<v.start&&o.actions.Seek(v.start),this.Play()):(o.media.isLive()||"youtube"==o.file_type?this.Stop():1==v.finishrewind&&(o.actions.Seek(0<v.start?v.start:0,!0),o.system.ie&&o.media.Pause()),o.controls.onEnded(),1==v.intros&&(v.outros=1),Advertising("postroll")||Advertising("outro")||End())},this.Fullscreen=function(){var e,t=!1,i=!1;for(e in o.fs_error=!1,o.fullscreen_process=!0,setTimeout(function(){o.fullscreen_process=!1},3e3),o.motions)if(o.motions.hasOwnProperty(e)&&exist(o.motions[e]))try{o.motions[e].TheEnd2()}catch(e){}try{if(o.fullscreen_start=!0,(o.system.ios&&1==v.nativefullios||o.system.android&&1==v.nativefulldroid)&&o.tagvideo&&!o.nativecontrols&&(e=o.media.tag())&&e.webkitSupportsFullscreen&&(NativeEnterFs(),t=!0),!t){var s,r=o.frame;if(("dm"==o.file_type||"vimeo"==o.file_type)&&o.system.iphone&&1==v.nativefullios)return void o.media.iosfull();r.requestFullscreen?(o.realfullscreen=!0,void 0!==(s=r.requestFullscreen({navigationUI:"hide"}))&&s.then(function(){}).catch(function(e){})):r.requestFullScreen?(r.requestFullScreen({navigationUI:"hide"}),o.realfullscreen=!0):o.frame.mozRequestFullScreen?(r.mozRequestFullScreen({navigationUI:"hide"}),o.realfullscreen=!0):r.webkitRequestFullScreen?(r.webkitRequestFullScreen({navigationUI:"hide"}),o.realfullscreen=!0):r.msRequestFullscreen&&(r.msRequestFullscreen(),o.realfullscreen=!0)}}catch(e){i=!0,log(e)}o.realfullscreen||t||(o.system.webkit&&o.iniframe?NativeEnterFs():this.FullscreenUI()),i||setTimeout(PostFullscreen,200)},this.NativeExitFs=function(){NativeExitFs()};var lastwheel={x:0,y:0},vast_and,vast_or,vast_type,vasturl;function VolumeWheel(e){var t;o.droplist&&o.droplist.OpenScroll()||0!=e.wheelDelta&&(1==v.hotkey.scrollwheelfull&&o.fullscreen||(o.hidden_volume_over=!0,clearInterval(volumewheelin),volumewheelin=setInterval(function(){o.hidden_volume_over=!1,o.controls.resize(),lastwheel={x:0,y:0},clearInterval(volumewheelin)},2e3),o.controls.resize(),e.preventDefault()),0!=e.deltaX?lastwheel.x++:lastwheel.x--,0!=e.deltaY?lastwheel.y++:lastwheel.y--,lastwheel.x>lastwheel.y?0<e.deltaX?o.actions.Volume(parseFloat(v.volume)-v.hotkey.wheelstep/10,"no"):o.actions.Volume(parseFloat(v.volume)+v.hotkey.wheelstep/10,"no"):(t=o.system.win?-v.hotkey.wheelstep/10:v.hotkey.wheelstep/10,1==v.hotkey.scrollwheelfull&&o.fullscreen?o.media.scale(0<e.deltaY?t:-t):(o.actions.Volume(parseFloat(v.volume)+(0<e.deltaY?t:-t),"no"),o.controls.volumescroll())))}function iosExitFullscreen(){o.system.ios&&(o.media.removeNativeSubtitle(),js("exitfullscreen")),o.nativefull=!1}function NewAspect(e,t){if(exist(o.vast)&&!t)o.resizeonplay=e;else{var t=!1,i=o.container_w/e;if(exist(o.parentIframe)&&1!=v.notframe)try{css(o.parentIframe,{height:i})}catch(e){t=!0,log("iframe crossdomain issue")}t||(o.aspect=e,o.container_h=i,0<o.aspect&&css(o.container,{height:i}),js("height",i)),o.vast&&!o.fullscreen&&(o.screen_h=i,o.vast.Resize())}}function VolumeWheelX(e){lastwheel={x:0,y:0},e?window.addEventListener("wheel",VolumeWheel):(clearInterval(volumewheelin),window.removeEventListener("wheel",VolumeWheel))}function Sub(e){o.sbt&&o.sbt.show(exist(e)?e:o.media.time())}function Advertising(e){if(0<v["vast_"+e+"timebreak"]&&o.storage){var t=localStorage.getItem("pljs"+e+"_"+o.d);if(t){var i=new Date;if(o.clicktime=i.getTime(),(i.getTime()-t)/36e5<v["vast_"+e+"timebreak"])return!1}}if(0<v["vast_"+e+"timelimit"]&&0<o.media.duration()&&o.media.duration()<60*v["vast_"+e+"timelimit"]){if(!(0<v["vast_"+e+"timelimited"]))return!1;v["vast_"+e+"_andlimit"]=v["vast_"+e+"timelimited"]}if(-1==o.compilations.indexOf("VAST")||1!=v.vast||o.noads||1!=v[e+"s"])return!1;if("undefined"==typeof VastVideo)return!1;if(("intro"==e||"outro"==e)&&"undefined"!=typeof PluginIntro)return vasturl=[],PluginIntro(e);if(exist(o.vast)||exist(o.vastloader))return!isVisible(o.vastcontainer)||isVastBgLoad(o.vasttype)?(log("ad bg"),!1):(log("ad now"),!0);if(exist(v[e])){if(-1<v[e].toString().indexOf(".")||-1<v[e].toString().indexOf(":")||-1<v[e].toString().indexOf("[yandex]")){js("vast_init",e),isVastBgLoad(e)||"overlay"==e||(setTimeout(function(){o.play||null==o.vastloader&&null==o.vast||o.actions.Waiting()},10),Curtain()),vast_or=vast_and=0,vasturl=v[vast_type=e].split(" and "),o.vast_loaders=[],o.adsinchain=vasturl.length,VastAndLimit(),o.adscounter=1,o.adsfirst=!0;for(var s=0;s<vasturl.length;s++)vasturl[s]=vasturl[s].split(" or ");v[e.concat("_","recover")]=v[e],v[e]=null,"overlay"!=(o.vasttype=e)&&(o.vast=new VastVideo),o.vastloader=new VastLoader;for(s=0;s<vasturl.length;s++)for(var r,n=0;n<vasturl[s].length;n++)0<(l=trim(vasturl[s][n])).indexOf("[50%]")&&(r=random(1,2),vasturl[s][n]=vasturl[s][n].replace("[50%]",""),2==r&&(vasturl[s][n]=""));if(1==v.vast_preload)for(s=0;s<vasturl.length;s++){var a=0==s?1:0;if(vasturl[s].length>a)for(n=a;n<vasturl[s].length;n++){var l=trim(vasturl[s][n]);o.system.ie9?VastAddPreload(l):setTimeout(VastAddPreload,100*s,l)}}return""==vasturl[0][0]?VastNext():o.vastloader.Load(trim(vasturl[0][0]),e),!0}return!1}return!1}function MidrollOverlay(e,t,i){if(exist(o[e+"o"])&&1==v[e+"s"])for(var s in o[e+"o"])if(o[e+"o"].hasOwnProperty(s)&&!exist(o[e+"o"][s].worked)&&exist(o[e+"o"][s].time)&&exist(o[e+"o"][s].vast)){var r=o[e+"o"][s].time.toString(),n=!1;if(r&&("metadata"==t?r==t&&(n=!0):(r=0<r.indexOf("%")?0<i?parseInt(r.substr(0,r.indexOf("%")))*i/100:-1:parseInt(r))<=t&&(0<v["vast_"+e+"rest"]&&-1<r&&t-r>=v["vast_"+e+"rest"]&&(r=-1),-1<r&&(n=!0)),o[e+"o"][s].minduration&&0<o.media.duration()&&o.media.duration()<+o[e+"o"][s].minduration&&(n=!(o[e+"o"][s].worked=!0)),n&&(o[e+"o"][s].vast,v[e]=o[e+"o"][s].vast,o[e+"crtm"]=o[e+"o"][s].time,o[e+"skipimprsd"]=o[e+"o"][s].skipimpessed,Advertising(e)))){o[e+"o"][s].worked=!0;break}}}function VastBgLoad(){isVastBgLoad()&&(0!=o.vast_impressions&&1!=v["vast_"+o.vasttype+"bgload2"]||(css(o.vastcontainer,{opacity:0,visibility:"hidden",top:2e3}),log(o.vasttype+" hide")))}function isVastBgLoad(e){for(var t=!1,i=["midroll","pauseroll"],s=0;s<i.length;s++)o.vasttype!=i[s]&&e!=i[s]||1==v["vast_"+i[s]+"bgload"]&&(t=!0);return t}function VastVisible(){isVastBgLoad()&&(o.play&&(o.media.Pause(),o.controls.Pause()),log(o.vasttype+" show"),css(o.vastcontainer,{opacity:1,visibility:"visible",top:0}),o.vastfrombg=1),o.nativefull&&!o.realfullscreen?NativeExitFs():1==v["vast_"+o.vasttype+"normal"]&&o.fullscreen&&o.actions.Normalscreen()}function VastGo(e){o.vast.Go(e)}function VastLongTimeout(){exist(o.vast)&&o.vast.active()&&0==o.vast_impressions&&(o.vast.RemoveForNextAd(),log("VAST timeout "+v.vast_longtimeout),vasturl=[],VastRemoveAndPlay())}function VastCheckNext(){var e=VastAndLimit();log("VAST next "+!e),(e?VastRemoveAndPlay:VastNext)()}function VastAndLimit(){var e,t,i=!1;return o.vasttype&&(e=v["vast_"+o.vasttype+"_andlimit"],((t=v["vast_"+o.vasttype+"_and2limit"])||e)&&(0<t&&0<o.vast_starts?(o.adsinchain=t,o.vast_impressions>=t&&(i=!0)):0<e&&(o.adsinchain=e,o.vast_impressions>=e&&(i=!0)))),i}function VastNext(){var e,t;0<vasturl.length&&vasturl[vast_and]&&vast_or<vasturl[vast_and].length-1?(log("VAST Next"),o.vast&&o.vast.RemoveForNextAd(),VastBgLoad(),vast_or++,"skip"==(t=VastPreloaded(e=trim(vasturl[vast_and][vast_or])))&&(o.vastloader=new VastLoader,o.vastloader.Load(e,o.vasttype)),"error"==t&&VastNext()):VastRemoveAndPlay()}function VastPreloaded(e){var t="skip";if(1==v.vast_preload&&o.vast_loaders)for(var i,s=!1,r=0,n=0;n<o.vast_loaders.length;n++)if(0==o.vast_loaders[n].done)if(o.vast_loaders[n].ldr.preloaded(e)&&(o.vast_loaders[n].done=1,"ready"==(i=o.vast_loaders[n].ldr.Status())?(o.vastloader=o.vast_loaders[n].ldr,log("VAST preloaded"),o.vast_loaders[n].ldr.Ready(),t=i):(""==i&&(t="ok",log("VAST preloading"),o.vastloader=o.vast_loaders[n].ldr,o.vast_loaders[n].ldr.disablePreload()),"error"==i&&(t="error")),s=!0),s&&0==o.vast_loaders[n].load){if(!(++r<6))break;VastPreloadLoad(o.vast_loaders[n])}return t}function VastAddPreload(e){if(1==v.vast_preload&&o.vast_loaders){for(var t=0,t=0;t<vasturl.length;t++)if(vasturl[t]==e&&t<=vast_and)return;if(!(1==vasturl.length&&1<vasturl[0].length)){var i=0;for(t=0;t<o.vast_loaders.length;t++)0==o.vast_loaders[t].done&&i++;o.vast_loaders.push({load:0,done:0,x:trim(e),t:o.vasttype,ldr:new VastLoader(!0)}),i<5&&VastPreloadLoad(o.vast_loaders[o.vast_loaders.length-1])}}}function VastPreloadLoad(e){e&&(e.load=1,e.ldr.Load(e.x,e.t))}function VastRemoveAndPlay(e){var t,i=VastAndLimit();if(log("VAST remove ("+o.vast_impressions+")"),0<vasturl.length&&vast_and==vasturl.length-1&&0==vasturl[0][0].indexOf("js:")&&(vast_and=-1,vasturl=[[vasturl[0][0]]]),2==o.vast_stop&&(i=!0),vasturl.length>vast_and+1&&!i){o.vast.RemoveForNextAd(),VastBgLoad(),vast_and++,o.adscounter++,vast_or=0;var s=trim(vasturl[vast_and][0]),i=VastPreloaded(s);"skip"==i&&(o.vastloader=new VastLoader,o.vastloader.Load(s,vast_type)),"error"==i&&VastRemoveAndPlay(e)}else{if(RemoveCurtain(),o.controls.StopWaiting(),exist(o.vast)&&(o.vast.Remove(),o.vast=null),o.vastloader=null,vasturl=[],vast_or=0,vast_and=0,o.vastfrombg=0,1!=o.shwvstfnsh&&js("vast_finish",o.vasttype),o.shwvstfnsh=0,1==v.vast_ima&&o.ima){try{o.ima.Destroy()}catch(e){log(o.ima,e)}o.ima=void 0}vast_type="",o.vast_impressions=0,o.vpaid_starts=0,clearTimeout(o.vast_longtimeout),o.vast_longtomsg&&o.vast_longtomsg.remove(),o.vast_starts++,("preroll"==o.vasttype||"pauseroll"==o.vasttype&&1==v.pauserollonplay&&o.actplay||"midroll"==o.vasttype)&&"?"!=v.file&&(o.media.AfterVast(),"youtube"==o.file_type&&!o.vastclick&&o.system.ios&&(t=!0,"preroll"==o.vasttype&&o.media.reYT()),t||"dontplay"==e||1==v.vast_dontplay||o.actions.Play(1)),0<o.resizeonplay&&(NewAspect(o.resizeonplay),o.resizeonplay=0),"postroll"==o.vasttype&&End(),o.vastclick=!1,o.vasttype=null}}function Curtain(){o.curtain||(o.curtain=createElement("div"),o.frame.appendChild(o.curtain),Pos0(o.curtain),css(o.curtain,{background:"#000000",opacity:.1}),o.curtain.style.zIndex=1001)}function RemoveCurtain(){o.curtain&&(o.frame.removeChild(o.curtain),o.curtain=null)}function ShowPoster(){exist(o.poster)&&(v.poster!=o.currentposter&&Poster(v.poster,o.poster,v.poster_scale),show(o.poster),css(o.poster,{opacity:v.poster_a}),o.controls.refresh())}function HidePoster2(){clearTimeout(o.pstr_to),1==v.posteronpause&&!o.play||(css(o.poster,{opacity:0}),setTimeout(HidePoster3,500))}function HidePoster3(){!o.play&&1==v.posterhide||hide(o.poster)}function StopOtherPlayer(e){if(1==v.stopotherplayers)for(var t=0;t<pljssglobal.length;t++)pljssglobal[t].api("id")!=v.id&&pljssglobal[t].api("pause");pljssglobalid=v.id}function IndexPlaylist(e){var t=Object.keys(e).length;return 0<t&&(e=IndexPlaylistProcessor(e,t,"",-1)),e}function IndexPlaylistProcessor(e,t,i,s){var r,n=[];exist(e.playlist)&&(t=(e=e.playlist).length);for(var a=0,l=0;l<t;l++){if(r=!1,exist(e[l].id)&&(e[l].pjs_id=e[l].id),e[l].id="x"+i+"-"+l+(exist(e[l].id)?"-"+e[l].id:""),-1!=s||0!=l||exist(e[l].folder)||(o.pl_first_id=e[l].id),exist(o.pl_first_id)||0!=s||exist(e[l].folder)||(o.pl_first_id=e[l].id),e[l].pjs_parent=i,e[l].pjs_parent_i=s,e[l].pjs_i=a,exist(e[l].comment)){e[l].title=e[l].comment;var c=e[l].file?e[l].file.indexOf("["):0,d=e[l].file?e[l].file.indexOf("]"):0;if(0<c&&0<d){for(var u=e[l].file.substr(c+1,d-c-1),h=u.split(","),f="",p=0;p<h.length;p++)f+="["+h[p]+"]"+e[l].file.replace("["+u+"]",h[p])+(p<h.length-1?",":"");e[l].file=f}}exist(e[l].playlist)&&(e[l].folder=e[l].playlist),exist(e[l].folder)||exist(e[l].file)&&(""!=e[l].file||exist(e[l].redirect))||(r=!0),r||(o.playlist_dic[e[l].id]=e[l],a+=1),!exist(e[l].folder)||0<(c=Object.keys(e[l].folder).length)&&(e[l].folder=IndexPlaylistProcessor(e[l].folder,c,e[l].id,l)),r||n.push(e[l])}return n}function FindFileInPlaylist(){var e=[];if(exist(v.plstart)){if(0!=v.plstart.indexOf("x-"))for(var t in o.playlist_dic)o.playlist_dic.hasOwnProperty(t)&&o.playlist_dic[t].pjs_id==v.plstart&&(v.plstart=t);exist(o.playlist_dic[v.plstart])?(1==v.playlist.norootplstart&&(v.playlist.openplaylistroot=0),e=o.playlist_dic[v.plstart]):(e=o.playlist[0],v.plstart==o.plcontinue&&(o.seekto=void 0))}else e=o.playlist[0];if(e){for(var i=0;i<10&&exist(e.folder);i++)e=e.folder[0];v.plstart=e.id,v.plstart==o.plcontinue&&(e.start=void 0)}return e}function End(){gaTracker("end","End",1),o.actions.VastRecover(),o.storage&&1==v.timestore&&o.continue.write(0,o.media.duration()),o.controls.PlaylistExist()?1==v.playlist.autoplaylist&&o.controls.PlaylistNextExist()?(o.controls.PlaylistNext(),o.play&&o.system.ios&&o.file_type):End2():(1==v.finishnormal&&o.fullscreen&&o.actions.Normalscreen(),ShowPoster(),js("finish"))}function End2(){1!=v.playlist.playlistrewind||o.controls.PlaylistNextExist()?(1==v.playlist.openplaylistafter&&(o.controls.PlaylistVisible()||o.controls.Playlist()),ShowPoster(),js("finish")):o.controls.PlaylistRewind()}function fjs(x){if(0==x.indexOf("js:"))try{x=eval(x.substr(3))}catch(e){console.log(e.message)}return x||""}function Heartbeat(){var e=Math.floor(Date.now()/1e3),t=(exist(v.livets)?v.livets:0)+parseInt(o.media.time()),i=0;o.system.desktop&&(i=1),o.system.ios&&(i=2),o.system.android&&(i=3),o.system.winmob&&(i=4),o.system.tv&&(i=5);e=v.heartbeat.replace("[vts]",e);e=(e=e.replace("[fts]",t)).replace("[dvtp]",i);i=document.createElement("img");i.setAttribute("src",e),i.setAttribute("height","1px"),i.setAttribute("width","1px"),o.frame.appendChild(i)}this.FullscreenUI=function(){if(o.fullscreen_start){if(o.fullscreen=!0,o.controls.Fullscreen(),!o.realfullscreen){if(exist(o.parentIframe))try{css(o.parentIframe,{width:"100%",height:"100%",position:"fixed",left:0,top:0,zIndex:"100000"})}catch(e){}css(o.frame,{width:"100%",height:"100%",position:"fixed",left:0,top:0,zIndex:"100000"}),o.screen_w=o.frame.offsetWidth,o.screen_h=o.frame.offsetHeight;try{document.body.style.overflow="hidden",exist(o.playlist)||(document.ontouchmove=function(e){e.preventDefault()})}catch(e){}}1==v.fullblack&&css(o.frame,{backgroundColor:"#000000"}),o.droplist&&o.droplist.Close(),Sub(),o.fullscreen_start=!1}},this.Normalscreen=function(){_fullscreen_end=!0,document.cancelFullScreen?document.cancelFullScreen():document.exitFullscreen?document.exitFullscreen():document.cancelFullscreen?document.cancelFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen(),o.realfullscreen||this.NormalscreenUI(!1)},this.changeAspect=function(e,t){NewAspect(e,t)},this.NormalscreenUI=function(e){if(_fullscreen_end||e){if(o.fullscreen=!1,o.nativefull=!1,!o.realfullscreen){if(exist(o.parentIframe))try{css(o.parentIframe,{position:"static",left:0,top:0,zIndex:"unset"}),css(o.parentIframe,o.parentIframe_style),css(o.parentIframe,{width:o.normal_w,height:o.normal_h})}catch(e){}css(o.frame,{width:o.normal_w,height:o.normal_h,position:"absolute",left:0,top:0,zIndex:"unset"});try{document.body.style.overflow="auto",document.ontouchmove=function(e){return!0}}catch(e){}}o.controls.Normalscreen(),1==v.fullblack&&(css(o.frame,{backgroundColor:v.screencolor}),1==v.transparent?o.frame.style.backgroundColor="transparent":css(o.frame,{backgroundColor:v.screencolor})),1==v.hotkey.volumewheelfull&&(VolumeWheelX(!1),o.volumewheel=!1),o.droplist&&o.droplist.Close(),Sub(),o.subdrag&&(o.subdrag=!1),o.controls.PlaylistHere(),_fullscreen_end=!1,js("exitfullscreen"),o.realfullscreen=!1,o.fullscreen_process=!1}},this.volumewheel=function(e){VolumeWheelX(e)},this.Stop=function(){v.preload=0,o.controls.Pause(),o.actions.Stopped(),o.media.Volume(v.volume),o.controls.SettingsVisible()&&o.controls.Settings(),o.muted&&this.Mute(),exist(o.heartbeatInterval)&&(clearInterval(o.heartbeatInterval),o.heartbeatInterval=null),Sub(0),log("stop"),js("stop")},this.StopMedia=function(){v.preload=0,v.autoplay=0,o.media.Recover(),o.actions.Stop()},this.SetQuality=function(e){exist(o.current_quality)&&o.current_quality!=e&&(o.current_quality=e,1==v.qualitystore&&(o.default_quality=o.files_quality[e],o.storage&&localStorage.setItem("pljsquality",o.default_quality)),o.media.SetQuality(e),js("quality",o.files_quality[e]),o.controls.QualityChanged(e))},this.AirplayChanged=function(){o.controls&&o.controls.AirplayChanged()},this.SetAudioTrack=function(e){exist(o.current_audiotrack)&&o.current_audiotrack!=e&&(o.current_audiotrack=e,1==v.trackstore&&(o.default_audio=v.default_audio=o.files_audiotrack[e],o.storage&&localStorage.setItem("pljstrack",o.default_audio)),o.media.SetAudioTrack(e),js("audiotrack",e),o.controls.SettingChanged("audiotrack"))},this.SetSpeed=function(e,t){"0.0"==e&&(e=.1);var i=e;if(0<String(i).indexOf(".")&&(t=1),i=+i,t||(i=e==o.speed1?1:o.files_speed[e],o.current_speed=e),o.line_speed||t){if(e==o.custom_speed)return;o.custom_speed=i;for(var s=0;s<o.files_speed.length;s++)if(i<=+o.files_speed[s]){o.current_speed=s;break}}o.storage&&1==v.speedstore&&localStorage.setItem("pljsspeed",i),js("speed",i),o.media.SetSpeed(i),o.controls.SettingChanged("speed")},this.RenewSubtitle=function(){o.sbt&&(Sub(),o.sbt.style())},this.Subtitle=function(e){"function"==typeof PluginSub&&(o.sbt||(o.sbt=new PluginSub),o.sbt.start(e))},this.advertising=function(e){Advertising(e)},this.isVastBgLoad=function(e){return isVastBgLoad(e)},this.VastImpression=function(e){e||VastVisible(),"midroll"==o.vasttype&&o.midrollimprsd.push(o.current_vast_url)},this.VpaidStarted=function(){VastVisible()},this.VastShow=function(){VastVisible()},this.VastReady=function(e){var t;o.vastloader=null,o.vastfrombg=0,log("VAST ready",o.vasttype),js("vast_ready",o.vasttype),"overlay"==e.type?(t=new VastOverlay(e),o.overlays.push(t)):exist(o.vast)?(0==v.preload&&1==v.vastbgpreload&&0==o.media.time()&&0==o.media.duration()&&(v.preload=1,o.media.Preload()),(!o.vast.tagLive()||e.isVpaid)&&0<o.vastgo&&(log("VAST renew"),o.vast.Remove(),o.vast=null,o.vast=new VastVideo),isVastBgLoad()?VastBgLoad():o.play&&(o.media.Pause(),o.controls.Pause()),o.vastgo++,o.adsfirst&&0<v.vast_longtimeout&&(clearTimeout(o.vast_longtimeout),o.vast_longtimeout=setTimeout(VastLongTimeout,1e3*v.vast_longtimeout*60),exist(v.vast_longtimemsg)&&""!=v.vast_longtimemsg&&(o.vast_longtomsg&&o.vast_longtomsg.remove(),o.vast_longtomsg=new PluginVastTimeMsg)),o.adsfirst=!1,0<v.vast_prestarttimeout?(log("VAST startdelay"),js("vast_startdelay"),setTimeout(VastGo,1e3*v.vast_prestarttimeout,e)):VastGo(e)):log("VAST alarm")},this.VastError=function(){js("vast_error",o.vasttype),log("VAST error"),VastCheckNext()},this.VastNext=function(){VastCheckNext()},this.VastRemoveUrl=function(e){if(v[o.vasttype+"_recover"])for(var t=0;t<3;t++)v[o.vasttype+"_recover"]=v[o.vasttype+"_recover"].replace(e+(0==t?" and ":1==t?" or ":""),"")},this.VastInsertAnd=function(e,t){if(""!=e){var i,s=vast_and,r=!1;if(t)for(var n=0;n<vasturl.length;n++)vasturl[n]==t&&(s=n);if(1==vasturl.length&&1<vasturl[0].length&&vast_or<vasturl[0].length-1&&vasturl[vast_or]&&(i=vasturl[vast_or].slice(1,99),vasturl[0].splice(vast_or+1,99),r=!0),"object"==typeof e)for(var a=0;a<e.length;a++)vasturl.splice(s+a+1,0,[e[a]]),o.system.ie9?VastAddPreload(e[a]):setTimeout(VastAddPreload,100*a,e[a]);else"string"==typeof e&&(vasturl.push([e]),VastAddPreload(e));r&&(vasturl[vasturl.length-1]=vasturl[vasturl.length-1].concat(i))}},this.VastInsertOr=function(e,t){if(""!=e){var i=vast_and;if(t)for(var o=0;o<vasturl.length;o++)vasturl[o]==t&&(i=o);if(vasturl[i])if("object"==typeof e)for(var s=0;s<e.length;s++)vasturl[i].push(e[s]);else"string"==typeof e&&vasturl[i].push(e)}},this.VastRemoveAndPlay=function(e){VastRemoveAndPlay(e)},this.EmptyVastUrl=function(){vasturl=[[""]]},this.VastRecover=function(e){for(var t,i=["preroll","pauseroll","postroll","intro","outro"],s=0;s<i.length;s++)t=!1,e&&e!=i[s]&&(t=!0),!t&&exist(v[i[s].concat("_","recover")])&&(v["vast_"+i[s].concat("_","limit")]--,0<v["vast_"+i[s].concat("_","limit")]&&(v[i[s]]=v[i[s].concat("_","recover")],v[i[s].concat("_","recover")]=null));if(("preroll"==e||"midroll"==e)&&1<v.vast_midroll_limit&&exist(o.midrollo)&&1==v.midrolls){for(var s in o.midrollo)o.midrollo[s].worked=void 0;v.vast_midroll_limit--}},this.Password=function(){Curtain(),exist(o.pass)&&(o.pass.Remove(),o.pass=null),o.pass=new Pass},this.RemovePassword=function(){RemoveCurtain(),o.pass.Remove(),o.pass=null},this.Curtain=function(){Curtain()},this.RemoveCurtain=function(){RemoveCurtain()},this.HidePoster=function(){exist(o.poster)&&isVisible(o.poster)&&(clearInterval(o.pstrsin),0==o.media.time()&&1==v.posterhidestart||(0<v.posterhidetime?(clearTimeout(o.pstr_to),o.pstr_to=setTimeout(HidePoster2,1e3*v.posterhidetime)):HidePoster2()))},this.ShowPoster=function(){ShowPoster()},this.ShuffleEnd=function(){End2()}},Media=function(l){var a,c,d,e,u,t,i,s,r="",n=0,h=!1,f=!1;o.mediascale={x:1,y:1,x0:1,y0:1};var p=0,g=0;if("string"==typeof l){if(0==(l=trim(l)).indexOf("[{"))try{l=l.replace(/pjs'qt/gi,'"'),l=JSON.parse(l),i&&(l=o.actions.File(l))}catch(e){console.log(e),l="incorrect JSON"}0==l.indexOf("#"+v.enc2)&&(l=o[o.fd[0]](l)),l&&0==l.indexOf("#"+v.enc3)&&0<l.indexOf(v.file3_separator)&&(l=o[o.fd[1]](l)),l&&0==l.indexOf("#0")&&(l=0<l.indexOf(o.pltxt)?fd0(l.replace(o.pltxt,""))+o.pltxt:fd0(l)),1==v.fplace&&(l=fplace(l)),"string"==typeof l&&(l.indexOf(".m3u")==l.length-4||0<l.indexOf(".txt"))&&(s=l.split(" or "),m())}function m(){0<(l=s[p]).indexOf(o.pltxt)&&(l=l.replace(o.pltxt,""),v.file=l);var e=XHR(l);e.onload=function(){4==this.readyState&&200==this.status?(function(e){if(e.responseText){var t=e.responseText;if(0==t.indexOf("#"+v.enc2)&&(t=o[o.fd[0]](t)),0==t.indexOf("#"+v.enc3)&&0<t.indexOf(v.file3_separator)&&(t=o[o.fd[1]](t)),l.indexOf(".m3u")==l.length-4){var i=t.split(/(\r\n\t|\n|\r\t)/gm);l=[];for(var s,r=1,n="",a=0;a<i.length;a++)-1<i[a].indexOf("#EXTINF")&&-1<i[a].indexOf(" - ")&&(s=i[a].split(" - "),n=s[s.length-1]),-1<i[a].indexOf("http")&&(l.push({title:""+(""!=n?n:r),file:i[a]}),r++,n="")}else{t=t.replace(/(\r\n\t|\n|\r\t)/gm,"");try{l=JSON.parse(t)}catch(e){y(2)}}exist(l.items)&&(l=YoutubePlaylist(l)),o.controls&&1==v.playlist.openplaylistbefore&&(o.controls.PlaylistVisible()||o.controls.PlaylistShow()),b(),MainResize(),setTimeout(function(){js("playlist")},1)}}(this),o.controls.NewPl()):y(1)},e.onerror=function(e){y(1)},e.send(),i=!0}function y(e){p+1<s.length&&(p++,m(),e=0),1==e&&w("playlist not found or access denied"),2==e&&w("playlists JSON")}function b(){(l=o.actions.File(l))&&"?"!=l&&P(l)}function w(e){log("Error: "+e);var t=!0,i=!0;js("loaderror",e),a&&0<a.length&&((t=++d>a.length-1)&&1==v.tryotherquality&&1<o.files.length&&(-1==o.files_quality[o.current_quality].indexOf(Lang("loading_error"))&&(o.files_quality[o.current_quality]=o.files_quality[o.current_quality]+" ("+Lang("loading_error")+")"),0<o.current_quality?(i=!1,o.actions.SetQuality(o.current_quality-1),M()):-1==o.files_quality[o.current_quality+1].indexOf(Lang("loading_error"))&&(i=!1,o.actions.SetQuality(o.current_quality+1),M())),t?1==v.reload&&i&&(t=!1,x()):(0<o.seekto||!o.start||u.isLive()||(o.seekto=T()),o.file_type==j(a[d])&&"native"==o.file_type||o.play&&o.actions.Stop(),log("Alternative source",o.seekto),P("or"),o.start&&!o.vast&&u.Play(),M())),t&&i&&e&&k(e,!0)}function k(e,t){gaTracker("error","Error",!0),1!=v.alerts||o.media_error||(1==v.alert404?o.alert.txt(v.alert404text):o.alert.txt(e),1==v.alert404v&&exist(v.alert404video)&&(o.err404v=new PluginErrorVideo,o.actions.HidePoster())),t&&(o.media_error=!0),o.play&&(o.actions.StopWaiting(),o.controls.Pause()),exist(o.poster)&&!exist(o.err404v)&&o.actions.ShowPoster(),js("error",e)}function x(){log("Error Reload Timeout "+ ++g),o.play&&(o.rldplay=1),exist(o.reloadto)&&clearTimeout(o.reloadto),o.reloadto=setTimeout(A,1e3*v.reloadtimeout)}function A(){var e=existv(v.reloadtimes,10);!o.play&&1!=o.rldplay||(o.rldplay=0,g<e?o.actions.Reload():k("Reload Error "+u.errorMessage()))}function T(){return u.time()}function _(){return u.duration()}function E(){var e=!1;return u&&("youtube"==o.file_type&&(e=u.auto()),"hls"==o.file_type&&1==v.hlsquality&&1<S()&&1==v.hlsautoquality&&(e=u.auto()),"dash"==o.file_type&&1==v.dashquality&&1<L()&&(e=u.auto())),e}function S(){return"hls"==o.file_type?u.HlsLevelsLength():0}function L(){return"dash"==o.file_type?u.DashLevelsLength():0}function C(){"playing"!=(r=u?u.status():"")&&!o.casting||o.actions.Playing(),""!=r&&o.actions.Loading()}function O(){o.poster&&o.frame.removeChild(o.poster),o.poster=createElement("div"),css(o.poster,{"pointer-events":"none",opacity:v.poster_a,transition:"opacity 0.5s"}),1==v.poster_float?PluginFloatPoster():css(o.poster,{position:"absolute",left:0,top:0,width:"100%",height:"100%"}),o.frame.appendChild(o.poster)}function P(t,e,i){if(""==v.file2_separator&&(v.file2_separator=";"),-1<t.indexOf("{")&&-1<t.indexOf("}")&&-1<t.indexOf(v.file2_separator)){var s=t.split(v.file2_separator);o.audiotracks=[];for(var r=0;r<s.length;r++)o.files_audiotrack[r]=s[r].substr(s[r].indexOf("{")+1,s[r].indexOf("}")-1),o.audiotracks[r]=s[r].substr(s[r].indexOf("}")+1),exist(v.default_audio)&&v.default_audio==o.files_audiotrack[r]&&(o.current_audiotrack=r);t=o.audiotracks[o.current_audiotrack]}exist(a)||(a=[]),o.fileTimeout&&clearTimeout(o.fileTimeout),t&&"or"!=t&&"x"!=t&&function(){a=t.split(" or ");for(var e=0;e<a.length;e++)-1<a[e].indexOf(" and ")&&(c=a[e].split(" and "),a[e]=c[random(0,c.length-1)]),exist(v.prefile)&&-1==a[e].indexOf("//")&&(a[e]=v.prefile+a[e]);d=0}();var n=o.file_type;0<a.length&&(o.file_type=j(a[d]),i=!!i,l=(l=a[d])&&l.replace(/\(random\)/g,Math.random()),!i&&"x"!=t&&u&&o.file_type==n&&("native"==n||"vimeo"==n&&!o.system.mobile||"youtube"==n&&o.start&&!f||"dm"==n||"hls"==n||"dash"==n)?(u.src(l),log("src")):(log("New"),I(),function(e){o.file_type=j(e),o.tagvideo&&(u=new MediaVideo(e,o.mediacontainer,!1)),"youtube"==o.file_type&&(u=new MediaYoutube(e,o.mediacontainer)),1==v.vimeo&&"vimeo"==o.file_type&&(u=new MediaVimeo(e,o.mediacontainer)),"pjs"==o.file_type&&(u=new MediaPjs(e)),"dm"==o.file_type&&(u=new MediaDaily(e,o.mediacontainer)),o.controls&&o.controls.UpdateSettings();var t=0;exist(v.duration)&&(o.continue&&1==v.timestore&&!o.start&&(t=o.continue.flag().t),setTimeout(function(){o.actions.Duration(t,v.duration)},100))}(l)),o.speed1&&(o.line_speed?u.setSpeed(o.custom_speed):o.current_speed!=o.speed1&&u.setSpeed(o.files_speed[o.current_speed]))),e||(clearInterval(o.timerInterval),o.timerInterval=setInterval(C,o.timerTime),exist(v.subtitle)||1!=v.sub_upload||1!=v.sub_upload0||(v.subtitle=""),exist(v.subtitle)&&o.actions.Subtitle(v.subtitle),1==v.hidevideo&&(1==v.nativecontrolsmobile&&o.system.mobile||("youtube"==o.file_type?css(o.mediacontainer,{top:-3e3,left:-3e3}):hide2(o.mediacontainer),v.toolbar.hide=0)))}function j(e){var t,i,s,r,n="native";return e&&(0<e.indexOf(".m3u8")?n="hls":0<e.indexOf(".mpd")?n="dash":0==e.indexOf("ws")?n=o.ws:-1<e.indexOf("youtube.com/")||-1<e.indexOf("youtu.be/")?"function"==typeof MediaYoutube?(n="youtube",1==v.youtubeposter&&(t="https://img.youtube.com/vi/"+YoutubeID(e)+"/",i=t+"maxresdefault.jpg",s=function(e){v.poster=100<e?t+"maxresdefault.jpg":t+"hqdefault.jpg",o.playlist_dic&&(o.playlist_dic[o.plid].poster=v.poster),1==v.autoplay||o.start||Poster(v.poster,o.poster,v.poster_scale)},(r=new Image).onload=function(){s(this.height)},r.src=i)):log("No YouTube"):1==v.vimeo&&-1<e.indexOf("vimeo.com/")?n="vimeo":1==v.dm&&-1<e.indexOf("dailymotion.com")?n="dm":1==v.pjsframe&&"function"==typeof PjsFramed&&PjsFramed(e)&&(n="pjs")),o.tagvideo="native"==n||"hls"==n||"dash"==n||n==o.ws,n}function I(){u&&(u.Remove(),u=null,r="ended"),t&&(t.Remove(),t=null,t=void 0,o.mediapip.remove(),o.media2=null,o.mediapip=null)}function M(){0<v.fileto&&1<a.length&&0==_()&&(clearTimeout(o.fileTimeout),o.fileTimeout=setTimeout(B,1e3*v.fileto))}function B(){o.play&&0==_()&&0==T()&&u&&0==u.loaded()&&d!=a.length-1&&w("File Timeout")}function D(e){var t,i,s;0<String(e).indexOf(":")?(i=e.split(":"),s=o.screen_w/o.screen_h,0<(t=o.media.size()).width&&(s=t.width/t.height),s!=(s=i[0]/i[1])&&(o.tagvideo&&u.ObjectFit(),i=o.screen_h*s/o.screen_w,s=o.screen_w/s/o.screen_h,i<1?(o.mediascale.x0=o.mediascale.x=parseFloat(i),o.mediascale.y=1):(o.mediascale.x=1,o.mediascale.y0=o.mediascale.y=parseFloat(s)),css(o.mediacontainer,{transform:"scaleX("+o.mediascale.x+") scaleY("+o.mediascale.y+")"}),o.custom_aspect=e)):(o.mediascale.x+=parseFloat(e),o.mediascale.y+=parseFloat(e),css(o.mediacontainer,{transform:"scaleX("+o.mediascale.x+") scaleY("+o.mediascale.y+")"})),1==v.hotkey.scaledrag&&(o.mediadrag||(0<o.mediascale.x||1<o.mediascale.y)&&(PluginMovable(o.mediacontainer,"o.dragging"),o.mediadrag=!0),R()),o.controls.MenuProc("scale")}function R(){o.mediadrag&&1!=v.hotkey.scaledrag0&&1==o.mediascale.x&&1==o.mediascale.y&&css(o.mediacontainer,{top:0,left:0})}function N(){var e=XHR(v.tagsurl+"?url="+a[d]);e.onload=function(){4==this.readyState&&200==this.status&&this.responseText&&(v.title=this.responseText,o.actions.Title("title"))},e.send()}o.mediacontainer=createElement("div"),Pos0(o.mediacontainer),css(o.mediacontainer,{transition:"transform 0.2s linear","text-align":"center"}),o.frame.appendChild(o.mediacontainer),1==v.hotkey.swiping&&(o.mdswp||(PluginMovable(o.mediacontainer,"o.swiping",!0,!1,function(){var e;o.mediacontainer.offsetLeft>o.screen_w/2?o.controls.PlaylistPrevExist()&&(e=!0,o.controls.PlaylistPrev()):o.mediacontainer.offsetLeft<-o.screen_w/2&&o.controls.PlaylistNextExist()&&(e=!0,o.controls.PlaylistNext());e?css(o.mediacontainer,{left:0}):new Motion({mc:o.mediacontainer,type:"left",to:0,time:.1,ease:"back",me:"mdswp"})}),o.mdswp=!0)),i||b(),this.onError=function(e){w(e||u.errorMessage())},this.onEnded=function(e){log("Ended");var t=!(h=!0);!(0<_())||o.casting||e||(e=o.current_time)+10<_()&&(log("Break (recovery)"),js("recovery"),u.Play(),u.Seek(e),t=!0),t||(o.actions.Ended(),js("end"))},this.onPlay=function(){1==v.posterhidepause&&exist(o.poster)&&o.actions.ShowPoster(),1==v.posterhide&&o.actions.HidePoster(),o.controls.Play(),o.actions.onPlayTag(),1==v.tags&&exist(v.tagsurl)&&5<v.tagsurl.length&&(N(),clearInterval(e),e=setInterval(N,1e3*v.tagsinterval)),1==v.reload&&0<g&&0==o.media.duration()&&(g=0,x()),js("play")},this.NativeControls=function(){1==v.nativecontrolsmobile&&o.tagvideo&&o.actions.NativeControls()&&(o.nativecontrols=u.nativeControls(),o.controls.refresh()),o.checknative=!0},this.onPause=function(){o.actions.Pause()},this.onSeeking=function(){log("Seeking")},this.onSeeked=function(){log("Seeked"),o.actions.Seeked(),exist(o.seeking_time)&&js("seek",o.seeking_time)},this.onMeta=function(){log("Metadata"),g=0,o.actions.Metadata()},this.onDuration=function(){u&&(log("Duration",_()),o.actions.Duration(T(),_()),js("duration",_()),g=0,clearTimeout(o.reloadto),exist(o.restart_audio)&&(o.actions.SetAudioTrack(o.restart_audio),o.restart_audio=null))},this.onVolume=function(){},this.onWaiting=function(){log("Waiting"),o.actions.Waiting(),js("waiting")},this.onTimeupdate=function(){n!=T()&&(o.actions.StopWaiting(),0==n&&1==v.posterhide&&1==v.posterhidestart&&o.actions.HidePoster()),n=T(),js("time",n),1==v.pip.on&&"function"==typeof PluginPip&&!t&&1!=v.pip.custom&&v.file2&&""!=v.file2&&0<n&&(o.mediapip=new PluginPip,t=o.mediapip.create())},this.onYoutubeReady=function(){"youtube"==o.file_type&&u&&u.YoutubeReady()},this.playByYoutubeId=function(e){o.actions.Stop(),u.playId(e)},this.YoutubeReady=function(){return"youtube"!=o.file_type||!u||u.ready()},this.getHLS=function(){return u.getHLS()},this.getDASH=function(){return u.getDASH()},this.SetQuality=function(e){var t;log("Quality",e),("native"==o.file_type||o.file_type==o.ws||"hls"==o.file_type&&(0==v.hlsquality||S()<2)||"dash"==o.file_type&&(0==v.dashquality||L()<2))&&exist(o.files[e])&&(t=this.time(),0<o.seekto||(o.seekto=t),o.actions.Seek(t,!1),P(o.files[e],!0),t=!0,v.settings&&((1!=v.settings.qualitypause||o.play)&&o.start||(t=!1)),t&&o.actions.Play()),"hls"==o.file_type&&1==v.hlsquality&&1<S()?u.setHlsQuality(e):"dash"==o.file_type&&1==v.dashquality&&1<L()?u.setDashQuality(e):"youtube"!=o.file_type&&"dm"!=o.file_type||u.setQuality(e)},this.renameQualities=function(e,t){var i=e.height+"p";e.height<200?i="160p":200<=e.height&&e.height<=300?i="240p":300<e.height&&e.height<=400?i="360p":400<e.height&&e.height<=500?i="480p":500<e.height&&e.height<=600?i="540p":600<e.height&&e.height<=900?i="720p":900<e.height&&e.height<=1200?i="1080p":1200<e.height&&e.height<=1800?i="1440p":1800<e.height&&(i="2160p");426==e.width&&e.height<=240?i="240p":640==e.width&&e.height<=360?i="360p":854==e.width&&e.height<=480?i="480p":1280==e.width&&e.height<=720?i="720p":1920==e.width&&e.height<=1080?i="1080p":2560==e.width&&e.height<=1440?i="1440p":3840==e.width&&e.height<=2160&&(i="2160p");1==v.settings.customqualities&&exist(v.settings["name"+i])?i=v.settings["name"+i]:(1==t&&(i=Lang(i)),2==t&&exist(e.bitrate)&&(i=parseInt(e.bitrate/1e3)+" "+Lang("kbps")));return i},this.renameTracks=function(e){var t=e.toLowerCase();"eng"==t||"en"==t?e="English":"rus"!=t&&"ru"!=t||(e="Русский");"object"==typeof v.rename_audio&&(e=existv(v.rename_audio[e],e));return e},this.SetSpeed=function(e){log("Speed",e),u&&u.setSpeed(e),1==v.pip.on&&t&&t.setSpeed(e)},this.nativeSubtitle=function(){!function(){if(o.tagvideo&&o.subs){u.removeTracks();for(var e=0;e<o.subs.length;e++)u.addTrack(o.subs[e],o.files_subtitle[e],e==o.current_subtitle)}}()},this.removeNativeSubtitle=function(){u.removeTracks()},this.SetAudioTrack=function(e){var t;log("Audiotrack",e),0<o.audiotracks.length?o.audiotracks[e]&&(t=this.time(),0<o.seekto||(o.seekto=t),o.actions.Seek(t,!1),P(o.audiotracks[e],!0),o.actions.Play()):"hls"==o.file_type&&1==v.hlsaudio?u.setHlsAudioTrack(e):"dash"==o.file_type&&1==v.dashaudio&&u.setDashAudioTrack(e)},this.getQuality=function(){var e=o.files_quality[o.current_quality];return null==e&&(e=""),(E()&&1==v.hlsautoquality&&1==v.hlsquality&&e!=Lang("auto")?Lang("auto")+" ":"")+e},this.getAudioTrack=function(){var e=o.files_audiotrack[o.current_audiotrack];return null==e&&(e=""),e},this.autoQuality=E,this.resize=function(e){u&&("youtube"==o.file_type||"vimeo"==o.file_type||exist(v.ratio))&&u.resize(),0<v.screenmarginbottom&&css(o.mediacontainer,{height:o.fullscreen?"100%":o.normal_h-v.screenmarginbottom}),o.media2&&1==v.pip.movable&&o.mediapip.resize(),1==v.poster_float&&FloatPosterScale()},this.size=function(){return u.size()},this.iosfull=function(){u.iosfull()},this.reload=function(){log("reload"),o.reloadTimer=0,o.start&&(v.autoplay=1),o.actions.Waiting(),l&&1!=v.rldnornd&&-1==l.indexOf("(random)")&&(l=l+(-1==l.indexOf("?")?"?":"&")+"rand=(random)"),o.tagvideo?u.src(l):P(l)},exist(o.poster)||O(),exist(v.poster)&&(""!=v.poster?(Poster(v.poster,o.poster,v.poster_scale),1!=v.posterhidepause||o.start||hide(o.poster)):v.poster=null),this.Remove=function(){I()},this.RemoveAll=function(){a=[],I()},this.File=function(e,t,i){P(e,t,i)},this.Poster=function(e){Poster(e,o.poster,v.poster_scale)},this.Play=function(){u?(f=h=!1,o.casting?o.chromecast.Play():(u.Play(),1==v.posterhide&&o.actions.HidePoster()),exist(t)&&t.Play(),o.channels&&(o.tagvideo?0<o.clicktime&&!o.channels.Created()&&o.channels.Update():(o.files_channel=[],o.controls.SettingChanged("channel"))),o.tagvideo&&-1<v.volumegain&&!o.gained&&!o.system.ios&&0<o.clicktime&&u.Gain(),M()):setTimeout(this.Play,500)},this.PipSwitch=function(e){o.media2&&(1==v.pip.movable&&2<o.moving[o.media2]||(e&&(e.stopPropagation(),window.event&&(window.event.cancelBubble=!0)),(e=u).ChangePip(!0,o.media2),t.ChangePip(!1,o.mediacontainer),u=t,t=e,u.Play(),t.Play(),js("pip")))},this.reYT=function(){u.src(l)},this.ToolbarHide=function(){1==v.effects&&o.effects.api("hide"),o.toolbarhidden=!0},this.ToolbarShow=function(){v.toolbar.resizeme&&(v.toolbar.resizeme=!1,o.controls&&(o.controls.resizeFromText(1),o.controls.resizetext())),o.toolbarhidden=!1},this.PipToggle=function(){o.media2&&o.mediapip&&o.mediapip.toggle()},this.Airplay=function(){o.tagvideo&&o.airplay&&(o.airplayed=!0,u.airplay())},this.PipWebkit=function(){o.tagvideo&&o.pipwebkit&&u.pipwebkit()},this.BeforeVast=function(){1==v.vast_poster&&exist(v.vast_posterurl)&&(exist(o.vast_poster)||(o.vast_poster=createElement("div"),css(o.vast_poster,{position:"absolute",left:0,top:0,width:"100%",height:"100%","pointer-events":"none",zIndex:1e4}),o.frame.appendChild(o.vast_poster)),show2(o.vast_poster),Poster(v.vast_posterurl,o.vast_poster,"fill")),u&&(datetime(0),u.BeforeVast())},this.AfterVast=function(){o.vast_poster&&hide2(o.vast_poster),u&&u.AfterVast()},this.Pause=function(){o.casting?o.chromecast.Pause():u?u.Pause():log("nomedia"),exist(o.media2)&&t.Pause()},this.Recover=function(){f=!0,o.actions.Seek(0,!1),exist(o.poster)&&o.actions.ShowPoster(),P("x")},this.Toggle=function(){u&&u.Toggle()},this.Seek=function(e){u&&(o.casting?o.chromecast.Seek(e):(u.Seek(e),1==v.pip.on&&t&&t.Seek(e)))},this.Mute=function(){u&&(u.Mute(),o.casting&&o.chromecast.Mute(),log("mute")),1==v.pip.on&&1==v.pip.nomute&&t&&t.Mute()},this.Unmute=function(){u&&(u.Unmute(),o.casting&&o.chromecast.Unmute(),log("unmute")),1==v.pip.on&&1==v.pip.nomute&&t&&t.Unmute()},this.Volume=function(e){u&&u.Volume(e),1==v.pip.on&&1==v.pip.nomute&&t&&t.Volume(e),o.casting&&o.chromecast.Volume(e)},this.isPlaying=function(){return!!u&&u.isPlaying()},this.isLive=function(){return!!u&&u.isLive()},this.status=function(){return r},this.ended=function(){return h},this.time=function(){var e=0;if(u){var t,e=T();return o.casting?(t=o.chromecast.Time())&&(e=t):0<_()&&e!=_()&&(o.current_time=e+1e-4),e}return 0},this.duration=function(){var e,t=0;return u&&(0==(t=_())&&exist(v.duration)&&(t=+v.duration),!o.casting||(e=o.chromecast.Duration())&&(t=e)),t},this.loaded=function(){return u?u.loaded():0},this.flip=function(){o.mediascale.flip=!o.mediascale.flip,css(o.mediacontainer,{transform:o.mediascale.flip?"scaleX(-1)":"scaleX(1)"})},this.createposter=function(){O()},this.Preload=function(){o.tagvideo&&u.preload()},this.menufltr=function(e,t){if("scale"==e)1==t&&D(v.settings.scale/100),2==t&&D(-v.settings.scale/100),3==t&&o.media.normalscale();else if(o.tagvideo){o.fltrs[e]||(o.fltrs[e]="sepia"==e?0:1),1==t&&(o.fltrs[e]+=v.settings[e]/100),2==t&&(o.fltrs[e]-=v.settings[e]/100),3==t&&(o.fltrs[e]="sepia"==e?0:1),o.cftlr||(o.cftlr=[]),o.cftlr[e]=e+"("+parseInt(100*o.fltrs[e])+"%) ";var i,s="";for(i in o.cftlr)s+=o.cftlr[i];css(u.tag(),{filter:s}),o.controls.MenuProc(e)}},this.scale=function(e){D(e)},this.normalscale=function(){o.tagvideo&&u.ObjectFit(),o.mediascale.x=o.mediascale.x0,o.mediascale.y=o.mediascale.y0,css(o.mediacontainer,{transform:"scaleX("+o.mediascale.x+") scaleY("+o.mediascale.y+")"}),o.controls.MenuProc("scale"),o.custom_aspect=null,R()},this.hlsDashSub=function(e,t){u.hlsDashSub(e,t)},this.currentFile=function(){return a&&0<a.length&&a[d]||""},this.tag=function(){return!!u&&u.tag()},this.captions=function(){o.tagvideo&&u.captions()},this.onDash=function(){u.onDash()}},MediaVideo=function(url,container,pip){var pjstg=createElement(1==v.hidevideo?"audio":"video"),hls_config,pipto=0,hls,is_hls=!1,is_hls2=!1,hls_started=!1,hls_created=!1,hls_force=-1,dash,dash_created=!1,ws,ws_created=!1,is_dash=!1;o.live=!1;var is_sleep=0,is_ws=!1,error,error_time,unmuteplease=!1,pip_quality=-1,pause_before_vast=-1,sleep_timeout,_hlssubtracks,_seekaftervast,urlmse,mimeCodec='video/mp4; codecs="avc1.42E01E, mp4a.40.2"',nops=!1,tagframe,framei;if(css(pjstg,{position:"static",width:"100%",height:"100%","object-fit":"contain",transition:"filter 0.2s linear","min-height":"auto","max-height":"none","min-width":"auto","max-width":"none"}),ObjectFit(),o.system.iphone&&1==v.autoplay&&1==v.autoplaymute?!o.start&&v.preroll?attr(pjstg,{playsinline:1}):attr(pjstg,{muted:1,playsinline:1,autoplay:1}):(1==v.playsinlineonmobile&&o.system.mobile&&attr(pjstg,{playsinline:1}),o.system.tv||attr(pjstg,{preload:1==v.preload&&0==v.autoplay?"metadata":"none"})),1==v.tagcors&&attr(pjstg,{crossorigin:"anonymous",crossOrigin:"anonymous"}),attr(pjstg,{src:url,"x-webkit-airplay":"allow",disableRemotePlayback:"true"}),1!=v.drunchr&&attr(pjstg,{disableRemotePlayback:"true"}),1==v.ynxnopip&&attr(pjstg,{pip:"false"}),pip&&(pjstg.autoplay=!0,1==v.pip.nomute&&1!=v.autoplay||(pjstg.muted=!0)),1==v.nativenodownload&&attr(pjstg,{controlsList:"nodownload"}),tagSrc(),1==v.taginframe?(tagframe=createElement("iframe"),attr(tagframe,{scrolling:"no",allowfullscreen:"true",allowtransparency:"true",src:""}),css(tagframe,{position:"absolute",width:"100%",height:"100%",border:0}),container.appendChild(tagframe),framei=window.setInterval(function(){"complete"===tagframe.contentWindow.document.readyState&&(window.clearInterval(framei),css(tagframe.contentDocument.body,{padding:0,margin:0}),tagframe.contentDocument.body.appendChild(pjstg))},100)):container.appendChild(pjstg),exist(url)||(url=""),0<url.indexOf(".mpd"))is_dash=!0,o.dash||"undefined"!=typeof PluginDash&&(o.dash=new PluginDash),exist(o.dash)&&(exist(window.dashjs)?CheckDash():o.dash.script());else if((1==options.hls&&1!=v.playerjscom||0<url.indexOf(".m3u8"))&&(-1!=o.compilation.indexOf("HLS")||exist(window.Hls))){is_hls=!0,is_hls2=!0;try{exist(Hls)?!Hls.isSupported()||o.system.safari&&1==v.nativehlsinsafari&&!o.system.ios||o.system.safari&&o.system.ios&&1==v.nativehlsios||o.system.edge&&1==v.nativehlsinedge?(log("HLS support ",Hls.isSupported()),is_hls=!1):1!=v.preload&&1!=v.autoplay&&1!=v.preloadhls&&!pip||CreateHLS(!1):is_hls=!1}catch(error){is_hls=!1}}else 0==url.indexOf("ws")&&1==v.flussonic&&(is_ws=!0,CreateWS());function CheckDash(){is_dash=!0,MseIsSupported()?1!=v.preload&&1!=v.autoplay&&1!=v.preloaddash||CreateDASH(!1):(is_dash=!1,log("DASH not supported"))}function CreateDASH(e){o.dash&&!dash_created&&(o.dash.create(e,pjstg,url,pip),exist(window.dashjs)&&(dash_created=!0))}function CreateHLS(e){log("HLS"),1<o.files.length?(v.hlsquality=0,v.hlsquality_off=!0):v.hlsquality_off&&(v.hlsquality=1),1<o.audiotracks.length?(v.hlsaudio=0,v.hlsaudio_off=!0):v.hlsaudio_off&&(v.hlsaudio=1),o.hls_subs=!1;var t=!(hls_force=-1);if(v.preroll&&1==v.hlsvastwait&&(t=!0,v.hlsvastwait=0),hls_config={debug:1==v.hlsdebug&&!pip,autoStartLoad:(1==v.preload||1==v.autoplay||pip||e)&&!t,maxBufferLength:60,maxMaxBufferLength:60,manifestLoadingTimeOut:0<v.hlsmto?1e3*v.hlsmto:4e4,fragLoadingTimeOut:0<v.hlsfto?1e3*v.hlsfto:4e4,enableWorker:!1},1==v.hlscltps&&(hls_config.capLevelToPlayerSize=!0),1==v.hlscookies&&(hls_config.xhrSetup=function(e,t){e.withCredentials=!0}),exist(v.hlsconfig)&&(exist(v.hlsconfig.maxBufferLength)&&(600<v.hlsconfig.maxBufferLength&&(v.hlsconfig.maxBufferLength=600),v.hlsconfig.maxMaxBufferLength=v.hlsconfig.maxBufferLength),exist(v.hlsconfig.customBuffer)&&(v.hlsconfig.maxMaxBufferLength=v.hlsconfig.maxBufferLength=v.hlsconfig.customBuffer),"object"==typeof v.hlsconfig))for(var i in v.hlsconfig)hls_config[i]=v.hlsconfig[i];hls=new Hls(hls_config),js("hls",hls,1),hls.loadSource(url),hls.attachMedia(pjstg),hls.on(Hls.Events.MEDIA_ATTACHED,function(){log("HLS attached")}),hls.on(Hls.Events.MANIFEST_LOADED,function(e,t){pip||o.actions.MediaReady()}),hls.on(Hls.Events.MANIFEST_PARSED,function(e,t){!pip&&1==v.hlsquality&&1<HlsLevelsLength()&&(HlsQualityLevels(),HlsLevel(),o.controls&&o.controls.QualityChangedNoHand(o.current_quality))}),hls.on(Hls.Events.LEVEL_SWITCH,function(e,t){HlsLevel()}),hls.on(Hls.Events.LEVEL_SWITCHED,function(e,t){HlsLevel()}),hls.on(Hls.Events.LEVEL_LOADED,function(e,t){pip||(t.details.live!=o.live&&(o.live=t.details.live,o.controls.refresh()),o.live=t.details.live,o.live&&(log("Live"),o.dvr=-1<url.indexOf("?DVR"),0<pjstg.duration&&0<pjstg.currentTime&&pjstg.duration-pjstg.currentTime<10&&(0<o.hls_stuck_time?o.hls_stuck_time==pjstg.currentTime&&o.hls_stuck_duration==pjstg.duration?(o.stuck++,2<o.stuck&&(o.stuck=0,o.hls_stuck_time=-1,hls.destroy(),CreateHLS(!0),onEnded())):o.hls_stuck_time=-1:(o.hls_stuck_time=pjstg.currentTime,o.hls_stuck_duration=pjstg.duration)))),1==v.hlsquality&&(o.current_quality=hls.loadLevel,o.controls&&o.controls.QualityChangedNoHand(o.current_quality)),HlsUpdateAudio()}),hls.on(Hls.Events.FRAG_CHANGED,function(e,t){exist(t.frag)&&!pip&&js("fragment",t.frag.relurl),-1<hls_force&&(hls.nextAutoLevel=hls_force,hls_force=-1),hls_started=!0,hlsTextTracks()}),hls.on(Hls.Events.FRAG_PARSING_METADATA,function(e,t){js("fragdata",t,1)}),hls.on(Hls.Events.AUDIO_TRACKS_UPDATED,function(e,t){pip||1!=v.hlsaudio||HlsAudioTracks()}),hls.on(Hls.Events.AUDIO_TRACK_SWITCHING,function(e,t){pip||1!=v.hlsaudio||HlsAudioTrack()}),1==v.hlssubtracks?_hlssubtracks=new PluginHlsSubtitles(hls,pip):hls.subtitleDisplay=!1,hls.on(Hls.Events.ERROR,function(e,t){if(1==v.log&&console.log(t),js(t.type+"Hls",t,0,!0),(o.hlserror=t).fatal)switch(t.type){case Hls.ErrorTypes.NETWORK_ERROR:log("HLS fatal network error"),1==v.livewakeup?HlsSleep0():(error=t.details+" ("+t.type+")",0<o.seekto||pip||1==v.live||is_ws||(o.seekto=Time()),hls.destroy(),pip||o.media.onError());break;case Hls.ErrorTypes.MEDIA_ERROR:log("HLS fatal media error, recover"),hls.recoverMediaError();break;default:error="HLS fatal error, destroy",hls.destroy(),pip||o.media.onError()}else log("HLS ",t.type,t.details,t.response?t.response.code:""),js("hls_error",t.response?t.response.code:""),0<is_sleep&&(is_sleep=2,HlsSleep())}),hls_created=!0}function HlsLevel(){if(!pip&&1==v.hlsquality&&1<HlsLevelsLength()&&(o.current_quality!=hls.loadLevel&&(o.current_quality=hls.loadLevel,o.controls&&o.controls.QualityChangedNoHand(o.current_quality),log("HLS Level "+o.current_quality)),exist2(v.forbidden_quality)&&0<o.current_quality))for(var e=v.forbidden_quality.split(","),t=0;t<e.length;t++)if(-1<o.files_quality[o.current_quality].indexOf(e[t])){log("regress quality"),hls.currentLevel=o.current_quality-1,o.current_quality--;break}}function CreateWS(){exist(window.FlussonicMsePlayer)&&(MseIsSupported()?(exist(o.ws)||(o.ws=new PluginWS),ws=new FlussonicMsePlayer(pjstg,url,existv(v.wsconfig,{debug:!0})),ws_created=!0):(is_ws=!1,log("not supported")))}function hlsTextTracks(){Captions()}function Captions(){v.hlscaptions&&(0<pjstg.textTracks.length?(1==v.captions?pjstg.textTracks[pjstg.textTracks.length-1].mode="showing":pjstg.textTracks[pjstg.textTracks.length-1].mode="hidden",o.captions||(o.captions=!0,o.controls.refresh())):o.captions&&(o.captions=!1,o.controls.refresh()))}function HlsSleep0(){log("sleep"),!pip&&o.play&&o.actions.Pause(),o.actions.ShowPoster(),is_sleep=1,HlsSleep(o.play)}function HlsSleep(e){0<is_sleep&&(clearTimeout(sleep_timeout),sleep_timeout=setTimeout(HlsLiveWaiting,1e3*v.livewakeuptime))}function HlsLiveWaiting(){0<is_sleep&&(log("watching"),is_hls?(1==is_sleep&&hls.loadSource(url),2==is_sleep&&(hls.destroy(),CreateHLS(!0),pjstg.play())):attr(pjstg,{src:url}))}function onLoadStart(){is_hls||is_dash||pip||o.actions.MediaReady()}function onTagError(){var e;is_hls||is_dash||(pjstg.error&&(log(pjstg.error,pjstg.error.code,pjstg.error.message),e=pjstg.error.code,""==(error=pjstg.error.message)&&(1==e&&(error="aborted"),2==e&&(error="network"),3==e&&(error="decode"),4==e&&(error="not found")),log("Video Error: ",error)),is_hls2&&1==v.livewakeup&&(error=void 0,HlsSleep0()),null!=error&&onError())}function onError(){pip||o.media.onError()}function onEnded(){pip||o.media.onEnded()}function onPlay(){if(!o.start&&v.preroll)return log("wrong play"),pause(),void o.actions.Play();var e,t;is_hls&&0<is_sleep||pip||(!(e=o.actions.isVastBgLoad()&&1!=o.vastfrombg)&&-1!=pause_before_vast||(t=!1,is_hls&&(exist(o.vast)||exist(o.vastloader))&&(e||(log("pause onplay"),pause(),t=!0)),t||o.media.onPlay()))}function onPause(){nops||(log("onpause"),o.play&&o.actplay&&!pjstg.ended&&1==v.unpause&&!o.nativecontrols?(log("unpause"),TagPlay()):pip||o.nopause||!pjstg.paused||o.media.onPause())}function onTimeupdate(){pip||o.media.onTimeupdate(),-1<pause_before_vast&&Time()>pause_before_vast&&(log("pause ontime",pause_before_vast),pause(),pause_before_vast=-1)}function onSeeking(){pip||o.media.onSeeking()}function onSeeked(){pip||o.media.onSeeked()}function onMeta(){pip?PipSize():(o.media.onMeta(),PlayerSize(),is_hls&&0<is_sleep&&(is_sleep=0,log("wake up"),hls.startLoad(),TagPlay(),o.controls.Play()),exist(v.ratio)&&Resize())}function PipSize(){0<pjstg.videoHeight?css(container,{height:container.offsetWidth/(pjstg.videoWidth/pjstg.videoHeight)-parseInt(v.pip.border)}):pipto<20&&(setTimeout(PipSize,100),pipto++)}function PlayerSize(){1==v.changeheight&&(clearInterval(o.heightInterval),o.heightInterval=setInterval(WaitSize,100),WaitSize())}function WaitSize(){pjstg&&0<pjstg.videoHeight&&(o.actions.changeAspect(pjstg.videoWidth/pjstg.videoHeight),clearInterval(o.heightInterval))}function onDuration(){pip||is_ws||o.media.onDuration()}function onVolume(){pip||o.media.onVolume()}function onWaiting(){is_hls&&0<is_sleep||pip||o.media.onWaiting()}function onLoadedData(){o.actions.LoadedData()}function MseIsSupported(){var e=window.MediaSource=window.MediaSource||window.WebKitMediaSource,t=window.SourceBuffer=window.SourceBuffer||window.WebKitSourceBuffer,e=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported(mimeCodec),t=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return e&&t}!o.system.tv||1!=v.autoplay||is_hls||is_dash||is_ws||setTimeout(function(){o.actions.MediaReady()},100),1==v.channels&&(exist(o.channels)&&o.channels.Close(),o.channels=new PlugMediaChannels),this.onDash=function(){CheckDash()},this.captions=function(){Captions()},pjstg.addEventListener("loadstart",onLoadStart),pjstg.addEventListener("error",onTagError),pjstg.addEventListener("ended",onEnded),pjstg.addEventListener("play",onPlay),pjstg.addEventListener("pause",onPause),pjstg.addEventListener("timeupdate",onTimeupdate),pjstg.addEventListener("seeking",onSeeking),pjstg.addEventListener("seeked",onSeeked),pjstg.addEventListener("loadedmetadata",onMeta),pjstg.addEventListener("volumechange",onVolume),pjstg.addEventListener("waiting",onWaiting),pjstg.addEventListener("durationchange",onDuration),pjstg.addEventListener("loadeddata",onLoadedData),pjstg.addEventListener("enterpictureinpicture",onPipEnter),pjstg.addEventListener("leavepictureinpicture",onPipLeave),this.ratio=function(){return pjstg.videoWidth/pjstg.videoHeight};var span05="<span style='opacity:0.5'>",playtry;function HlsQualityLevels(){if(!pip&&1==v.hlsquality){var e=hls.levels,t=-1;if(o.files_quality=[],1<e.length){for(var i,s,r=0;r<e.length;r++)exist(e[r].height)?(i=o.media.renameQualities(e[r],v.nameofhlsquality),-1<o.files_quality.indexOf(i)||1==v.hlsaddbitrate?exist(e[r].bitrate)&&(-1<(s=o.files_quality.indexOf(i))&&(o.files_quality[s]+=" "+span05+" &nbsp;"+parseInt(e[s].bitrate/1e3)+" "+Lang("kbps")+"</span>"),o.files_quality[r]=i+" "+span05+" &nbsp;"+parseInt(e[r].bitrate/1e3)+" "+Lang("kbps")+"</span>"):o.files_quality[r]=i,exist(e[r].audioGroupIds)&&(o.files_quality_ag[r]=e[r].audioGroupIds[0])):exist(e[r].name)?o.files_quality[r]=e[r].name:o.files_quality[r]=r,exist(v.default_quality)&&-1==t&&v.default_quality==o.files_quality[r]&&(t=r),exist(o.default_quality)&&o.default_quality==o.files_quality[r]&&(t=r);1==v.hlsautoquality?o.files_quality[e.length]=Lang("auto"):(hls.autoLevelEnabled=0,hls.autoLevelCapping=0),1==v.hlslowquality||-1<t?(hls.autoLevelCapping=0,"next"==v.hlschangequality||!o.start&&0==v.preload?hls.nextLevel=t:"current"==v.hlschangequality&&(hls.currentLevel=t),o.current_quality=t):1==v.hlsautoquality?o.current_quality=hls.levels.length-1:o.current_quality=hls.firstLevel,HlsUpdateAudio()}o.bitrate=existv(hls.levels[o.current_quality].bitrate,0),o.controls&&o.controls.refresh()}}function HlsUpdateAudio(){0<o.files_quality_ag.length&&1==v.hlsaudio&&(HlsAudioTracks(),HlsAudioTrack())}function HlsAudioTracks(){if(!pip&&1==v.hlsaudio){var e,t=hls.audioTracks;if(o.files_audiotrack=[],1<t.length)for(var i=0;i<t.length;i++){if(e=!1,exist(t[i].groupId)&&0<o.files_quality_ag.length&&t[i].groupId!=o.files_quality_ag[o.current_quality])for(var s=0;s<o.files_quality_ag.length;s++)o.files_quality_ag[s]==t[i].groupId&&(e=!0);e||(o.files_audiotrack[i]=exist(t[i].name)?o.media.renameTracks(t[i].name):i,exist(v.default_audio)&&v.default_audio==o.files_audiotrack[i]&&(o.current_audiotrack=i,hls.audioTrack=i))}}}function HlsAudioTrack(){if(!pip){var e=hls.audioTracks,t=hls.audioTrack;if(-1<t){if(exist(e[t].groupId)&&0<o.files_quality_ag.length&&o.files_quality_ag[o.current_quality]!=e[t].groupId)for(var i=0;i<e.length;i++)if(e[i].name==e[t].name&&e[i].groupId==o.files_quality_ag[o.current_quality]){t=hls.audioTrack=i;break}o.current_audiotrack=t,log("HLS AudioTrack",o.current_audiotrack),o.controls.AudioTrackChangedNoHand(o.current_audiotrack)}}}function Time(){return is_dash?dash_created?o.dash.time():0:pjstg.currentTime}function Duration(){var e=pjstg.duration;return is_dash&&dash_created&&(e=o.dash.duration()),exist(v.end)&&(e=v.end),e==1/0||isNaN(e)?0:e}function TagPlay(){var e;"none"==url||void 0!==(e=pjstg.play())&&e.then(function(){}).catch(function(e){log("playError",e.message),-1==e.message.indexOf("source")&&-1==e.message.indexOf("interrupted by")&&(1==v.autoplaymute?(log("automute"),o.actions.Mute(),pjstg.volume=0,(e=pjstg.play())&&e.then(function(){}).catch(function(e){log("playError2",e.message),o.system.tv&&(is_hls||is_dash)||(o.controls.Pause(),o.actions.ShowPoster(),js("autoplay_denied"))})):(o.controls.Pause(),o.actions.ShowPoster()))})}function pause(){(is_ws?ws:pjstg).pause()}function isAuto(){var e=!1;return is_hls?hls_created&&(e=hls.autoLevelEnabled):is_dash&&dash_created&&(e=o.dash.auto()),e}function tagSrc(){if(o.system.safari){var e=pjstg.textTracks;if(e)for(var t=0;t<e.length;t++)e[t].mode="disabled";if(e=pjstg.audioTracks)for(t=0;t<e.length;t++)e[t].enabled=0==t?1:0;window.WebKitPlaybackTargetAvailabilityEvent&&(pjstg.addEventListener("webkitplaybacktargetavailabilitychanged",function(e){o.airplay="available"==e.availability,pip||o.actions.AirplayChanged()}),pjstg.addEventListener("webkitcurrentplaybacktargetiswirelesschanged",function(e){}))}CheckPip()}function CheckPip(){o.system.webkit&&(exist(pjstg.webkitSupportsPresentationMode)&&!o.system.iphone&&(o.pipwebkit=!0),document.pictureInPictureEnabled&&!pjstg.disablePictureInPicture&&(o.pipwebkit=!0))}function PipWebkit(){o.system.safari?"picture-in-picture"===pjstg.webkitPresentationMode?(pjstg.webkitSetPresentationMode("inline"),o.ispipkit=!1):(pjstg.webkitSetPresentationMode("picture-in-picture"),o.ispipkit=!0):document.pictureInPictureElement?eval("document.exitPictureInPicture().then(ok =>{o.ispipkit = false;}).catch(error => {});"):eval("pjstg.requestPictureInPicture().then(p => {o.ispipkit = true;}).catch(error => {o.ispipkit = false;});")}function onPipEnter(){o.ispipkit=!0}function onPipLeave(){o.ispipkit=!1}function HlsLevelsLength(){var e=0;return hls_created&&hls.levels&&(e=hls.levels.length),e}function ObjectFit(){pjstg&&(1==v.covervideo||1==v.fill?1==v.fillvideo||1==v.fill?css(pjstg,{"object-fit":"fill"}):css(pjstg,{"object-fit":"cover"}):css(pjstg,{"object-fit":"contain"}))}function Resize(){v.ratio&&api("scale",String(v.ratio).replace("/",":"))}function DashLevelsLength(){var e=0;return dash_created&&(e=o.dash.levels()),e}function iOSTrackLoaded(e){if(e.target.label&&o.sbt)for(var t=0;t<o.files_subtitle.length;t++)o.files_subtitle[t]==e.target.label&&o.sbt.SetSubtitle(t)}this.Play=function(){var e=!0;is_hls&&!hls_started&&(hls_created||CreateHLS(!0),hls.startLoad()),is_dash&&!dash_created&&(CreateDASH(!0),e=!1),is_ws&&(ws_created||CreateWS(),ws.play(),e=!1),"-2000px"==pjstg.style.top&&this.AfterVast(),e&&TagPlay()},this.BeforeVast=function(){(o.vastloader||o.vast)&&(o.ispipkit&&PipWebkit(),!o.airplayed&&o.system.mobile&&o.system.webkit&&(pjstg.muted||(pjstg.muted=!0,unmuteplease=!0),css(pjstg,{position:"absolute",left:-2e3,top:-2e3}),pause_before_vast=Time(),is_ws||pjstg.play(),0==pause_before_vast&&0<o.seekto&&(_seekaftervast=o.seekto)))},this.AfterVast=function(){o.airplayed||!o.system.mobile&&!o.system.webkit||(css(pjstg,{position:"static",left:0,top:0}),exist(v.ratio)&&Resize(),unmuteplease&&(o.muted||(pjstg.muted=!1),unmuteplease=!1),0<_seekaftervast&&(o.seekto=_seekaftervast,_seekaftervast=0),pause_before_vast=-1)},this.Pause=function(){log("paused"),pause()},this.Toggle=function(){(pjstg.paused?TagPlay:Pause)()},this.Seek=function(e){is_dash&&dash_created?o.dash.seek(e):(is_hls&&1==v.hlsforce&&0<e&&isAuto()&&(hls_force=hls.currentLevel,hls.nextAutoLevel=0),pjstg.currentTime=e)},this.Mute=function(){pjstg.muted=!0},this.Unmute=function(){pjstg.muted=!1,"hls"==o.file_type&&o.system.ios&&1==v.vast&&(exist(o.um1)||(nops=!0,pjstg.pause(),setTimeout(function(){pjstg.play(),nops=!1},10),o.um1=!0))},this.Volume=function(e){pjstg.volume=e},this.Gain=function(){if(o.gainedsource!=pjstg){var e,t,i;if(o.audiosrc[pjstg])e=o.audiosrc[pjstg],t=o.audioctx[pjstg];else if(window.AudioContext=window.AudioContext||window.webkitAudioContext,exist(window.AudioContext))try{e=(t=new AudioContext).createMediaElementSource(pjstg),o.audiosrc[pjstg]=e,o.audioctx[pjstg]=t}catch(e){log(e)}t&&((i=t.createGain()).gain.value=v.volumegain,e.connect(i),i.connect(t.destination),o.gained=!0,o.gainedsource=pjstg)}},this.isPlaying=function(){return!pjstg.paused},this.isLive=function(){return!(1!=v.live&&!is_ws)||o.live},this.tag=function(){return pjstg},this.nativeControls=function(){return attr(pjstg,{controls:"1"}),!0},this.preload=function(){attr(pjstg,{preload:"metadata"}),is_hls&&!hls_created&&CreateHLS(!1),is_dash&&!dash_created&&CreateDASH(!1)},this.status=function(){var e="playing";return pjstg.paused&&(e="paused"),pjstg.ended&&(e="ended"),e},this.ChangePip=function(e,t){pip=e,t.appendChild(pjstg),container=t,e?(1!=v.pip.nomute?pjstg.muted=!0:o.muted||(pjstg.muted=!1),PipSize(),0<o.files_quality.length&&is_hls&&(pip_quality=o.current_quality,hls.autoLevelCapping=0,hls.currentLevel=0)):(o.muted||1==v.pip.nomute||(pjstg.muted=!1),pjstg.volume=v.volume,PlayerSize(),0<o.files_quality.length&&is_hls&&(hls.autoLevelCapping=-1)<pip_quality&&pip_quality<hls.levels.length&&(hls.nextLevel=pip_quality))},this.time=function(){return Time()},this.duration=function(){return Duration()},this.loaded=function(){var e=0;if(pjstg.buffered&&0<pjstg.buffered.length){for(var t=Time(),i=0;i<pjstg.buffered.length;i++)(t>=pjstg.buffered.start(i)||t>=pjstg.buffered.start(i)-100)&&t<=pjstg.buffered.end(i)&&(e=pjstg.buffered.end(i));0==e&&(e=pjstg.buffered.end(pjstg.buffered.length-1))}return exist(v.end)&&e>v.end&&(e=v.end),e},this.auto=function(){return isAuto()},this.size=function(){return{width:pjstg.videoWidth,height:pjstg.videoHeight}},this.src=function(e){e=e.replace(/\(random\)/g,Math.random()),url=e,2!=o.media_error&&(o.media_error=!1),is_dash?dash_created&&o.dash.source(e):is_hls?(is_hls&&hls&&hls.destroy(),CreateHLS(!0),CheckPip()):(attr(pjstg,{src:e,autoplay:0}),tagSrc(),pause())},this.airplay=function(){pjstg.webkitShowPlaybackTargetPicker()},this.pipwebkit=function(){PipWebkit()},this.setDashQuality=function(e){dash_created&&o.dash.setQuality(e)},this.setDashAudioTrack=function(e){dash_created&&0<pjstg.buffered.length&&o.dash.setAudio(e)},this.setWsQuality=function(e){o.ws&&o.ws.setTracks(ws,e,-1)},this.setWsAudioTrack=function(e){o.ws&&o.ws.setTracks(ws,-1,e)},this.setHlsQuality=function(e){var t;hls_created&&(t=parseInt(e),e==hls.levels.length&&(t=-1,hls.autoLevelCapping=-1),"current"==v.hlschangequality&&(setTimeout(onWaiting,500),hls.currentLevel=t),"next"==v.hlschangequality&&(log("HLS next level "+t),hls.nextLevel=t),-1==t&&(o.current_quality=hls.loadLevel),HlsUpdateAudio())},this.getHLS=function(){return hls},this.getDASH=function(){return!!dash_created&&o.dash.getDash()},this.HlsLevelsLength=function(){return HlsLevelsLength()},this.DashLevelsLength=function(){return DashLevelsLength()},this.ObjectFit=function(){ObjectFit()},this.resize=function(){Resize()},this.setHlsAudioTrack=function(e){hls_created&&(hls.audioTrack=parseInt(e))},this.hlsDashSub=function(e,t){"hls"==t&&hls_created&&_hlssubtracks&&_hlssubtracks.HlsSubTrack(e),"dash"==t&&dash_created&&o.dash.subtrack(e)},this.setSpeed=function(e){e&&(pjstg.playbackRate=e)},this.removeTracks=function(){for(var e=pjstg.childNodes,t=[],i=0;i<e.length;i++)"track"==e[i].tagName.toLowerCase()&&(e[i].removeEventListener("load",iOSTrackLoaded),t.push(e[i]));for(i=0;i<t.length;i++)pjstg.removeChild(t[i])},this.addTrack=function(e,t,i){var o;""!=e&&(0<e.indexOf(" or ")&&(e=e.split(" or ")[0]),(o=document.createElement("track")).setAttribute("src",e),o.setAttribute("label",t),o.setAttribute("kind","subtitles"),o.setAttribute("mode","showing"),i&&o.setAttribute("default",""),pjstg.appendChild(o),o.addEventListener("load",iOSTrackLoaded))},this.errorMessage=function(){return error||""},this.Remove=function(){clearInterval(o.dashInterval),is_hls&&hls&&hls.destroy(),is_dash&&dash_created&&o.dash.reset(),is_ws&&ws&&ws.stop(),pjstg.removeEventListener("error",onTagError),pjstg.removeEventListener("ended",onEnded),pjstg.removeEventListener("play",onPlay),pjstg.removeEventListener("pause",onPause),pjstg.removeEventListener("timeupdate",onTimeupdate),pjstg.removeEventListener("seeking",onSeeking),pjstg.removeEventListener("seeked",onSeeked),pjstg.removeEventListener("loadedmetadata",onMeta),pjstg.removeEventListener("volumechange",onVolume),pjstg.removeEventListener("waiting",onWaiting),pjstg.removeEventListener("durationchange",onDuration),pjstg.removeEventListener("enterpictureinpicture",onPipEnter),pjstg.removeEventListener("leavepictureinpicture",onPipLeave),pjstg.src="",("IFRAME"==container.tagName?container.contentDocument.body:container).removeChild(pjstg),pjstg=null}},Controls=function(){var b=[],butNames=[],butPosition=[],waiting=!1,wait_to,toolbarHidden=!1,settings,playlist,_lastactbut,i;for(i in o.settings2&&(o.settings2.hide(),o.settings2=null),o.files_speed=[.25,.5,.75,1,1.25,1.5,2],1==v.settings.customspeeds&&exist(v.settings.speeds)&&(v.settings.speeds=v.settings.speeds.replace(/\n/gi,""),o.files_speed=v.settings.speeds.split(",")),o.speed1=-1<o.files_speed.indexOf("1")?o.files_speed.indexOf("1"):o.files_speed.indexOf(1),3==o.current_speed&&(o.current_speed=o.speed1),o.menuproc)o.menuproc.hasOwnProperty(i)&&(exist(v.settings[i])||(v.settings[i]=5),o["files_"+i]=["+ "+v.settings[i]+"%","&ndash; "+v.settings[i]+"%",100*o.menuproc[i]+"%"]);1==v.toolbar.hidejustfull&&o.system.ios&&1==v.nativefullios&&(v.toolbar.hide=0);var resizeonwidth=!1,stretch_width=0,stretch_width_last=0,stretch_with_volume=!1,firstly=!0,uijs,bg=new ControlsBg,settings,order=[],_rights=!1,_move_rights=!1,_max_order=0,_rb=[],y;for(y in"controls-right"==v.control_line.position&&(v.control_line.position="controls"),v)v.hasOwnProperty(y)&&0==y.indexOf("control_")&&v[y]&&(exist(v[y].order0)?v[y].order=v[y].order0:v[y].order0=v[y].order,order[v[y].order]=y,"controls"!=v.control_line.position&&("controls-right"==v[y].position?(_rb.push([y,v[y].order]),_rights=!0):"controls"!=v[y].position&&null!=v[y].position||_rights&&(_move_rights=!0)),_max_order<v[y].order&&(_max_order=v[y].order));if(_move_rights){_rb.sort(function(e,t){return e[1]-t[1]});for(var i=0;i<_rb.length;i++)order[v[_rb[i][0]].order]=null,v[_rb[i][0]].order=_max_order+1,_max_order++,order[v[_rb[i][0]].order]=_rb[i][0]}1==v.toolbar.hide&&1==v.toolbar.hidedown&&(o.toolbar=createElement("div"),o.frame.appendChild(o.toolbar),css(o.toolbar,{position:"absolute",left:0,top:0,width:"100%",height:"100%",transition:"top 0.3s ease-out","pointer-events":"none"}));var bg2=createElement("div");(1==v.toolbar.hide&&1==v.toolbar.hidedown?o.toolbar:o.frame).appendChild(bg2),css(bg2,{position:"absolute",left:0,bottom:0,width:"100%",height:v.toolbar.h}),bg2.onclick=function(){o.system.mobile||o.actions.ControlsBgClick()},o.hidecontrols&&(hide2(bg.c()),hide2(bg2));for(var i=1,y,action,lu,z;i<order.length;i++){order[i]&&(y=order[i],y&&(action=v[y].action,o.system.mobile&&("volume"==action&&"speed"==v[y].customline||("volume"==action&&1==v.showvolmobile&&o.system.mobile?v[y].hideoutmute=0:("volume"==action||"fullscreen"==action&&v.nativemobile)&&(v[y].on=0))),o.hidecontrols&&(v[y].on=0),1==v[y].on&&("line"==action||"volume"==action?(b[y]=new ControlLine(y,action),b[y].Resize(b[y].s("w"))):b[y]=new Control(y),butNames.push(y),"title"==b[y].g("action")&&""==b[y].s("text")&&(""!=b[y].s("var")&&exist(v[b[y].s("var")])||b[y].set("display",!1)),"custom"==b[y].g("action")&&(lu=b[y].s("linkurl"),lu&&0==lu.indexOf("api:")&&0<lu.indexOf(",0/1")&&(z=lu.split(","),0==api(z[0].substr(4))&&b[y].CustomSwitch(0))),b[y].set("scale",b[y].s("scale")))))}function ControlX(e){var t,i=0;if(e)if("line"==e.g("action"))i=butPosition.left+e.s("marginleft"),null!=butPosition.rightbs||(butPosition.rightbs=[]);else if(null!=butPosition.rightbs){var s=e.g("width")+e.s("marginright")+e.s("marginleft");HideProof(e)&&(s=0),1!=e.s("hidden")||e.g("show")||(s=0),0<e.s("vertical")&&(s=0),i=bg.g("w")-+v.toolbar.leftandrightpadding-s+e.g("width")/2+e.s("marginleft");var r=0;for(butPosition.right-=s,r=0;r<butPosition.rightbs.length;r++){var n=b[butPosition.rightbs[r]];0<n.s("vertical")?css(n.c(),{left:n.g("x0")-s}):css(n.c(),{left:n.g("x")-s}),n.set("x0",n.g("x"))}butPosition.rightbs.push(e.g("key")),e.set("rightside",1)}else 1!=e.s("hidden")||e.g("show")?0<e.s("vertical")?i=butPosition.left+e.s("marginleft")+e.s("marginright"):(t=!1,"volume"==e.g("action")&&1==e.s("hide")&&1==e.s("hideoutmute")&&(o.hidden_volume_over_process||o.hidden_volume_over?stretch_with_volume||(stretch_width-=e.g("width")+e.s("marginleft")+e.s("marginright"),stretch_with_volume=!0):stretch_with_volume=!(t=!0)),HideProof(e)&&(t=!0),t?i=butPosition.left:(butPosition.left+=e.g("width")/2+e.s("marginleft"),i=butPosition.left,butPosition.left+=e.g("width")/2+e.s("marginright"))):"volume"==e.g("action")&&1==e.s("hide")&&1==e.s("hideoutmute")&&stretch_with_volume&&(stretch_width+=e.g("width")+e.s("marginleft")+e.s("marginright"),stretch_with_volume=!1);return i}function CreateShare(){o.shareme&&"function"==typeof PluginShare&&(o.share=new PluginShare)}function ControlCoordinate(e){var t=o.fullscreen&&0==v.toolbar.stretchonfullscreen?o.normal_w:o.screen_w,i=o.screen_h,s=0;e!=bg&&(s=t/2+e.s("marginleft")-e.s("marginright"));var r=i/2,n=e.g("width"),a=e.g("height"),t=e.s("position");return-1<t.indexOf("center")&&(s=o.screen_w/2+e.s("marginleft")-e.s("marginright")),0==t.indexOf("top")&&(r=a/2+e.s("marginproctop")*o.screen_h/100),0==t.indexOf("bottom")&&(r=o.screen_h-(e==bg?a:a/2)-e.s("marginprocbottom")*o.screen_h/100),-1<t.indexOf("right")&&(s=o.screen_w-n/2+e.s("marginleft")-e.s("marginright")-e.s("marginprocright")*o.screen_w/100),-1<t.indexOf("left")&&(s=n/2+e.s("marginleft")-e.s("marginright")+e.s("marginprocleft")*o.screen_w/100),"timeline"==t&&(s=-o.timeline_w/2+e.s("marginprocleft")*o.timeline_w/100+e.s("marginleft")-e.s("marginright"),r=-o.timeline_h/2-e.s("marginprocbottom")*o.timeline_h/100+e.s("marginproctop")*o.timeline_h/100),-1<t.indexOf("controls")&&(n=ControlX(e),s=(bg&&bg.c()?int(bg.c().offsetLeft):0)+n,"controls-right"==t&&(s+=stretch_width),r="top"==v.toolbar.position?v.toolbar.h/2-(v.toolbar_margintop<0?v.toolbar_margintop:0):i-v.toolbar.h/2),{x:s,y:r+e.s("margintop")-e.s("marginbottom")}}function Resize(e){var t=o.fullscreen&&0==v.toolbar.stretchonfullscreen?o.normal_w:o.screen_w;o.screen_h;css(bg.c(),{top:("top"==v.toolbar.position?0:o.screen_h-v.toolbar.h)-v.toolbar_margintop}),bg.set("y0",o.screen_h-v.toolbar.h-v.toolbar_margintop),0==v.toolbar.stretchonfullscreen&&bg&&(css(bg.c(),{width:t,left:0,"margin-left":0}),bg.set("w",t),o.fullscreen&&css(bg.c(),{left:"50%","margin-left":-t/2}));t=!(butPosition={left:+v.toolbar.leftandrightpadding,right:bg.g("w")-+v.toolbar.leftandrightpadding});bg.g("show")||(bg.set("display",!0),t=!0);for(var i,s=0;s<butNames.length;s++){var r,n=butNames[s];!b[n]||(r=ControlCoordinate(b[n]))&&("position"==b[n].s("animation")&&exist(o.motions[n])&&o.motions[n].XY(b[n].g("x0"),r.x,b[n].g("y0"),r.y),b[n].set("x0",r.x),b[n].set("y0",r.y),1!=b[n].s("hidden")||b[n].g("show")||e?css(b[n].c(),{position:"absolute",left:b[n].g("x0"),top:b[n].g("y0")}):HidePositionControl(b[n]))}for(n in t&&bg.set("display",!1),stretch_width=0,b)b.hasOwnProperty(n)&&("controls-right"==b[n].s("position")&&"line"!=b[n].g("action")&&-1<stretch_width&&(stretch_width=butPosition.right-butPosition.left),"line"==b[n].g("action")&&bg&&(1==b[n].s("customwidth")?i=b[n].s("w"):-1<b[n].s("position").indexOf("controls")?(i=butPosition.right-butPosition.left-b[n].s("marginleft")-b[n].s("marginright"),css(b[n].c(),{left:int(bg.c().offsetLeft)+butPosition.left+b[n].s("marginleft")+i/2}),stretch_width=-1):(i=bg.g("w")-b[n].s("marginleft")-b[n].s("marginright"),css(b[n].c(),{left:int(bg.c().offsetLeft)+b[n].s("marginleft")+i/2})),b[n].set("x0",b[n].g("x")),b[n].Resize(i)));settings&&ResizeSettings(settings),playlist&&ResizeSettings(playlist),(resizeonwidth||o.fullscreen||stretch_width_last!=stretch_width)&&ShowOrHide()}function HidePositionControl(e){var t=0,i=0;-1<e.s("position").indexOf("right")&&-1==e.s("position").indexOf("controls")&&(t=o.screen_w+e.g("width")+10),-1<e.s("position").indexOf("left")&&(t=-e.g("width")-10),-1<e.s("position").indexOf("top")&&(i=2*-e.g("height")),(-1<e.s("position").indexOf("bottom")||-1<e.s("position").indexOf("controls"))&&(i=o.screen_h+e.g("height")+e.g("width")+10),0<t&&css(e.c(),{left:t}),0<i&&css(e.c(),{top:i})}function ResizeSettings(e){var t=-2e3;e.resizePlaylist();var i=o.screen_h-v.toolbar.h*(-1<e.s("position").indexOf("top")?1:2);e==playlist&&1==v.change2playlist&&(i=o.screen_h);var s,i=i-(o.fullscreen&&!o.system.mobile?+e.s("hmaxk")+100:e.s("hmaxk"))-(e==playlist&&0==+e.s("hmaxk")?e.s("margintop"):0);i<100&&(i=100),css(e.c(),{"max-height":i}),e.co()&&css(e.co(),{"max-height":i}),e.g("show")&&(t=o.screen_h/2-e.g("height")/2+e.s("margintop")-e.s("marginbottom"),-1<e.s("position").indexOf("top")&&(t=e.s("margintop")-e.s("marginbottom")),-1<e.s("position").indexOf("bottom")&&(t=o.screen_h-("top"!=v.toolbar.position?v.toolbar.h:0)-e.g("height")+e.s("margintop")-e.s("marginbottom")),t<0&&(t=0)),"settings"==e.g("key")&&o.sttx?(s=o.screen_w-e.g("width")-e.s("marginright"),o.sttx>s?css(e.c(),{position:"absolute",right:e.s("marginright"),left:"auto",top:t}):css(e.c(),{position:"absolute",left:o.sttx,right:"auto",top:t})):-1<e.s("position").indexOf("right")?css(e.c(),{position:"absolute",right:e.s("marginright")-e.s("scrollwidth"),left:"auto",top:t}):-1<e.s("position").indexOf("left")?css(e.c(),{position:"absolute",left:e.s("marginleft"),right:"auto",top:t}):"playlist"==e.g("key")&&1==e.s("floatleft")?css(e.c(),{position:"absolute",left:o.screen_w/2-e.g("width")/2+e.s("marginleft")/2-e.s("marginright")/2,top:t}):(s=o.screen_w/2-e.g("width")/2+e.s("marginleft")-e.s("marginright"),css(e.c(),{position:"absolute",left:0<s?s:0,top:t})),e.Arrows()}function Action(but,type){o.acted=!0,_lastactbut=but;var a=but.g("action"),x;if("play"==a?(o.actions.Play(),1==v.hotkey.on&&1==v.hotkey.icons&&1==v.hotkey.playiconbut&&PluginHotIcon("play",1)):("pause"==a&&(o.rldplay=0,o.actions.Pause(),1==v.hotkey.on&&1==v.hotkey.icons&&1==v.hotkey.playiconbut&&PluginHotIcon("play",0)),"stop"==a&&o.actions.StopMedia()),"back"==a&&o.actions.Seek(0,!1),"fullscreen"==a?o.casting||o.actions.Fullscreen():"normalscreen"==a&&o.actions.Normalscreen(),"line"==a){var ld=o.media.duration(),lt=but.g("click")*ld;if(0<v.delete&&(ld-=v.delete,lt=but.g("click")*ld+v.delete),0<v.seekwindow&&v.seekwindow/ld<=1-but.g("click"))return;o.actions.Seek(lt,!0),o.continue&&(o.continue.write(lt,ld),0<o.seekto&&(o.seekto=void 0))}if("volume"==a&&(x=but.g("click"),x<.02&&(x=0),1<x&&(x=1),"speed"==but.s("customline")?(x=parseFloat(x*o.files_speed.slice(-1)[0]).toFixed(1),o.actions.SetSpeed(x,1)):(o.storage&&1==v.volumestore&&(localStorage.setItem("pljsvolume",x),0<but.g("click")||o.system.iphone||0==v.mutestore?localStorage.removeItem("pljsmute"):localStorage.setItem("pljsmute",1)),o.actions.Volume(x))),"mute"==a?(o.storage&&!o.system.iphone&&1==v.mutestore&&localStorage.setItem("pljsmute",1),o.actions.Mute(),1==v.hotkey.icons&&1==v.hotkey.muteiconbut&&PluginHotIcon("mute",0)):"unmute"==a&&(o.storage&&localStorage.removeItem("pljsmute"),o.actions.Unmute(),1==v.hotkey.icons&&1==v.hotkey.muteiconbut&&PluginHotIcon("mute",1)),0==a.indexOf("time")&&(but.isOn()?but.Off():but.On()),"rotate"==a&&o.media.Rotate(),"scale+"==a&&o.media.Scale(.1),"scale-"==a&&o.media.Scale(-.1),"scale"==a&&o.media.Scale(0),"live"==a&&(api("restart"),but.set("iconopacity",1),but.set("saturate",1)),"share"==a&&(js("share"),ShowShare()),"settings"==a&&(o.sttx=void 0,settings&&(settings.g("show")?settings.hide():settings.show())),"playlist"==a){if(o.overopentimeout==a)return;exist(v.playlist)&&(playlist.g("show")?playlist.hide():setTimeout(function(){playlist.show()},100))}if("next"==a&&o.controls.PlaylistNext(),"prev"==a&&o.controls.PlaylistPrev(),"custom"==a&&1==but.s("link")&&""!=but.s("linkurl")){var x=trim(but.s("linkurl"));if(o.overopentimeout!=a+x){-1<x.indexOf("{time}")&&(x=x.replace("{time}",exist(o.continue)?o.continue.flag().t:o.media.time())),-1<x.indexOf("{file}")&&(x=x.replace("{file}",o.media.currentFile())),-1<x.indexOf("{title}")&&(x=x.replace("{title}",v.title.replace(/,/gi," "))),"airplay"==x&&o.media.Airplay(),"skip"==x&&0<but.s("skip")&&o.actions.Seek(but.s("skip")),"seektome"==x&&(o.actions.Seek(but.s("marginprocleft")*o.media.duration()/100),o.play||o.actions.Play()),1==but.s("linkpause")&&o.actions.Pause();var y=x.split(","),bl;if(0==x.indexOf("api:"))for(var z=x.substr(4).split(";"),i=0;i<z.length;i++){var ss,img,a,y=z[i].split(",");1<y.length?("seek"==y[0]&&1==v.hotkey.icons&&1==v.hotkey.seekiconbut&&PluginHotIcon("seek",0<y[1]?1:0),api(y[0],y[1],but),"0/1"!=y[1]&&"1/0"!=y[1]||reRightMenu()):"screenshot"==y[0]?(ss=api(y[0]),ss?-1<ss.indexOf("data")&&(1==v.ssfly&&(img=document.createElement("img"),img.setAttribute("src",ss),css(img,{position:"fixed",right:exist(v.ssflyp)?v.ssflyp:20,bottom:exist(v.ssflyp)?v.ssflyp:20,width:0,transition:"width 0.5s cubic-bezier(.75,-0.5,0,1.75)"}),img.style.zIndex=1001,document.body.appendChild(img),setTimeout(function(){css(img,{width:exist(v.ssflyw)?v.ssflyw:200})},1),img.onclick=function(){this.parentNode.removeChild(this)}),1==v.ssdown&&(a=createElement("a"),a.href=ss,a.download=y[0]+".jpg",a.click())):log(y[0]+" error")):api(y[0])}else 0==x.indexOf("js:")&&(0<x.indexOf("(")&&0<x.indexOf(")")?eval(x.substr(3)):eval(y[0].substr(3)+"("+(exist(y[1])?'"'+y[1]+'"':"")+(exist(y[2])?',"'+y[2]+'"':"")+")")),0==x.indexOf("event:")&&JsEvent(x.substr(6),o.media.time()),0==x.indexOf("share:")&&o.share&&o.share.api(x.substr(6)),0==x.indexOf("effect:")&&o.effects&&api("effect",x.substr(7)),0!=x.indexOf("http")&&0!=x.indexOf("/")&&0!=x.indexOf("?")&&0!=x.indexOf("url:")||(0==x.indexOf("url:")&&(x=x.substr(4)),window.open(x,but.s("linktarget"))),0==x.indexOf("download")&&o.actions.Download(),"api:pipwebkit"==x&&o.media.PipWebkit();if(-1<x.indexOf("settings#")&&settings){var si=x.substr(9).split(",");if(settings.g("show")&&settings.g("open")==si[0])o.sttx=void 0,settings.hide();else{o.sttx=but.g("x")-but.g("width")/2;for(var i=0;i<si.length;i++)0==i&&settings.show(),settings.open(si[i])}}-1<x.indexOf("settings:")&&1==v.settings.combined&&(o.settings2||(o.settings2=new PluginSettings2),1==v.settings.showovercontrol?"over"==type?o.settings2.show(x):o.settings2.toggle(x):type||o.settings2.toggle(x)),"unblock"==x&&(o.actions.RemoveCurtain(),o.stopkeys=0,but.set("hide2"),bl=FindBut("linkurl","block"),bl&&bl.set("hide2")),"block"==x&&(but.UpdateText("OK"),but.s("linkurl2")&&(window.location.href=trim(but.s("linkurl2"))))}}}function TitlePl(){for(var e in b)b.hasOwnProperty(e)&&"custom"==b[e].g("action")&&"text"==b[e].s("type")&&b[e].RenewFromTitle(!0)}function ShowShare(){exist(o.share)&&o.share.Show()}function CustomTextButs(){if(v.customtext&&"object"==typeof v.customtext)for(var e in v.customtext)v.customtext.hasOwnProperty(e)&&CustomText(e,v.customtext[e])}function CustomText(e,t){for(var i in b)b.hasOwnProperty(i)&&"custom"==b[i].g("action")&&"text"==b[i].s("type")&&b[i].s("dom")==e&&(b[i].g("show")&&1!=b[i].s("hidden")||(b[i].set("unhidden"),b[i].set("display",!0)),b[i].CustomText(t))}function ShowOrHide(){for(var e in b)b.hasOwnProperty(e)&&"buffer"!=b[e].g("action")&&ShowOrHideProcessor(b[e]);ShowOrHideProcessor(bg),stretch_width_last!=stretch_width&&(stretch_width_last=stretch_width,Resize()),1==v.toolbar.hide&&1==v.toolbar.hidedown&&ToolbarDown(!o.starttimeout&&!o.mouseHere&&!o.fullscreen&&o.play&&1!=v.toolbar.hidejustfull&&!o.casting)}function ShowForce(){var e=toolbarHidden&&1==v.toolbar.hidewithoutmoving;if(o.play||1!=v.toolbar.hide||1!=v.toolbar.hideonpause||(e=!1),e){for(var t in b)b.hasOwnProperty(t)&&"buffer"!=b[t].g("action")&&ShowOrHideProcessor(b[t],!1);css(o.frame,{cursor:"default"}),o.fcdef=!0,ShowOrHideProcessor(bg,!1),bg.g("show")&&ToolbarShow(),ToolbarDown(!1)}}function HideForce(){var e=o.play&&1==v.toolbar.hidewithoutmoving&&!o.mouseDown&&!o.controlover;if(o.play||1!=v.toolbar.hide||1!=v.toolbar.hideonpause||(e=!0),settings&&settings.g("show")&&o.setaction&&(e=!1),o.casting&&(e=!1),e){for(var t in b)b.hasOwnProperty(t)&&"buffer"!=b[t].g("action")&&ShowOrHideProcessor(b[t],!0);ShowOrHideProcessor(bg,!0),bg.g("show")||(toolbarHidden=!0,o.media.ToolbarHide(),o.play&&(css(o.frame,{cursor:"none"}),o.fcdef=!1)),ToolbarDown(!0)}}function HideInterval(){1==v.toolbar.hidewithoutmoving&&(1!=v.toolbar.hidejustfull||o.fullscreen||o.fullscreen_process)&&(clearInterval(o.toolbarInterval),o.toolbarInterval=setInterval(HideForce,1e3*(0<v.toolbar.hideleavetimeout?v.toolbar.hideleavetimeout:v.toolbar.hidetimeout)))}function ShowOrHideProcessor(e,t){var i=!1,s=!1,r=!1;1==v.toolbar.hide?(o.starttimeout||o.mouseHere||o.fullscreen||!o.play||1==v.toolbar.hidejustfull||o.casting?s=!(i=!1):r=!(s=!(i=!0)),exist(t)&&!o.casting&&(s=!(i=t)),1!=v.toolbar.hide||1!=v.toolbar.hidedown||0!=e.s("position").indexOf("controls")&&"line"!=e.s("action")||(s=!(i=!1)),1!=v.toolbar.hideonpause||o.play||(r=s=!(i=!0))):1!=e.s("hide")&&(s=!0),s&&!o.fcdef&&(css(o.frame,{cursor:"default"}),o.fcdef=!0);var n=e.g("action");"custom"==n&&-1==e.s("position").indexOf("controls")&&(s=!(i=!1)),o.casting&&"line"==n&&-1==o.media.duration()&&(s=!(i=!0));var a=!1,l=HideProof(e);1==e.s("hide")&&(1==e.s("hideonleaveandplay")&&(r||t||o.play&&!o.mouseHere)&&(r||t)&&(l=!0),1==e.s("hidelap")&&o.play&&!o.mouseHere&&(l=!0),1!=e.s("hideonwidth")&&1!=e.s("hideoverwidth")&&1!=e.s("hideonfullscreen")||(resizeonwidth=!0)),l?s=!(i=!0):i||(s=!0),"volume"==e.s("action")&&1==e.s("hide")&&1==e.s("hideoutmute")&&(s=!(i=!0),r||!o.hidden_volume_over&&!o.hidden_volume_over_process||t||1==e.s("hiddenwidth")?a=!0:s=!(i=!1)),(o.nativecontrols||!o.start&&1==v.toolbar.hide&&1==v.toolbar.hideuntilstarted||!o.metadata&&1==v.toolbar.hide&&1==v.toolbar.hideuntilmeta)&&((-1<e.s("position").indexOf("controls")||-1<e.s("position").indexOf("bottom"))&&(s=!(i=!0)),1!=v.toolbar.hidejustfull||o.fullscreen||(s=!(i=!1))),settings&&settings.g("show")&&1!=v.settings.always&&(t=r=!1),playlist&&o.droplist&&1==v.playlist.dropopen&&o.droplist.Visible()||("share"==n&&exist(o.share)&&o.share.empty()&&(s=!(i=!0),e.set("animation","none")),"playlist"!=n&&"next"!=n&&"prev"!=n&&1!=e.s("hidewithoutplaylist")||(playlist?playlist.empty()&&0!=e.s("hidewithoutplaylist")&&(s=!(i=!0),e.set("animation","none")):s=!(i=!0)),1==o.hideall&&(s=!(i=!0)),!a||(a=ControlCoordinate(e))&&(0<a.y&&e.set("y0",a.y),css(e.c(),{position:"absolute",top:e.g("y0")})),i&&HideControl(e,!!firstly),s&&ShowControl(e),e==bg&&(!i&&s&&(ToolbarShow(),show2(bg2),toolbarHidden=!1,0==uijs&&js("ui",1),uijs=1,o.cut&&o.cutted&&o.cut.show()),!i||s||o.casting||(o.media.ToolbarHide(),SettingsClose(),hide2(bg2),toolbarHidden=!0,1==uijs&&js("ui",0),uijs=0,o.cut&&o.cutted&&o.cut.hide()),playlist&&(1!=v.playlist.always||playlist.empty()||(s||o.nativecontrols?1==v.playlist.alwaysnotfullscreen&&o.fullscreen||playlist.g("show")||1==v.playlist.alwaysjustpause&&o.play||playlist.show():i&&playlist.g("show")&&playlist.hide()))))}function HideProof(e){var t=!1,i=e.g("action");if(1==e.s("hide")&&(1==e.s("hideonplay")&&o.play&&(t=!0),1==e.s("hideonpause")&&(o.play||(t=!0)),1==e.s("hideondesktop")&&o.system.desktop&&(t=!0),1==e.s("hideonmobile")&&o.system.mobile&&(t=!0),1==e.s("hideoverwidth")&&(o.screen_w>e.s("hideoverwidthlimit")?(e.set("hiddenwidth",1),t=!0):e.set("hiddenwidth",0)),1==e.s("hideonwidth")&&(o.screen_w<=e.s("hideonwidthlimit")?(e.set("hiddenwidth",1),t=!0):e.set("hiddenwidth",0)),1==e.s("hideafterstart")&&o.start&&(t=!0),1==e.s("hideafter")&&0<e.s("hideaftersec")&&o.media.time()>=e.s("hideaftersec")&&(t=!0),1==e.s("hidebefore")&&0<e.s("hidebeforesec")&&o.media.time()<e.s("hidebeforesec")&&(t=!0),1==e.s("hide0timestore")&&(!o.start&&o.continue&&!o.media.isLive()||(t=!0),o.continue&&0==o.continue.flag().t&&(t=!0)),1==e.s("hideuntilstarted")&&(o.start||(t=!0)),0<e.s("hideuntilto")&&(t=!0),1==e.s("hideonvar")&&exist(e.s("hidevar"))&&options[e.s("hidevar")]&&(t=!0),1==e.s("hideuntiltext")&&(exist(e.s("customtext"))||(t=!0)),1==e.s("hidewovar")&&exist(e.s("hidevar2"))&&(options[e.s("hidevar2")]||(t=!0)),1==e.s("hideuntilstartedios")&&o.system.ios&&(o.start&&!o.newfile||(t=!0)),1==e.s("hideuntilended")&&(o.media.ended()||(t=!0)),1==e.s("hideonvod")&&(o.media.isLive()||(t=!0)),1==e.s("hideonleave")&&(o.mouseHere||(t=!0)),1==e.s("hidenormscreen")&&(o.fullscreen||(t=!0)),1==e.s("hideonfullscreen")&&o.fullscreen&&(t=!0),1==e.s("hideonunmute")&&(o.muted||(t=!0)),1==e.s("hideonlive")&&o.media.isLive()&&-1==o.media.currentFile().indexOf("?DVR")&&(t=!0),1==e.s("hidewithposter")&&isVisible(o.poster)&&(t=!0),1==e.s("hideuntilmeta")&&(o.metadata||(t=!0)),1==e.s("hideonmeta")&&o.metadata&&(t=!0),1==e.s("hidemini")&&o.mini&&(t=!0),1==e.s("hidenomini")&&(o.mini||(t=!0)),1==e.s("hideafterclick")&&e.g("clicked")&&(t=!0),1==e.s("hidenoab")&&(o.ab||(t=!0)),1==e.s("hideab")&&o.ab&&(t=!0),1==e.s("hideonyoutube")&&1==v.preload&&1==v.screenclick&&("youtube"!=o.file_type||exist(v.poster)||0!=v.youtubeposter||o.start&&"ended"!=o.media.status()||""==v.poster||(t=!0))),"custom"==i){var s=e.s("linkurl");if(s&&("api:airplay"!=s&&"airplay"!=s||o.airplay||o.airplayed||(t=!0),"api:pipwebkit"==s&&(o.pipwebkit&&(o.start||0!=v.preload)||(t=!0)),"api:unfixing"==s&&(o.mini||(t=!0)),-1<s.indexOf("captions")&&(o.captions||(t=!0)),"skip"==s)){var r=!1;if(exist(v.skip))for(var n=v.skip.split(","),a=0;a<n.length;a++){var l=n[a].split("-");2==l.length&&o.media.time()>l[0]&&o.media.time()<l[1]&&(r=!0,e.set("skip",l[1]))}r||(t=!0)}}return"playlist"!=i&&"next"!=i&&"prev"!=i||playlist&&!playlist.empty()||(t=!0),"settings"==i&&(settings?settings.empty()&&(t=!0,e.set("animation","none")):t=!0),"text"==e.g("type")&&0==e.g("length")&&(t=!0),e.g("settings#")&&(e.g("set#visible")||(t=!0)),1==e.s("chromecast")&&(s=document.getElementById("pjs_cast_button_"+v.id),(0!=o.media.duration()||0!=o.media.time())&&o.tagvideo&&isVisible(s)&&o.cast_available||(t=!0)),1==e.s("hidetime")&&(t||e.set("hidetime",1)),"duration"==i&&o.media.isLive()&&(t=!0),"control_start"==e.g("key")&&o.system.mobile&&o.nativecontrols&&o.system.android&&(t=!0),t}function HideControl(e,t){e.g("show")&&(o.fullscreen_process||"none"==e.s("animation")||t?e.set("display",!1):HideAnimate(e),e.set("show",!1))}function ShowControl(e){e.g("show")||("none"==e.s("animation")||o.fullscreen_process?(e.set("display",!0),o.fullscreen_process&&"bg"!=e.g("key")&&e.set("opacity",1),"volume"==e.g("action")&&o.hidden_volume&&HidePositionControl(e)):ShowAnimate(e),"volume"==e.s("action")&&o.controls.Volume(o.muted?0:v.volume),"line"==e.s("action")&&o.actions.Loading(),e.set("show",!0))}function HideAnimate(e){killMotion(e.g("key"));var t="alpha|",i="0|",s=e.s("animation"),r=e.s("position");"scale"==s&&(t+="scale|",i+="0|"),"position"==s&&(-1<r.indexOf("right")&&-1==r.indexOf("controls")&&(t+="x|",i+=int(o.screen_w+e.g("width"))+"|"),-1<r.indexOf("left")&&(t+="x|",i+=int(-e.g("width"))+"|"),-1<r.indexOf("top")&&(t+="y|",i+="0|"+-e.g("height")+"|"),(-1<r.indexOf("bottom")||-1<r.indexOf("controls")||"timeline"==r)&&(t+="y|","line"==e.g("action")||"volume"==e.g("action")?i+=int(o.screen_h+e.s("h")+(e.s("h")<20?20-e.s("h"):0))+"|":i+=int(o.screen_h+e.g("height"))+"|"),"center"==r&&(t+="scale|",i+="0|"));new Motion({mc:e,me:e.g("key"),type:t.substr(0,t.length-1),to:i.substr(0,i.length-1),hide:1})}function ShowAnimate(e){killMotion(e.g("key"));var t="",i="",o=e.s("animation"),s=e.s("position");1!=e.g("opacity")&&(t="alpha|",i=("bg"==e.g("key")?v.toolbar.a:"1")+"|"),"scale"==o&&e.g("scaleX")!=e.s("scale")&&(t+="scale|",i+=e.s("scale")+"|"),"position"==o&&("center"==s?e.g("scaleX")!=e.s("scale")&&(t+="scale|",i+=e.s("scale")+"|"):-1<s.indexOf("controls")?e.g("y")!=e.g("y0")&&(t+="y|",i+=e.g("y0")+"|"):(t+="x|y|",i+=e.g("x0")+"|"+e.g("y0")+"|")),""!=t&&""!=i?new Motion({mc:e,me:e.g("key"),type:t.substr(0,t.length-1),to:i.substr(0,i.length-1),show:1}):e.set("display",!0)}function ToolbarDown(e){1==v.toolbar.hide&&(e&&SettingsClose(),1==v.toolbar.hidedown&&(o.play||1!=v.toolbar.hideonpause||(e=!0),e&&!o.toolbarisdown&&css(o.toolbar,{top:bg.h()}),!e&&o.toolbarisdown&&css(o.toolbar,{top:0}),o.toolbarisdown=e))}function ToolbarShow(){toolbarHidden=!1,o.media.ToolbarShow(),o.resizeonmouse&&(o.resizeonmouse=!1,Resize(),setTimeout(Resize,300))}function UpdateTime(e,t,i){0<v.delete&&(t-=v.delete,i-=v.delete);var o=Time(t);"1"==e.s("inversetime")&&(o=Time(i-t)),"1"==e.s("showduration")&&("1"==e.s("showboth")?o+=0<i?" "+Lang(e.s("separator"))+" "+Time(i):"":0==t&&(o=Time(i))),e.UpdateText(o)}function Waiting(){var e;waiting||(js("buffering"),(e=FindBut("action","buffer"))&&(e.Buffer(),waiting=!0))}function Volumescrolled(){var e=FindBut("linkurl","volume scroll");e&&(e.UpdateText(""),e.set("hide2"),clearTimeout(o.volumescroll))}function SettingsClose(e){settings&&settings.g("show")&&settings.hide(e),o.settings2&&o.settings2.hide()}function PlaylistControls(){for(var e in b)b.hasOwnProperty(e)&&("next"==b[e].g("action")&&css(b[e].c(),{opacity:playlist.PlaylistNextExist()?1:.5}),"prev"==b[e].g("action")&&css(b[e].c(),{opacity:playlist.PlaylistPrevExist()?1:.5}))}function SpeedChanged(){if(o.line_speed){var e,t=parseFloat(o.custom_speed/o.files_speed.slice(-1)[0],1).toFixed(1);for(e in b)b.hasOwnProperty(e)&&("speed"==b[e].s("customline")&&o.custom_speed&&b[e].UpdatePlay(t,1),"api:speed,1.0"==b[e].s("linkurl")&&b[e].UpdateVolume(t))}}function FindBut(e,t){for(var i in b)if(b.hasOwnProperty(i)&&b[i].s(e)==t)return b[i]}function KeyPlusUp(e){"next"==e&&(o.playlist?o.controls.PlaylistNext():e="seek"),"seek"==e&&0<o.media.duration()&&o.media.time()+parseFloat(v.hotkey.seek)<o.media.duration()&&o.actions.Seek(o.media.time()+parseFloat(v.hotkey.seek),!0),"volume"==e&&(o.actions.Volume(parseFloat(v.volume)+parseFloat(v.hotkey.vol)),event.preventDefault()),"scale"==e&&(o.media.scale(v.hotkey.scale/100),event.preventDefault()),1==v.hotkey.icons&&PluginHotIcon(e,1)}function KeyPlusDown(e){"next"==e&&(o.playlist?o.controls.PlaylistPrev():e="seek"),"seek"==e&&0<o.media.duration()&&o.start&&o.actions.Seek(0<=o.media.time()-v.hotkey.seek?o.media.time()-v.hotkey.seek:0,!0),"volume"==e&&(o.actions.Volume(parseFloat(v.volume)-parseFloat(v.hotkey.vol)),event.preventDefault()),"scale"==e&&(o.media.scale(-v.hotkey.scale/100),event.preventDefault()),1==v.hotkey.icons&&PluginHotIcon(e,0)}exist(v.settings)&&("function"==typeof Settings?(settings=new Settings("settings"),1==v.settings.always?settings.show():settings.hide()):o.noset=!0),exist(v.playlist)&&"function"==typeof Settings&&(playlist=new Settings("playlist"),exist(o.playlist)?(playlist.updatePlaylist(o.playlist),0!=v.playlist.openplaylistbefore&&exist(v.playlist.openplaylistbefore)?playlist.show():0==v.playlist.always&&playlist.hide()):playlist.hide(1),PlaylistControls()),CreateShare(),CustomTextButs(),Resize(!0),ShowOrHide(),SpeedChanged(),firstly=!1,this.NewPl=function(){CreateShare()},this.ControlClick=function(e){var t=b[e],i=t.g("action");i&&(e=new Date,o.clicktime=e.getTime(),i&&""!=i&&Action(t))},this.toggleControl=function(e,t,i){for(var o in b)b.hasOwnProperty(o)&&b[o].s(e)==t&&b[o].set(i?"show2":"hide2")},this.butByS=function(e,t){return FindBut(t,e)},this.title=function(e){var t,i=!1;for(t in b)b.hasOwnProperty(t)&&"title"==b[t].g("action")&&(b[t].s("var")!=e&&"title"!=e||(1==b[t].s("hide")&&1==b[t].s("hideonplay")&&o.play&&(i=!0),""==v[e]||i?b[t].set("display",!1):b[t].set("display",!0),b[t].UpdateText(v[e])));TitlePl()},this.titlepl=function(){TitlePl()},this.resizetext=function(){for(var e in b)b.hasOwnProperty(e)&&"custom"==b[e].g("action")&&"text"==b[e].s("type")&&b[e].ResizeText()},this.showShare=function(){ShowShare()},this.updateTitle=function(){if(""!=v.title)for(var e in b){var t;b.hasOwnProperty(e)&&"title"==b[e].g("action")&&(t=!1,b[e].g("show")||(t=!0,b[e].set("display",!0)),b[e].UpdateText(v.title),t&&b[e].set("display",!1))}},this.customTextPl=function(){CustomTextButs()},this.customText=function(e,t){CustomText(e,t)},this.resize=function(){Resize()},this.resize2=function(){Resize(!0)},this.resizeSettings=function(){ResizeSettings(settings)},this.resizePlaylist=function(){ResizeSettings(playlist)},this.Play=function(){for(var e in b)b.hasOwnProperty(e)&&"play"==b[e].g("action")&&b[e].On();this.PlaylistVisible()&&1==v.playlist.autohide&&this.Playlist(),o.play=!0,ShowOrHide()},this.Pause=function(){for(var e in b)b.hasOwnProperty(e)&&("pause"!=b[e].g("action")&&"stop"!=b[e].g("action")||b[e].Off());playlist&&(1!=v.playlist.openplaylistpause||playlist.empty()||playlist.show()),o.play=!1,this.StopWaiting(),ShowOrHide(),1==v.toolbar.hide&&1==v.toolbar.hideonpause&&HideForce(!0)},this.Mute=function(){for(var e in b)b.hasOwnProperty(e)&&("mute"==b[e].g("action")&&b[e].On(),this.Volume(0));ShowOrHide()},this.Unmute=function(){for(var e in b)b.hasOwnProperty(e)&&"unmute"==b[e].g("action")&&b[e].Off();v.volume<.1?(v.volume=.5,o.actions.Volume(v.volume)):this.Volume(v.volume),ShowOrHide()},this.Volume=function(e,t){for(var i in b)b.hasOwnProperty(i)&&("volume"==b[i].g("action")&&"speed"!=b[i].s("customline")&&b[i].UpdatePlay(e,1,"no"!=t||t),"mute"==b[i].g("action")&&b[i].UpdateVolume(e));ShowOrHide()},this.Fullscreen=function(){var e=FindBut("action","fullscreen");e&&(e.On(),e.set("scale",e.s("scale"))),ShowOrHide(),resizeonwidth&&setTimeout(ShowOrHide,500),HideInterval()},this.Normalscreen=function(){var e=FindBut("action","fullscreen");e&&e.Off(),Resize(),clearInterval(o.toolbarInterval),ShowOrHide()},this.onEnded=function(){for(var e in b)b.hasOwnProperty(e)&&"play"==b[e].g("action")&&b[e].ReplayIcon()},this.Review=function(){ShowOrHide()},this.Mouse=function(e,t,i){var s=!1,r=b[e],n=r.g("action"),a=r.s("linkurl");"over"==t&&(o.hidden_volume&&("volume"!=n&&"mute"!=n&&"unmute"!=n||(o.hidden_volume_over=!0,s=o.hidden_volume_over_process=!0,ShowOrHide(),1!=v.control_line.hideonvolume||(e=FindBut("action","line"))&&hide2(e.c()))),!settings||1!=v.settings.showovercontrol||"settings"!=n&&0!=a.indexOf("setting")&&0!=a.indexOf("settings:")||(clearTimeout(o.settingsovertimer),settings.g("show")&&_lastactbut==r||(Action(r,t),o.overopentimeout=n+a,setTimeout(function(){o.overopentimeout=null},500))),playlist&&1==v.playlist.showovercontrol&&"playlist"==n&&(clearTimeout(o.playlistovertimer),playlist.g("show")&&_lastactbut==r||(Action(r,t),o.overopentimeout=n,setTimeout(function(){o.overopentimeout=null},500)))),"out"==t&&(o.hidden_volume&&("volume"!=n&&"mute"!=n&&"unmute"!=n||(o.hidden_volume_over=!1,o.hidden_volume_over_process=!0,setTimeout(function(){if(!o.hidden_volume_over)for(var e in o.hidden_volume_over_process=!1,b)b.hasOwnProperty(e)&&("volume"==b[e].g("action")&&(HideControl(b[e]),Resize()),"line"==b[e].g("action")&&1==v.control_line.hideonvolume&&show2(b[e].c()))},500))),1!=v.settings.showovercontrol||"settings"!=n&&0!=a.indexOf("setting")&&0!=a.indexOf("settings:")||(clearTimeout(o.settingsovertimer),o.settingsovertimer=setTimeout(function(){o.mouseDown||SettingsClose(1)},0<v.settings.showoverto?1e3*v.settings.showoverto:1e3)),playlist&&1==v.playlist.showovercontrol&&"playlist"==n&&(clearTimeout(o.playlistovertimer),o.playlistovertimer=setTimeout(function(){o.mouseDown||playlist.g("show")&&playlist.hide(1)},0<v.playlist.showoverto?1e3*v.playlist.showoverto:1e3))),s&&setTimeout(Resize,10)},this.StageLeave=function(){!o.volumewheel||o.fullscreen||o.fullscreen_process||(o.actions.volumewheel(!1),o.volumewheel=!1),o.poster&&-1<v.poster_aover&&isVisible(o.poster)&&css(o.poster,{opacity:v.poster_a}),o.play&&1==v.playonhover&&0!=v.pauseonhover&&o.actions.Pause(),0<v.toolbar.hideleavetimeout?(clearTimeout(o.leavetimeout),o.leavetimeout=setTimeout(ShowOrHide,1e3*v.toolbar.hideleavetimeout)):ShowOrHide()},this.StageOver=function(){o.poster&&-1<v.poster_aover&&isVisible(o.poster)&&css(o.poster,{opacity:v.poster_aover}),o.play||1!=v.playonhover||o.actions.Play(),ShowOrHide(),ToolbarDown(!1)},this.StageMove=function(e,t){var i,o;for(o in b)b.hasOwnProperty(o)&&("line"!=(i=b[o].g("action"))&&"volume"!=i||b[o].StageMove(e,t))},this.StageMove2=function(){1==v.toolbar.hide&&(1==v.toolbar.hidejustfull&&!o.fullscreen||(o.mouseHere&&!o.system.mobile||"playing"!=o.media.status()||(o.mouseHere=!0,ShowOrHide(),o.system.mobile&&setTimeout(function(){o.mouseHere=!1},500)),1==v.toolbar.hidewithoutmoving&&(ShowForce(),HideInterval()),ToolbarDown(!1)))},this.StageMouseUp=function(e,t){for(var i in b)b.hasOwnProperty(i)&&("line"!=b[i].g("action")&&"volume"!=b[i].g("action")||b[i].StageMouseUp(e,t))},this.Played=function(e,t){for(var i in b)b.hasOwnProperty(i)&&("line"==b[i].g("action")&&b[i].UpdatePlay(e,t),"time"==b[i].g("action")&&UpdateTime(b[i],e,t),1==b[i].s("rotateplaying")&&b[i].Rotate(),1==b[i].s("often")&&(!b[i].g("show")&&toolbarHidden||b[i].g("show")==HideProof(b[i])&&ShowOrHide()))},this.Loaded=function(e,t){var i=FindBut("action","line");i&&i.UpdateLoad(e,t)},this.Cut=function(e){var t;0<o.media.duration()&&((t=FindBut("action","line"))&&t.Cut(e))},this.Waiting=function(){waiting||(1==v.hidevideo?(clearTimeout(wait_to),wait_to=setTimeout(Waiting,500)):Waiting())},this.HideElement=function(e){for(var t in b)t==e&&b[t].set("hide2")},this.StopWaiting=function(e,t){var i;clearTimeout(wait_to),waiting&&(js("buffered"),(i=FindBut("action","buffer"))&&(i.BufferStop(),waiting=!1))},this.volumescroll=function(){var e=FindBut("linkurl","volume scroll");e&&(e.set("show2"),e.UpdateText(Lang("volume")+" "+(o.muted?0:Math.ceil(100*v.volume))+"%"),clearTimeout(o.volumescroll),o.volumescroll=setTimeout(Volumescrolled,1e3))},this.Seek=function(e,t){for(var i in 0<v.delete&&(e-=v.delete,t-=v.delete),b)b.hasOwnProperty(i)&&("line"==b[i].g("action")&&(0<t&&b[i].set("click",e/t),b[i].UpdatePlaySeek()),"time"==b[i].g("action")&&UpdateTime(b[i],e,t),"live"==b[i].g("action")&&(b[i].set("iconopacity",.5),b[i].set("saturate",0)))},this.Duration=function(e,t){for(var i in b)b.hasOwnProperty(i)&&("duration"==b[i].g("action")&&(0<v.delete&&(t-=v.delete),b[i].UpdateText(Time(t))),"line"==b[i].g("action")&&(b[i].UpdatePlay(e,t),b[i].PlacePoints(t)),"time"==b[i].g("action")&&UpdateTime(b[i],e,t))},this.Settings=function(){settings.g("show")?settings.hide():settings.show()},this.SettingsVisible=function(){return!!settings&&!!settings.g("show")},this.MenuProc=function(e){settings&&settings.menuproc(e)},this.SettingsClose=function(){SettingsClose()},this.SettingsTimer=function(e){settings&&settings.UpdateTimer(e)},this.SettingsSpeed=function(){settings&&settings.UpdateSpeed()},this.SettingsExist=function(e){if(settings)return settings.Exist(e)},this.Playlist=function(){playlist&&(playlist.g("show")?playlist.hide(1):playlist.show())},this.PlaylistShow=function(){playlist&&setTimeout(function(){playlist.show()},100)},this.PlaylistVisible=function(){return!!playlist&&!!playlist.g("show")},this.PlaylistG=function(e){return playlist?playlist.g(e):""},this.UpdatePlaylist=function(e){playlist&&playlist.updatePlaylist(e)},this.PreNewPl=function(e){playlist&&playlist.prenewpl(e)},this.PlaylistNext=function(){playlist&&playlist.PlaylistNext()},this.PlaylistHere=function(){playlist&&playlist.PlaylistHere()},this.PlaylistControls=function(){PlaylistControls()},this.PlaylistNextExist=function(){return!!playlist&&playlist.PlaylistNextExist()},this.PlaylistPrevExist=function(){return!!playlist&&playlist.PlaylistPrevExist()},this.PlaylistExist=function(){return!!playlist&&playlist.PlaylistExist()},this.PlaylistRewind=function(){playlist&&playlist.PlaylistRewind()},this.PlaylistPrev=function(){playlist&&playlist.PlaylistPrev()},this.PlaylistPlayId=function(e){e&&playlist&&playlist.playById(e)},this.PlaylistOpenId=function(e){e&&playlist&&playlist.openById(e)},this.PlaylistMove=function(e){e&&playlist&&(css(playlist.co(),{maxHeight:"none","padding-right":playlist.s("bgpaddingright")}),document.getElementById(e).appendChild(playlist.co()),hide2(playlist.c()))},this.ShowSettingsBut=function(){},this.QualityChanged=function(e){settings&&(settings.SetQuality(),settings.g("show")&&setTimeout(function(){settings.hide()},200))},this.QualityChangedNoHand=function(){settings&&settings.SetQuality(),o.settings2&&o.settings2.update()},this.AirplayChanged=function(e){settings&&settings.Airplay(),Resize(),ShowOrHide()},this.SettingChanged=function(e){settings&&(settings.SetSetting(e),settings.g("show")&&settings.hide()),o.settings2&&o.settings2.update(),"speed"==e&&SpeedChanged()},this.AudioTrackChangedNoHand=function(e){settings&&settings.SetSetting("audiotrack"),o.settings2&&o.settings2.update()},this.SubtitleChanged=function(){settings&&(settings.SetSubtitle(),settings.g("show")&&setTimeout(function(){settings.hide()},200)),o.settings2&&o.settings2.update(),o.casting&&o.tagvideo&&o.chromecast.Sub()},this.SubOpt=function(){o.settings2&&o.settings2.hide(),settings&&settings.SubOpt()},this.SettingsN=function(e,t,i){for(var o in b)b.hasOwnProperty(o)&&("settings"==b[o].g("action")&&1==b[o].s("hdicon")&&b[o].HdIcon(),b[o].g("action_settings")=="settings#"+e&&(b[o].set("set#visible",t),"text"==b[o].g("type")?i&&b[o].UpdateText(NoSpan(i)):("subtitle"==v.settings["settings"+e+"action"]&&(i==Lang("off")?b[o].CustomSwitch(0):b[o].CustomSwitch(1)),Resize()),ShowOrHideProcessor(b[o])))},this.UpdateSettings=function(){settings&&(settings.SetQuality(),settings.SetSetting("audiotrack"),settings.SetSetting("download"))},this.RenewPoints=function(){var e=FindBut("action","line");e&&e.RenewPoints()},this.resize=function(){Resize(),toolbarHidden&&(o.resizeonmouse=!0)},this.resizeFromText=function(e){toolbarHidden&&1!=e?v.toolbar.resizeme=!0:(Resize(),ShowOrHide())},this.refresh=function(){ShowOrHide(),Resize(),ShowOrHide(),o.nativecontrols?hide2(bg2):toolbarHidden||show2(bg2)},this.KeyDown=function(e){if(pljssglobalid==v.id&&1==v.hotkey.on){var t=e.which,i=!1;if(null==t&&(t=e.keyCode),exist(o.vast)||exist(o.pass)||1==o.stopkeys)return!1;if(o.play&&1==v.hotkey.onplay&&(i=!0),(1==v.hotkey.space&&32==t||1==v.hotkey.enter&&13==t)&&(o.focus||o.mouseHere||i))return 1==v.hotkey.icons&&PluginHotIcon("play",o.play?0:1),o.actions.Toggle(),e.preventDefault(),!1;if(v.hotkey.vol||(v.hotkey.vol=.2),v.hotkey.scale||(v.hotkey.scale=5),1==v.hotkey.nums&&(o.focus||i)&&0<o.media.duration())for(var s=48;s<58;s++)t==s&&o.actions.Seek(o.media.duration()*(t-48)*10/100,!0);39==t&&(o.focus||i)&&KeyPlusUp(v.hotkey.leftright),37==t&&(o.focus||i)&&KeyPlusDown(v.hotkey.leftright),38==t&&(o.focus||i)&&KeyPlusUp(v.hotkey.updown),40==t&&(o.focus||i)&&KeyPlusDown(v.hotkey.updown),187==t&&(o.focus||i)&&KeyPlusUp(v.hotkey.plusminus),189==t&&(o.focus||i)&&KeyPlusDown(v.hotkey.plusminus)}},this.KeyUp=function(e){if(pljssglobalid==v.id){var t=e.which;if(null==t&&(t=e.keyCode),57==t&&v.log,o.fullscreen&&27==t&&o.actions.Normalscreen(),exist(o.vast)||exist(o.pass))return!1;1==v.hotkey.f&&70==t&&1!=v.hidevideo&&(o.focus||o.mouseHere)&&(1==v.hotkey.icons&&PluginHotIcon("fullscreen",o.fullscreen?0:1),o.fullscreen?o.actions.Normalscreen():o.actions.Fullscreen()),1==v.hotkey.m&&77==t&&(o.focus||o.mouseHere)&&(1==v.hotkey.icons&&PluginHotIcon("mute",o.muted?1:0),o.muted?o.actions.Unmute():o.actions.Mute())}},this.Remove=function(){for(var e in clearInterval(o.toolbarInterval),o)0==e.indexOf("control")&&-1<e.indexOf("Interval")&&clearInterval(o[e]);for(var t=0;t<butNames.length;t++)key=butNames[t],b[key]&&b[key].Remove();settings&&settings.Remove(),playlist&&playlist.Remove(),bg.Remove(),bg2.parentNode==o.frame?o.frame.removeChild(bg2):o.toolbar&&o.toolbar.removeChild(bg2)},this.ShowForce=function(){ShowForce()},this.HideForce=function(){HideForce(),ShowOrHide()},this.HideInterval=function(){HideInterval()},this.ToolbarHidden=function(){return toolbarHidden}},Control=function(r){var i,s,n,a,l,e,c,t,d,u,h,f,p,g,m=0,y=0,b=!0,w=!1,k=1,x=1,A="",T=!1,_=!1,E=0,S=0,L=0,C=!1,O=!1,P=!1,j=!1,I=UpdateObject(I=[],default_style.but),M=[(I=UpdateObject(I,v[r])).action],B=M[0];exist(I.action2)&&(M[1]=I.action2),exist(I.opposite)&&(M[1]=I.opposite),exist(I.title)&&(I.text=I.title),exist2(I.scalesmall)&&o.small&&(I.scale=I.scalesmall),"share"==B&&(o.shareme=!0),exist(I.linkurl)&&("text"==I.type&&""!=I.linkurl&&exist(v[I.linkurl+"text"])&&(I.text=v[I.linkurl+"text"]),0==I.linkurl.indexOf("settings#")&&(A=I.linkurl,""==I.tiptext&&-1==A.indexOf(",")&&(I.tiptext=Lang(v.settings["settings"+A.substr(9)+"action"]))),-1<I.linkurl.indexOf("captions")&&(v.hlscaptions=!0),-1<I.linkurl.indexOf("share:")&&(o.shareme=!0),"countdown"==I.linkurl&&(I.counter=new PluginCountdown(I)));var D=I.tiptext?I.tiptext.split("///"):[];1==I.liketext&&(I.type="text",I.text=Ae(0)+(1<M.length?"///"+Ae(1):""),exist2(I.iconscolor)&&(I.color=I.iconscolor));var R,N=0,F=new Array,H=new Array,z=new Array,q=(new Array,0);"text"==I.type?(I.dom&&exist(v[I.dom+"text"])&&(I.text=v[I.dom+"text"]),exist(I.text)&&(F[0]=trim(I.text),I.lngth=I.text.length,-1<(V=["/","|","-"]).indexOf(I.text.substr(-1))&&(I.postsmbl=I.text.substr(-1)),-1<V.indexOf(I.text.substr(0,1))&&(I.presmbl=I.text.substr(0,1)),"time"!=B&&"duration"!=B||(0==I.text.indexOf("0:")&&(I.timeshort=!0),3==I.text.split(":").length?I.with_hours=!0:-1<I.text.indexOf("00:00")&&(I.with_min=!0),1==I.dvrtime&&(v.dvrtime=1)),1==I.inversetime&&0==I.text.indexOf("-")&&(I.minus4back=!0),0<I.text.indexOf("///")&&("custom"==B||1==I.liketext)&&(I.texts=I.text.split("///"),I.text=F[0]=I.texts[0])),1==v.fonts&&(setTimeout(xe,100),setTimeout(xe,500),setTimeout(xe,1e3))):exist(I.icon)&&(F[0]=I.icon,0<F[0].indexOf("///")&&-1==F[0].indexOf("base64")&&(F=I.icon.split("///")),exist(I.icon2)&&(F[1]=I.icon2),1==I.iconsreplay&&exist2(I.icon3)&&(F.push(I.icon3),q=F.length-1)),"custom"==B&&1==I.link2&&exist(I.linkurl2)&&(I.linkurl0=I.linkurl);var X=createElement("div");"timeline"==I.position?o.timeline.appendChild(X):((-1<I.position.indexOf("controls")&&1==v.toolbar.hide&&1==v.toolbar.hidedown?o.toolbar:o.frame).appendChild(X),"buffer"==B&&1==I.ontop2&&(X.style.zIndex=2001));var U=createElement("div");X.appendChild(U);var V,G,Y,Z,K=createElement("div");if(css(K,{position:"absolute",left:0,top:0}),X.appendChild(K),css(X,{position:"absolute",left:0,top:0,opacity:1,fontSize:"14px",lineHeight:"1em"}),exist2(I.dom)&&attr(X,{id:v.id+"_control_"+I.dom}),1==I.rotateplaying&&css(K,{transition:"transform 0.2s linear"}),0<F.length){for($=0;$<F.length;$++){H[$]=createElement("div"),css(H[$],{position:"absolute",top:0,left:0,pointerEvents:"none",opacity:I.a,transition:"opacity 0.1s linear,transform 0.1s linear"}),"pic"==I.type&&""!=I.src&&(exist2(I.dom)&&(attr(H[$],{id:v.id+"_control_"+I.dom+"_icon"}),v[I.dom+"src"]&&(I.src=v[I.dom+"src"])),(-1<I.src.indexOf(".png")||-1<I.src.indexOf(".jpg")||-1<I.src.indexOf(".gif")||-1<I.src.indexOf("base64"))&&(-1==I.src.indexOf("//")&&-1==I.src.indexOf("base64")&&(I.src="//"+I.src),Q=createElement("img"),I.loading=1,Q.addEventListener("load",ve),Q.src=I.src,H[$].appendChild(Q),I.w=H[$].offsetWidth,I.h=H[$].offsetHeight,0<I.picheight&&css(Q,{height:I.picheight}))),"text"==I.type&&(css(H[$],{color:I.color,fontSize:I.fontsize*existv(v.globalfs,1),fontFamily:checkFont(I.font),"letter-spacing":I.letterspacing+"px",padding:"0 3px 0 3px","white-space":"nowrap"}),o.small&&exist2(I.fontsizesmall)&&css(H[$],{fontSize:I.fontsizesmall*existv(v.globalfs,1)}),1==I.click&&(-1<I.text.indexOf("<a ")||"control_title"==r)&&css(H[$],{pointerEvents:"auto"}),1==I.bold&&css(H[$],{"font-weight":"bold"}),"live"==F[$]&&(F[$]=Lang("live")),H[$].innerHTML=_e(F[$]),setTimeout(pe,100),I.w=H[$].offsetWidth,I.h=H[$].offsetHeight,exist2(I.dom)&&attr(H[$],{id:v.id+"_control_"+I.dom+"_text"})),"css"==I.type&&controlCSS(F[$],I.color,H[$]);var W=F[$].toString();0==W.indexOf("var:")&&(W=existv(window[W.substr(4)],""));var Q=-1<W.indexOf("<svg")||-1<W.indexOf("<SVG");"svg"==I.type&&(-1<W.indexOf("<g>")||Q)&&("mute"!=B&&"custom"!=B||(W=W.replace(/pjs_/g,"pjs_"+v.id+r)),-1<W.indexOf("pointer")&&ie(H[$]),H[$].innerHTML=(Q?"":"<svg width='20' height='20' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg'>")+W+(Q?"":"</svg>"),20<H[$].offsetWidth&&(I.w=H[$].offsetWidth),20<H[$].offsetHeight&&(I.h=H[$].offsetHeight),css(H[$],{width:I.w,height:I.h}),-1!=I.iconscolor&&Ee(H,I.iconscolor),exist2(I.dom)&&attr(H[$],{id:v.id+"_control_"+I.dom+"_icon"+$})),K.appendChild(H[$]),0<$&&hide(H[$])}re(),g&&ve(),"chromecast"==I.linkurl?(I.chromecast=1,I.hide=1,o.chromecast&&(H[0].innerHTML=o.chromecast.button(-1!=I.iconscolor?I.iconscolor:"#ffffff")),o.system.mobile?(H[0].ontouchstart=se,H[0].ontouchend=le,H[0].ontouchmove=oe):(H[0].onmouseover=ae,H[0].onmouseout=le,H[0].onmousemove=ge)):(n.offsetWidth*I.scale<35||n.offsetHeight*I.scale<35)&&"text"!=I.type?(te(),ie(a)):ie(n),"custom"==B&&(1==I.link&&exist(I.linkurl)&&(0==(J=I.linkurl).indexOf("api:")&&(2!=(ee=J.substr(4).split(",")).length||2==(V=ee[1].split("/")).length&&("hd"==ee[0]&&(ee[0]="default_quality"),v[ee[0]]==V[1]&&(I.a=1,css(H[0],{opacity:I.a})))),"unblock"!=J&&"block"!=J||(o.actions.Curtain(),X.style.zIndex=2001,o.stopkeys=1)),(1!=I.hide||1!=I.hideafter&&1!=I.hidebefore)&&"skip"!=J||(I.often=1)),"settings"==B&&1==I.hdicon&&(p=new PluginHdIcon(X,n,I)),0==I.click&&Pnt0(X),1==I.loading&&hide(n),1==I.tip&&(l=createElement("div"),css(l,{position:"absolute",left:0,top:0,height:"auto",opacity:0,transition:"opacity 0.1s linear"}),e=createElement("div"),I=MarginPadding(I,"tippadding","tippadding"),I=MarginPadding(I,"tipmargin","tipmargin"),css(e,{position:"absolute",left:0,top:0,width:"100%",height:30,"background-color":I.tipbgcolor,opacity:I.tipbga,"border-radius":I.tipbgrounding}),c=createElement("div"),css(c,{position:"absolute",left:I.tippaddingleft,top:I.tippaddingtop,color:I.tipcolor,"font-family":checkFont(I.tipfont),"font-size":I.tipfontsize*existv(v.globalfs,1),"letter-spacing":I.tipletterspacing+"px","line-height":"1"}),!I.tiptext||0==I.tiptext.indexOf("var:")&&(I.tipvar=!0),I.tipvar||css(c,{"white-space":"nowrap"}),1==I.tippointer&&((t=createElement("div")).innerHTML='<svg width="8px" height="6px" viewBox="0 0 8 6" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><polygon id="Rectangle" stroke="none" fill="#'+I.tipbgcolor.replace("#","")+'" fill-rule="evenodd" points="0 0 8 0 4 6"></polygon></svg>'),1==I.tipalways?(css(l,{opacity:1}),ie(l)):Pnt0(l),X.appendChild(l),c.innerHTML=o.ni+(""==I.tiptext?Lang(B):D[0])+o.ni2,l.appendChild(e),l.appendChild(c),1==I.tippointer&&(l.appendChild(t),G=o.doctype?"-8px":"-6px",Y=I.tippointeralign,exist(Y)||(Y=""),(Z=-1<Y.indexOf("top"))&&we(t,"-180"),css(t,{position:"absolute",right:-1<Y.indexOf("right")?10*I.scale:"auto",left:-1<Y.indexOf("left")?10*I.scale:""==Y||"top"==Y?"50%":"auto","margin-left":""==Y||"top"==Y?"-4px":0,bottom:Z?"auto":G,top:Z?G:"auto",opacity:I.tipbga})),ye()),-1<I.position.indexOf("right")&&(S=1),I.position.indexOf("top"),(-1<I.position.indexOf("bottom")||-1<I.position.indexOf("control"))&&(L=1),ne();var J="";0!=I.rotation&&(J+="rotate("+I.rotation+"deg)"),1==I.flipx&&(J+=" scaleX(-1)"),1==I.flipy&&(J+=" scaleY(-1)"),""!=J&&css(K,{transform:J}),"buffer"==B&&Te();var $,ee=[];if("playlist"==B)for(ee=["autoplaylist","openplaylistafter","openplaylistbefore","openplaylistpause","openplaylistroot","playlistrewind"],$=0;$<ee.length;$++)exist(I[ee[$]])&&!exist(v.playlist[ee[$]])&&(v.playlist[ee[$]]=I[ee[$]]);if("title"==B)for(ee=["showtitleplaylist","addtitleplaylist","addtitleplaylistbr"],$=0;$<ee.length;$++)exist(I[ee[$]])&&!exist(options[ee[$]])&&(v[ee[$]]=I[ee[$]]);1==I.tipalways&&ye(),"custom"==B&&0==I.on&&hide2(X),1==I.hide&&0<I.hideuntilto&&setTimeout(function(){I.hideuntilto=-1,o.controls.refresh()},1e3*I.hideuntilto)}function te(){a&&a.parentNode.removeChild(a),a=createElement("div"),css(a,{position:"absolute",top:0,left:0,width:"pic"==I.type?n.offsetWidth:(35<n.offsetWidth?n.offsetWidth:35)*I.clickscalex,height:"pic"==I.type?n.offsetHeight:(35<n.offsetHeight?n.offsetHeight:35)*I.clickscaley}),I=MarginPadding(I,"clickmargin","clickmargin"),X.appendChild(a)}function ie(e){0==B.indexOf("time")&&1==M.length&&(I.click=0),"custom"==B&&0==I.link&&(I.click=0),1==I.click?(1==I.hand&&css(e,{cursor:"pointer"}),css(e,{pointerEvents:"auto"}),o.system.mobile?(e.addEventListener("touchmove",function(e){oe(e)}),e.addEventListener("touchstart",function(e){se(e)}),e.addEventListener("touchend",function(e){(e=e).stopPropagation(),e.preventDefault(),1==I.mobileover&&le(),_||de(e),_=!1})):e.onclick=de,1!=v.toolbar.clickarea&&1!=I.clickarea||css(e,{"background-color":"#ff0000",opacity:.5})):css(e,{cursor:"default"}),o.system.mobile||(e.onmouseover=ae,e.onmouseout=le),1!=I.hidden&&1!=I.tip||(e.onmousemove=ge)}function oe(e){js("touch_"+r),e.stopPropagation(),_=!0}function se(e){1==I.mobileover&&ae(),e.stopPropagation()}function re(){if(n&&n.parentNode.removeChild(n),n=createElement("div"),css(n,{position:"absolute",top:0,left:0}),exist2(I.dom)&&attr(n,{id:v.id+"_control_"+I.dom+"_bg"}),i=I.w,s=I.h,I=MarginPadding(I,"margin","margin"),I=MarginPadding(I,"marginproc","marginproc"),"text"==I.type&&(i=H[N].offsetWidth,s=H[N].offsetHeight,0<I.minw&&i<I.minw&&(i=I.minw)),I=MarginPadding(I,"bgpadding","bgpadding"),I=MarginPadding(I,"iconmargin","iconmargin"),o.system.safari&&(I.iconmarginleft/=I.scale,I.iconmarginright/=I.scale,I.iconmargintop/=I.scale,I.iconmarginbottom/=I.scale),exist2(I.dom)&&exist(v.custom)&&"custom"==I.action&&"object"==typeof v.custom)for(var e,t=0;t<Object.keys(v.custom).length;t++)v.custom[t][I.dom]&&("off"==v.custom[t][I.dom]?I.on=0:"margin-left"==(e=v.custom[t][I.dom].split(":"))[0]&&(0<e[1].indexOf("%")?I.marginprocleft=parseInt(e[1]):I.marginleft=parseInt(e[1])));I.h=s,I.w=i,1==I.bg?(s=s+I.bgpaddingtop+I.bgpaddingbottom,i=i+I.bgpaddingleft+I.bgpaddingright,I.h=s,I.w=i,"text"==I.type&&(I.bgh=H[0].offsetHeight)):I.bga=0,css(n,{width:1==I.bgstretch?5e3:i,height:s,borderRadius:I.bgo*s/2,background:I.bgcolor,opacity:I.bga,transition:"opacity .1s linear, background .1s linear, transform .1s linear"}),"pic"==I.type&&css(n,{width:i,height:s,borderRadius:I.bgo*s/I.scale/2}),1==I.bglines&&Bglines(n,I.bgcolor,I.bgline1,I.bgline2),1==I.bgborder&&css(n,{border:"1px solid "+I.bgbordercolor}),U.appendChild(n)}function ne(){var e,t;for(css(n,{top:-n.offsetHeight/2,left:-n.offsetWidth/2}),a&&(e="pic"==I.type||35<n.offsetWidth?n.offsetWidth:35,t="pic"==I.type||35<n.offsetHeight?n.offsetHeight:35,css(a,{top:-t/2+I.clickmargintop-I.clickmarginbottom,left:-e/2+I.clickmarginleft-I.clickmarginright})),$=0;$<F.length;$++)"svg"==I.type?css(H[$],{top:-Math.round(parseInt(H[$].style.height))/2,left:-parseInt(H[$].style.width)/2}):css(H[$],{top:-Math.round(H[$].offsetHeight)/2,left:-H[$].offsetWidth/2}),n&&css(H[$],{top:int(H[$].style.top)+I.bgpaddingtop/2-I.bgpaddingbottom/2+I.iconmargintop/2+I.iconmarginbottom/2,left:int(H[$].style.left)+I.bgpaddingleft/2-I.bgpaddingright/2+I.iconmarginleft/2+I.iconmarginright/2})}function ae(){var e,t;if(T=!0,1==I.iconsover&&(e=h&&exist(I.icon2)?1:0,R&&2<z.length&&(e=2),z[e]&&(fe(),show(H[z[e]]))),1==I.bg&&(-1!=I.bgaover&&css(n,{opacity:I.bgaover}),-1!=I.bgcolorover&&css(n,{background:I.bgcolorover})),-1<I.aover&&!w)for(e=0;e<F.length;e++)"hidden"!=H[e].style.visibility&&css(H[e],{opacity:I.aover});-1!=I.iconscolorover&&Ee(H,I.iconscolorover),1==I.rotateonhover&&(E+=45,we(H[0],E)),I.scaleover>I.scale&&-1<I.scaleover&&me(I.scaleover),"settings"==B&&o.controls.SettingsVisible()||1==I.tip&&1!=I.tipalways&&((t=1<D.length&&!h?D[1]:D[0])&&0==t.indexOf("var:")&&(c.innerHTML=window[t.substr(4)],ye()),show(l),css(l,{opacity:1})),"mute"==B&&(o.actions.volumewheel(!0),o.volumewheel=!0),o.controlover=!0,o.controls.Mouse(r,"over")}function le(){var e;if(T=!1,1==I.iconsover&&(e=h&&exist(I.icon2)?1:0,R&&2<z.length&&(e=2),fe(),show(H[e])),1==I.bg&&(-1!=I.bgaover&&css(n,{opacity:I.bga}),-1!=I.bgcolorover&&css(n,{background:I.bgcolor})),-1<I.aover)for(e=0;e<F.length;e++)"hidden"!=H[e].style.visibility&&css(H[e],{opacity:I.a});-1<I.scaleover&&me(I.scale),-1!=I.iconscolorover&&Ee(H,-1==I.iconscolor?"#ffffff":I.iconscolor),"mute"!=B||o.fullscreen||(o.actions.volumewheel(!1),o.volumewheel=!1),ce(),o.controlover=!1,o.controls&&o.controls.Mouse(r,"out")}function ce(){1==I.tip&&1!=I.tipalways&&(hide(l),css(l,{opacity:0}))}function de(e){e&&(e.cancelBubble=!0),C||(o.controls.ControlClick(r),"custom"==B&&ue(),ce(),1==I.rotateonclick&&(E+=45,we(H[0],E)),P=!0,(1==I.hideafterclick||"control_start"==r&&1==I.hide&&1==I.hideonplay)&&o.controls.refresh())}function ue(){F&&(1<F.length&&(1==h?(show(H[0]),hide(H[1])):(show(H[1]),hide(H[0]))),1==I.tip&&1<D.length&&(c.innerHTML=o.ni+(1==h?D[0]:D[1])+o.ni2,ye())),exist(I.linkurl0)&&(I.linkurl=1==h?I.linkurl0:I.linkurl2),he(),h=1!=h,I.linkurl&&-1<I.linkurl.indexOf(",0/1")&&js(I.linkurl,h?1:0),1==I.bg&&exist(I.bgcolorlink2)&&-1!=I.bgcolorlink2&&(h?(I.bgcolorlink0=I.bgcolor,I.bgcolor=I.bgcolorlink2):I.bgcolor=I.bgcolorlink0,re(),ie(n),ne(),"text"==I.type?xe():me(I.scale))}function he(){exist(I.texts)&&1<I.texts.length&&ke(1==h?I.texts[0]:I.texts[1])}function fe(){for(var e=0;e<F.length;e++)"hidden"!=H[e].style.visibility&&(css(H[e],{opacity:I.a}),hide(H[e]))}function pe(e){H[0]&&H[0].offsetWidth>o.screen_w-I.marginleft-I.marginright-I.bgpaddingleft-I.bgpaddingright&&(1==I.marquee?(e=e||H[0].innerHTML,H[0].innerHTML="<marquee>"+e+"</marquee>"):css(H[0],{"white-space":"normal"}),css(H[0],{width:o.screen_w-I.marginleft-I.marginright-I.bgpaddingleft-I.bgpaddingright}))}function ve(){n?(g=!1,I.loading=0,hide(n),H[0]&&(I.w=H[0].offsetWidth*I.scale,I.h=H[0].offsetHeight*I.scale,me(I.scale)),I.loaded=0,re(),te(),ie(a),show(n),ne(),o.controls.resize(),isVisible(X)||hide2(X)):g=!0}function ge(){o.system.mobile||o.controlover||ae(),ye()}function me(e){if(0<e){for(o.system.safari&&1!=I.tipalways?css(n,{zoom:e+""}):css(n,{transform:"scale("+e+")"}),$=0;$<F.length;$++)o.system.safari&&1!=I.tipalways?(css(H[$],{zoom:e+""}),O=!0):css(H[$],{transform:"scale("+e+")"});x=k=e}}function ye(){1==I.tip&&(css(l,{top:(1==L?-s-l.offsetHeight+3:-l.offsetHeight/2)+I.tipmargintop-I.tipmarginbottom,left:(1==S?-c.offsetWidth:1==L?-i/2:+c.offsetWidth)-(1==L?0:c.offsetWidth/2+5)+I.tipmarginleft-I.tipmarginright,height:I.tippaddingtop+c.offsetHeight+I.tippaddingbottom,width:I.tippaddingleft+c.offsetWidth+I.tippaddingright}),css(e,{height:l.offsetHeight}),l.style.zIndex="1000")}function be(){C=!1}function we(e,t){css(e,{transform:"rotate("+t+"deg)"+(e!=H[0]||O||1==k?"":" scale("+k+")")})}function ke(e){var t,i;"text"==I.type&&(exist(e)&&(I.with_hours&&(4==e.length&&(e=(I.timeshort?"0:0":"00:0")+e),5==e.length&&(e=(I.timeshort?"0:":"00:")+e),7==e.length&&(e=(I.timeshort?"":"0")+e)),I.with_min&&4==e.length&&(e="0"+e),I.lngth=e.length),e=(I.presmbl?I.presmbl+(I.minus4back?"":" "):"")+e+(I.postsmbl?" "+I.postsmbl:""),t=H[0].offsetWidth+(1==I.bg?I.bgpaddingtop+I.bgpaddingbottom:0),i=H[0].offsetHeight+(1==I.bg?I.bgpaddingtop+I.bgpaddingbottom:0),H[0].innerHTML=o.ni+("custom"==B?_e(e):e)+o.ni2,1==I.triangle&&(H[0].innerHTML+='<span style="display:inline-block;width:10px"></span><span style="border-top: 3px solid #fff;border-left: 3px solid transparent;border-right: 3px solid transparent;position: absolute;right:3px;top: 50%;margin-top: -1px;"></span>'),"title"==B&&(css(H[0],{width:"auto","white-space":"nowrap"}),pe(e)),I.w=H[0].offsetWidth+(1==I.bg?I.bgpaddingtop+I.bgpaddingbottom:0),I.h=H[0].offsetHeight+(1==I.bg?I.bgpaddingtop+I.bgpaddingbottom:0),(t!=I.w||i!=I.h||0<I.w&&0==m)&&xe(),0<H[0].offsetWidth?m=I.w:(""!=A&&hide(H[0]),""!=e&&setTimeout(xe,10)))}function xe(){"text"==I.type&&H[0]&&0<H[0].offsetWidth&&(""!=A&&show(H[0]),i=I.w=H[0].offsetWidth,s=I.h=H[0].offsetHeight,re(),ie(n),ne(),o.controls&&o.controls.resizeFromText())}function Ae(e){return o.ni+(""==I.tiptext?Lang(M[e]):1<D.length?D[e]:D[0])+o.ni2}function Te(){hide2(X);for(var e=X.getElementsByTagName("*"),t=e.length;t--;)css(e[t],{"animation-play-state":"paused"});b=!1}function _e(e){var t,i=e+"";return-1<e.indexOf("{time}")&&exist(o.continue)&&(e=e.replace("{time}",timeFormat(o.continue.flag().t))),-1<e.indexOf("{title")&&(t=o.titlestore||v.title||"",-1<e.indexOf("{title2}")&&o.controls&&(e=e.replace("{title2}",o.controls.PlaylistG("title2"))),o.butplstart&&o.controls&&(t=o.controls.PlaylistG("butplstart")),e=e.replace("{title}",t),o.butplstart&&!o.controls&&setTimeout(ke,100,i)),e}function Ee(e,t){for(var i=0;i<e.length;i++)SvgColor(e[i],t);"chromecast"==I.linkurl&&o.chromecast&&o.chromecast.Color(e[0],t)}this.Click=function(){de()},this.c=function(){return X},this.s=function(e){return I[e]},this.ss=function(e,t){return!!exist(I[e])&&I[e][t]},this.g=function(e){switch(e){case"width":return i;case"height":return s;case"x":return int(X.style.left);case"y":return int(X.style.top);case"opacity":return X.style.opacity||1;case"show":return b;case"scaleX":return k;case"scaleY":return x;case"action":return B;case"action_settings":return A;case"clicked":return P;case"type":return I.type;case"length":return I.lngth||0;case"key":return r;case"x0":return d;case"y0":return u;case"over":return T;case"settings#":return 0==A.indexOf("settings#");case"settings:":return 0==A.indexOf("settings:");case"set#visible":return j;default:return!1}},this.set=function(e,t){switch(e){case"show":T&&le(),b=t;break;case"display":(i=t)&&o.system.mobile&&(C=!0,setTimeout(be,300)),i||1==I.iconsreplay&&R&&(hide(H[q]),show(H[0]),R=!1),1==I.loading?(i?show:hide)(X):("control_time"==r||"control_duration"==r?(i?show:hide)(X):css(X,{display:i?"block":"none"}),(b=i)&&show(X)),!void(i&&I.resizetxt&&(I.resizetxt=!1,setTimeout(xe,100)));break;case"show2":show2(X);break;case"hide2":hide2(X);break;case"unhidden":I.hidden=0;break;case"hidetime":0<I.hidesec&&1!=I.hidden&&!f&&(clearTimeout(f),f=setTimeout(function(){hide2(X),I.hidden=1,f=void 0},1e3*I.hidesec));break;case"scale":me(t);break;case"scale0":css(X,{transform:"scale(0)"});break;case"scaleX":css(X,{transform:"scaleX("+t+")"}),k=t;break;case"scaleY":css(X,{transform:"scaleY("+t+")"}),x=t;break;case"opacity":css(X,{opacity:t});break;case"iconopacity":css(H[0],{opacity:t});break;case"saturate":css(H[0],{filter:"saturate("+t+")"});break;case"left":css(X,{left:t});break;case"top":css(X,{top:t});break;case"width":css(X,{width:t});break;case"height":css(X,{height:t});break;case"over_final":I.over_final=t;break;case"rightside":S=t;break;case"set#visible":j=t;break;case"x":css(X,{left:t});break;case"y":css(X,{top:t});break;case"animation":I.animation=t;break;case"skip":I.skip=t;break;case"x0":d=t;break;case"y0":u=t;break;default:return!1}var i},this.UpdateText=function(e){""==A||"x"!=I.text&&"1x"!=I.text||(e+="x"),ke(e),isVisible(X)||(I.resizetxt=!0)},this.CustomText=function(e){I.customtext=e,ke(e),o.controls.resize()},this.Rotate=function(){we(K,y),y+=20},this.RenewFromTitle=function(e){-1<I.text.indexOf("{title")&&ke(I.text)},this.CustomToogle=function(){ue()},this.ResizeText=function(){xe()},this.UpdateVolume=function(e){if(1==I.displayvolume){var t=4;if("control_mute"==r){if(o.system.mobile)return}else t=8;for(var i=[],s=1;s<t;s++)i[s]=document.getElementById("pjs_".concat(v.id,r,"volume_element",s));if(i[1]){for(s=1;s<t;s++)i[s]&&hide(i[s]);if(4==t)for(s=1;s<t;s++)s/t<e&&i[s]&&show(i[s]);else for(s=t;0<s;s--)if(s/t<=+e+1/t&&i[s]){show(i[s]);break}}}},this.On=function(){h||(F&&1<F.length&&1<M.length&&(hide(H[0]),show(H[1])),1<M.length&&(B=M[1],1==I.tip&&(c.innerHTML=Ae(1),ye())),1==I.iconsreplay&&R&&(hide(H[q]),R=!1),he(),h=!0)},this.CustomSwitch=function(e){var t;t=e,(e=document.getElementById("pjs_".concat(v.id,r,"slider")))?(css(e,{transition:"transform 0.1s ease-out"}),e.style.transform=1==t?"translate(0, 0)":"translate(-7px, 0)"):I.a=1==t?1:.5,h=1==t,1==I.tip&&1<D.length&&(c.innerHTML=h?D[0]:D[1]),css(H[0],{opacity:I.a})},this.Off=function(){h&&(F&&1<F.length&&1<M.length&&(show(H[0]),hide(H[1])),B=M[0],1<M.length&&1==I.tip&&(c.innerHTML=Ae(0),ye()),he(),R=h=!1)},this.ReplayIcon=function(){1==I.iconsreplay&&(fe(),show(H[q]),R=!0)},this.Buffer=function(){var e=!1;if(1==I.hide&&1==I.hidewithposter&&isVisible(o.poster)&&(e=!0),!e){show2(X);for(var t=X.getElementsByTagName("*"),i=t.length;i--;)css(t[i],{"animation-play-state":"running"});b=!0}},this.BufferStop=function(){Te()},this.Remove=function(){if(0<F.length)for($=0;$<F.length;$++)H[$].parentNode==X&&X.removeChild(H[$]),H[$]=null;n&&(n.removeAttribute("onclick"),n.removeAttribute("onmouseover"),n.removeAttribute("onmouseout"),n.parentNode.removeChild(n),n=null),"timeline"==I.position?o.timeline.removeChild(X):X.parentNode==o.frame?o.frame.removeChild(X):o.toolbar&&X.parentNode==o.toolbar&&o.toolbar.removeChild(X),l&&X.removeChild(l),X=null},this.HdIcon=function(){p&&p.toggle()}},ControlLine=function(i,s){var e,n,r,a,l,c,t,d,u,h,f,p,g,m,y,b=[],w=!0,k=1,x=1,A=0,T=0;for(e in o.current_thumb=-1,default_style.but)b[e]=default_style.but[e];s=v[i].action,v[i].type;for(e in default_style[s])b[e]=default_style[s][e];for(e in v[i])b[e]=v[i][e];b.w=parseInt(b.w),b.h=parseInt(b.h),b=MarginPadding(b,"margin","margin"),b=MarginPadding(b,"marginproc","marginproc");var _=createElement("div");(1==v.toolbar.hidedown&&1==v.toolbar.hide?o.toolbar:o.frame).appendChild(_),"line"==s&&(o.timeline=_);var E=!1;b.customline&&"volume"!=b.customline&&(E=!0),css(_,{position:"absolute",top:0,left:0,opacity:1,fontSize:"14px",lineHeight:"1em"}),1==b.ontop&&(_.style.zIndex=b.order),function(){r=createElement("div");var e=(b=MarginPadding(b,"bgpadding","bgpadding")).h+b.bgpaddingtop+b.bgpaddingbottom,t=b.w+b.bgpaddingleft+b.bgpaddingright;1==b.bg||(b.bga=0),b=MarginPadding(b,"clickmargin","clickmargin"),1!=v.toolbar.clickarea&&1!=b.clickarea||(b.bgcolor="#ff0000",b.bg=1,b.bga=.5),css(r,{position:"absolute",top:0,left:0,width:t,height:e*b.clickscaley,borderRadius:b.bgo*e/2,backgroundColor:b.bgcolor,opacity:b.bga,pointerEvents:"auto",transition:"opacity .1s linear, background .1s linear"}),1==b.bgborder&&css(r,{border:"1px solid #"+b.bgbordercolor}),1==b.click?(1==b.hand&&css(r,{cursor:"pointer"}),o.system.mobile||(r.onclick=Z,r.onmouseup=K,r.onmousedown=W,r.onmousemove=$)):css(r,{cursor:"default"}),o.system.mobile||(r.onmouseover=V,r.onmousemove=$,r.onmouseout=Y),o.system.mobile&&(r.addEventListener("touchstart",function(e){e.cancelBubble=!0,!exist(e.clientX)&&0<e.touches.length&&(e.clientX=e.touches[0].pageX,e.clientY=e.touches[0].pageY),V(g=e),W(e)}),r.addEventListener("touchend",function(e){e.cancelBubble=!0,Y(),K(g)}),r.addEventListener("click",function(e){e.cancelBubble=!0}),r.addEventListener("touchmove",function(e){!exist(e.clientX)&&0<e.touches.length&&(e.clientX=e.touches[0].pageX,e.clientY=e.touches[0].pageY),$(g=e)})),css(r,{left:Math.ceil(-b.w/2-b.bgpaddingleft)}),css(r,{top:Math.ceil(-b.h/2-b.bgpaddingtop+b.clickmargintop-b.clickmarginbottom)}),_.appendChild(r)}();var S=createElement("div");css(S,{position:"absolute",bottom:Math.round(-b.h/2),left:Math.round(-b.w/2)}),1==b.roundout&&css(S,{"border-radius":b.rounding*b.h/2,height:b.h,overflow:"hidden","pointer-events":"none"}),exist2(b.dom)&&attr(_,{id:v.id+"_control_"+b.dom}),_.appendChild(S),"line"==s&&1==v.thumbs&&(o.thumb=createElement("div"),css(o.thumb,{position:"absolute",left:0,top:0,width:v.thumb_width,height:v.thumb_height,overflow:"hidden","pointer-events":"none","background-color":"#000","border-radius":v.thumb_radius+"px",display:"none"}),o.thumb.id="pjs_thumbnail_"+v.id,1==v.thumb_border&&css(o.thumb,{border:v.thumb_borderwidth+"px solid "+SettingsParser("color",v.thumb_bordercolor)}),1==v.thumb_shadow&&css(o.thumb,{"box-shadow":"0px 1px 5px rgba(0,0,0,0.5)"}),o.thumb.style.zIndex="999",_.appendChild(o.thumb)),1==b.tip&&(h=createElement("div"),css(h,{position:"absolute",left:0,top:0,height:"auto","pointer-events":"none",opacity:0,transition:"opacity 0.1s linear"}),b=MarginPadding(b,"tippadding","tippadding"),f=createElement("div"),css(f,{position:"absolute","padding-left":b.tippaddingleft,"padding-right":b.tippaddingright,"padding-top":b.tippaddingtop,"padding-bottom":b.tippaddingbottom-1,"text-align":"center",color:b.tipcolor,"font-family":checkFont(b.tipfont),"font-size":b.tipfontsize*existv(v.globalfs,1),"letter-spacing":b.tipletterspacing+"px","line-height":"1","background-color":hex2rgb(b.tipbgcolor,b.tipbga),"border-radius":b.tipbgrounding}),b.linetippointer&&(b.tippointer=b.linetippointer),1==b.tippointer&&((p=createElement("div")).innerHTML='<svg width="8px" height="6px" viewBox="0 0 8 6" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><polygon id="Rectangle" stroke="none" fill="'+CheckColor(b.tipbgcolor)+'" fill-rule="evenodd" points="0 0 8 0 4 6"></polygon></svg>'),_.appendChild(h),h.appendChild(f),1==b.tippointer&&(h.appendChild(p),css(p,{opacity:b.tipbga})),h.style.zIndex="1000");var L=createElement("div");if(z(0,L,0,1==b.gradient?"linear-gradient(#"+b.gradientcolorbg+", #"+b.colorbg+")":b.colorbg,b.w,b.abg),1==b.customdesign&&exist(b.customdesignsvg)){var C=createElement("div");C.innerHTML=b.customdesignsvg.replace(/\#FFFFFF/g,"#"+b.colorbg),L.appendChild(C),css(C,{position:"absolute",bottom:-Math.round(b.h/2),left:0,"pointer-events":"none"}),css(L,{overflow:"hidden",background:"none"});for(var O=["path","polygon","polyline","rect","ellipse"],P=0;P<O.length;P++)if(0<(H=C.querySelectorAll("svg "+O[P])).length)for(var j=0;j<H.length;j++)H[j].style.fill=b.colorbg}S.appendChild(L);var I,M=createElement("div");z(1,M,b.linespeed1,1==b.gradient?"linear-gradient(#"+b.gradientcolorload+", #"+b.colorload+")":b.colorload,0,b.aload),S.appendChild(M),0<b.aover&&(z(2,I=createElement("div"),b.linespeed2,b.colorover,0,b.aover),S.appendChild(I));var B,D,R,N,F=createElement("div");if(z(3,F,b.linespeed3,1==b.gradient?"linear-gradient(#"+b.gradientcolor+", #"+b.color+")":b.color,0,b.a),1==b.customdesign&&exist(b.customdesignsvg)&&((B=createElement("div")).innerHTML=b.customdesignsvg.replace(/\#FFFFFF/g,"#"+b.color),css(B,{position:"absolute",bottom:-Math.round(b.h/2),left:0,"pointer-events":"none"}),css(F,{overflow:"hidden",background:"none"}),F.appendChild(B)),1==b.value&&(D=createElement("div"),b=MarginPadding(b,"valuepadding","valuepadding"),b=MarginPadding(b,"valuemargin","valuemargin"),css(D,{position:"absolute",bottom:b.h/2,left:0,"pointer-events":"none","font-size":b.valuesize*existv(v.globalfs,1),color:b.valuecolor,"line-height":"100%","padding-top":b.valuepaddingtop,"padding-bottom":b.valuepaddingbottom,"padding-left":b.valuepaddingleft,"padding-right":b.valuepaddingright,"margin-top":b.valuemargintop,"margin-bottom":b.valuemarginbottom,"margin-left":b.valuemarginleft,"margin-right":b.valuemarginright,"border-radius":b.valuerounding+"px",display:"none"}),1==b.valuebg&&css(D,{background:"#"+b.valuebgcolor}),F.appendChild(D),R=!1),o.timeline_h=b.h,S.appendChild(F),1==b.pointed&&("undefined"!=typeof PluginPoints&&(N=new PluginPoints(_,[],n,b))),1==b.handle){if(-1==b.handleicon.toString().indexOf("<svg")&&""==b.handleicon&&(b.handleicon="<svg width='20' height='20'><g><ellipse ry='5' rx='5' cy='10' cx='10' fill='#fff'/></g></svg>"),(u=createElement("div")).innerHTML=b.handleicon.toString(),b=MarginPadding(b,"handlemargin","handlemargin"),css(u,{position:"absolute",top:-10+b.handlemargintop-b.handlemarginbottom,left:-1e3,"pointer-events":"none",height:20,width:b.handle_width,opacity:b.handlea,transition:"transform 0.1s linear, opacity 0.1s linear"}),1==b.handlehide||1==b.handlehideinit?css(u,{transform:"scale(0)"}):1!=b.handlescale&&css(u,{transform:"scale("+b.handlescale+")"}),_.appendChild(u),-1!=b.handlecolor)for(var H,O=["path","rect","ellipse"],P=0;P<O.length;P++)if(0<(H=u.querySelectorAll("svg "+O[P])).length)for(j=0;j<H.length;j++)H[j].style.fill="#"+b.handlecolor;b.handlewidth=u.offsetWidth}function z(e,t,i,o,s,r){css(t,{position:"absolute",bottom:0,left:0,width:s,height:0<b["h"+e]?b["h"+e]:b.h,background:o?-1<o.indexOf("linear")?o:"#"+o:"","border-radius":1==b.roundout?1:b.rounding*b.h/2,opacity:r,"pointer-events":"none",transition:"transform 0.2s ease-in-out"})}function q(e){var t;e!=n&&(n=e,t=(o.timeline_w=n)/L.offsetWidth,css(r,{width:n+b.bgpaddingleft+b.bgpaddingright,left:-n/2-b.bgpaddingleft}),css(S,{left:-n/2}),css(L,{width:n}),css(S,{width:n}),(e=M.offsetWidth*t)>L.offsetWidth&&(e=L.offsetWidth),css(M,{width:e}),t=F.offsetWidth*t,css(F,{width:t}),X(t),"line"==s&&(!o.continue||1!=v.timestore||o.start||(t=o.continue.flag()).t&&t.d&&oe(t.t,t.d)),1==b.pointed&&N&&N.place(n),o.cut&&o.cut.Resize())}function X(e){1==b.handle&&(e<b.handlewidth/2&&20!=b.handle_width&&(e=b.handlewidth/2),e>n-b.handlewidth/2&&20!=b.handle_width&&(e=n-b.handlewidth/2),e=e-n/2-b.handlewidth/2+b.handlemarginleft-b.handlemarginright,css(u,{left:e}))}function U(){css(u,{transform:"scale("+b.handlescale+")"})}function V(e){o.controls.Mouse(i,"over"),1==b.bg&&(-1!=b.bgaover&&new Motion({mc:r,type:"alpha_div",to:b.bgaover,time:.1,me:i+"bg"}),exist2(b.bgcolorover)&&css(r,{"background-color":b.bgcolorover})),exist2(b.coloroverplay)&&css(F,{"background-color":b.coloroverplay}),1==b.handle&&(1==b.handleiconsover&&exist(b.handleiconover)&&(1==b.handleiconspress&&c||(u.innerHTML="<svg width='"+b.handle_width+"' height='20' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg'>"+b.handleiconover.toString()+"</svg>")),1==b.handlehide?1==b.handlehideinit&&!o.start||U():-1!=b.handleaover&&new Motion({mc:u,type:"alpha_div",to:b.handleaover,time:.1,me:i+"handle"})),1==b.tip&&(0<o.media.duration()||"volume"==s||E)&&te(),0<b.expand&&(css(r,{transform:"scaleY("+((b.expand-1)/5+1)+")"}),G(b.expand)),1==b.handle&&1==b.handlemove&&X(e.clientX-T),"volume"==s&&(o.actions.volumewheel(!0),o.volumewheel=!0),m=!0,o.controlover=!0}function G(e){css(L,{transform:"scaleY("+e+")"}),css(M,{transform:"scaleY("+e+")"}),I&&css(I,{transform:"scaleY("+e+")"}),css(F,{transform:"scaleY("+e+")"})}function Y(){t||(0<b.aover&&css(I,{width:0}),exist2(b.coloroverplay)&&css(F,{"background-color":b.color}),1==b.bg&&(-1!=b.bgaover&&new Motion({mc:r,type:"alpha_div",to:b.bga,time:.1,me:i+"bg"}),exist2(b.bgcolorover)&&css(r,{"background-color":b.bgcolor})),1==b.handle&&(1==b.handleiconsover&&exist(b.handleiconover)&&(1==b.handleiconspress&&c||(u.innerHTML="<svg width='"+b.handle_width+"' height='20' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg'>"+b.handleicon.toString()+"</svg>")),1==b.handlehide?css(u,{transform:"scale(0)"}):-1!=b.handleaover&&new Motion({mc:u,type:"alpha_div",to:b.handlea,time:.1,me:i+"handle"})),0<b.expand&&(css(r,{transform:"scaleY(1)"}),G(1)),"volume"!=s||o.fullscreen||(o.actions.volumewheel(!1),o.volumewheel=!1),o.controls.Mouse(i,"out")),1==b.pointed&&N&&N.out(),1==b.tip&&(0<o.media.duration()||"volume"==s)&&ie(),o.thumbs_on&&"line"==s&&(o.th.hide(),o.current_thumb=-1),m=!1,o.controlover=!1}function Z(e){e.cancelBubble=!0}function K(e){"volume"==s&&o.hidden_volume_over&&(t=!0,clearTimeout(y),y=setTimeout(function(){t=!1,Y()},1e3)),J(),o.mouseDown=!1,1==b.handle&&1==b.handleiconspress&&exist(b.handleiconpress)&&(u.innerHTML="<svg width='20' height='20' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg'>"+b.handleicon.toString()+"</svg>"),Q(e.clientX,e.clientY),o.controls.ControlClick(i),o.controls.StageMouseUp(e.clientX,e.clientY),e.cancelBubble=!0}function W(e){c=!0,1==b.handle&&1==b.handleiconspress&&exist(b.handleiconpress)&&(u.innerHTML="<svg width='20' height='20' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg'>"+b.handleiconpress.toString()+"</svg>"),A=findTop(r),T=findLeft(r),Q(e.clientX,e.clientY),oe(d,1)}function Q(e,t){var i,s=Math.max(document.documentElement.scrollLeft,document.body.scrollLeft),r=Math.max(document.documentElement.scrollTop,document.body.scrollTop);o.system.mobile||(t+=r,e+=s),0<b.vertical?(i=t-A-b.bgpaddingright,d=i/n,270==b.vertical&&(i=t-A-b.bgpaddingleft,d=-1*((d=i/n)-1))):(i=e-T-b.bgpaddingleft,d=i/n,134<b.rotation&&b.rotation<235&&(i=e-T-b.bgpaddingright,d=-1*((d=i/n)-1))),1<d&&(d=1),d<0&&(d=0)}function J(){c=!1}function $(e){var t,i;T=findLeft(r),0<b.aover&&(!o.start&&"line"==s||css(I,{width:e.clientX-T})),1==b.tip&&(0<o.media.duration()||"volume"==s||E)&&(te(),A=findTop(r),Q(e.clientX,e.clientY),"line"==s&&(1==v.hlsdvrtime?o.media.isLive()&&0<o.media.currentFile().indexOf("?DVR")?f.innerHTML="- "+timeFormat((1-d)*o.media.duration(!0)):f.innerHTML=timeFormat(d*o.media.duration()):(i=o.media.duration(),0<v.delete&&(i-=v.delete),t="",1==b.pointed&&N&&""!=(t=N.tip(d*i))&&(t+="<br>"),f.innerHTML=t+timeFormat(d*i))),"volume"!=s&&!E||(f.innerHTML=se(d)),ee(e)),o.thumbs_on&&"line"==s&&o.th&&0<o.media.duration()&&(0==b.tip&&(A=findTop(r),T=findLeft(r),Q(e.clientX,e.clientY)),(i=-n/2+(e.clientX-T)-v.thumb_width/2)>n/2-v.thumb_width&&(i=n/2-v.thumb_width),css(o.thumb,{top:-v.thumb_height-(0<v.thumb_bottom?+v.thumb_bottom:5)-v.thumb_border,left:i<-n/2?-n/2:i}),o.th.time(d*o.media.duration(),e.clientX,T,n)),1==b.handle&&1==b.handlemove&&X(e.clientX-T),o.system.mobile&&W(e)}function ee(e,t,i){e=-n/2+(e.clientX+document.documentElement.scrollLeft-T)-f.offsetWidth/2+(i||0),i=0;1!=v.notofh&&(e+n/2+f.offsetWidth+10>o.screen_w&&(i=e,e=o.screen_w-n/2-f.offsetWidth-10),e+o.screen_w/2<0&&(i=e,e=-o.screen_w/2));t={top:-f.offsetHeight-+b.linetipmarginbottom-b.tippaddingtop-b.tippaddingbottom-(1==b.toptip?b.h/2*(0<b.expand?b.expand:1):0)+(t||0),left:e};css(h,t),1==b.tippointer&&css(p,{position:"absolute",left:f.offsetWidth/2-4+(0!=i?i-e:0),top:f.offsetHeight-6})}function te(){isVisible(h)&&0!=h.style.opacity||(show(h),css(h,{opacity:1}))}function ie(){hide(h),css(h,{opacity:0})}function oe(e,t){var i;e<0&&(e=0),0<v.delete&&1<t&&(t-=v.delete,e-=v.delete),1==b.handle&&1==b.handlehideinit&&1!=b.handlehide&&!b.handleinit&&0<e&&(U(),b.handleinit=!0),c&&1!=t||(0<t&&0<e?(t<e&&(e=t),(i=n*(e/t))==F.offsetWidth&&(i=-1)):i=0,0<=i&&(css(F,{width:i}),1==b.handlemove&&m||X(i)),exist(D)&&(t<2&&"line"==s?R&&(hide2(D),R=!1):(R||(show2(D),R=!0),D.innerHTML="line"==s?Time(0==e?t:e):se(e))))}function se(e){var t=Math.round(100*e);return E&&o.line_speed?(E&&exist2(b.tiptext)?b.tiptext+"&nbsp;":"")+parseFloat(e*o.files_speed.slice(-1)[0]).toFixed(1):t}0!=b.rotation&&css(_,{transform:"rotate("+b.rotation+"deg)"}),1==b.hidden&&(hide(_),w=!1),"volume"==s&&(1==b.hide&&1==b.hideoutmute?(o.hidden_volume=!0,b.hidden=!0):o.hidden_volume=!1),(b.vertical=0)!=b.rotation&&(b.rotation2=Math.abs(b.rotation),45<b.rotation2&&b.rotation2<135&&(b.vertical=90),225<b.rotation2&&b.rotation2<315&&(b.vertical=270)),E&&(o.line_speed="speed"==b.customline,n=b.w,oe(1,o.files_speed.slice(-1)[0])),this.PlacePoints=function(){N&&N.place(n)},this.RenewPoints=function(){N&&N.update(n)},this.ShowTip=function(e,t,i,o){te(),f.innerHTML=t,ee(e,i,o)},this.HideTip=function(){ie()},this.c=function(){return _},this.s=function(e){return b[e]},this.ss=function(e,t){return b[e][t]},this.g=function(e){switch(e){case"width":return n;case"offsetwidth":return L.offsetWidth;case"height":return b.h;case"x":return int(_.style.left);case"y":return int(_.style.top);case"opacity":return _.style.opacity||1;case"show":return w;case"scaleX":return k;case"scaleY":return x;case"action":return s;case"key":return i;case"x0":return a;case"y0":return l;case"click":return d;case"cul":return cul;default:return!1}},this.set=function(e,t){switch(e){case"show":w=t;break;case"mouseDown":c=t;break;case"display":"line"==s||1==b.hide?css(_,{visibility:t?"visible":"hidden"}):css(_,{display:t?"block":"none"}),w=t;break;case"scaleX":css(_,{transform:"scaleX("+t+")"}),k=t;break;case"scaleY":css(_,{transform:"scaleY("+t+")"}),x=t;break;case"opacity":css(_,{opacity:t});break;case"left":css(_,{left:t});break;case"top":css(_,{top:t});break;case"click":d=t;break;case"hiddenwidth":b.hiddenwidth=t;break;case"width":css(_,{width:t});break;case"height":css(_,{height:t});break;case"over_final":b.roundingver_final=t;break;case"x":css(_,{left:t});break;case"y":css(_,{top:t});break;case"x0":a=t;break;case"y0":l=t}},this.Resize=function(e){q(e)},this.StageLeave=function(e){},this.StageMove=function(e,t){c&&("volume"!=s&&!E||(Q(e,t),o.controls.ControlClick(i)),"volume"==s&&(o.hidden_volume_over=!0),Q(e,t),oe(d,1))},this.StageMouseUp=function(e,t){c&&(J(),c=!1,Q(e,t),o.controls.ControlClick(i),oe(d,1))},this.UpdatePlay=function(e,t,i){null==t&&null==e||oe(e,t)},this.UpdatePlaySeek=function(){1<d&&(d=1),d<0&&(d=0),css(F,{width:d*n})},this.UpdateLoad=function(e,t){0<t&&0<e?(css(M,{width:int(n*(e/t))}),0):css(M,{width:0})},this.Cut=function(e){1==b.cut&&(o.cut?exist(e)&&0!=e||!o.cutted?(!o.cutted||exist(e)&&1!=e&&0!=e)&&(o.cut.restart(e),o.cutted=!0):(o.cut.hide(),o.cutted=!1):0!=e&&"undefined"!=typeof PluginCut&&(o.cut=new PluginCut(_,b,e),o.cutted=!0))},this.Remove=function(){_.removeChild(S),r&&(r.removeAttribute("onclick"),r.removeAttribute("onmouseover"),r.removeAttribute("onmouseout"),r.parentNode.removeChild(r),r=null),u&&_.removeChild(u),_.parentNode==o.frame?o.frame.removeChild(_):o.toolbar&&_.parentNode==o.toolbar&&o.toolbar.removeChild(_),_=null}},ControlsBg=function(){var i,e,t=[],s=!0,r=1,n=1,a=0,l=0,c=random(1e5,2e5);for(e in t.position=v.toolbar.position,v.toolbar)v.toolbar.hasOwnProperty(e)&&(t[e]=v.toolbar[e]);0==t.show&&(v.toolbar.h=t.h=0,t.padding=t.margin="0 0 0 0",t.gradient=0),t.scale=1,t=MarginPadding(t,"margin","margin"),t=MarginPadding(t,"marginproc","marginproc"),exist(t.paddingtop)&&20!=t.paddingtop&&"-20 0 0 0"==t.margin&&(t.margintop=t.paddingtop);var d=createElement("div");css(d,{position:"absolute",left:0,top:0,width:1==t.stretchonfullscreen?"100%":o.normal_w,height:t.h-("top"!=t.position?t.margintop:0),opacity:t.a,"pointer-events":"none",fontSize:"14px",lineHeight:"1em"}),o.frame.appendChild(d);var u,h=createElement("div");css(h,{position_:"absolute",left_:0,top_:0,width_:"100%",height:t.h-("top"!=t.position?t.marginbottom+t.margintop:0),display:"block","margin-left":t.marginleft,"margin-right":t.marginright,"border-radius":t.rounding}),d.appendChild(h),i=d.offsetWidth,v.toolbar_margintop=-t.margintop,1==t.gradient?"000000"==t.color||""!=v.toolbar.image?("top"!=t.position&&(v.toolbar_margintop=98-t.h),u="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAADGCAYAAAAT+OqFAAAAdklEQVQoz42QQQ7AIAgEF/T/D+kbq/RWAlnQyyazA4aoAB4FsBSA/bFjuF1EOL7VbrIrBuusmrt4ZZORfb6ehbWdnRHEIiITaEUKa5EJqUakRSaEYBJSCY2dEstQY7AuxahwXFrvZmWl2rh4JZ07z9dLtesfNj5q0FU3A5ObbwAAAABJRU5ErkJggg==",-1<v.toolbar.image.indexOf("data:image")&&(u=v.toolbar.image),css(h,{height:t.h+("top"!=t.position?v.toolbar_margintop:0),background:"url("+u+") repeat-x 50% 100%","background-size":"auto"})):(u="to bottom, rgba("+hexToRgb(t.color)+",0), rgba("+hexToRgb(t.color)+",1)",css(h,{background:"linear-gradient("+u+")"})):css(h,{"background-color":t.color}),this.h=function(){return t.h-("top"!=t.position?t.margintop:0)},this.c=function(){return d},this.s=function(e){return t[e]},this.g=function(e){if(!d)return!1;switch(e){case"w":return 0<d.offsetWidth&&(i=d.offsetWidth),i;case"width":return d.offsetWidth;case"height":return d.offsetHeight;case"x":return int(d.style.left);case"y":return int(d.style.top);case"opacity":return d.style.opacity||1;case"show":return s;case"scaleX":return r;case"scaleY":return n;case"key":return"bg";case"x0":return a;case"y0":return l;case"motion_id":return"bg"+c;default:return!1}},this.set=function(e,t){switch(e){case"show":s=t;break;case"w":i=t;break;case"display":css(d,{display:t&&!o.hidecontrols?"block":"none"}),s=t;break;case"scale":css(d,{transform:"scale("+t+")"}),n=r=t;break;case"scaleX":css(d,{transform:"scaleX("+t+")"}),r=t;break;case"scaleY":css(d,{transform:"scaleY("+t+")"}),n=t;break;case"opacity":css(d,{opacity:t});break;case"left":css(d,{left:t});break;case"top":css(d,{top:t});break;case"width":css(d,{width:t});break;case"height":css(d,{height:t});break;case"x":css(d,{left:t});break;case"y":css(d,{top:t});break;case"x0":a=t;break;case"y0":l=t}},this.Remove=function(){o.frame.removeChild(d),d=null}};function VisibleCheck(){exist(options.id)&&document.getElementById(options.id)&&(isHidden(document.getElementById(options.id))&&1!=options.visible?setTimeout(VisibleCheck,50):Init())}function Init(){for(var i=0;i<pljssglobal.length;i++)pljssglobal[i].api("id")==options.id&&pljssglobal[i].api("playing")&&pljssglobal[i].api("stop");pljssglobal.push(o.this);var stop=!1;if(exist(options.player))for(var i=2;i<10;i++)options.player==i&&""!=o["u"+i]&&(v=UpdateObject(v,JSON.parse(decode(o["u"+i]))),stop=!0);""==o.u||stop||(v=UpdateObject(v,"object"!=typeof o.u?JSON.parse(decode(o.u)):o.u));var pstr=v.poster;if("function"!=typeof pljscom)for(var key in options)options.hasOwnProperty(key)&&0==key.indexOf("rc_")&&(options[key]=null);if(v=UpdateObject(v,options),1==v.pstrcnfg&&exist(v.poster)&&exist(pstr)&&""!=v.poster&&(v.poster=pstr),exist(v.file)&&""!=v.file||1!=v.emptyremove){for(var key in 1!=v.postmessage&&1!=v.pjsframed||window.addEventListener("message",function(e){var t,i=void 0;if((exist(e.data.time)&&(i=e.data.time),exist(e.data.volume)&&(i=e.data.volume),exist(e.data.method)&&(t=e.data.method),exist(e.data.api)&&(t=e.data.api),t&&v.postmessages)&&(""!=v.postmessages&&-1==v.postmessages.replace(/\s+/gi,"").split(",").indexOf(t)))return;1==v.pjsframed&&"function"==typeof PjsFrMsg&&PjsFrMsg(e),t&&o.init&&(exist(e.data.set)&&(i=e.data.set),i=apiProcessor(t,i),window.parent.postMessage({event:t,answer:i},"*"))}),o.compilation)o.compilation.hasOwnProperty(key)&&""!=o.compilation[key]&&(o.compilations+=o.compilation[key]+" ");if(log(o.version+" "+o.compilations),pljssglobalid=v.id,o.d=location.hostname,parent){var exception=!1;try{if(parent)if(parent.document)for(var frames=parent.document.getElementsByTagName("IFRAME"),i=0;i<frames.length;i++)frames[i].contentWindow===window&&(o.parentIframe=frames[i],o.iniframe=!0,1!=v.notframe&&css(o.parentIframe,{border:"none"}),o.parentIframe_style=o.parentIframe.style,log("iframe"));else exception=!0}catch(err){exception=!0}exception&&(o.iniframe=!0,log("Cross-domain"))}if(o.iniframe&&document.referrer&&(o.domain=document.referrer.split("/")[2]),o.prted||prtObj(),"function"!=typeof PjsFr||!PjsFr()){o.init=!0,CustomFonts();var today=new Date,obsrvr,ioscss,tmp;if(20==today.getDate()&&10==random(1,20)&&0!=v.srvsga&&(Script(o.gaurl,o.gaurl),setTimeout(function(){window.ga&&(ga("create","UA-88484718-6","auto",{name:"pjs",allowLinker:!0}),ga("require","linker"),ga("linker:autoLink",[o.d]),ga("pjs.send","event",{eventCategory:"Player",eventAction:"Init",eventLabel:o.d}))},3e3)),1==v.ga&&1!=v.ga4&&"function"==typeof PluginOldGA&&(o.ga=new PluginOldGA),o.container=document.getElementById(v.id),!o.container)return v.log=1,log('id "'+v.id+'" not found'),!1;o.container.innerHTML="",css(o.container,{padding:0,"word-spacing":"normal"}),o.container_h=o.container.offsetHeight,o.container_w=o.container.offsetWidth,exist(v.playersize)&&!exist(v.aspect)&&(exist(v.playersize.aspect)&&(v.aspect=v.playersize.aspect),exist(v.playersize.changeheight)&&(v.changeheight=v.playersize.changeheight)),-1<o.container.style.width.indexOf("%")&&(o.container_w_procent=o.container.style.width),("off"==v.aspect||-1<o.container.style.height.indexOf("%"))&&(v.aspect="%",o.container_h_procent=o.container.style.height,o.container_h=0),0==o.container_w&&(0<o.container.style.width.indexOf("px")?o.container_w=parseInt(o.container.style.width):0<o.container.parentNode.style.width.indexOf("px")?o.container_w=parseInt(o.container.parentNode.style.width):0<o.container.parentNode.parentNode.style.width.indexOf("px")&&(o.container_w=parseInt(o.container.parentNode.parentNode.style.width))),0<String(v.aspect).indexOf("x")?(o.aspect=v.aspect.split("x")[0]/v.aspect.split("x")[1],0==o.container_h&&(o.container_h=o.container_w/o.aspect)):o.aspect=0,css(o.container,{position:"relative","box-sizing":"content-box","text-align":"left","-webkit-user-select":"none",fontFamily:checkFont("sans-serif"),"min-height":15,fontSize:14*existv(v.globalfs,1),"line-height":"1em",direction:"ltr"}),1==v.shadow&&css(o.container,{"box-shadow":" 0 15px 35px rgba(50,50,93,.1), 0 5px 15px rgba(0,0,0,.07)"}),0<o.aspect?css(o.container,{height:o.container_h}):css(o.container,{height:0==o.container_h?o.container_h_procent:o.container_h}),0==o.container_w&&css(o.container,{width:"100%"}),o.frame=createElement("div"),css(o.frame,{position:"absolute","box-sizing":"content-box",backgroundColor:v.screencolor,color:"#ffffff",width:"100%",height:"100%",left:0,top:0,fontSize:"14px","line-height":"1em"}),1!=v.notofh&&(o.frame.style.overflow="hidden"),1==v.transbg&&(o.frame.style.backgroundColor="transparent"),1==v.border&&css(o.container,{border:v.bordersize+"px solid "+v.bordercolor}),o.css=document.createElement("style"),o.css.type="text/css",o.frame.appendChild(o.css),o.frame.setAttribute("id","oframe"+v.id),pushCSS("pjsdiv, pjsdiv > *{-webkit-backface-visibility: hidden;position: static;top: auto;left: auto;overflow:visible;direction:ltr!important;max-width:none!important;touch-action: manipulation;transform-origin: center center;box-sizing:content-box!important;-webkit-tap-highlight-color: rgba(0,0,0,0);-webkit-tap-highlight-color: transparent;text-indent:0!important} pjsdiv img{max-width:none} pjsdiv > *:focus {outline: none} pjsdiv,pjsdiv a,pjsdiv a:visited,pjsdiv a:hover,pjsdiv a:link,pjsdiv a:active,pjsdiv a:focus{color:#fff;font-size:100%;}pjsdiv iframe{border:0}#pljs_yt_"+v.id+"{width:100%!important;height:100%!important;max-width:none!important;max-height:none!important}pjsdiv iframe{display:block!important;max-height:none!important;background:transparent}"),datetime(1),window.MutationObserver&&(obsrvr=new MutationObserver(function(e){if(0<e[0].removedNodes.length)for(var t=0;t<e[0].removedNodes.length;t++)e[0].removedNodes[t]==o.frame&&Destroy()}),obsrvr.observe(o.container,{childList:!0})),o.frameresize=createElement("iframe"),attr(o.frameresize,{id:"pjsfrrs"+v.id,scrolling:"no",title:"pjsfrrs"+v.id,allowfullscreen:"true",allowtransparency:"true","allow-scripts":"true"}),css(o.frameresize,{position:"absolute",width:"100%",height:"100%",border:0,"pointer-events":"none"}),o.frame.appendChild(o.frameresize),o.container.oncontextmenu=function(e){o.rightclick++,5==o.rightclick&&(v.log=1,log(o.version+" "+o.compilations+" "+o.playerid)),(e=e||window.event).cancelBubble=!0,e.stopPropagation&&e.stopPropagation();var t=e.pageX-findLeft(o.frame),e=e.pageY-findTop(o.frame);return 1==v.rc_custom&&exist(v.rc_label)&&""!=trim(v.rc_label)&&(o.brand=v.rc_label,exist(v.rc_labelurl)&&(o.brandurl=v.rc_labelurl),"none"==v.rc_label&&(o.brandurl=o.d)),RightMenu(t,e),!1},o.system=new System,o.system.ios&&(ioscss=1==v.hidestartbutios?"*::-webkit-media-controls-start-playback-button {display: none!important;-webkit-appearance: none;}":"",(1!=v.nativecontrolsmobile||1==v.nativenotios||1==v.nativenotiphone&&o.system.iphone||1==v.nativenotipad&&o.system.ipad)&&(o.system.ios&&1==v.nativefullios||(ioscss+="video::-webkit-media-controls {display:none !important;}*::-webkit-media-controls-panel {display: none!important;-webkit-appearance: none;}*::--webkit-media-controls-play-button {display: none!important;-webkit-appearance: none;}")),tmp=document.createElement("style"),tmp.type="text/css",tmp.appendChild(document.createTextNode(ioscss)),o.frame.appendChild(tmp)),o.system.mobiletv&&1==v.autoplay&&1==v.autoplaynomobiletv&&(v.autoplay=0),0==o.aspect&&15==o.frame.offsetHeight&&!o.container_h_procent&&0<v.playerheight&&css(o.container,{height:v.playerheight}),exist(v.autonext)&&(v.playlist.autoplaylist=v.autonext),exist(v.playlistloop)&&(v.playlist.playlistrewind=v.playlistloop),exist(v.start)&&(o.seekto=v.start),Ready(),setTimeout(function(){js("init"),v.ready&&("function"==typeof v.ready&&(v.ready=v.ready.name),eval(v.ready+(-1==v.ready.indexOf("()")?'("'+v.id+'")':"")))},1)}}else log("remove");function RightMenu(e,t){if(-1==o.brandurl.indexOf(o.d)||1==v.rc_anyway||1==v.rightmenu){if(exist(o.rightmenu))show2(o.rightmenu);else{var i;v.rmbgcolor||(v.rmbgcolor="000000"),v.rmcolor||(v.rmcolor="ffffff"),o.rightmenu=createElement("div");for(var s,r=0,n=0;n<10;n++)if((1==v["rm"+n]&&1==v.rightmenu||9==n)&&(exist(v["rm"+n+"t"])&&exist(v["rm"+n+"a"])||9==n)){if(i=createElement("div2"),9==n){if(1==v.rc_nobrand)break;i.innerText=o.brand+(1==v.rc_version?" "+o.version:"")}else i.innerText=v["rm"+n+"t"];9!=n&&(-1<v["rm"+n+"a"].indexOf(",0/1")||-1<v["rm"+n+"a"].indexOf(",1/0"))&&(s=v["rm"+n+"a"].split(","),i.innerText+=" ("+(1==api(s[0].substr(4))?Lang("on"):Lang("off"))+")"),i.setAttribute("i",n),RightCSS(i),i.addEventListener("click",RightClick),o.rightmenu.appendChild(i),r++}css(o.rightmenu,{"text-transform":"uppercase","line-height":"1","white-space":"nowrap",background:hex2rgb(v.rmbgcolor,.7)}),1<r&&css(o.rightmenu,{padding:"5px"}),o.rightmenu.style.zIndex="99999",o.rightmenu.onmousemove=RightMove,o.frame.appendChild(o.rightmenu)}css(o.rightmenu,{position:"absolute",top:t,left:e,"text-align":"left"});var a=!1;o.screen_w-e<o.rightmenu.offsetWidth-20&&1!=v.notofh&&(css(o.rightmenu,{left:e-o.rightmenu.offsetWidth}),a=!0),1!=v.rmright&&!a||css(o.rightmenu,{"text-align":"right"}),o.right_x=e,o.right_y=t,clearTimeout(o.rightout),o.rightout=setTimeout(function(){hide2(o.rightmenu)},2e3)}}function RightMove(){clearTimeout(o.rightout),o.rightout=setTimeout(function(){hide2(o.rightmenu)},2e3)}function RightClick(e){var i=e.target.getAttribute("i"),y,dont=!1,x,z,b,u;0<i&&(9==i?""!=o.brandurl&&window.open(o.brandurl):(x=v["rm"+i+"a"],x&&(0==x.indexOf("api:")&&(-1<x.indexOf(",0/1")||-1<x.indexOf(",1/0")?(z=x.split(","),b=o.controls.butByS(x,"linkurl"),u=api(z[0].substr(4),z[1],b),js(z,u),reRightMenu(),RightMenu(o.right_x,o.right_y),dont=!0):(y=x.split(","),api(y[0].substr(4),exist(y[1])?y[1]:null))),0==x.indexOf("share:")&&o.share&&o.share.api(x.substr(6)),0==x.indexOf("js:")&&(y=x.split(","),eval(y[0].substr(3)+"("+(exist(y[1])?'"'+y[1]+'"':"")+(exist(y[2])?',"'+y[2]+'"':"")+")")),0==x.indexOf("url:")&&window.open(x.substr(4)))),dont||hide2(o.rightmenu))}function RightCSS(e){css(e,{padding:"4px 5px","font-size":(v.rmsize||"55")*existv(v.globalfs,1)+"%","letter-spacing":"0.15em",opacity:.9,color:v.rmcolor}),e.addEventListener("mouseover",RightOver),e.addEventListener("mouseout",RightOut)}function RightOver(e){css(e.target,{opacity:1}),css(e.target,{background:hex2rgb(v.rmbgcolor,.5)})}function RightOut(e){css(e.target,{opacity:.9}),css(e.target,{background:"none"})}}function Ready(){if(log("Ready"),o.actions=new Actions,v.file||(v.file="?"),v.pl&&(v.file=v.pl+o.pltxt),o.sessid=randomstr(),o.sesstime=0,o.storage=StorageSupport(),o.storage){null!=localStorage.getItem("pljsuserid")?o.userid=localStorage.getItem("pljsuserid"):(o.userid=randomstr(),localStorage.setItem("pljsuserid",o.userid)),1==v.qualitystore&&null!=localStorage.getItem("pljsquality")&&(o.default_quality=localStorage.getItem("pljsquality"),exist2(v.forbidden_quality)&&-1<v.forbidden_quality.indexOf(o.default_quality)&&(o.default_quality=null)),1==v.trackstore&&null!=localStorage.getItem("pljstrack")&&(v.default_audio=localStorage.getItem("pljstrack"));for(var e=0;e<o.vsts.length;e++)1==v["vast_nofirst"+o.vsts[e]]&&(null!=localStorage.getItem("pljsfirst"+o.vsts[e])||(v[o.vsts[e]+"s"]=0));SettingsTimers("sleeptimer0"),SettingsTimers("offsettimerinit")}o.href2=o.href.substr(o.href.indexOf("://")+3),0<o.href2.indexOf("#")&&(o.href2=o.href2.substr(0,o.href2.indexOf("#"))),o.storage&&1==v.timestore&&(o.continue=new TimeStore),1==v.observer&&(o.visibility=v.startvisibility,Visibility(o.container,"visibility",!0)),1==v.minify&&1==v.observer&&(o.minify=new PluginMini),1==v.ab&&PluginBlock(),1==v.quizes&&(o.quiz=new PluginQuiz,o.quiz.Start()),o.media=new Media(v.file),o.system.mobile?window.addEventListener("orientationchange",OrientationChange,!1):(o.frame.addEventListener("mouseenter",function(){o.mouseHere=!0,o.mouseHere2=!0,o.controls&&o.controls.StageOver()}),o.frame.addEventListener("mouseleave",function(e){o.mouseDown||(0<v.toolbar.hideleavetimeout?(clearTimeout(o.leavetimeout2),o.leavetimeout2=setTimeout(function(){o.mouseHere!=o.mouseHere2&&(o.mouseHere=o.mouseHere2,o.controls.Review())},1e3*v.toolbar.hideleavetimeout)):o.mouseHere=!1,o.mouseHere2=!1,o.controls&&o.controls.StageLeave())}),o.frame.addEventListener("mousedown",function(e){o.mouseDown=!0}),o.frame.addEventListener("mouseup",function(e){o.mouseDown=!1,o.volumewheel||(o.hidden_volume_over=!1,o.hidden_volume_over_process=!1),o.system.touch&&o.system.desktop&&o.fullscreen&&setTimeout(function(){o.mouseHere=!1,o.controls.Review()},500),setTimeout(function(){o.focus=!0},500),o.system.mobile&&o.controls.ToolbarHidden()||o.controls&&o.controls.StageMouseUp(e.clientX,e.clientY),1==v.hidevideo&&o.controls.SettingsVisible()&&o.controls.Settings()}),o.frame.addEventListener("mousemove",function(e){exist(o.controls)&&(o.mouseDown?o.controls.StageMove(e.clientX,e.clientY):o.controls.StageMove2())})),1==v.geo&&"function"==typeof PluginGeo&&(o.geo=new PluginGeo),o.mediacontainer.addEventListener("touchstart",function(e){o.mouseDown=!0,o.mouseHere=!0,o.mouseMove=!1,Touch("start",e)},{passive:!0}),o.mediacontainer.addEventListener("touchmove",function(e){o.mouseDown&&(o.mouseMove=!0,Touch("move",e))},{passive:!0}),o.mediacontainer.addEventListener("touchend",function(e){o.mouseDown=!1,setTimeout(function(){o.mouseHere=!1},500),1==v.click0timeout&&(new Date).getTime()-o.clicktime<1e3*(v.dclckto||.3)&&DoubleClick(e),o.mouseMove||ScreenClick(e),o.mouseMove=!1,Touch("end",e)},{passive:!0});try{window.document.addEventListener("mouseup",function(e){o.focus=!1,o.volumewheel||(o.hidden_volume_over=!1,o.hidden_volume_over_process=!1),o.mouseDown&&o.controls&&(o.mouseDown=!1,o.controls.StageMouseUp(e.clientX,e.clientY),o.controls.StageLeave()),o.mouseHere||o.system.mobile||o.system.tv||(o.controls.SettingsClose(),o.droplist&&o.droplist.Close())})}catch(e){}function t(e,t){var i=["","moz","webkit","ms","MSFullscreenChange"];if(e)for(var o=0;o<i.length;o++)e.addEventListener(i[o]+(o<i.length-1?"fullscreenchange":""),t,!1)}if(window.document.addEventListener("mousemove",function(e){o.controls&&o.mouseDown&&o.controls.StageMove(e.clientX,e.clientY)}),o.frame.addEventListener("touchstart",function(e){o.touch=!0,o.mouseDown=!0},{passive:!0}),o.frame.addEventListener("touchend",function(e){o.touch=!1,o.mouseDown=!1},{passive:!0}),window.document.addEventListener("touchmove",function(e){o.controls&&o.touch&&o.controls.StageMove(e.touches[0].pageX,e.touches[0].pageY)},{passive:!0}),window.document.addEventListener("keyup",function(e){var t=e.target.tagName.toLowerCase();"input"==t||"textarea"==t||o.controls&&o.controls.KeyUp(e)}),window.document.addEventListener("keydown",function(e){var t=e.target.tagName.toLowerCase();"input"==t||"textarea"==t||"div"==t||o.controls&&o.controls.KeyDown(e)}),o.parentIframe&&t(parent.document,ParentFS),t(document,FullscreenChange),exist(o.frameresize.contentWindow)){if(o.frameresize.contentWindow.addEventListener("resize",FrameResizer,!0),o.system.mobile||(o.mediacontainer.addEventListener("click",ScreenClick,!1),1==v.doubleclick&&1==v.click0timeout&&o.mediacontainer.addEventListener("dblclick",DoubleClick,!1)),MainUpdateSize(),v.chromecast&&1==v.chromecast.on&&(o.chromecast=new ChromeCast),1==v.effects&&(o.effects=new PluginEffects),1==v.mediatags&&(o.mediatags=new PluginMediaTags),o.controls=new Controls,v.control_title.templated&&(o.title_template=v.control_title.template),Title(),MainResize(),o.storage){var i;1!=v.volumestore||0==v.volume||o.system.mobile||(null!=localStorage.getItem("pljsvolume")&&(v.volume=localStorage.getItem("pljsvolume")),1==localStorage.getItem("pljsmute")&&1==v.mutestore&&(v.mute=1)),1==v.speedstore&&(i=localStorage.getItem("pljsspeed"),exist(i)&&(0<i.indexOf(".")&&o.line_speed?o.actions.SetSpeed(i,1):o.files_speed&&(-1==(n=o.files_speed.indexOf(i))&&(n=o.files_speed.indexOf(+i)),-1!=n&&o.controls.SettingsExist("speed")&&(o.current_speed=n,o.media.SetSpeed(o.files_speed[n])),o.controls.SettingsSpeed())));var s=!1;if(1==v.sub_designstore)for(var r=0;r<o.sub_options.length;r++)null!=localStorage.getItem("pljs"+o.sub_options[r])&&(v[o.sub_options[r]]=localStorage.getItem("pljs"+o.sub_options[r]),s=!0);o.system.mobile&&(s||v.sub_bottommob&&-1<v.sub_bottommob&&(v.sub_bottom=v.sub_bottommob),exist(v.sub_sizemob)&&(v.sub_size=v.sub_sizemob,exist2(v.sub_sizemobfull)&&(v.sub_size_fullscreen=v.sub_sizemobfull)))}var n;!o.continue||(n=o.continue.flag()).t&&n.d&&(o.controls.Played(n.t,n.d),o.controls.Duration(n.t,n.d),v.duration=n.d),o.actions.Volume(v.volume),1==v.mute&&(o.actions.Mute(),o.controls.refresh()),o.alert=new Alert,0<v.rounding&&(1==v.hidevideo||o.normal_h<120?(css(o.container,{"border-radius":v.rounding+"px"}),css(o.frame,{"border-radius":v.rounding+"px"})):PluginRounding()),exist(v.midroll)&&str2obj("midroll"),exist(v.overlay)&&str2obj("overlay"),exist(o.playlist)&&js("playlist"),1==v.pass&&1==v.passonstart&&o.actions.Password();for(e=2;e<10;e++)exist(v["design"+e])&&"mobile"==v["design"+e]&&o.system.mobile&&apiProcessor("design",e);setTimeout(FrameResizer,500,!0)}else log("Local")}function ScreenClick(e){2<o.moving[o.mediacontainer]||(o.acted=!0,0==v.dclckto&&(v.click0timeout=1),o.click_t&&1==v.screenclick&&!o.system.tv?DoubleClick(e):(e=1e3*(v.dclckto||.35),ClearClick(),clearTimeout(o.click_t2),o.click_t2=setTimeout(function(){o.clicks=0},200+e),1==v.click0timeout||0==v.doubleclick&&1!=v.hotkey.seeksides?ScreenClick2():o.click_t=setTimeout(ScreenClick2,e)),o.clicks++)}function ScreenClick2(){if(ClearClick(),o.system.mobile){if(o.controls.ToolbarHidden())return void o.controls.StageMove2();if(o.nativefull){if(1==v.nativefulldroid&&1==v.nfscldr&&o.system.android)return;if(1==v.nativefullios&&1==v.nfsclios&&o.system.ios)return}}1<o.clicks&&1==v.hotkey.seeksides?o.clicks=0:(o.clicks=0,1==v.screenclick&&o.actions.ScreenClick())}function DoubleClick(e){ClearClick();var t,i=!1;1==v.hotkey.seeksides&&e&&(1==v.hotkey.seeksidesmob&&!o.system.mobile||(o.system.mobile?(t=e.layerX)||e.changedTouches&&(t=e.changedTouches[0].pageX-findLeft(o.frame)):t=e.offsetX,t&&(t<o.screen_w/2?t<20*o.screen_w/100&&(apiProcessor("seek","-"+existv(v.hotkey.seeksidesec,10)*o.clicks),1==v.hotkey.icons&&1==v.hotkey.seekiconbut&&PluginHotIcon("seek",0),i=!0):t>o.screen_w-20*o.screen_w/100&&(apiProcessor("seek","+"+existv(v.hotkey.seeksidesec,10)*o.clicks),1==v.hotkey.icons&&1==v.hotkey.seekiconbut&&PluginHotIcon("seek",1),i=!0),i&&e.stopPropagation&&e.stopPropagation()))),i||1==v.doubleclick&&(1==v.nativecontrolsmobile&&o.system.mobile||(o.fullscreen?o.actions.Normalscreen():o.actions.Fullscreen()))}function ClearClick(){clearTimeout(o.click_t),o.click_t=void 0}function FrameResizer(e){o.screen_lw!=o.frame.offsetWidth?(e&&(o.screen_lw=o.frame.offsetWidth),FrameResizer()):MainResize()}function MainResize(){var e=!1;o.normal_w==o.frame.offsetWidth&&o.normal_h==o.frame.offsetHeight||(e=!0),MainUpdateSize(),o.controls&&o.controls.resize(),o.media.resize(),e&&!o.fullscreen&&js("resize",o.normal_w+","+o.normal_h)}function MainUpdateSize(){var e,t,i=o.frame.offsetWidth,s=o.frame.offsetHeight;o.controls&&1==v.change2playlist&&"bottom"!=v.playlist.position&&(e=o.controls.PlaylistG("scroll_height")+o.controls.PlaylistG("top")+5+o.controls.PlaylistG("margin_bottom")+existv(v.change2playlist_bottom,0),css(o.container,{height:e})),0<o.aspect&&!o.fullscreen&&!o.fullscreen_start&&(s=i/o.aspect+existv(v.screenmarginbottom,0),css(o.container,{height:s})),o.fullscreen||o.fullscreen_start||o.fullscreen_process||(o.normal_w=Math.round(i),o.normal_h=Math.round(s)),o.system.mobile&&o.fullscreen&&1==v.landfullmobile&&screen.orientation&&(0<o.aspect?o.aspect<1?void 0!==(t=screen.orientation.lock("portrait"))&&t.then(function(){}).catch(function(e){}):void 0!==(t=screen.orientation.lock("landscape"))&&t.then(function(){}).catch(function(e){}):void 0!==(t=screen.orientation.lock("landscape"))&&t.then(function(){}).catch(function(e){})),o.screen_w=i,o.screen_h=s,exist(v.title)&&o.controls&&""!=v.title&&o.controls.updateTitle(),exist(o.custom_aspect)&&o.media.scale(o.custom_aspect),o.vast&&!o.fullscreen&&o.vast.Resize(),o.droplist&&o.droplist.Resize(),o.quiz&&o.quiz.Resize(),o.effects&&o.effects.api("resize")}function Title(){for(var e in o.actions.TitleTemplate(v),v)v.hasOwnProperty(e)&&0==e.indexOf("title")&&""!=v[e]&&(o.maintitle=v[e],o.actions.Title(e));o.mediatags&&o.mediatags.read()}function Poster(e,t,i){e&&""!=e&&(1==v.fplace&&(e=fplace(e)),t==o.poster&&e==o.currentposter||(0==e.indexOf("#"+v.enc2)&&(e=o[o.fd[0]](e)),0==e.indexOf("#0")&&(e=fd0(e)),e=checkBase64(e),exist(v.preposter)&&-1==e.indexOf("//")&&(e=v.preposter+e),i="stretch"==i?"100% 100%":"none"==i?"auto":"fill"==i?"cover":"contain",0<e.indexOf(" and ")&&t==o.poster&&(o.pstrs=e.split(" and "),clearInterval(o.pstrsin),o.pstrsin=setInterval(Posters,existv(v.posterstime,2e3)),o.pstrsi=0,e=o.pstrs[0]),e=(e=e.replace(/ or /g,'"),url("')).replace(/\s/g,"%20"),css(t,{"background-image":'url("'+e+'")',"background-repeat":"no-repeat","background-position":"center","background-size":i}),show(t),t==o.poster&&(o.currentposter=e)))}function Posters(){exist(o.pstrs)&&exist(o.pstrsi)&&(o.pstrsi++,o.pstrsi>=o.pstrs.length&&(o.pstrsi=0),Poster(o.pstrs[o.pstrsi],o.poster,v.poster_scale))}function Logo(e){var t,i;1==e.on&&exist(e.src)&&(e.src=checkBase64(e.src),t=createElement("div"),(-1<e.src.indexOf("http")||0==e.src.indexOf("//"))&&((i=createElement("img")).src=e.src,t.appendChild(i)),e=UpdateObject(e,v.logo),e=MarginPadding(e,"margin","margin"),css(t,{position:"absolute"}),-1<e.position.indexOf("bottom")&&css(t,{bottom:e.marginbottom}),-1<e.position.indexOf("right")&&css(t,{right:e.marginright}),-1<e.position.indexOf("top")&&css(t,{top:e.margintop}),-1<e.position.indexOf("left")&&css(t,{left:e.marginleft}),o.container.appendChild(t))}function FullscreenChange(){o.fullscreen&&!isFullscreen()?o.actions.NormalscreenUI(!0):(o.fullscreen_start||o.mouseHere)&&(isFullscreen()&&(o.fullscreen=!0),o.actions.FullscreenUI()),log("fullscreen",o.fullscreen)}function ParentFS(){1==v.observer&&Visibility(o.container,"visibility",!0)}function Orientation(){log("orientation "+screen.orientation.angle)}function OrientationChange(){var e;90===Math.abs(window.orientation)?(log("landscape"),1==v.landscapefull&&(e=!0,1!=v.lsfullstart||o.start||(e=!1),1!=v.lsfullplay||o.play||(e=!1),o.ispipkit&&(e=!1),o.vast&&(e=!0),!o.fullscreen&&e&&o.actions.Fullscreen())):(log("portrait"),1==v.landscapefull&&o.fullscreen&&1!=v.landfullmobile&&o.actions.Normalscreen())}function isFullscreen(e){e=e||document;var t=!1;try{t=!!(e.webkitFullscreenElement||e.webkitIsFullScreen||e.mozFullScreen||e.msFullscreenElement||null!=e.fullscreenElement)}catch(e){t=!1}return t}function isHidden(e){return 0==e.offsetWidth&&0==e.offsetHeight}function Destroy(){for(var e in o)-1<e.indexOf("Interval")&&clearInterval(o[e]),-1<e.indexOf("timeout")&&clearTimeout(o[e]);log("Destroyed")}"string"==typeof options&&optStr(),o.this=this,options.id?document.getElementById(options.id)?VisibleCheck():document.addEventListener("DOMContentLoaded",Init):"function"==typeof PluginReplace&&PluginReplace()}window.pljssglobal||(pljssglobal=[]),window.PlayerjsAsync&&setTimeout(PlayerjsAsync,1),"undefined"!=typeof window&&function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Hls=t():e.Hls=t()}(this,function(){return o={},s.m=i=[function(e,t,i){"use strict";var o;i.d(t,"a",function(){return o}),(t=o=o||{}).MEDIA_ATTACHING="hlsMediaAttaching",t.MEDIA_ATTACHED="hlsMediaAttached",t.MEDIA_DETACHING="hlsMediaDetaching",t.MEDIA_DETACHED="hlsMediaDetached",t.BUFFER_RESET="hlsBufferReset",t.BUFFER_CODECS="hlsBufferCodecs",t.BUFFER_CREATED="hlsBufferCreated",t.BUFFER_APPENDING="hlsBufferAppending",t.BUFFER_APPENDED="hlsBufferAppended",t.BUFFER_EOS="hlsBufferEos",t.BUFFER_FLUSHING="hlsBufferFlushing",t.BUFFER_FLUSHED="hlsBufferFlushed",t.MANIFEST_LOADING="hlsManifestLoading",t.MANIFEST_LOADED="hlsManifestLoaded",t.MANIFEST_PARSED="hlsManifestParsed",t.LEVEL_SWITCHING="hlsLevelSwitching",t.LEVEL_SWITCHED="hlsLevelSwitched",t.LEVEL_LOADING="hlsLevelLoading",t.LEVEL_LOADED="hlsLevelLoaded",t.LEVEL_UPDATED="hlsLevelUpdated",t.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",t.LEVELS_UPDATED="hlsLevelsUpdated",t.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",t.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",t.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",t.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",t.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",t.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",t.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",t.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",t.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",t.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",t.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",t.CUES_PARSED="hlsCuesParsed",t.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",t.INIT_PTS_FOUND="hlsInitPtsFound",t.FRAG_LOADING="hlsFragLoading",t.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",t.FRAG_LOADED="hlsFragLoaded",t.FRAG_DECRYPTED="hlsFragDecrypted",t.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",t.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",t.FRAG_PARSING_METADATA="hlsFragParsingMetadata",t.FRAG_PARSED="hlsFragParsed",t.FRAG_BUFFERED="hlsFragBuffered",t.FRAG_CHANGED="hlsFragChanged",t.FPS_DROP="hlsFpsDrop",t.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",t.ERROR="hlsError",t.DESTROYING="hlsDestroying",t.KEY_LOADING="hlsKeyLoading",t.KEY_LOADED="hlsKeyLoaded",t.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",t.BACK_BUFFER_REACHED="hlsBackBufferReached"},function(e,t,i){"use strict";i.d(t,"a",function(){return n}),i.d(t,"b",function(){return a});var s=function(){},o={trace:s,debug:s,log:s,warn:s,info:s,error:s},r=o;function n(e){if(self.console&&!0===e||"object"==typeof e){!function(i){for(var e=arguments.length,t=new Array(1<e?e-1:0),o=1;o<e;o++)t[o-1]=arguments[o];t.forEach(function(e){var t;r[e]=i[e]?i[e].bind(i):(t=e,(e=self.console[t])?e.bind(self.console,"["+t+"] >"):s)})}(e,"debug","log","info","warn","error");try{r.log()}catch(e){r=o}}else r=o}var a=o},function(e,t,i){"use strict";var o,s;i.d(t,"b",function(){return o}),i.d(t,"a",function(){return s}),(t=o=o||{}).NETWORK_ERROR="networkError",t.MEDIA_ERROR="mediaError",t.KEY_SYSTEM_ERROR="keySystemError",t.MUX_ERROR="muxError",t.OTHER_ERROR="otherError",(t=s=s||{}).KEY_SYSTEM_NO_KEYS="keySystemNoKeys",t.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",t.KEY_SYSTEM_NO_SESSION="keySystemNoSession",t.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",t.KEY_SYSTEM_NO_INIT_DATA="keySystemNoInitData",t.MANIFEST_LOAD_ERROR="manifestLoadError",t.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",t.MANIFEST_PARSING_ERROR="manifestParsingError",t.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",t.LEVEL_EMPTY_ERROR="levelEmptyError",t.LEVEL_LOAD_ERROR="levelLoadError",t.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",t.LEVEL_SWITCH_ERROR="levelSwitchError",t.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",t.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",t.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",t.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",t.FRAG_LOAD_ERROR="fragLoadError",t.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",t.FRAG_DECRYPT_ERROR="fragDecryptError",t.FRAG_PARSING_ERROR="fragParsingError",t.REMUX_ALLOC_ERROR="remuxAllocError",t.KEY_LOAD_ERROR="keyLoadError",t.KEY_LOAD_TIMEOUT="keyLoadTimeOut",t.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",t.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",t.BUFFER_APPEND_ERROR="bufferAppendError",t.BUFFER_APPENDING_ERROR="bufferAppendingError",t.BUFFER_STALLED_ERROR="bufferStalledError",t.BUFFER_FULL_ERROR="bufferFullError",t.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",t.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",t.INTERNAL_EXCEPTION="internalException",t.INTERNAL_ABORTED="aborted",t.UNKNOWN="unknown"},function(e,t,i){"use strict";i.d(t,"a",function(){return o});var o=Number.isFinite||function(e){return"number"==typeof e&&isFinite(e)};Number.MAX_SAFE_INTEGER},function(e,t,i){"use strict";var o,s;i.d(t,"a",function(){return o}),i.d(t,"b",function(){return s}),(t=o=o||{}).MANIFEST="manifest",t.LEVEL="level",t.AUDIO_TRACK="audioTrack",t.SUBTITLE_TRACK="subtitleTrack",(t=s=s||{}).MAIN="main",t.AUDIO="audio",t.SUBTITLE="subtitle"},function(e,t,i){"use strict";i.d(t,"a",function(){return o}),i.d(t,"b",function(){return p}),i.d(t,"c",function(){return v});var o,s=i(3),r=i(11),n=i(1),a=i(17),l=i(12);function c(e,t){e.prototype=Object.create(t.prototype),d(e.prototype.constructor=e,t)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function h(e,t,i){return t&&u(e.prototype,t),i&&u(e,i),e}(i=o=o||{}).AUDIO="audio",i.VIDEO="video",i.AUDIOVIDEO="audiovideo";var f,i=(m.prototype.setByteRange=function(e,t){var i=e.split("@",2),e=[];1===i.length?e[0]=t?t.byteRangeEndOffset:0:e[0]=parseInt(i[1]),e[1]=parseInt(i[0])+e[0],this._byteRange=e},h(m,[{key:"byteRange",get:function(){return this._byteRange||[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"url",get:function(){return!this._url&&this.baseurl&&this.relurl&&(this._url=Object(r.buildAbsoluteURL)(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""},set:function(e){this._url=e}}]),m),p=function(i){function e(e,t){return(t=i.call(this,t)||this)._decryptdata=null,t.rawProgramDateTime=null,t.programDateTime=null,t.tagList=[],t.duration=0,t.sn=0,t.levelkey=void 0,t.type=void 0,t.loader=null,t.level=-1,t.cc=0,t.startPTS=void 0,t.endPTS=void 0,t.appendedPTS=void 0,t.startDTS=void 0,t.endDTS=void 0,t.start=0,t.deltaPTS=void 0,t.maxStartPTS=void 0,t.minEndPTS=void 0,t.stats=new l.a,t.urlId=0,t.data=void 0,t.bitrateTest=!1,t.title=null,t.initSegment=null,t.type=e,t}c(e,i);var t=e.prototype;return t.createInitializationVector=function(e){for(var t=new Uint8Array(16),i=12;i<16;i++)t[i]=e>>8*(15-i)&255;return t},t.setDecryptDataFromLevelKey=function(e,t){var i=e;return"AES-128"===(null==e?void 0:e.method)&&e.uri&&!e.iv&&((i=a.a.fromURI(e.uri)).method=e.method,i.iv=this.createInitializationVector(t),i.keyFormat="identity"),i},t.setElementaryStreamInfo=function(e,t,i,o,s,r){void 0===r&&(r=!1);var n=this.elementaryStreams,a=n[e];a?(a.startPTS=Math.min(a.startPTS,t),a.endPTS=Math.max(a.endPTS,i),a.startDTS=Math.min(a.startDTS,o),a.endDTS=Math.max(a.endDTS,s)):n[e]={startPTS:t,endPTS:i,startDTS:o,endDTS:s,partial:r}},t.clearElementaryStreamInfo=function(){var e=this.elementaryStreams;e[o.AUDIO]=null,e[o.VIDEO]=null,e[o.AUDIOVIDEO]=null},h(e,[{key:"decryptdata",get:function(){return this.levelkey||this._decryptdata?(!this._decryptdata&&this.levelkey&&("number"!=typeof(e=this.sn)&&(this.levelkey&&"AES-128"===this.levelkey.method&&!this.levelkey.iv&&n.b.warn('missing IV for initialization segment with method="'+this.levelkey.method+'" - compliance issue'),e=0),this._decryptdata=this.setDecryptDataFromLevelKey(this.levelkey,e)),this._decryptdata):null;var e}},{key:"end",get:function(){return this.start+this.duration}},{key:"endProgramDateTime",get:function(){if(null===this.programDateTime)return null;if(!Object(s.a)(this.programDateTime))return null;var e=Object(s.a)(this.duration)?this.duration:0;return this.programDateTime+1e3*e}},{key:"encrypted",get:function(){var e;return!(null===(e=this.decryptdata)||void 0===e||!e.keyFormat||!this.decryptdata.uri)}}]),e}(i),v=(c(g,f=i),h(g,[{key:"start",get:function(){return this.fragment.start+this.fragOffset}},{key:"end",get:function(){return this.start+this.duration}},{key:"loaded",get:function(){var e=this.elementaryStreams;return!!(e.audio||e.video||e.audiovideo)}}]),g);function g(e,t,i,o,s){(i=f.call(this,i)||this).fragOffset=0,i.duration=0,i.gap=!1,i.independent=!1,i.relurl=void 0,i.fragment=void 0,i.index=void 0,i.stats=new l.a,i.duration=e.decimalFloatingPoint("DURATION"),i.gap=e.bool("GAP"),i.independent=e.bool("INDEPENDENT"),i.relurl=e.enumeratedString("URI"),i.fragment=t,i.index=o;e=e.enumeratedString("BYTERANGE");return e&&i.setByteRange(e,s),s&&(i.fragOffset=s.fragOffset+s.duration),i}function m(e){var t;this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams=((t={})[o.AUDIO]=null,t[o.VIDEO]=null,t[o.AUDIOVIDEO]=null,t),this.baseurl=e}},function(e,t,i){"use strict";i.d(t,"b",function(){return y}),i.d(t,"g",function(){return b}),i.d(t,"f",function(){return s}),i.d(t,"d",function(){return a}),i.d(t,"c",function(){return l}),i.d(t,"e",function(){return u}),i.d(t,"h",function(){return h}),i.d(t,"a",function(){return f});var o=i(9),g=i(5),r=Math.pow(2,32)-1,c=[].push;function d(e){return String.fromCharCode.apply(null,e)}function m(e,t){"data"in e&&(t+=e.start,e=e.data);t=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3];return t<0?4294967296+t:t}function n(e,t,i){"data"in e&&(t+=e.start,e=e.data),e[t]=i>>24,e[t+1]=i>>16&255,e[t+2]=i>>8&255,e[t+3]=255&i}function y(e,t){var i,o,s,r=[];if(!t.length)return r;s="data"in e?(i=e.data,o=e.start,e.end):(o=0,(i=e).byteLength);for(var n=o;n<s;){var a=m(i,n),l=1<a?n+a:s;d(i.subarray(n+4,n+8))===t[0]&&(1===t.length?r.push({data:i,start:n+8,end:l}):(a=y({data:i,start:n+8,end:l},t.slice(1))).length&&c.apply(r,a)),n=l}return r}function b(e){var t=y(e,["moov"])[0],t=t?t.end:null,e=y(e,["sidx"]);if(!e||!e[0])return null;var i=[],o=e[0],e=o.data[0],s=0===e?8:16,r=m(o,s);s+=4,s+=0===e?8:16,s+=2;var n=o.end+0,a=function(e,t){"data"in e&&(t+=e.start,e=e.data);t=e[t]<<8|e[t+1];return t<0?65536+t:t}(o,s);s+=2;for(var l=0;l<a;l++){var c=s,d=m(o,c);c+=4;var u=2147483647&d;if(1==(2147483648&d)>>>31)return console.warn("SIDX has hierarchical references (not supported)"),null;d=m(o,c);c+=4,i.push({referenceSize:u,subsegmentDuration:d,info:{duration:d/r,start:n,end:n+u-1}}),n+=u,s=c+=4}return{earliestPresentationTime:0,timescale:r,version:e,referencesCount:a,references:i,moovEndOffset:t}}function s(e){for(var i=[],t=y(e,["moov","trak"]),o=0;o<t.length;o++){var s,r,n,a=t[o],l=y(a,["tkhd"])[0];l&&(s=m(l,0===l.data[l.start]?12:20),(n=y(a,["mdia","mdhd"])[0])&&(r=m(n,0===n.data[n.start]?12:20),(l=y(a,["mdia","hdlr"])[0])&&(n=d(l.data.subarray(l.start+8,l.start+12)),(l={soun:g.a.AUDIO,vide:g.a.VIDEO}[n])&&(n=void 0,(a=y(a,["mdia","minf","stbl","stsd"])[0])&&(n=d(a.data.subarray(a.start+12,a.start+16))),i[s]={timescale:r,type:l},i[l]={timescale:r,id:s,codec:n}))))}return y(e,["moov","mvex","trex"]).forEach(function(e){var t=m(e,4),t=i[t];t&&(t.default={duration:m(e,12),flags:m(e,20)})}),i}function a(r,e){return y(e,["moof","traf"]).reduce(function(e,t){var o=y(t,["tfdt"])[0],s=o.data[o.start],t=y(t,["tfhd"]).reduce(function(e,t){var i=m(t,4),t=r[i];if(t){i=m(o,4);1===s&&(i*=Math.pow(2,32),i+=m(o,8));t=i/(t.timescale||9e4);if(isFinite(t)&&(null===e||t<e))return t}return e},null);return null!==t&&isFinite(t)&&(null===e||t<e)?t:e},null)||0}function l(e,t){for(var i=0,o=0,s=0,r=y(e,["moof","traf"]),n=0;n<r.length;n++){var a=r[n],l=y(a,["tfhd"])[0],c=t[m(l,4)];if(c){var d=c.default,u=m(l,0)|(null==d?void 0:d.flags),h=null==d?void 0:d.duration;8&u&&(h=m(l,2&u?12:8));for(var f=c.timescale||9e4,p=y(a,["trun"]),v=0;v<p.length;v++)i=h?h*m(p[v],4):function(e){var t=m(e,0),i=8;1&t&&(i+=4),4&t&&(i+=4);for(var o=0,s=m(e,4),r=0;r<s;r++)256&t&&(o+=m(e,i),i+=4),512&t&&(i+=4),1024&t&&(i+=4),2048&t&&(i+=4);return o}(p[v]),c.type===g.a.VIDEO?o+=i/f:c.type===g.a.AUDIO&&(s+=i/f)}}if(0===o&&0===s){e=b(e);if(null!=e&&e.references)return e.references.reduce(function(e,t){return e+t.info.duration||0},0)}return o||s}function u(i,e,s){y(e,["moof","traf"]).forEach(function(t){y(t,["tfhd"]).forEach(function(e){var o,e=m(e,4),e=i[e];e&&(o=e.timescale||9e4,y(t,["tfdt"]).forEach(function(e){var t=e.data[e.start],i=m(e,4);0===t?n(e,4,i-s*o):(i*=Math.pow(2,32),i+=m(e,8),i-=s*o,i=Math.max(i,0),t=Math.floor(i/(r+1)),i=Math.floor(i%(r+1)),n(e,4,t),n(e,8,i))}))})})}function h(e){var t={valid:null,remainder:null},i=y(e,["moof"]);if(!i)return t;if(i.length<2)return t.remainder=e,t;i=i[i.length-1];return t.valid=Object(o.a)(e,0,i.start-8),t.remainder=Object(o.a)(e,i.start-8),t}function f(e,t){var i=new Uint8Array(e.length+t.length);return i.set(e),i.set(t,e.length),i}},function(e,t,i){"use strict";i.d(t,"b",function(){return o}),i.d(t,"a",function(){return s}),i.d(t,"d",function(){return r}),i.d(t,"e",function(){return n}),i.d(t,"c",function(){return a}),i.d(t,"f",function(){return m});function l(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128}function c(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128}var d,o=function(e,t){for(var i=t,o=0;l(e,t);)o+=10,o+=u(e,t+6),c(e,t+10)&&(o+=10),t+=o;if(0<o)return e.subarray(i,i+o)},u=function(e,t){var i=0,i=(127&e[t])<<21;return i|=(127&e[t+1])<<14,(i|=(127&e[t+2])<<7)|127&e[t+3]},s=function(e,t){return l(e,t)&&u(e,t+6)+10<=e.length-t},r=function(e){for(var t=a(e),i=0;i<t.length;i++){var o=t[i];if(n(o))return g(o)}},n=function(e){return e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info},a=function(e){for(var t,i=0,o=[];l(e,i);){for(var s=u(e,i+6),r=(i+=10)+s;i+8<r;){var n=(n=e.subarray(i),a=t=void 0,t=String.fromCharCode(n[0],n[1],n[2],n[3]),a=u(n,4),{type:t,size:a,data:n.subarray(10,10+a)}),a=h(n);a&&o.push(a),i+=n.size+10}c(e,i)&&(i+=10)}return o},h=function(e){return("PRIV"===e.type?f:"W"===e.type[0]?v:p)(e)},f=function(e){if(!(e.size<2)){var t=m(e.data,!0),i=new Uint8Array(e.data.subarray(t.length+1));return{key:e.type,info:t,data:i.buffer}}},p=function(e){if(!(e.size<2)){if("TXXX"===e.type){var t=1,i=m(e.data.subarray(1),!0);t+=i.length+1;t=m(e.data.subarray(t));return{key:e.type,info:i,data:t}}t=m(e.data.subarray(1));return{key:e.type,data:t}}},v=function(e){if("WXXX"===e.type){if(e.size<2)return;var t=1,i=m(e.data.subarray(1),!0);t+=i.length+1;t=m(e.data.subarray(t));return{key:e.type,info:i,data:t}}t=m(e.data);return{key:e.type,data:t}},g=function(e){if(8===e.data.byteLength){var t=new Uint8Array(e.data),e=1&t[3],t=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return t/=45,e&&(t+=47721858.84),Math.round(t)}},m=function(e,t){void 0===t&&(t=!1);var i=(d||void 0===self.TextDecoder||(d=new self.TextDecoder("utf-8")),d);if(i){var o=i.decode(e);if(t){i=o.indexOf("\0");return-1!==i?o.substring(0,i):o}return o.replace(/\0/g,"")}for(var s,r,n,a=e.length,l="",c=0;c<a;){if(0===(s=e[c++])&&t)return l;if(0!==s&&3!==s)switch(s>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:l+=String.fromCharCode(s);break;case 12:case 13:r=e[c++],l+=String.fromCharCode((31&s)<<6|63&r);break;case 14:r=e[c++],n=e[c++],l+=String.fromCharCode((15&s)<<12|(63&r)<<6|(63&n)<<0)}}return l}},function(e,t,i){"use strict";function s(e,t,i,o){void 0===i&&(i=1),void 0===o&&(o=!1);i*=e*t;return o?Math.round(i):i}function o(e,t,i,o){return void 0===i&&(i=1),void 0===o&&(o=!1),s(e,t,1/i,o)}function r(e,t){return void 0===t&&(t=!1),s(e,1e3,1/9e4,t)}function n(e,t){return void 0===t&&(t=1),s(e,9e4,1/t)}i.d(t,"c",function(){return o}),i.d(t,"b",function(){return r}),i.d(t,"a",function(){return n})},function(e,t,i){"use strict";function o(e,t,i){return Uint8Array.prototype.slice?e.slice(t,i):new Uint8Array(Array.prototype.slice.call(e,t,i))}i.d(t,"a",function(){return o})},function(e,t,i){"use strict";i.d(t,"c",function(){return ie}),i.d(t,"d",function(){return re}),i.d(t,"a",function(){return ne}),i.d(t,"b",function(){return ae});var S=i(0),L=i(2),o=i(15),u=i(3),C=i(7),O=i(6),h=i(9),s=((G=n.prototype).resetInitSegment=function(e,t,i){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}},G.resetTimeStamp=function(){},G.resetContiguity=function(){},G.canParse=function(e,t){return!1},G.appendFrame=function(e,t,i){},G.demux=function(e,t){this.cachedData&&(e=Object(O.a)(this.cachedData,e),this.cachedData=null);var i,o,s,r=C.b(e,0),n=r?r.length:0,a=this._audioTrack,l=this._id3Track,c=r?C.d(r):void 0,d=e.length;for(0!==this.frameIndex&&null!==this.initPTS||(this.initPTS=f(c,t)),r&&0<r.length&&l.samples.push({pts:this.initPTS,dts:this.initPTS,data:r}),o=this.initPTS;n<d;)this.canParse(e,n)?(s=this.appendFrame(a,e,n))?(this.frameIndex++,o=s.sample.pts,i=n+=s.length):n=d:C.a(e,n)?(r=C.b(e,n),l.samples.push({pts:o,dts:o,data:r}),i=n+=r.length):n++,n===d&&i!==d&&(s=Object(h.a)(e,i),this.cachedData?this.cachedData=Object(O.a)(this.cachedData,s):this.cachedData=s);return{audioTrack:a,avcTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0},id3Track:l,textTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0}}},G.demuxSampleAes=function(e,t,i){return Promise.reject(new Error("["+this+"] This demuxer does not support Sample-AES decryption"))},G.flush=function(e){var t=this.cachedData;return t&&(this.cachedData=null,this.demux(t,0)),this.frameIndex=0,{audioTrack:this._audioTrack,avcTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0},id3Track:this._id3Track,textTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0}}},G.destroy=function(){},n),f=function(e,t){return Object(u.a)(e)?90*e:9e4*t},r=s,P=i(1);function n(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.initPTS=null}function a(e,t){return 255===e[t]&&240==(246&e[t+1])}function d(e,t){return 1&e[t+1]?7:9}function p(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function v(e,t){return t+1<e.length&&a(e,t)}function g(e,t,i,o,s){e.samplerate||(s=function(e,t,i,o){var s,r,n=navigator.userAgent.toLowerCase(),a=o,l=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],c=1+((192&t[i+2])>>>6),d=(60&t[i+2])>>>2;if(!(l.length-1<d))return s=(1&t[i+2])<<2,s|=(192&t[i+3])>>>6,P.b.log("manifest codec:"+o+", ADTS type:"+c+", samplingIndex:"+d),o=/firefox/i.test(n)?6<=d?(c=5,r=new Array(4),d-3):(c=2,r=new Array(2),d):-1!==n.indexOf("android")?(c=2,r=new Array(2),d):(c=5,r=new Array(4),o&&(-1!==o.indexOf("mp4a.40.29")||-1!==o.indexOf("mp4a.40.5"))||!o&&6<=d?d-3:((o&&-1!==o.indexOf("mp4a.40.2")&&(6<=d&&1==s||/vivaldi/i.test(n))||!o&&1==s)&&(c=2,r=new Array(2)),d)),r[0]=c<<3,r[0]|=(14&d)>>1,r[1]|=(1&d)<<7,r[1]|=s<<3,5===c&&(r[1]|=(14&o)>>1,r[2]=(1&o)<<7,r[2]|=8,r[3]=0),{config:r,samplerate:l[d],channelCount:s,codec:"mp4a.40."+c,manifestCodec:a};e.trigger(S.a.ERROR,{type:L.b.MEDIA_ERROR,details:L.a.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+d})}(t,i,o,s))&&(e.config=s.config,e.samplerate=s.samplerate,e.channelCount=s.channelCount,e.codec=s.codec,e.manifestCodec=s.manifestCodec,P.b.log("parsed codec:"+e.codec+", rate:"+s.samplerate+", channels:"+s.channelCount))}function m(e){return 9216e4/e}function y(e,o,s,r,n){var t=function(e){var t=d(o,s),i=p(o,s);if(0<(i-=t))return{headerLength:t,frameLength:i,stamp:r+n*e}}(m(e.samplerate));if(t){var i,a=t.frameLength,l=t.headerLength,c=t.stamp,t=l+a,a=Math.max(0,s+t-o.length);a?(i=new Uint8Array(t-l)).set(o.subarray(s+l,o.length),0):i=o.subarray(s+l,s+t);c={unit:i,pts:c};return a||e.samples.push(c),{sample:c,length:t,missing:a}}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(o){var e;function t(e,t){var i;return(i=o.call(this)||this).observer=void 0,i.config=void 0,i.observer=e,i.config=t,i}i=o,(e=t).prototype=Object.create(i.prototype),l(e.prototype.constructor=e,i);var i=t.prototype;return i.resetInitSegment=function(e,t,i){o.prototype.resetInitSegment.call(this,e,t,i),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,isAAC:!0,samples:[],manifestCodec:e,duration:i,inputTimeScale:9e4,dropped:0}},t.probe=function(e){if(!e)return!1;for(var t=(C.b(e,0)||[]).length,i=e.length;t<i;t++)if(function(e,t){if(v(e,t)){var i=d(e,t);if(t+i>=e.length)return;var o=p(e,t);if(o<=i)return;o=t+o;return o===e.length||v(e,o)}}(e,t))return P.b.log("ADTS sync word found !"),!0;return!1},i.canParse=function(e,t){return(t=t)+5<(e=e).length&&a(e,t)&&p(e,t)<=e.length-t},i.appendFrame=function(e,t,i){g(e,this.observer,t,i,e.manifestCodec);i=y(e,t,i,this.initPTS,this.frameIndex);if(i&&0===i.missing)return i},t}(r);c.minProbeByteLength=9;t=c,(G=b.prototype).resetTimeStamp=function(){},G.resetInitSegment=function(){},G.resetContiguity=function(){},b.probe=function(e){return 0<Object(O.b)({data:e,start:0,end:Math.min(e.length,16384)},["moof"]).length},G.demux=function(e){var t=e,i={type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0};return this.config.progressive?(this.remainderData&&(t=Object(O.a)(this.remainderData,e)),e=Object(O.h)(t),this.remainderData=e.remainder,i.samples=e.valid||new Uint8Array):i.samples=t,{audioTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0},avcTrack:i,id3Track:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0},textTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0}}},G.flush=function(){var e={type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0};return e.samples=this.remainderData||new Uint8Array,this.remainderData=null,{audioTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0},avcTrack:e,id3Track:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0},textTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0}}},G.demuxSampleAes=function(e,t,i){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))},G.destroy=function(){},s=b;function b(e,t){this.remainderData=null,this.config=void 0,this.config=t}s.minProbeByteLength=1024;var w=s,k=null,x=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],A=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],T=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],_=[0,1,1,4];function j(e,t,i,o,s){if(!(i+24>t.length)){var r=E(t,i);if(r&&i+r.frameLength<=t.length){s=o+s*(9e4*r.samplesPerFrame/r.sampleRate),s={unit:t.subarray(i,i+r.frameLength),pts:s,dts:s};return e.config=[],e.channelCount=r.channelCount,e.samplerate=r.sampleRate,e.samples.push(s),{sample:s,length:r.frameLength,missing:0}}}}function E(e,t){var i=e[t+1]>>3&3,o=e[t+1]>>1&3,s=e[t+2]>>4&15,r=e[t+2]>>2&3;if(1!=i&&0!=s&&15!=s&&3!=r){var n=e[t+2]>>1&1,a=e[t+3]>>6,l=1e3*x[14*(3==i?3-o:3==o?3:4)+s-1],c=A[3*(3==i?0:2==i?1:2)+r],d=3==a?1:2,s=T[i][o],r=_[o],i=8*s*r,n=Math.floor(s*l/c+n)*r;return null===k&&(r=(navigator.userAgent||"").match(/Chrome\/(\d+)/i),k=r?parseInt(r[1]):0),k&&k<=87&&2==o&&224e3<=l&&0==a&&(e[t+3]=128|e[t+3]),{sampleRate:c,channelCount:d,frameLength:n,samplesPerFrame:i}}}function I(e,t){return 255===e[t]&&224==(224&e[t+1])&&0!=(6&e[t+1])}function M(e,t){return t+1<e.length&&I(e,t)}var B=((c=F.prototype).loadWord=function(){var e=this.data,t=this.bytesAvailable,i=e.byteLength-t,o=new Uint8Array(4),t=Math.min(4,t);if(0===t)throw new Error("no bytes available");o.set(e.subarray(i,i+t)),this.word=new DataView(o.buffer).getUint32(0),this.bitsAvailable=8*t,this.bytesAvailable-=t},c.skipBits=function(e){var t;this.bitsAvailable>e||(e-=this.bitsAvailable,e-=(t=e>>3)>>3,this.bytesAvailable-=t,this.loadWord()),this.word<<=e,this.bitsAvailable-=e},c.readBits=function(e){var t=Math.min(this.bitsAvailable,e),i=this.word>>>32-t;return 32<e&&P.b.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,0<this.bitsAvailable?this.word<<=t:0<this.bytesAvailable&&this.loadWord(),0<(t=e-t)&&this.bitsAvailable?i<<t|this.readBits(t):i},c.skipLZ=function(){for(var e=0;e<this.bitsAvailable;++e)if(0!=(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()},c.skipUEG=function(){this.skipBits(1+this.skipLZ())},c.skipEG=function(){this.skipBits(1+this.skipLZ())},c.readUEG=function(){var e=this.skipLZ();return this.readBits(e+1)-1},c.readEG=function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)},c.readBoolean=function(){return 1===this.readBits(1)},c.readUByte=function(){return this.readBits(8)},c.readUShort=function(){return this.readBits(16)},c.readUInt=function(){return this.readBits(32)},c.skipScalingList=function(e){for(var t=8,i=8,o=0;o<e;o++)0!==i&&(i=(t+this.readEG()+256)%256),t=0===i?t:i},c.readSPS=function(){var e,t,i,o=0,s=0,r=0,n=0,a=this.readUByte.bind(this),l=this.readBits.bind(this),c=this.readUEG.bind(this),d=this.readBoolean.bind(this),u=this.skipBits.bind(this),h=this.skipEG.bind(this),f=this.skipUEG.bind(this),p=this.skipScalingList.bind(this);a();var v=a();if(l(5),u(3),a(),f(),100===v||110===v||122===v||244===v||44===v||83===v||86===v||118===v||128===v){var g=c();if(3===g&&u(1),f(),f(),u(1),d())for(t=3!==g?8:12,i=0;i<t;i++)d()&&p(i<6?16:64)}f();g=c();if(0===g)c();else if(1===g)for(u(1),h(),h(),e=c(),i=0;i<e;i++)h();f(),u(1);g=c(),f=c(),l=l(1);0===l&&u(1),u(1),d()&&(o=c(),s=c(),r=c(),n=c());var m=[1,1];if(d()&&d())switch(a()){case 1:m=[1,1];break;case 2:m=[12,11];break;case 3:m=[10,11];break;case 4:m=[16,11];break;case 5:m=[40,33];break;case 6:m=[24,11];break;case 7:m=[20,11];break;case 8:m=[32,11];break;case 9:m=[80,33];break;case 10:m=[18,11];break;case 11:m=[15,11];break;case 12:m=[64,33];break;case 13:m=[160,99];break;case 14:m=[4,3];break;case 15:m=[3,2];break;case 16:m=[2,1];break;case 255:m=[a()<<8|a(),a()<<8|a()]}return{width:Math.ceil(16*(g+1)-2*o-2*s),height:(2-l)*(f+1)*16-(l?2:4)*(r+n),pixelRatio:m}},c.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},F),D=((G=N.prototype).decryptBuffer=function(e,t){this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer,t)},G.decryptAacSample=function(t,i,o,s){var r=t[i].unit,e=r.subarray(16,r.length-r.length%16),e=e.buffer.slice(e.byteOffset,e.byteOffset+e.length),n=this;this.decryptBuffer(e,function(e){e=new Uint8Array(e);r.set(e,16),s||n.decryptAacSamples(t,i+1,o)})},G.decryptAacSamples=function(e,t,i){for(;;t++){if(t>=e.length)return void i();if(!(e[t].unit.length<32)){var o=this.decrypter.isSync();if(this.decryptAacSample(e,t,i,o),!o)return}}},G.getAvcEncryptedData=function(e){for(var t=16*Math.floor((e.length-48)/160)+16,i=new Int8Array(t),o=0,s=32;s<=e.length-16;s+=160,o+=16)i.set(e.subarray(s,s+16),o);return i},G.getAvcDecryptedUnit=function(e,t){for(var i=new Uint8Array(t),o=0,s=32;s<=e.length-16;s+=160,o+=16)e.set(i.subarray(o,o+16),s);return e},G.decryptAvcSample=function(t,i,o,s,r,n){var a=U(r.data),e=this.getAvcEncryptedData(a),l=this;this.decryptBuffer(e.buffer,function(e){r.data=l.getAvcDecryptedUnit(a,e),n||l.decryptAvcSamples(t,i,o+1,s)})},G.decryptAvcSamples=function(e,t,i,o){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;t++,i=0){if(t>=e.length)return void o();for(var s=e[t].units;!(i>=s.length);i++){var r=s[i];if(!(r.data.length<=48||1!==r.type&&5!==r.type)){var n=this.decrypter.isSync();if(this.decryptAvcSample(e,t,i,o,r,n),!n)return}}}},N),R={video:1,audio:2,id3:3,text:4},s=function(){function E(e,t,i){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this.aacLastPTS=null,this._initPTS=null,this._initDTS=null,this._pmtId=-1,this._avcTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.observer=e,this.config=t,this.typeSupported=i}E.probe=function(e){e=E.syncOffset(e);return!(e<0||(e&&P.b.warn("MPEG2-TS detected but first sync word found @ offset "+e+", junk ahead ?"),0))},E.syncOffset=function(e){for(var t=Math.min(1e3,e.length-564),i=0;i<t;){if(71===e[i]&&71===e[i+188]&&71===e[i+376])return i;i++}return-1},E.createTrack=function(e,t){return{container:"video"===e||"audio"===e?"video/mp2t":void 0,type:e,id:R[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:"audio"===e?t:void 0}};var e=E.prototype;return e.resetInitSegment=function(e,t,i){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=E.createTrack("video",i),this._audioTrack=E.createTrack("audio",i),this._id3Track=E.createTrack("id3",i),this._txtTrack=E.createTrack("text",i),this._audioTrack.isAAC=!0,this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=e,this.videoCodec=t,this._duration=i},e.resetTimeStamp=function(){},e.resetContiguity=function(){var e=this._audioTrack,t=this._avcTrack,i=this._id3Track;e&&(e.pesData=null),t&&(t.pesData=null),i&&(i.pesData=null),this.aacOverFlow=null,this.aacLastPTS=null},e.demux=function(e,t,i,o){var s;void 0===i&&(i=!1),void 0===o&&(o=!1),i||(this.sampleAes=null);var r=this._avcTrack,n=this._audioTrack,a=this._id3Track,l=r.pid,c=r.pesData,d=n.pid,u=a.pid,h=n.pesData,f=a.pesData,p=!1,v=this.pmtParsed,g=this._pmtId,m=e.length;if(this.remainderData&&(m=(e=Object(O.a)(this.remainderData,e)).length,this.remainderData=null),m<188&&!o)return this.remainderData=e,{audioTrack:n,avcTrack:r,id3Track:a,textTrack:this._txtTrack};var y=Math.max(0,E.syncOffset(e));(m-=(m+y)%188)<e.byteLength&&!o&&(this.remainderData=new Uint8Array(e.buffer,m,e.buffer.byteLength-m));for(var b,w=y;w<m;w+=188)if(71===e[w]){var k=!!(64&e[w+1]),x=((31&e[w+1])<<8)+e[w+2],A=void 0;if(1<(48&e[w+3])>>4){if((A=w+5+e[w+4])===w+188)continue}else A=w+4;switch(x){case l:k&&(c&&(s=z(c))&&this.parseAVCPES(s,!1),c={data:[],size:0}),c&&(c.data.push(e.subarray(A,w+188)),c.size+=w+188-A);break;case d:k&&(h&&(s=z(h))&&(n.isAAC?this.parseAACPES(s):this.parseMPEGPES(s)),h={data:[],size:0}),h&&(h.data.push(e.subarray(A,w+188)),h.size+=w+188-A);break;case u:k&&(f&&(s=z(f))&&this.parseID3PES(s),f={data:[],size:0}),f&&(f.data.push(e.subarray(A,w+188)),f.size+=w+188-A);break;case 0:k&&(A+=e[A]+1),g=this._pmtId=(31&(b=e)[(T=A)+10])<<8|b[T+11];break;case g:k&&(A+=e[A]+1);var T=function(e,t,i,o){var s={audio:-1,avc:-1,id3:-1,isAAC:!0},r=t+3+((15&e[t+1])<<8|e[t+2])-4;for(t+=12+((15&e[t+10])<<8|e[t+11]);t<r;){var n=(31&e[t+1])<<8|e[t+2];switch(e[t]){case 207:if(!o){P.b.log("ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:-1===s.audio&&(s.audio=n);break;case 21:-1===s.id3&&(s.id3=n);break;case 219:if(!o){P.b.log("H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:-1===s.avc&&(s.avc=n);break;case 3:case 4:i?-1===s.audio&&(s.audio=n,s.isAAC=!1):P.b.log("MPEG audio found, not supported in this browser");break;case 36:P.b.warn("Unsupported HEVC stream type found")}t+=5+((15&e[t+3])<<8|e[t+4])}return s}(e,A,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,i);0<(l=T.avc)&&(r.pid=l),0<(d=T.audio)&&(n.pid=d,n.isAAC=T.isAAC),0<(u=T.id3)&&(a.pid=u),p&&!v&&(P.b.log("reparse from beginning"),p=!1,w=y-188),v=this.pmtParsed=!0;break;case 17:case 8191:break;default:p=!0}}else this.observer.emit(S.a.ERROR,S.a.ERROR,{type:L.b.MEDIA_ERROR,details:L.a.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});r.pesData=c,n.pesData=h,a.pesData=f;var _={audioTrack:n,avcTrack:r,id3Track:a,textTrack:this._txtTrack};return o&&this.extractRemainingSamples(_),_},e.flush=function(){var e=this.remainderData;return this.remainderData=null,e=e?this.demux(e,-1,!1,!0):{audioTrack:this._audioTrack,avcTrack:this._avcTrack,textTrack:this._txtTrack,id3Track:this._id3Track},this.extractRemainingSamples(e),this.sampleAes?this.decrypt(e,this.sampleAes):e},e.extractRemainingSamples=function(e){var t,i=e.audioTrack,o=e.avcTrack,s=e.id3Track,r=o.pesData,n=i.pesData,e=s.pesData;r&&(t=z(r))?(this.parseAVCPES(t,!0),o.pesData=null):o.pesData=r,n&&(t=z(n))?(i.isAAC?this.parseAACPES(t):this.parseMPEGPES(t),i.pesData=null):(null!=n&&n.size&&P.b.log("last AAC PES packet truncated,might overlap between fragments"),i.pesData=n),e&&(t=z(e))?(this.parseID3PES(t),s.pesData=null):s.pesData=e},e.demuxSampleAes=function(e,t,i){i=this.demux(e,i,!0,!this.config.progressive),t=this.sampleAes=new D(this.observer,this.config,t);return this.decrypt(i,t)},e.decrypt=function(o,s){return new Promise(function(e){var t=o.audioTrack,i=o.avcTrack;t.samples&&t.isAAC?s.decryptAacSamples(t.samples,0,function(){i.samples?s.decryptAvcSamples(i.samples,0,0,function(){e(o)}):e(o)}):i.samples&&s.decryptAvcSamples(i.samples,0,0,function(){e(o)})})},e.destroy=function(){this._initPTS=this._initDTS=null,this._duration=0},e.parseAVCPES=function(x,e){var A,T=this,_=this._avcTrack,t=this.parseAVCNALu(x.data),E=this.avcSample,S=!1;x.data=null,E&&t.length&&!_.audFound&&(q(E,_),E=this.avcSample=H(!1,x.pts,x.dts,"")),t.forEach(function(e){switch(e.type){case 1:A=!0,(E=E||(T.avcSample=H(!0,x.pts,x.dts,""))).frame=!0;var t=e.data;S&&4<t.length&&(2!==(m=new B(t).readSliceType())&&4!==m&&7!==m&&9!==m||(E.key=!0));break;case 5:A=!0,(E=E||(T.avcSample=H(!0,x.pts,x.dts,""))).key=!0,E.frame=!0;break;case 6:A=!0;var i=new B(U(e.data));i.readUByte();for(var o=0,s=0,r=!1,n=0;!r&&1<i.bytesAvailable;){for(o=0;o+=n=i.readUByte(),255===n;);for(s=0;s+=n=i.readUByte(),255===n;);if(4===o&&0!==i.bytesAvailable){if(r=!0,181===i.readUByte()&&49===i.readUShort()&&1195456820===i.readUInt()&&3===i.readUByte()){for(var a=i.readUByte(),l=31&a,c=[a,i.readUByte()],d=0;d<l;d++)c.push(i.readUByte()),c.push(i.readUByte()),c.push(i.readUByte());X(T._txtTrack.samples,{type:3,pts:x.pts,bytes:c})}}else if(5===o&&0!==i.bytesAvailable){if(r=!0,16<s){for(var u=[],h=0;h<16;h++)u.push(i.readUByte().toString(16)),3!==h&&5!==h&&7!==h&&9!==h||u.push("-");for(var f=s-16,p=new Uint8Array(f),v=0;v<f;v++)p[v]=i.readUByte();X(T._txtTrack.samples,{pts:x.pts,payloadType:o,uuid:u.join(""),userData:Object(C.f)(p),userDataBytes:p})}}else if(s<i.bytesAvailable)for(var g=0;g<s;g++)i.readUByte()}break;case 7:if(S=A=!0,!_.sps){var m=new B(e.data).readSPS();_.width=m.width,_.height=m.height,_.pixelRatio=m.pixelRatio,_.sps=[e.data],_.duration=T._duration;for(var y=e.data.subarray(1,4),b="avc1.",w=0;w<3;w++){var k=y[w].toString(16);k.length<2&&(k="0"+k),b+=k}_.codec=b}break;case 8:A=!0,_.pps||(_.pps=[e.data]);break;case 9:A=!1,_.audFound=!0,E&&q(E,_),E=T.avcSample=H(!1,x.pts,x.dts,"");break;case 12:A=!1;break;default:A=!1,E&&(E.debug+="unknown NAL "+e.type+" ")}E&&A&&E.units.push(e)}),e&&E&&(q(E,_),this.avcSample=null)},e.getLastNalUnit=function(){var e,t,i=this.avcSample;return i&&0!==i.units.length||(i=(e=this._avcTrack.samples)[e.length-1]),null!==i&&void 0!==i&&i.units&&(t=(t=i.units)[t.length-1]),t},e.parseAVCNALu=function(e){var t,i,o,s,r,n,a=e.byteLength,l=this._avcTrack,c=l.naluState||0,d=c,u=[],h=0,f=-1,p=0;for(-1===c&&(p=31&e[f=0],c=0,h=1);h<a;)t=e[h++],c=c?1!==c?t?1===t?(0<=f?(s={data:e.subarray(f,h-c-1),type:p},u.push(s)):(o=this.getLastNalUnit())&&(d&&h<=4-d&&o.state&&(o.data=o.data.subarray(0,o.data.byteLength-d)),0<(i=h-c-1))&&((s=new Uint8Array(o.data.byteLength+i)).set(o.data,0),s.set(e.subarray(0,i),o.data.byteLength),o.data=s,o.state=0),h<a?(p=31&e[f=h],0):-1):0:3:t?0:2:t?0:1;return 0<=f&&0<=c&&(n={data:e.subarray(f,a),type:p,state:c},u.push(n)),0!==u.length||(r=this.getLastNalUnit())&&((n=new Uint8Array(r.data.byteLength+e.byteLength)).set(r.data,0),n.set(e,r.data.byteLength),r.data=n),l.naluState=c,u},e.parseAACPES=function(e){var t,i,o,s,r,n=0,a=this._audioTrack,l=this.aacOverFlow,c=e.data;for(l&&(this.aacOverFlow=null,r=(r=l.sample.unit.byteLength)-(s=Math.min(l.missing,r)),l.sample.unit.set(c.subarray(0,s),r),a.samples.push(l.sample),n=l.missing),t=n,i=c.length;t<i-1&&!v(c,t);t++);if(t===n||(n=t<i-1?(o="AAC PES did not start with ADTS header,offset:"+t,!1):(o="no ADTS header found in AAC PES",!0),P.b.warn("parsing error:"+o),this.observer.emit(S.a.ERROR,S.a.ERROR,{type:L.b.MEDIA_ERROR,details:L.a.FRAG_PARSING_ERROR,fatal:n,reason:o}),!n)){if(g(a,this.observer,c,t,this.audioCodec),void 0!==e.pts)d=e.pts;else{if(!l)return void P.b.warn("[tsdemuxer]: AAC PES unknown PTS");var e=m(a.samplerate),d=l.sample.pts+e}for(var u=0;t<i;){if(v(c,t)){if(t+5<i){var h=y(a,c,t,d,u);if(h){if(!h.missing){t+=h.length,u++;continue}this.aacOverFlow=h}}break}t++}}},e.parseMPEGPES=function(e){var t=e.data,i=t.length,o=0,s=0,r=e.pts;if(void 0!==r)for(;s<i;)if(M(t,s)){var n=j(this._audioTrack,t,s,r,o);if(!n)break;s+=n.length,o++}else s++;else P.b.warn("[tsdemuxer]: MPEG PES unknown PTS")},e.parseID3PES=function(e){void 0!==e.pts?this._id3Track.samples.push(e):P.b.warn("[tsdemuxer]: ID3 PES unknown PTS")},E}();function N(e,t,i){this.keyData=void 0,this.decrypter=void 0,this.keyData=i,this.decrypter=new o.a(e,t,{removePKCS7Padding:!1})}function F(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}function H(e,t,i,o){return{key:e,frame:!1,pts:t,dts:i,units:[],debug:o,length:0}}function z(e){var t,i,o,s,r=0,n=e.data;if(!e||0===e.size)return null;for(;n[0].length<19&&1<n.length;){var a=new Uint8Array(n[0].length+n[1].length);a.set(n[0]),a.set(n[1],n[0].length),n[0]=a,n.splice(1,1)}if(1!==((t=n[0])[0]<<16)+(t[1]<<8)+t[2])return null;if((i=(t[4]<<8)+t[5])&&i>e.size-6)return null;var l=t[7];192&l&&(o=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2,64&l?54e5<o-(s=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2)&&(P.b.warn(Math.round((o-s)/9e4)+"s delta between PTS and DTS, align them"),o=s):s=o);var c=(l=t[8])+9;if(e.size<=c)return null;e.size-=c;for(var d=new Uint8Array(e.size),u=0,h=n.length;u<h;u++){var f=(t=n[u]).byteLength;if(c){if(f<c){c-=f;continue}t=t.subarray(c),f-=c,c=0}d.set(t,r),r+=f}return i&&(i-=l+3),{data:d,pts:o,dts:s,len:i}}function q(e,t){if(e.units.length&&e.frame){if(void 0===e.pts){var i=t.samples,o=i.length;if(!o)return t.dropped++,0;o=i[o-1];e.pts=o.pts,e.dts=o.dts}t.samples.push(e)}e.debug.length&&P.b.log(e.pts+"/"+e.dts+":"+e.debug)}function X(e,t){var i=e.length;if(0<i){if(t.pts>=e[i-1].pts)e.push(t);else for(var o=i-1;0<=o;o--)if(t.pts<e[o].pts){e.splice(o,0,t);break}}else e.push(t)}function U(e){for(var t=e.byteLength,i=[],o=1;o<t-2;)0===e[o]&&0===e[o+1]&&3===e[o+2]?(i.push(o+2),o+=2):o++;if(0===i.length)return e;for(var s=t-i.length,r=new Uint8Array(s),n=0,o=0;o<s;n++,o++)n===i[0]&&(n++,i.shift()),r[o]=e[n];return r}s.minProbeByteLength=188;c=s;function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var G=function(o){var e;function t(){return o.apply(this,arguments)||this}i=o,(e=t).prototype=Object.create(i.prototype),V(e.prototype.constructor=e,i);var i=t.prototype;return i.resetInitSegment=function(e,t,i){o.prototype.resetInitSegment.call(this,e,t,i),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,isAAC:!1,samples:[],manifestCodec:e,duration:i,inputTimeScale:9e4,dropped:0}},t.probe=function(e){if(!e)return!1;for(var t=(C.b(e,0)||[]).length,i=e.length;t<i;t++)if(function(e,t){if(t+1<e.length&&I(e,t)){var i=E(e,t),o=4;null!=i&&i.frameLength&&(o=i.frameLength);o=t+o;return o===e.length||M(e,o)}}(e,t))return P.b.log("MPEG Audio sync word found !"),!0;return!1},i.canParse=function(e,t){return I(e,t)&&4<=e.length-t},i.appendFrame=function(e,t,i){if(null!==this.initPTS)return j(e,t,i,this.initPTS,this.frameIndex)},t}(r);G.minProbeByteLength=4;var s=G,r=i(16),Y=i(5),G=((G=K.prototype).destroy=function(){},G.resetTimeStamp=function(e){this.initPTS=e,this.lastEndDTS=null},G.resetNextTimestamp=function(){this.lastEndDTS=null},G.resetInitSegment=function(e,t,i){this.audioCodec=t,this.videoCodec=i,this.generateInitSegment(e),this.emitInitSegment=!0},G.generateInitSegment=function(e){var t=this.audioCodec,i=this.videoCodec;if(!e||!e.byteLength)return this.initTracks=void 0,void(this.initData=void 0);var o=this.initData=Object(O.f)(e),t=t||W(o.audio,Y.a.AUDIO),i=i||W(o.video,Y.a.VIDEO),s={};o.audio&&o.video?s.audiovideo={container:"video/mp4",codec:t+","+i,initSegment:e,id:"main"}:o.audio?s.audio={container:"audio/mp4",codec:t,initSegment:e,id:"audio"}:o.video?s.video={container:"video/mp4",codec:i,initSegment:e,id:"main"}:P.b.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=s},G.remux=function(e,t,i,o,s){var r=this.initPTS,n=this.lastEndDTS,a={audio:void 0,video:void 0,text:o,id3:i,initSegment:void 0};Object(u.a)(n)||(n=this.lastEndDTS=s||0);var l=t.samples;if(!l||!l.length)return a;var c={initPTS:void 0,timescale:1},d=this.initData;if(d&&d.length||(this.generateInitSegment(l),d=this.initData),!d||!d.length)return P.b.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),a;this.emitInitSegment&&(c.tracks=this.initTracks,this.emitInitSegment=!1),Object(u.a)(r)||(this.initPTS=c.initPTS=r=Z(d,l,n));s=Object(O.c)(l,d),t=n,n=s+t;Object(O.e)(d,l,r),0<s?this.lastEndDTS=n:(P.b.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());r=!!d.audio,s=!!d.video,d="";r&&(d+="audio"),s&&(d+="video");s={data1:l,startPTS:t,startDTS:t,endPTS:n,endDTS:n,type:d,hasAudio:r,hasVideo:s,nb:1,dropped:0};return a.audio="audio"===s.type?s:void 0,a.video="audio"!==s.type?s:void 0,a.text=o,a.id3=i,a.initSegment=c,a},K),Z=function(e,t,i){return Object(O.d)(e,t)-i};function K(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=void 0,this.initTracks=void 0,this.lastEndDTS=null}function W(e,t){e=null==e?void 0:e.codec;return e&&4<e.length?e:"hvc1"===e?"hvc1.1.c.L120.90":"av01"===e?"av01.0.04M.08":"avc1"===e||t===Y.a.VIDEO?"avc1.42e01e":"mp4a.40.5"}var Q,J=G,$=i(13);try{Q=self.performance.now.bind(self.performance)}catch(e){P.b.debug("Unable to use Performance API on this environment"),Q=self.Date.now}var ee=[{demux:c,remux:r.a},{demux:w,remux:J},{demux:t,remux:r.a},{demux:s,remux:r.a}],te=1024;ee.forEach(function(e){e=e.demux;te=Math.max(te,e.minProbeByteLength)});var ie=((r=oe.prototype).configure=function(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()},r.push=function(e,t,i,o){var s=this,r=i.transmuxing;r.executeStart=Q();var n=new Uint8Array(e),a=this.cache,l=this.config,c=this.currentTransmuxState,d=this.transmuxConfig;o&&(this.currentTransmuxState=o);var u=(g=null,0<n.byteLength&&null!=t&&null!=t.key&&null!==t.iv&&null!=t.method&&(g=t),g);if(u&&"AES-128"===u.method){var h=this.getDecrypter();if(!l.enableSoftwareAES)return this.decryptionPromise=h.webCryptoDecrypt(n,u.key.buffer,u.iv.buffer).then(function(e){e=s.push(e,null,i);return s.decryptionPromise=null,e}),this.decryptionPromise;var f=h.softwareDecrypt(n,u.key.buffer,u.iv.buffer);if(!f)return r.executeEnd=Q(),se(i);n=new Uint8Array(f)}var p=o||c,v=p.contiguous,e=p.discontinuity,t=p.trackSwitch,g=p.accurateTimeOffset,l=p.timeOffset,h=d.audioCodec,f=d.videoCodec,o=d.defaultInitPts,c=d.duration,p=d.initSegmentData;(e||t)&&this.resetInitSegment(p,h,f,c),e&&this.resetInitialTimestamp(o),v||this.resetContiguity(),this.needsProbing(n,e,t)&&(a.dataLength&&(a=a.flush(),n=Object(O.a)(a,n)),this.configureTransmuxer(n,d));l=this.transmux(n,u,l,g,i),g=this.currentTransmuxState;return g.contiguous=!0,g.discontinuity=!1,g.trackSwitch=!1,r.executeEnd=Q(),l},r.flush=function(t){var i=this,e=t.transmuxing;e.executeStart=Q();var o=this.decrypter,s=this.cache,r=this.currentTransmuxState,n=this.decryptionPromise;if(n)return n.then(function(){return i.flush(t)});var a=[],r=r.timeOffset;!o||(l=o.flush())&&a.push(this.push(l,null,t));o=s.dataLength;s.reset();var l=this.demuxer,s=this.remuxer;if(!l||!s)return te<=o&&this.observer.emit(S.a.ERROR,S.a.ERROR,{type:L.b.MEDIA_ERROR,details:L.a.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"}),e.executeEnd=Q(),[se(t)];r=l.flush(r);return re(r)?r.then(function(e){return i.flushRemux(a,e,t),a}):(this.flushRemux(a,r,t),a)},r.flushRemux=function(e,t,i){var o=t.audioTrack,s=t.avcTrack,r=t.id3Track,n=t.textTrack,a=this.currentTransmuxState,t=a.accurateTimeOffset,a=a.timeOffset;P.b.log("[transmuxer.ts]: Flushed fragment "+i.sn+(-1<i.part?" p: "+i.part:"")+" of level "+i.level);t=this.remuxer.remux(o,s,r,n,a,t,!0,this.id);e.push({remuxResult:t,chunkMeta:i}),i.transmuxing.executeEnd=Q()},r.resetInitialTimestamp=function(e){var t=this.demuxer,i=this.remuxer;t&&i&&(t.resetTimeStamp(e),i.resetTimeStamp(e))},r.resetContiguity=function(){var e=this.demuxer,t=this.remuxer;e&&t&&(e.resetContiguity(),t.resetNextTimestamp())},r.resetInitSegment=function(e,t,i,o){var s=this.demuxer,r=this.remuxer;s&&r&&(s.resetInitSegment(t,i,o),r.resetInitSegment(e,t,i))},r.destroy=function(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)},r.transmux=function(e,t,i,o,s){return t&&"SAMPLE-AES"===t.method?this.transmuxSampleAes(e,t,i,o,s):this.transmuxUnencrypted(e,i,o,s)},r.transmuxUnencrypted=function(e,t,i,o){var s=this.demuxer.demux(e,t,!1,!this.config.progressive),r=s.audioTrack,n=s.avcTrack,e=s.id3Track,s=s.textTrack;return{remuxResult:this.remuxer.remux(r,n,e,s,t,i,!1,this.id),chunkMeta:o}},r.transmuxSampleAes=function(e,t,i,o,s){var r=this;return this.demuxer.demuxSampleAes(e,t,i).then(function(e){return{remuxResult:r.remuxer.remux(e.audioTrack,e.avcTrack,e.id3Track,e.textTrack,i,o,!1,r.id),chunkMeta:s}})},r.configureTransmuxer=function(e,t){for(var i,o=this.config,s=this.observer,r=this.typeSupported,n=this.vendor,a=t.audioCodec,l=t.defaultInitPts,c=t.duration,d=t.initSegmentData,u=t.videoCodec,h=0,f=ee.length;h<f;h++)if(ee[h].demux.probe(e)){i=ee[h];break}i||(P.b.warn("Failed to find demuxer by probing frag, treating as mp4 passthrough"),i={demux:w,remux:J});var p=this.demuxer,v=this.remuxer,g=i.remux,t=i.demux;v&&v instanceof g||(this.remuxer=new g(s,o,r,n)),p&&p instanceof t||(this.demuxer=new t(s,o,r),this.probe=t.probe),this.resetInitSegment(d,a,u,c),this.resetInitialTimestamp(l)},r.needsProbing=function(e,t,i){return!this.demuxer||!this.remuxer||t||i},r.getDecrypter=function(){return this.decrypter||(this.decrypter=new o.a(this.observer,this.config))},oe);function oe(e,t,i,o,s){this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.cache=new $.a,this.observer=e,this.typeSupported=t,this.config=i,this.vendor=o,this.id=s}var se=function(e){return{remuxResult:{},chunkMeta:e}};function re(e){return"then"in e&&e.then instanceof Function}var ne=function(e,t,i,o,s){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=t,this.initSegmentData=i,this.duration=o,this.defaultInitPts=s},ae=function(e,t,i,o,s){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.discontinuity=e,this.contiguous=t,this.accurateTimeOffset=i,this.trackSwitch=o,this.timeOffset=s}},function(e,t,i){var o=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/?#]*\/)*[^;?#]*)?(;[^?#]*)?(\?[^#]*)?(#[^]*)?$/,r=/^([^\/?#]*)([^]*)$/,s=/(?:\/|^)\.(?=\/)/g,n=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,a={buildAbsoluteURL:function(e,t,i){if(i=i||{},e=e.trim(),!(t=t.trim())){if(!i.alwaysNormalize)return e;var o=a.parseURL(e);if(!o)throw new Error("Error trying to parse base URL.");return o.path=a.normalizePath(o.path),a.buildURLFromParts(o)}o=a.parseURL(t);if(!o)throw new Error("Error trying to parse relative URL.");if(o.scheme)return i.alwaysNormalize?(o.path=a.normalizePath(o.path),a.buildURLFromParts(o)):t;t=a.parseURL(e);if(!t)throw new Error("Error trying to parse base URL.");!t.netLoc&&t.path&&"/"!==t.path[0]&&(s=r.exec(t.path),t.netLoc=s[1],t.path=s[2]),t.netLoc&&!t.path&&(t.path="/");var s,e={scheme:t.scheme,netLoc:o.netLoc,path:null,params:o.params,query:o.query,fragment:o.fragment};return o.netLoc||(e.netLoc=t.netLoc,"/"===o.path[0])||(o.path?(s=(s=t.path).substring(0,s.lastIndexOf("/")+1)+o.path,e.path=a.normalizePath(s)):(e.path=t.path,o.params||(e.params=t.params,o.query||(e.query=t.query)))),null===e.path&&(e.path=i.alwaysNormalize?a.normalizePath(o.path):o.path),a.buildURLFromParts(e)},parseURL:function(e){e=o.exec(e);return e?{scheme:e[1]||"",netLoc:e[2]||"",path:e[3]||"",params:e[4]||"",query:e[5]||"",fragment:e[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(s,"");e.length!==(e=e.replace(n,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};e.exports=a},function(e,t,i){"use strict";i.d(t,"a",function(){return o});var o=function(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}},function(e,t,i){"use strict";i.d(t,"a",function(){return o});var o=((t=s.prototype).push=function(e){this.chunks.push(e),this.dataLength+=e.length},t.flush=function(){var e=this.chunks,r=this.dataLength;return e.length?(e=1===e.length?e[0]:function(e){for(var t=new Uint8Array(r),i=0,o=0;o<e.length;o++){var s=e[o];t.set(s,i),i+=s.length}return t}(e),this.reset(),e):new Uint8Array(0)},t.reset=function(){this.chunks.length=0,this.dataLength=0},s);function s(){this.chunks=[],this.dataLength=0}},function(e,t,i){"use strict";var o=Object.prototype.hasOwnProperty,f="~";function s(){}function r(e,t,i){this.fn=e,this.context=t,this.once=i||!1}function n(e,t,i,o,s){if("function"!=typeof i)throw new TypeError("The listener must be a function");s=new r(i,o||e,s),t=f?f+t:t;return e._events[t]?e._events[t].fn?e._events[t]=[e._events[t],s]:e._events[t].push(s):(e._events[t]=s,e._eventsCount++),e}function l(e,t){0==--e._eventsCount?e._events=new s:delete e._events[t]}function a(){this._events=new s,this._eventsCount=0}Object.create&&(s.prototype=Object.create(null),(new s).__proto__||(f=!1)),a.prototype.eventNames=function(){var e,t,i=[];if(0===this._eventsCount)return i;for(t in e=this._events)o.call(e,t)&&i.push(f?t.slice(1):t);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},a.prototype.listeners=function(e){var e=f?f+e:e,t=this._events[e];if(!t)return[];if(t.fn)return[t.fn];for(var i=0,o=t.length,s=new Array(o);i<o;i++)s[i]=t[i].fn;return s},a.prototype.listenerCount=function(e){e=f?f+e:e,e=this._events[e];return e?e.fn?1:e.length:0},a.prototype.emit=function(e,t,i,o,s,r){var n=f?f+e:e;if(!this._events[n])return!1;var a,l=this._events[n],c=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),c){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,i),!0;case 4:return l.fn.call(l.context,t,i,o),!0;case 5:return l.fn.call(l.context,t,i,o,s),!0;case 6:return l.fn.call(l.context,t,i,o,s,r),!0}for(h=1,a=new Array(c-1);h<c;h++)a[h-1]=arguments[h];l.fn.apply(l.context,a)}else for(var d,u=l.length,h=0;h<u;h++)switch(l[h].once&&this.removeListener(e,l[h].fn,void 0,!0),c){case 1:l[h].fn.call(l[h].context);break;case 2:l[h].fn.call(l[h].context,t);break;case 3:l[h].fn.call(l[h].context,t,i);break;case 4:l[h].fn.call(l[h].context,t,i,o);break;default:if(!a)for(d=1,a=new Array(c-1);d<c;d++)a[d-1]=arguments[d];l[h].fn.apply(l[h].context,a)}return!0},a.prototype.on=function(e,t,i){return n(this,e,t,i,!1)},a.prototype.once=function(e,t,i){return n(this,e,t,i,!0)},a.prototype.removeListener=function(e,t,i,o){e=f?f+e:e;if(!this._events[e])return this;if(!t)return l(this,e),this;var s=this._events[e];if(s.fn)s.fn!==t||o&&!s.once||i&&s.context!==i||l(this,e);else{for(var r=0,n=[],a=s.length;r<a;r++)(s[r].fn!==t||o&&!s[r].once||i&&s[r].context!==i)&&n.push(s[r]);n.length?this._events[e]=1===n.length?n[0]:n:l(this,e)}return this},a.prototype.removeAllListeners=function(e){return e?(e=f?f+e:e,this._events[e]&&l(this,e)):(this._events=new s,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=f,a.EventEmitter=a,e.exports=a},function(e,t,i){"use strict";i.d(t,"a",function(){return u});var n=(s.prototype.decrypt=function(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)},s),a=(o.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},o),l=i(9);function o(e,t){this.subtle=void 0,this.key=void 0,this.subtle=e,this.key=t}function s(e,t){this.subtle=void 0,this.aesIV=void 0,this.subtle=e,this.aesIV=t}var c=((t=f.prototype).uint8ArrayToUint32Array_=function(e){for(var t=new DataView(e),i=new Uint32Array(4),o=0;o<4;o++)i[o]=t.getUint32(4*o);return i},t.initTable=function(){for(var e=this.sBox,t=this.invSBox,i=this.subMix,o=i[0],s=i[1],r=i[2],n=i[3],i=this.invSubMix,a=i[0],l=i[1],c=i[2],d=i[3],u=new Uint32Array(256),h=0,f=0,p=0,p=0;p<256;p++)u[p]=p<128?p<<1:p<<1^283;for(p=0;p<256;p++){var v=(v=f^f<<1^f<<2^f<<3^f<<4)>>>8^255&v^99,g=u[t[e[h]=v]=h],m=u[g],y=u[m],b=257*u[v]^16843008*v;o[h]=b<<24|b>>>8,s[h]=b<<16|b>>>16,r[h]=b<<8|b>>>24,n[h]=b,b=16843009*y^65537*m^257*g^16843008*h,a[v]=b<<24|b>>>8,l[v]=b<<16|b>>>16,c[v]=b<<8|b>>>24,d[v]=b,h?(h=g^u[u[u[y^g]]],f^=u[u[f]]):h=f=1}},t.expandKey=function(e){for(var t=this.uint8ArrayToUint32Array_(e),i=!0,o=0;o<t.length&&i;)i=t[o]===this.key[o],o++;if(!i){this.key=t;var s=this.keySize=t.length;if(4!==s&&6!==s&&8!==s)throw new Error("Invalid aes key size="+s);for(var r,n,a,l=this.ksRows=4*(s+6+1),c=this.keySchedule=new Uint32Array(l),d=this.invKeySchedule=new Uint32Array(l),u=this.sBox,h=this.rcon,e=this.invSubMix,f=e[0],p=e[1],v=e[2],g=e[3],m=0;m<l;m++)m<s?n=c[m]=t[m]:(a=n,m%s==0?(a=u[(a=a<<8|a>>>24)>>>24]<<24|u[a>>>16&255]<<16|u[a>>>8&255]<<8|u[255&a],a^=h[m/s|0]<<24):6<s&&m%s==4&&(a=u[a>>>24]<<24|u[a>>>16&255]<<16|u[a>>>8&255]<<8|u[255&a]),c[m]=n=(c[m-s]^a)>>>0);for(r=0;r<l;r++)m=l-r,a=3&r?c[m]:c[m-4],d[r]=r<4||m<=4?a:f[u[a>>>24]]^p[u[a>>>16&255]]^v[u[a>>>8&255]]^g[u[255&a]],d[r]=d[r]>>>0}},t.networkToHostOrderSwap=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},t.decrypt=function(e,t,i){for(var o,s,r,n,a,l,c,d,u,h,f,p,v,g,m=this.keySize+6,y=this.invKeySchedule,b=this.invSBox,w=this.invSubMix,k=w[0],x=w[1],A=w[2],T=w[3],i=this.uint8ArrayToUint32Array_(i),_=i[0],E=i[1],S=i[2],L=i[3],C=new Int32Array(e),O=new Int32Array(C.length),P=this.networkToHostOrderSwap;t<C.length;){for(u=P(C[t]),h=P(C[t+1]),f=P(C[t+2]),p=P(C[t+3]),a=u^y[0],l=p^y[1],c=f^y[2],d=h^y[3],v=4,g=1;g<m;g++)o=k[a>>>24]^x[l>>16&255]^A[c>>8&255]^T[255&d]^y[v],s=k[l>>>24]^x[c>>16&255]^A[d>>8&255]^T[255&a]^y[v+1],r=k[c>>>24]^x[d>>16&255]^A[a>>8&255]^T[255&l]^y[v+2],n=k[d>>>24]^x[a>>16&255]^A[l>>8&255]^T[255&c]^y[v+3],a=o,l=s,c=r,d=n,v+=4;o=b[a>>>24]<<24^b[l>>16&255]<<16^b[c>>8&255]<<8^b[255&d]^y[v],s=b[l>>>24]<<24^b[c>>16&255]<<16^b[d>>8&255]<<8^b[255&a]^y[v+1],r=b[c>>>24]<<24^b[d>>16&255]<<16^b[a>>8&255]<<8^b[255&l]^y[v+2],n=b[d>>>24]<<24^b[a>>16&255]<<16^b[l>>8&255]<<8^b[255&c]^y[v+3],O[t]=P(o^_),O[t+1]=P(n^E),O[t+2]=P(r^S),O[t+3]=P(s^L),_=u,E=h,S=f,L=p,t+=4}return O.buffer},f),r=i(1),d=i(6),u=((i=h.prototype).destroy=function(){this.observer=null},i.isSync=function(){return this.config.enableSoftwareAES},i.flush=function(){var e=this.currentResult;if(e){var t,i,o=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?(e=(i=(t=o).byteLength)&&new DataView(t.buffer).getUint8(i-1))?Object(l.a)(t,0,i-e):t:o}this.reset()},i.reset=function(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)},i.decrypt=function(e,t,i,o){var s;this.config.enableSoftwareAES?(this.softwareDecrypt(new Uint8Array(e),t,i),(s=this.flush())&&o(s.buffer)):this.webCryptoDecrypt(new Uint8Array(e),t,i).then(o)},i.softwareDecrypt=function(e,t,i){var o=this.currentIV,s=this.currentResult,r=this.remainderData;this.logOnce("JS AES decrypt"),r&&(e=Object(d.a)(r,e),this.remainderData=null);e=this.getValidChunk(e);if(!e.length)return null;o&&(i=o);o=this.softwareDecrypter;(o=o||(this.softwareDecrypter=new c)).expandKey(t);return this.currentResult=o.decrypt(e.buffer,0,i),this.currentIV=Object(l.a)(e,-16).buffer,s||null},i.webCryptoDecrypt=function(t,i,o){var s=this,r=this.subtle;return this.key===i&&this.fastAesKey||(this.key=i,this.fastAesKey=new a(r,i)),this.fastAesKey.expandKey().then(function(e){return r?new n(r,o).decrypt(t.buffer,e):Promise.reject(new Error("web crypto not initialized"))}).catch(function(e){return s.onWebCryptoError(e,t,i,o)})},i.onWebCryptoError=function(e,t,i,o){return r.b.warn("[decrypter.ts]: WebCrypto Error, disable WebCrypto API:",e),this.config.enableSoftwareAES=!0,this.logEnabled=!0,this.softwareDecrypt(t,i,o)},i.getValidChunk=function(e){var t=e,i=e.length-e.length%16;return i!==e.length&&(t=Object(l.a)(e,0,i),this.remainderData=Object(l.a)(e,i)),t},i.logOnce=function(e){this.logEnabled&&(r.b.log("[decrypter.ts]: "+e),this.logEnabled=!1)},h);function h(e,t,i){i=(void 0===i?{}:i).removePKCS7Padding,i=void 0===i||i;if(this.logEnabled=!0,this.observer=void 0,this.config=void 0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.observer=e,this.config=t,this.removePKCS7Padding=i)try{var o=self.crypto;o&&(this.subtle=o.subtle||o.webkitSubtle)}catch(e){}null===this.subtle&&(this.config.enableSoftwareAES=!0)}function f(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}},function(e,t,i){"use strict";i.d(t,"a",function(){return s}),i.d(t,"b",function(){return ee});var h=i(3),R=(o.getSilentFrame=function(e,t){if("mp4a.40.2"===e)return 1===t?new Uint8Array([0,200,0,128,35,128]):2===t?new Uint8Array([33,0,73,144,2,25,0,35,128]):3===t?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]):4===t?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]):5===t?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]):6===t?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]):void 0;else return 1===t?new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]):2===t||3===t?new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]):void 0},o),r=Math.pow(2,32)-1,t=(u.init=function(){for(var e in u.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]})u.types.hasOwnProperty(e)&&(u.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);var t=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),i=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);u.HDLR_TYPES={video:t,audio:i};var o=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),s=new Uint8Array([0,0,0,0,0,0,0,0]);u.STTS=u.STSC=u.STCO=s,u.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),u.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),u.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),u.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);t=new Uint8Array([105,115,111,109]),i=new Uint8Array([97,118,99,49]),s=new Uint8Array([0,0,0,1]);u.FTYP=u.box(u.types.ftyp,t,s,t,i),u.DINF=u.box(u.types.dinf,u.box(u.types.dref,o))},u.box=function(e){for(var t=8,i=arguments.length,o=new Array(1<i?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];for(var r=o.length,n=r;r--;)t+=o[r].byteLength;var a=new Uint8Array(t);for(a[0]=t>>24&255,a[1]=t>>16&255,a[2]=t>>8&255,a[3]=255&t,a.set(e,4),r=0,t=8;r<n;r++)a.set(o[r],t),t+=o[r].byteLength;return a},u.hdlr=function(e){return u.box(u.types.hdlr,u.HDLR_TYPES[e])},u.mdat=function(e){return u.box(u.types.mdat,e)},u.mdhd=function(e,t){t*=e;var i=Math.floor(t/(1+r)),t=Math.floor(t%(1+r));return u.box(u.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,i>>24,i>>16&255,i>>8&255,255&i,t>>24,t>>16&255,t>>8&255,255&t,85,196,0,0]))},u.mdia=function(e){return u.box(u.types.mdia,u.mdhd(e.timescale,e.duration),u.hdlr(e.type),u.minf(e))},u.mfhd=function(e){return u.box(u.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))},u.minf=function(e){return"audio"===e.type?u.box(u.types.minf,u.box(u.types.smhd,u.SMHD),u.DINF,u.stbl(e)):u.box(u.types.minf,u.box(u.types.vmhd,u.VMHD),u.DINF,u.stbl(e))},u.moof=function(e,t,i){return u.box(u.types.moof,u.mfhd(e),u.traf(i,t))},u.moov=function(e){for(var t=e.length,i=[];t--;)i[t]=u.trak(e[t]);return u.box.apply(null,[u.types.moov,u.mvhd(e[0].timescale,e[0].duration)].concat(i).concat(u.mvex(e)))},u.mvex=function(e){for(var t=e.length,i=[];t--;)i[t]=u.trex(e[t]);return u.box.apply(null,[u.types.mvex].concat(i))},u.mvhd=function(e,t){t*=e;var i=Math.floor(t/(1+r)),t=Math.floor(t%(1+r)),t=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,i>>24,i>>16&255,i>>8&255,255&i,t>>24,t>>16&255,t>>8&255,255&t,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return u.box(u.types.mvhd,t)},u.sdtp=function(e){for(var t,i=e.samples||[],o=new Uint8Array(4+i.length),s=0;s<i.length;s++)t=i[s].flags,o[s+4]=t.dependsOn<<4|t.isDependedOn<<2|t.hasRedundancy;return u.box(u.types.sdtp,o)},u.stbl=function(e){return u.box(u.types.stbl,u.stsd(e),u.box(u.types.stts,u.STTS),u.box(u.types.stsc,u.STSC),u.box(u.types.stsz,u.STSZ),u.box(u.types.stco,u.STCO))},u.avc1=function(e){for(var t,i,o=[],s=[],r=0;r<e.sps.length;r++)i=(t=e.sps[r]).byteLength,o.push(i>>>8&255),o.push(255&i),o=o.concat(Array.prototype.slice.call(t));for(r=0;r<e.pps.length;r++)i=(t=e.pps[r]).byteLength,s.push(i>>>8&255),s.push(255&i),s=s.concat(Array.prototype.slice.call(t));var n=u.box(u.types.avcC,new Uint8Array([1,o[3],o[4],o[5],255,224|e.sps.length].concat(o).concat([e.pps.length]).concat(s))),a=e.width,l=e.height,c=e.pixelRatio[0],d=e.pixelRatio[1];return u.box(u.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,a>>8&255,255&a,l>>8&255,255&l,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),n,u.box(u.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),u.box(u.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,255&c,d>>24,d>>16&255,d>>8&255,255&d])))},u.esds=function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))},u.mp4a=function(e){var t=e.samplerate;return u.box(u.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,t>>8&255,255&t,0,0]),u.box(u.types.esds,u.esds(e)))},u.mp3=function(e){var t=e.samplerate;return u.box(u.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,t>>8&255,255&t,0,0]))},u.stsd=function(e){return"audio"===e.type?e.isAAC||"mp3"!==e.codec?u.box(u.types.stsd,u.STSD,u.mp4a(e)):u.box(u.types.stsd,u.STSD,u.mp3(e)):u.box(u.types.stsd,u.STSD,u.avc1(e))},u.tkhd=function(e){var t=e.id,i=e.duration*e.timescale,o=e.width,s=e.height,e=Math.floor(i/(1+r)),i=Math.floor(i%(1+r));return u.box(u.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e,i>>24,i>>16&255,i>>8&255,255&i,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,o>>8&255,255&o,0,0,s>>8&255,255&s,0,0]))},u.traf=function(e,t){var i=u.sdtp(e),o=e.id,s=Math.floor(t/(1+r)),t=Math.floor(t%(1+r));return u.box(u.types.traf,u.box(u.types.tfhd,new Uint8Array([0,0,0,0,o>>24,o>>16&255,o>>8&255,255&o])),u.box(u.types.tfdt,new Uint8Array([1,0,0,0,s>>24,s>>16&255,s>>8&255,255&s,t>>24,t>>16&255,t>>8&255,255&t])),u.trun(e,i.length+16+20+8+16+8+8),i)},u.trak=function(e){return e.duration=e.duration||4294967295,u.box(u.types.trak,u.tkhd(e),u.mdia(e))},u.trex=function(e){e=e.id;return u.box(u.types.trex,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},u.trun=function(e,t){var i,o,s,r,n,a=e.samples||[],l=a.length,e=12+16*l,c=new Uint8Array(e);for(t+=8+e,c.set([0,0,15,1,l>>>24&255,l>>>16&255,l>>>8&255,255&l,t>>>24&255,t>>>16&255,t>>>8&255,255&t],0),i=0;i<l;i++)o=(n=a[i]).duration,s=n.size,r=n.flags,n=n.cts,c.set([o>>>24&255,o>>>16&255,o>>>8&255,255&o,s>>>24&255,s>>>16&255,s>>>8&255,255&s,r.isLeading<<2|r.dependsOn,r.isDependedOn<<6|r.hasRedundancy<<4|r.paddingValue<<1|r.isNonSync,61440&r.degradPrio,15&r.degradPrio,n>>>24&255,n>>>16&255,n>>>8&255,255&n],12+16*i);return u.box(u.types.trun,c)},u.initSegment=function(e){u.types||u.init();var t=u.moov(e),e=new Uint8Array(u.FTYP.byteLength+t.byteLength);return e.set(u.FTYP),e.set(t,u.FTYP.byteLength),e},u);function u(){}function o(){}t.types=void 0,t.HDLR_TYPES=void 0,t.STTS=void 0,t.STSC=void 0,t.STCO=void 0,t.STSZ=void 0,t.VMHD=void 0,t.SMHD=void 0,t.STSD=void 0,t.FTYP=void 0,t.DINF=void 0;var G=t,Y=i(0),Z=i(2),K=i(1),x=i(4),W=i(8);function Q(){return(Q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i,o=arguments[t];for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i])}return e}).apply(this,arguments)}var J=null,n=null,$=!1,s=((i=a.prototype).destroy=function(){},i.resetTimeStamp=function(e){K.b.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=e},i.resetNextTimestamp=function(){K.b.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1},i.resetInitSegment=function(){K.b.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1},i.getVideoStartPts=function(e){var o=!1,e=e.reduce(function(e,t){var i=t.pts-e;return i<-4294967296?(o=!0,ee(e,t.pts)):0<i?e:t.pts},e[0].pts);return o&&K.b.debug("PTS rollover detected"),e},i.remux=function(e,t,i,o,s,r,n,a){var l,c,d,u,h,f,p,v=s,g=s,m=-1<e.pid,y=-1<t.pid,b=t.samples.length,w=0<e.samples.length,k=1<b;return(m&&!w||y&&!k)&&!this.ISGenerated&&!n||(this.ISGenerated||(c=this.generateIS(e,t,s)),f=this.isVideoContiguous,m=-1,k&&(m=function(e){for(var t=0;t<e.length;t++)if(e[t].key)return t;return-1}(t.samples),!f&&this.config.forceKeyFrameOnDiscontinuity)&&(h=!0,0<m?(K.b.warn("[mp4-remuxer]: Dropped "+m+" out of "+b+" video samples due to a missing keyframe"),n=this.getVideoStartPts(t.samples),t.samples=t.samples.slice(m),t.dropped+=m,g+=(t.samples[0].pts-n)/(t.timescale||9e4)):-1===m&&(K.b.warn("[mp4-remuxer]: No keyframe found out of "+b+" video samples"),h=!1)),this.ISGenerated&&(w&&k&&(b=this.getVideoStartPts(t.samples),b=(ee(e.samples[0].pts,b)-b)/t.inputTimeScale,v+=Math.max(0,b),g+=Math.max(0,-b)),w?(e.samplerate||(K.b.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),c=this.generateIS(e,t,s)),l=this.remuxAudio(e,v,this.isAudioContiguous,r,y||k||a===x.b.AUDIO?g:void 0),k&&(p=l?l.endPTS-l.startPTS:0,t.inputTimeScale||(K.b.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),c=this.generateIS(e,t,s)),p=this.remuxVideo(t,g,f,p))):k&&(p=this.remuxVideo(t,g,f,0)),p&&(p.firstKeyFrame=m,p.independent=-1!==m))),this.ISGenerated&&(i.samples.length&&(u=this.remuxID3(i,s)),o.samples.length&&(d=this.remuxText(o,s))),{audio:l,video:p,initSegment:c,independent:h,text:d,id3:u}},i.generateIS=function(e,t,i){var o,s,r,n=e.samples,a=t.samples,l=this.typeSupported,c={},d=!Object(h.a)(this._initPTS),u="audio/mp4";if(d&&(r=s=1/0),e.config&&n.length&&(e.timescale=e.samplerate,e.isAAC||(l.mpeg?(u="audio/mpeg",e.codec=""):l.mp3&&(e.codec="mp3")),c.audio={id:"audio",container:u,codec:e.codec,initSegment:!e.isAAC&&l.mpeg?new Uint8Array(0):G.initSegment([e]),metadata:{channelCount:e.channelCount}},d&&(o=e.inputTimeScale,r=s=n[0].pts-Math.round(o*i))),t.sps&&t.pps&&a.length&&(t.timescale=t.inputTimeScale,c.video={id:"main",container:"video/mp4",codec:t.codec,initSegment:G.initSegment([t]),metadata:{width:t.width,height:t.height}},d)&&(o=t.inputTimeScale,t=this.getVideoStartPts(a),i=Math.round(o*i),s=Math.min(s,ee(a[0].dts,t)-i),r=Math.min(r,t-i)),Object.keys(c).length)return this.ISGenerated=!0,d&&(this._initPTS=r,this._initDTS=s),{tracks:c,initPTS:r,timescale:o}},i.remuxVideo=function(e,t,i,o){var s,r,n=e.inputTimeScale,a=e.samples,l=[],c=a.length,d=this._initPTS,u=this.nextAvcDts,h=8,f=Number.POSITIVE_INFINITY,p=Number.NEGATIVE_INFINITY,v=0,g=!1;i&&null!==u||(u=t*n-(a[0].pts-ee(a[0].dts,a[0].pts)));for(var m=0;m<c;m++){var y=a[m];y.pts=ee(y.pts-d,u),y.dts=ee(y.dts-d,u),y.dts>y.pts&&(v=Math.max(Math.min(v,y.pts-y.dts),-18e3)),y.dts<a[0<m?m-1:m].dts&&(g=!0)}g&&a.sort(function(e,t){var i=e.dts-t.dts,t=e.pts-t.pts;return i||t}),r=a[0].dts,t=a[a.length-1].dts;var b=Math.round((t-r)/(c-1));if(v<0){if(v<-2*b){K.b.warn("PTS < DTS detected in video samples, offsetting DTS from PTS by "+Object(W.b)(-b,!0)+" ms");for(var w=v,k=0;k<c;k++)a[k].dts=w=Math.max(w,a[k].pts-b),a[k].pts=Math.max(w,a[k].pts)}else{K.b.warn("PTS < DTS detected in video samples, shifting DTS by "+Object(W.b)(v,!0)+" ms to overcome this issue");for(var x=0;x<c;x++)a[x].dts=a[x].dts+v}r=a[0].dts}!i||((i=b<(M=r-u))||M<-1)&&(i?K.b.warn("AVC: "+Object(W.b)(M,!0)+" ms ("+M+"dts) hole between fragments detected, filling it"):K.b.warn("AVC: "+Object(W.b)(-M,!0)+" ms ("+M+"dts) overlapping between fragments detected"),r=u,i=a[0].pts-M,a[0].dts=r,a[0].pts=i,K.b.log("Video: First PTS/DTS adjusted: "+Object(W.b)(i,!0)+"/"+Object(W.b)(r,!0)+", delta: "+Object(W.b)(M,!0)+" ms")),$&&(r=Math.max(0,r));for(var A=0,T=0,_=0;_<c;_++){for(var E=a[_],S=E.units,L=S.length,C=0,O=0;O<L;O++)C+=S[O].data.length;T+=C,A+=L,E.length=C,E.dts=Math.max(E.dts,r),E.pts=Math.max(E.pts,E.dts,0),f=Math.min(E.pts,f),p=Math.max(E.pts,p)}t=a[c-1].dts;var P,j=T+4*A+8;try{P=new Uint8Array(j)}catch(e){return void this.observer.emit(Y.a.ERROR,Y.a.ERROR,{type:Z.b.MUX_ERROR,details:Z.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:j,reason:"fail allocating video mdat "+j})}var I=new DataView(P.buffer);I.setUint32(0,j),P.set(G.types.mdat,4);for(var M,B=0;B<c;B++){for(var D,R,N=a[B],F=N.units,H=0,z=0,q=F.length;z<q;z++){var X=F[z],U=X.data,X=X.data.byteLength;I.setUint32(h,X),h+=4,P.set(U,h),h+=X,H+=4+X}B<c-1?s=a[B+1].dts-N.dts:(D=this.config,V=N.dts-a[0<B?B-1:B].dts,D.stretchShortVideoTrack&&null!==this.nextAudioPts&&Math.floor(D.maxBufferHole*n)<(R=(o?f+o*n:this.nextAudioPts)-N.pts)?((s=R-V)<0&&(s=V),K.b.log("[mp4-remuxer]: It is approximately "+R/90+" ms to the next segment; using duration "+s/90+" ms for the last video frame.")):s=V);var V=Math.round(N.pts-N.dts);l.push(new te(N.key,s,H,V))}l.length&&J&&J<70&&((M=l[0].flags).dependsOn=2,M.isNonSync=0),this.nextAvcDts=u=t+s,this.isVideoContiguous=!0;t={data1:G.moof(e.sequenceNumber++,r,Q({},e,{samples:l})),data2:P,startPTS:f/n,endPTS:(p+s)/n,startDTS:r/n,endDTS:u/n,type:"video",hasAudio:!1,hasVideo:!0,nb:l.length,dropped:e.dropped};return e.samples=[],e.dropped=0,t},i.remuxAudio=function(e,t,i,o,s){var r=e.inputTimeScale,n=r/(e.samplerate||r),a=e.isAAC?1024:1152,l=a*n,c=this._initPTS,d=!e.isAAC&&this.typeSupported.mpeg,u=[],h=e.samples,f=d?0:8,p=this.nextAudioPts||-1,v=t*r;if(this.isAudioContiguous=i=i||h.length&&0<p&&(o&&Math.abs(v-p)<9e3||Math.abs(ee(h[0].pts-c,v)-p)<20*l),h.forEach(function(e){e.pts=ee(e.pts-c,v)}),!i||p<0){if(!(h=h.filter(function(e){return 0<=e.pts})).length)return;p=0===s?0:o?Math.max(0,v):h[0].pts}if(e.isAAC)for(var g=void 0!==s,m=this.config.maxAudioFramesDrift,y=0,b=p;y<h.length;y++){var w=h[y],k=w.pts,x=k-b,A=Math.abs(1e3*x/r);if(x<=-m*l&&g)0===y&&(K.b.warn("Audio frame @ "+(k/r).toFixed(3)+"s overlaps nextAudioPts by "+Math.round(1e3*x/r)+" ms."),this.nextAudioPts=p=b=k);else if(m*l<=x&&A<1e4&&g){var T=Math.round(x/l);(b=k-T*l)<0&&(T--,b+=l),0===y&&(this.nextAudioPts=p=b),K.b.warn("[mp4-remuxer]: Injecting "+T+" audio frame @ "+(b/r).toFixed(3)+"s due to "+Math.round(1e3*x/r)+" ms gap.");for(var _=0;_<T;_++){var E=Math.max(b,0),S=R.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);S||(K.b.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),S=w.unit.subarray()),h.splice(y,0,{unit:S,pts:E}),b+=l,y++}}w.pts=b,b+=l}for(var L,C=null,O=null,P=0,j=h.length;j--;)P+=h[j].unit.byteLength;for(var I=0,M=h.length;I<M;I++){var B=h[I],D=B.unit,B=B.pts;if(null!==O)u[I-1].duration=Math.round((B-O)/n);else{if(i&&e.isAAC&&(B=p),C=B,!(0<P))return;P+=f;try{L=new Uint8Array(P)}catch(e){return void this.observer.emit(Y.a.ERROR,Y.a.ERROR,{type:Z.b.MUX_ERROR,details:Z.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:P,reason:"fail allocating audio mdat "+P})}d||(new DataView(L.buffer).setUint32(0,P),L.set(G.types.mdat,4))}L.set(D,f);D=D.byteLength;f+=D,u.push(new te(!0,a,D,0)),O=B}t=u.length;if(t){o=u[u.length-1];this.nextAudioPts=p=O+n*o.duration;s=C/r,o=p/r,t={data1:d?new Uint8Array(0):G.moof(e.sequenceNumber++,C/n,Q({},e,{samples:u})),data2:L,startPTS:s,endPTS:o,startDTS:s,endDTS:o,type:"audio",hasAudio:!0,hasVideo:!(e.samples=[]),nb:t};return this.isAudioContiguous=!0,t}},i.remuxEmptyAudio=function(e,t,i,o){var s=e.inputTimeScale,r=s/(e.samplerate||s),n=this.nextAudioPts,a=(null!==n?n:o.startDTS*s)+this._initDTS,s=o.endDTS*s+this._initDTS,l=1024*r,c=Math.ceil((s-a)/l),d=R.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(K.b.warn("[mp4-remuxer]: remux empty Audio"),d){for(var u=[],h=0;h<c;h++){var f=a+h*l;u.push({unit:d,pts:f,dts:f})}return e.samples=u,this.remuxAudio(e,t,i,!1)}K.b.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec")},i.remuxID3=function(e,t){var i=e.samples.length;if(i){for(var o=e.inputTimeScale,s=this._initPTS,r=this._initDTS,n=0;n<i;n++){var a=e.samples[n];a.pts=ee(a.pts-s,t*o)/o,a.dts=ee(a.dts-r,t*o)/o}var l=e.samples;return e.samples=[],{samples:l}}},i.remuxText=function(e,t){var i=e.samples.length;if(i){for(var o=e.inputTimeScale,s=this._initPTS,r=0;r<i;r++){var n=e.samples[r];n.pts=ee(n.pts-s,t*o)/o}e.samples.sort(function(e,t){return e.pts-t.pts});var a=e.samples;return e.samples=[],{samples:a}}},a);function a(e,t,i,o){var s;void 0===o&&(o=""),this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=void 0,this._initDTS=void 0,this.nextAvcDts=null,this.nextAudioPts=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.observer=e,this.config=t,this.typeSupported=i,this.ISGenerated=!1,null===J&&(s=(navigator.userAgent||"").match(/Chrome\/(\d+)/i),J=s?parseInt(s[1]):0),null===n&&(s=navigator.userAgent.match(/Safari\/(\d+)/i),n=s?parseInt(s[1]):0),$=!!J&&J<75||!!n&&n<600}function ee(e,t){var i;if(null===t)return e;for(i=t<e?-8589934592:8589934592;4294967296<Math.abs(e-t);)e+=i;return e}var te=function(e,t,i,o){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=t,this.size=i,this.cts=o,this.flags=new l(e)},l=function(e){this.isLeading=0,this.isDependedOn=0,this.hasRedundancy=0,this.degradPrio=0,this.dependsOn=1,this.isNonSync=1,this.dependsOn=e?2:1,this.isNonSync=e?0:1}},function(e,t,i){"use strict";i.d(t,"a",function(){return r});var o=i(11);function s(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var r=(n.fromURL=function(e,t){return new n(e,t)},n.fromURI=function(e){return new n(e)},s(n.prototype,[{key:"uri",get:function(){return this._uri}}]),n);function n(e,t){this._uri=null,this.method=null,this.keyFormat=null,this.keyFormatVersions=null,this.keyID=null,this.key=null,this.iv=null,this._uri=t?Object(o.buildAbsoluteURL)(e,t,{alwaysNormalize:!0}):e}},function(e,t,h){function r(i){var o={};function s(e){if(o[e])return o[e].exports;var t=o[e]={i:e,l:!1,exports:{}};return i[e].call(t.exports,t,t.exports,s),t.l=!0,t.exports}s.m=i,s.c=o,s.i=function(e){return e},s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},s.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/",s.oe=function(e){throw console.error(e),e};var e=s(s.s=ENTRY_MODULE);return e.default||e}function f(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}e.exports=function(u,e){e=e||{};var i={main:h.m},o=e.all?{main:Object.keys(i.main)}:function(e){for(var t={main:[u]},i={main:[]},o={main:{}};function(i){return Object.keys(i).reduce(function(e,t){return e||0<i[t].length},!1)}(t);)for(var s=Object.keys(t),r=0;r<s.length;r++){var n=s[r],a=t[n].pop();if(o[n]=o[n]||{},!o[n][a]&&e[n][a]){o[n][a]=!0,i[n]=i[n]||[],i[n].push(a);for(var l=function(e,t,i){var o={};o[i]=[];var s=t.toString();if(!(t=s.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/)))return o;for(var r,t=t[1],n=new RegExp("(\\\\n|\\W)"+f(t)+"\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)","g");r=n.exec(s);)"dll-reference"!==r[3]&&o[i].push(r[3]);for(n=new RegExp("\\("+f(t)+'\\("(dll-reference\\s([\\.|\\-|\\+|\\w|/|@]+))"\\)\\)\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)',"g");r=n.exec(s);)e[r[2]]||(o[i].push(r[1]),e[r[2]]=h(r[1]).m),o[r[2]]=o[r[2]]||[],o[r[2]].push(r[4]);for(var a,l=Object.keys(o),c=0;c<l.length;c++)for(var d=0;d<o[l[c]].length;d++)a=o[l[c]][d],isNaN(+a)||(o[l[c]][d]=+o[l[c]][d]);return o}(e,e[n][a],n),c=Object.keys(l),d=0;d<c.length;d++)t[c[d]]=t[c[d]]||[],t[c[d]]=t[c[d]].concat(l[c[d]])}}return i}(i),s="";Object.keys(o).filter(function(e){return"main"!==e}).forEach(function(t){for(var e=0;o[t][e];)e++;o[t].push(e),i[t][e]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",s=s+"var "+t+" = ("+r.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+o[t].map(function(e){return JSON.stringify(e)+": "+i[t][e].toString()}).join(",")+"});\n"}),s=s+"new (("+r.toString().replace("ENTRY_MODULE",JSON.stringify(u))+")({"+o.main.map(function(e){return JSON.stringify(e)+": "+i.main[e].toString()}).join(",")+"}))(self);";var t=new window.Blob([s],{type:"text/javascript"});if(e.bare)return t;e=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(t),t=new window.Worker(e);return t.objectURL=e,t}},function(e,t,i){"use strict";i.r(t),i.d(t,"default",function(){return r});var l=i(10),o=i(0),c=i(1),s=i(14);function r(r){function n(e,t){r.postMessage({event:e,data:t})}var a=new s.EventEmitter;a.on(o.a.FRAG_DECRYPTED,n),a.on(o.a.ERROR,n),r.addEventListener("message",function(e){var t=e.data;switch(t.cmd){case"init":var i=JSON.parse(t.config);r.transmuxer=new l.c(a,t.typeSupported,i,t.vendor,t.id),Object(c.a)(i.debug),n("init",null);break;case"configure":r.transmuxer.configure(t.config);break;case"demux":var o=r.transmuxer.push(t.data,t.decryptdata,t.chunkMeta,t.state);Object(l.d)(o)?o.then(function(e){d(r,e)}):d(r,o);break;case"flush":var s=t.chunkMeta,o=r.transmuxer.flush(s);Object(l.d)(o)?o.then(function(e){u(r,e,s)}):u(r,o,s)}})}function d(e,t){var i,o,s;((o=t.remuxResult).audio||o.video||o.text||o.id3||o.initSegment)&&(i=[],o=(s=t.remuxResult).audio,s=s.video,o&&n(i,o),s&&n(i,s),e.postMessage({event:"transmuxComplete",data:t},i))}function n(e,t){t.data1&&e.push(t.data1.buffer),t.data2&&e.push(t.data2.buffer)}function u(t,e,i){e.forEach(function(e){d(t,e)}),t.postMessage({event:"flush",data:i})}},function(e,t,i){"use strict";i.r(t),i.d(t,"default",function(){return Mo});var N=i(11),F=i(3),m=i(0),v=i(2),H=i(1),l=i(6),z=i(5);function o(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var q=(a.prototype.reloaded=function(e){if(!e)return this.advanced=!0,void(this.updated=!0);var t=this.lastPartSn-e.lastPartSn,i=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!i||!!t,this.advanced=this.endSN>e.endSN||0<t||0==t&&0<i,this.updated||this.advanced?this.misses=Math.floor(.6*e.misses):this.misses=e.misses+1,this.availabilityDelay=e.availabilityDelay},o(a.prototype,[{key:"hasProgramDateTime",get:function(){return!!this.fragments.length&&Object(F.a)(this.fragments[this.fragments.length-1].programDateTime)}},{key:"levelTargetDuration",get:function(){return this.averagetargetduration||this.targetduration||10}},{key:"drift",get:function(){var e=this.driftEndTime-this.driftStartTime;return 0<e?1e3*(this.driftEnd-this.driftStart)/e:1}},{key:"edge",get:function(){return this.partEnd||this.fragmentEnd}},{key:"partEnd",get:function(){var e;return null!==(e=this.partList)&&void 0!==e&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}},{key:"fragmentEnd",get:function(){var e;return null!==(e=this.fragments)&&void 0!==e&&e.length?this.fragments[this.fragments.length-1].end:0}},{key:"age",get:function(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}},{key:"lastPartIndex",get:function(){var e;return null!==(e=this.partList)&&void 0!==e&&e.length?this.partList[this.partList.length-1].index:-1}},{key:"lastPartSn",get:function(){var e;return null!==(e=this.partList)&&void 0!==e&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}]),a),X=i(17),s=/^(\d+)x(\d+)$/,r=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,U=((Ht=n.prototype).decimalInteger=function(e){e=parseInt(this[e],10);return e>Number.MAX_SAFE_INTEGER?1/0:e},Ht.hexadecimalInteger=function(e){if(this[e]){for(var t=(1&(t=(this[e]||"0x").slice(2)).length?"0":"")+t,i=new Uint8Array(t.length/2),o=0;o<t.length/2;o++)i[o]=parseInt(t.slice(2*o,2*o+2),16);return i}return null},Ht.hexadecimalIntegerAsNumber=function(e){e=parseInt(this[e],16);return e>Number.MAX_SAFE_INTEGER?1/0:e},Ht.decimalFloatingPoint=function(e){return parseFloat(this[e])},Ht.optionalFloat=function(e,t){e=this[e];return e?parseFloat(e):t},Ht.enumeratedString=function(e){return this[e]},Ht.bool=function(e){return"YES"===this[e]},Ht.decimalResolution=function(e){e=s.exec(this[e]);if(null!==e)return{width:parseInt(e[1],10),height:parseInt(e[2],10)}},n.parseAttrList=function(e){var t,i={};for(r.lastIndex=0;null!==(t=r.exec(e));){var o=t[2];0===o.indexOf('"')&&o.lastIndexOf('"')===o.length-1&&(o=o.slice(1,-1)),i[t[1]]=o}return i},n),c={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,av01:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0},text:{stpp:!0,wvtt:!0}};function n(e){for(var t in"string"==typeof e&&(e=n.parseAttrList(e)),e)e.hasOwnProperty(t)&&(this[t]=e[t])}function a(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.fragments=[],this.url=e}function f(e,t){return MediaSource.isTypeSupported((t||"video")+'/mp4;codecs="'+e+'"')}var d=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-SESSION-DATA:([^\r\n]*)[\r\n]+/g,u=/#EXT-X-MEDIA:(.*)/g,V=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[\S ]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),G=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(PLAYLIST-TYPE):(.+)/.source,/#EXT-X-(MEDIA-SEQUENCE): *(\d+)/.source,/#EXT-X-(SKIP):(.+)/.source,/#EXT-X-(TARGETDURATION): *(\d+)/.source,/#EXT-X-(KEY):(.+)/.source,/#EXT-X-(START):(.+)/.source,/#EXT-X-(ENDLIST)/.source,/#EXT-X-(DISCONTINUITY-SEQ)UENCE: *(\d+)/.source,/#EXT-X-(DIS)CONTINUITY/.source,/#EXT-X-(VERSION):(\d+)/.source,/#EXT-X-(MAP):(.+)/.source,/#EXT-X-(SERVER-CONTROL):(.+)/.source,/#EXT-X-(PART-INF):(.+)/.source,/#EXT-X-(GAP)/.source,/#EXT-X-(BITRATE):\s*(\d+)/.source,/#EXT-X-(PART):(.+)/.source,/#EXT-X-(PRELOAD-HINT):(.+)/.source,/#EXT-X-(RENDITION-REPORT):(.+)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|")),Y=/\.(mp4|m4s|m4v|m4a)$/i,p=(h.findGroup=function(e,t){for(var i=0;i<e.length;i++){var o=e[i];if(o.id===t)return o}},h.convertAVC1ToAVCOTI=function(e){var t=e.split(".");if(2<t.length){var i=t.shift()+".";return(i+=parseInt(t.shift()).toString(16))+("000"+parseInt(t.shift()).toString(16)).substr(-4)}return e},h.resolve=function(e,t){return N.buildAbsoluteURL(t,e,{alwaysNormalize:!0})},h.parseMasterPlaylist=function(e,t){var i,o,s,r,n=[],a={},l=!1;for(d.lastIndex=0;null!=(r=d.exec(e));)r[1]?(o={attrs:i=new U(r[1]),bitrate:i.decimalInteger("AVERAGE-BANDWIDTH")||i.decimalInteger("BANDWIDTH"),name:i.NAME,url:h.resolve(r[2],t)},(s=i.decimalResolution("RESOLUTION"))&&(o.width=s.width,o.height=s.height),function(o,s){["video","audio","text"].forEach(function(i){var e,t=o.filter(function(e){return!!(t=c[i])&&!0===t[e.slice(0,4)];var t});t.length&&(e=t.filter(function(e){return 0===e.lastIndexOf("avc1",0)||0===e.lastIndexOf("mp4a",0)}),s[i+"Codec"]=(0<e.length?e:t)[0],o=o.filter(function(e){return-1===t.indexOf(e)}))}),s.unknownCodecs=o}((i.CODECS||"").split(/[ ,]+/).filter(function(e){return e}),o),o.videoCodec&&-1!==o.videoCodec.indexOf("avc1")&&(o.videoCodec=h.convertAVC1ToAVCOTI(o.videoCodec)),n.push(o)):!r[3]||(r=new U(r[3]))["DATA-ID"]&&(l=!0,a[r["DATA-ID"]]=r);return{levels:n,sessionData:l?a:null}},h.parseMasterPlaylistMedia=function(e,t,i,o){void 0===o&&(o=[]);var s=[],r=0;for(u.lastIndex=0;null!==(n=u.exec(e));){var n,a=new U(n[1]);a.TYPE===i&&(n={attrs:a,bitrate:0,id:r++,groupId:a["GROUP-ID"],instreamId:a["INSTREAM-ID"],name:a.NAME||a.LANGUAGE||"",type:i,default:a.bool("DEFAULT"),autoselect:a.bool("AUTOSELECT"),forced:a.bool("FORCED"),lang:a.LANGUAGE,url:a.URI?h.resolve(a.URI,t):""},o.length&&(g(n,a=h.findGroup(o,n.groupId)||o[0],"audioCodec"),g(n,a,"textCodec")),s.push(n))}return s},h.parseLevelPlaylist=function(e,t,i,o,s){var r,n,a,l=new q(t),c=l.fragments,d=null,u=0,h=0,f=0,p=0,v=null,g=new z.b(o,t),m=-1,y=!1;for(V.lastIndex=0,l.m3u8=e;null!==(r=V.exec(e));){y&&(y=!1,(g=new z.b(o,t)).start=f,g.sn=u,g.cc=p,g.level=i,d&&(g.initSegment=d,g.rawProgramDateTime=d.rawProgramDateTime));var b=r[1];if(b){g.duration=parseFloat(b);var w=(" "+r[2]).slice(1);g.title=w||null,g.tagList.push(w?["INF",b,w]:["INF",b])}else if(r[3])Object(F.a)(g.duration)&&(g.start=f,a&&(g.levelkey=a),g.sn=u,g.level=i,g.cc=p,g.urlId=s,c.push(g),g.relurl=(" "+r[3]).slice(1),Z(g,v),f+=(v=g).duration,u++,y=!(h=0));else if(r[4]){b=(" "+r[4]).slice(1);v?g.setByteRange(b,v):g.setByteRange(b)}else if(r[5])g.rawProgramDateTime=(" "+r[5]).slice(1),g.tagList.push(["PROGRAM-DATE-TIME",g.rawProgramDateTime]),-1===m&&(m=c.length);else if(r=r[0].match(G)){for(n=1;n<r.length&&void 0===r[n];n++);var k=(" "+r[n]).slice(1),x=(" "+r[n+1]).slice(1),A=r[n+2]?(" "+r[n+2]).slice(1):"";switch(k){case"PLAYLIST-TYPE":l.type=x.toUpperCase();break;case"MEDIA-SEQUENCE":u=l.startSN=parseInt(x);break;case"SKIP":var T=new U(x),_=T.decimalInteger("SKIPPED-SEGMENTS");if(Object(F.a)(_)){for(var E=l.skippedSegments=_;E--;)c.unshift(null);u+=_}var S=T.enumeratedString("RECENTLY-REMOVED-DATERANGES");S&&(l.recentlyRemovedDateranges=S.split("\t"));break;case"TARGETDURATION":l.targetduration=parseFloat(x);break;case"VERSION":l.version=parseInt(x);break;case"EXTM3U":break;case"ENDLIST":l.live=!1;break;case"#":(x||A)&&g.tagList.push(A?[x,A]:[x]);break;case"DIS":p++;case"GAP":g.tagList.push([k]);break;case"BITRATE":g.tagList.push([k,x]);break;case"DISCONTINUITY-SEQ":p=parseInt(x);break;case"KEY":var L=new U(x),C=L.enumeratedString("METHOD"),_=L.URI,O=L.hexadecimalInteger("IV"),T=L.enumeratedString("KEYFORMATVERSIONS"),S=L.enumeratedString("KEYID"),L=null!=(L=L.enumeratedString("KEYFORMAT"))?L:"identity";if(-1<["com.apple.streamingkeydelivery","com.microsoft.playready","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed","com.widevine"].indexOf(L)){H.b.warn("Keyformat "+L+" is not supported from the manifest");continue}if("identity"!==L)continue;C&&(a=X.a.fromURL(t,_),_&&0<=["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(C)&&(a.method=C,a.keyFormat=L,S&&(a.keyID=S),T&&(a.keyFormatVersions=T),a.iv=O));break;case"START":O=new U(x).decimalFloatingPoint("TIME-OFFSET");Object(F.a)(O)&&(l.startTimeOffset=O);break;case"MAP":var P=new U(x);g.relurl=P.URI,P.BYTERANGE&&g.setByteRange(P.BYTERANGE),g.level=i,g.sn="initSegment",a&&(g.levelkey=a),g.initSegment=null,d=g,y=!0;break;case"SERVER-CONTROL":var j=new U(x);l.canBlockReload=j.bool("CAN-BLOCK-RELOAD"),l.canSkipUntil=j.optionalFloat("CAN-SKIP-UNTIL",0),l.canSkipDateRanges=0<l.canSkipUntil&&j.bool("CAN-SKIP-DATERANGES"),l.partHoldBack=j.optionalFloat("PART-HOLD-BACK",0),l.holdBack=j.optionalFloat("HOLD-BACK",0);break;case"PART-INF":var I=new U(x);l.partTarget=I.decimalFloatingPoint("PART-TARGET");break;case"PART":P=(P=l.partList)||(l.partList=[]),j=0<h?P[P.length-1]:void 0,I=h++,j=new z.c(new U(x),g,t,I,j);P.push(j),g.duration+=j.duration;break;case"PRELOAD-HINT":var M=new U(x);l.preloadHint=M;break;case"RENDITION-REPORT":M=new U(x);l.renditionReports=l.renditionReports||[],l.renditionReports.push(M);break;default:H.b.warn("line parsed but not handled: "+r)}}else H.b.warn("No matches on slow regex match for level playlist!")}v&&!v.relurl?(c.pop(),f-=v.duration,l.partList&&(l.fragmentHint=v)):l.partList&&(Z(g,v),g.cc=p,l.fragmentHint=g);var B=c.length,D=c[0],R=c[B-1];return 0<(f+=l.skippedSegments*l.targetduration)&&B&&R?(l.averagetargetduration=f/B,B=R.sn,l.endSN="initSegment"!==B?B:0,D&&(l.startCC=D.cc,D.initSegment||l.fragments.every(function(e){return e.relurl&&(e=e.relurl,Y.test(null!=(e=null===(e=N.parseURL(e))||void 0===e?void 0:e.path)?e:""))})&&(H.b.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),(g=new z.b(o,t)).relurl=R.relurl,g.level=i,g.sn="initSegment",D.initSegment=g,l.needSidxRanges=!0))):(l.endSN=0,l.startCC=0),l.fragmentHint&&(f+=l.fragmentHint.duration),l.totalduration=f,l.endCC=p,0<m&&function(e){for(var t=e[m],i=m;i--;){var o=e[i];if(!o)return;o.programDateTime=t.programDateTime-1e3*o.duration,t=o}}(c),l},h);function h(){}function g(e,t,i){t=t[i];t&&(e[i]=t)}function Z(e,t){e.rawProgramDateTime?e.programDateTime=Date.parse(e.rawProgramDateTime):null!=t&&t.programDateTime&&(e.programDateTime=t.endProgramDateTime),Object(F.a)(e.programDateTime)||(e.programDateTime=null,e.rawProgramDateTime=null)}var y=i(4);function b(e,t){e=e.url;return void 0!==e&&0!==e.indexOf("data:")||(e=t.url),e}var w=((st=A.prototype).registerListeners=function(){var e=this.hls;e.on(m.a.MANIFEST_LOADING,this.onManifestLoading,this),e.on(m.a.LEVEL_LOADING,this.onLevelLoading,this),e.on(m.a.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(m.a.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},st.unregisterListeners=function(){var e=this.hls;e.off(m.a.MANIFEST_LOADING,this.onManifestLoading,this),e.off(m.a.LEVEL_LOADING,this.onLevelLoading,this),e.off(m.a.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(m.a.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},st.createInternalLoader=function(e){var t=this.hls.config,i=t.pLoader,o=t.loader,t=new(i||o)(t);return e.loader=t,this.loaders[e.type]=t},st.getInternalLoader=function(e){return this.loaders[e.type]},st.resetInternalLoader=function(e){this.loaders[e]&&delete this.loaders[e]},st.destroyInternalLoaders=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}},st.destroy=function(){this.unregisterListeners(),this.destroyInternalLoaders()},st.onManifestLoading=function(e,t){t=t.url;this.load({id:null,groupId:null,level:0,responseType:"text",type:y.a.MANIFEST,url:t,deliveryDirectives:null})},st.onLevelLoading=function(e,t){var i=t.id,o=t.level,s=t.url,t=t.deliveryDirectives;this.load({id:i,groupId:null,level:o,responseType:"text",type:y.a.LEVEL,url:s,deliveryDirectives:t})},st.onAudioTrackLoading=function(e,t){var i=t.id,o=t.groupId,s=t.url,t=t.deliveryDirectives;this.load({id:i,groupId:o,level:null,responseType:"text",type:y.a.AUDIO_TRACK,url:s,deliveryDirectives:t})},st.onSubtitleTrackLoading=function(e,t){var i=t.id,o=t.groupId,s=t.url,t=t.deliveryDirectives;this.load({id:i,groupId:o,level:null,responseType:"text",type:y.a.SUBTITLE_TRACK,url:s,deliveryDirectives:t})},st.load=function(e){var t,i,o,s,r,n=this.hls.config;if(l=this.getInternalLoader(e)){var a=l.context;if(a&&a.url===e.url)return void H.b.trace("[playlist-loader]: playlist request ongoing");H.b.log("[playlist-loader]: aborting previous loader for type: "+e.type),l.abort()}switch(e.type){case y.a.MANIFEST:t=n.manifestLoadingMaxRetry,i=n.manifestLoadingTimeOut,o=n.manifestLoadingRetryDelay,s=n.manifestLoadingMaxRetryTimeout;break;case y.a.LEVEL:case y.a.AUDIO_TRACK:case y.a.SUBTITLE_TRACK:t=0,i=n.levelLoadingTimeOut;break;default:t=n.levelLoadingMaxRetry,i=n.levelLoadingTimeOut,o=n.levelLoadingRetryDelay,s=n.levelLoadingMaxRetryTimeout}var l=this.createInternalLoader(e);null!==(a=e.deliveryDirectives)&&void 0!==a&&a.part&&(e.type===y.a.LEVEL&&null!==e.level?r=this.hls.levels[e.level].details:e.type===y.a.AUDIO_TRACK&&null!==e.id?r=this.hls.audioTracks[e.id].details:e.type===y.a.SUBTITLE_TRACK&&null!==e.id&&(r=this.hls.subtitleTracks[e.id].details),r)&&(c=r.partTarget,d=r.targetduration,c&&d&&(i=Math.min(1e3*Math.max(3*c,.8*d),i)));var c={timeout:i,maxRetry:t,retryDelay:o,maxRetryDelay:s,highWaterMark:0},d={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};l.load(e,c,d)},st.loadsuccess=function(e,t,i,o){if(void 0===o&&(o=null),i.isSidxRequest)return this.handleSidxRequest(e,i),void this.handlePlaylistLoaded(e,t,i,o);this.resetInternalLoader(i.type);var s=e.data;0===s.indexOf("#EXTM3U")?(t.parsing.start=performance.now(),0<s.indexOf("#EXTINF:")||0<s.indexOf("#EXT-X-TARGETDURATION:")?this.handleTrackOrLevelPlaylist(e,t,i,o):this.handleMasterPlaylist(e,t,i,o)):this.handleManifestParsingError(e,i,"no EXTM3U delimiter",o)},st.loaderror=function(e,t,i){void 0===i&&(i=null),this.handleNetworkError(t,i,!1,e)},st.loadtimeout=function(e,t,i){void 0===i&&(i=null),this.handleNetworkError(t,i,!0)},st.handleMasterPlaylist=function(e,t,i,o){var s,r=this.hls,n=e.data,a=b(e,i),l=p.parseMasterPlaylist(n,a),c=l.levels,d=l.sessionData;c.length?(s=c.map(function(e){return{id:e.attrs.AUDIO,audioCodec:e.audioCodec}}),l=c.map(function(e){return{id:e.attrs.SUBTITLES,textCodec:e.textCodec}}),s=p.parseMasterPlaylistMedia(n,a,"AUDIO",s),l=p.parseMasterPlaylistMedia(n,a,"SUBTITLES",l),n=p.parseMasterPlaylistMedia(n,a,"CLOSED-CAPTIONS"),s.length&&(s.some(function(e){return!e.url})||!c[0].audioCodec||c[0].attrs.AUDIO||(H.b.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),s.unshift({type:"main",name:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new U({}),bitrate:0,url:""}))),r.trigger(m.a.MANIFEST_LOADED,{levels:c,audioTracks:s,subtitles:l,captions:n,url:a,stats:t,networkDetails:o,sessionData:d})):this.handleManifestParsingError(e,i,"no level found in manifest",o)},st.handleTrackOrLevelPlaylist=function(e,t,i,o){var s,r=this.hls,n=i.id,a=i.level,l=i.type,c=b(e,i),d=Object(F.a)(n)?n:0,u=Object(F.a)(a)?a:d,h=function(){switch(i.type){case y.a.AUDIO_TRACK:return y.b.AUDIO;case y.a.SUBTITLE_TRACK:return y.b.SUBTITLE;default:return y.b.MAIN}}(),d=p.parseLevelPlaylist(e.data,c,u,h,d);d.fragments.length?(l===y.a.MANIFEST&&(s={attrs:new U({}),bitrate:0,details:d,name:"",url:c},r.trigger(m.a.MANIFEST_LOADED,{levels:[s],audioTracks:[],url:c,stats:t,networkDetails:o,sessionData:null})),t.parsing.end=performance.now(),d.needSidxRanges?(s=null===(s=d.fragments[0].initSegment)||void 0===s?void 0:s.url,this.load({url:s,isSidxRequest:!0,type:l,level:a,levelDetails:d,id:n,groupId:null,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer",deliveryDirectives:null})):(i.levelDetails=d,this.handlePlaylistLoaded(e,t,i,o))):r.trigger(m.a.ERROR,{type:v.b.NETWORK_ERROR,details:v.a.LEVEL_EMPTY_ERROR,fatal:!1,url:c,reason:"no fragments found in level",level:"number"==typeof i.level?i.level:void 0})},st.handleSidxRequest=function(e,t){var i,o=Object(l.g)(new Uint8Array(e.data));o&&(e=o.references,i=t.levelDetails,e.forEach(function(e,t){e=e.info,t=i.fragments[t];0===t.byteRange.length&&t.setByteRange(String(1+e.end-e.start)+"@"+String(e.start)),t.initSegment&&t.initSegment.setByteRange(String(o.moovEndOffset)+"@0")}))},st.handleManifestParsingError=function(e,t,i,o){this.hls.trigger(m.a.ERROR,{type:v.b.NETWORK_ERROR,details:v.a.MANIFEST_PARSING_ERROR,fatal:t.type===y.a.MANIFEST,url:e.url,reason:i,response:e,context:t,networkDetails:o})},st.handleNetworkError=function(e,t,i,o){void 0===i&&(i=!1),H.b.warn("[playlist-loader]: A network "+(i?"timeout":"error")+" occurred while loading "+e.type+" level: "+e.level+" id: "+e.id+' group-id: "'+e.groupId+'"');var s=v.a.UNKNOWN,r=!1,n=this.getInternalLoader(e);switch(e.type){case y.a.MANIFEST:s=i?v.a.MANIFEST_LOAD_TIMEOUT:v.a.MANIFEST_LOAD_ERROR,r=!0;break;case y.a.LEVEL:s=i?v.a.LEVEL_LOAD_TIMEOUT:v.a.LEVEL_LOAD_ERROR,r=!1;break;case y.a.AUDIO_TRACK:s=i?v.a.AUDIO_TRACK_LOAD_TIMEOUT:v.a.AUDIO_TRACK_LOAD_ERROR,r=!1;break;case y.a.SUBTITLE_TRACK:s=i?v.a.SUBTITLE_TRACK_LOAD_TIMEOUT:v.a.SUBTITLE_LOAD_ERROR,r=!1}n&&this.resetInternalLoader(e.type);t={type:v.b.NETWORK_ERROR,details:s,fatal:r,url:e.url,loader:n,context:e,networkDetails:t};o&&(t.response=o),this.hls.trigger(m.a.ERROR,t)},st.handlePlaylistLoaded=function(e,t,i,o){var s=i.type,r=i.level,n=i.id,a=i.groupId,l=i.loader,c=i.levelDetails,d=i.deliveryDirectives;if(null!=c&&c.targetduration){if(l)switch(c.live&&(l.getCacheAge&&(c.ageHeader=l.getCacheAge()||0),l.getCacheAge&&!isNaN(c.ageHeader)||(c.ageHeader=0)),s){case y.a.MANIFEST:case y.a.LEVEL:this.hls.trigger(m.a.LEVEL_LOADED,{details:c,level:r||0,id:n||0,stats:t,networkDetails:o,deliveryDirectives:d});break;case y.a.AUDIO_TRACK:this.hls.trigger(m.a.AUDIO_TRACK_LOADED,{details:c,id:n||0,groupId:a||"",stats:t,networkDetails:o,deliveryDirectives:d});break;case y.a.SUBTITLE_TRACK:this.hls.trigger(m.a.SUBTITLE_TRACK_LOADED,{details:c,id:n||0,groupId:a||"",stats:t,networkDetails:o,deliveryDirectives:d})}}else this.handleManifestParsingError(e,i,"invalid target duration",o)},A),k=((Ut=x.prototype)._registerListeners=function(){this.hls.on(m.a.KEY_LOADING,this.onKeyLoading,this)},Ut._unregisterListeners=function(){this.hls.off(m.a.KEY_LOADING,this.onKeyLoading)},Ut.destroy=function(){for(var e in this._unregisterListeners(),this.loaders){var t=this.loaders[e];t&&t.destroy()}this.loaders={}},Ut.onKeyLoading=function(e,t){var i,o=t.frag,s=o.type,r=this.loaders[s];o.decryptdata?(i=o.decryptdata.uri)!==this.decrypturl||null===this.decryptkey?(t=this.hls.config,r&&(H.b.warn("abort previous key loader for type:"+s),r.abort()),i?(r=t.loader,s=o.loader=this.loaders[s]=new r(t),this.decrypturl=i,this.decryptkey=null,r={url:i,frag:o,responseType:"arraybuffer"},i={timeout:t.fragLoadingTimeOut,maxRetry:0,retryDelay:t.fragLoadingRetryDelay,maxRetryDelay:t.fragLoadingMaxRetryTimeout,highWaterMark:0},t={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},s.load(r,i,t)):H.b.warn("key uri is falsy")):this.decryptkey&&(o.decryptdata.key=this.decryptkey,this.hls.trigger(m.a.KEY_LOADED,{frag:o})):H.b.warn("Missing decryption data on fragment in onKeyLoading")},Ut.loadsuccess=function(e,t,i){i=i.frag;i.decryptdata?(this.decryptkey=i.decryptdata.key=new Uint8Array(e.data),i.loader=null,delete this.loaders[i.type],this.hls.trigger(m.a.KEY_LOADED,{frag:i})):H.b.error("after key load, decryptdata unset")},Ut.loaderror=function(e,t){var i=t.frag,t=i.loader;t&&t.abort(),delete this.loaders[i.type],this.hls.trigger(m.a.ERROR,{type:v.b.NETWORK_ERROR,details:v.a.KEY_LOAD_ERROR,fatal:!1,frag:i,response:e})},Ut.loadtimeout=function(e,t){var i=t.frag,t=i.loader;t&&t.abort(),delete this.loaders[i.type],this.hls.trigger(m.a.ERROR,{type:v.b.NETWORK_ERROR,details:v.a.KEY_LOAD_TIMEOUT,fatal:!1,frag:i})},x);function x(e){this.hls=void 0,this.loaders={},this.decryptkey=null,this.decrypturl=null,this.hls=e,this._registerListeners()}function A(e){this.hls=void 0,this.loaders=Object.create(null),this.hls=e,this.registerListeners()}function T(e,t){var i;try{i=new Event("addtrack")}catch(e){(i=document.createEvent("Event")).initEvent("addtrack",!1,!1)}i.track=e,t.dispatchEvent(i)}function _(e,t){var i=e.mode;if("disabled"===i&&(e.mode="hidden"),e.cues&&!e.cues.getCueById(t.id))try{if(e.addCue(t),!e.cues.getCueById(t.id))throw new Error("addCue is failed for: "+t)}catch(i){H.b.debug("[texttrack-utils]: "+i);var o=new self.TextTrackCue(t.startTime,t.endTime,t.text);o.id=t.id,e.addCue(o)}"disabled"===i&&(e.mode=i)}function E(e){var t=e.mode;if("disabled"===t&&(e.mode="hidden"),e.cues)for(var i=e.cues.length;i--;)e.removeCue(e.cues[i]);"disabled"===t&&(e.mode=t)}function S(e,t,i){var o=e.mode;if("disabled"===o&&(e.mode="hidden"),e.cues&&0<e.cues.length)for(var s=function(e,t,i){var o=[],s=function(e,t){if(t<e[0].startTime)return 0;var i=e.length-1;if(t>e[i].endTime)return-1;for(var o=0,s=i;o<=s;){var r=Math.floor((s+o)/2);if(t<e[r].startTime)s=r-1;else{if(!(t>e[r].startTime&&o<i))return r;o=r+1}}return e[o].startTime-t<t-e[s].startTime?o:s}(e,t);if(-1<s)for(var r=s,n=e.length;r<n;r++){var a=e[r];if(a.startTime>=t&&a.endTime<=i)o.push(a);else if(a.startTime>i)return o}return o}(e.cues,t,i),r=0;r<s.length;r++)e.removeCue(s[r]);"disabled"===o&&(e.mode=o)}var L=i(7),C=((Qi=O.prototype).destroy=function(){this._unregisterListeners()},Qi._registerListeners=function(){var e=this.hls;e.on(m.a.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(m.a.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(m.a.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(m.a.BUFFER_FLUSHING,this.onBufferFlushing,this)},Qi._unregisterListeners=function(){var e=this.hls;e.off(m.a.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(m.a.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(m.a.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(m.a.BUFFER_FLUSHING,this.onBufferFlushing,this)},Qi.onMediaAttached=function(e,t){this.media=t.media},Qi.onMediaDetaching=function(){this.id3Track&&(E(this.id3Track),this.id3Track=null,this.media=null)},Qi.getID3Track=function(e){if(this.media){for(var t=0;t<e.length;t++){var i=e[t];if("metadata"===i.kind&&"id3"===i.label)return T(i,this.media),i}return this.media.addTextTrack("metadata","id3")}},Qi.onFragParsingMetadata=function(e,t){if(this.media){var i=t.frag,o=t.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var s=self.WebKitDataCue||self.VTTCue||self.TextTrackCue,r=0;r<o.length;r++){var n=L.c(o[r].data);if(n){var a=o[r].pts,l=r<o.length-1?o[r+1].pts:i.end;l-a<=0&&(l=a+.25);for(var c=0;c<n.length;c++){var d,u=n[c];L.e(u)||((d=new s(a,l,"")).value=u,this.id3Track.addCue(d))}}}}},Qi.onBufferFlushing=function(e,t){var i=t.startOffset,o=t.endOffset,t=t.type;t&&"audio"!==t||(t=this.id3Track)&&S(t,i,o)},O);function O(e){this.hls=void 0,this.id3Track=null,this.media=null,this.hls=e,this._registerListeners()}function P(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var j,I=((uo=M.prototype).destroy=function(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null},uo.registerListeners=function(){this.hls.on(m.a.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(m.a.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(m.a.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(m.a.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(m.a.ERROR,this.onError,this)},uo.unregisterListeners=function(){this.hls.off(m.a.MEDIA_ATTACHED,this.onMediaAttached),this.hls.off(m.a.MEDIA_DETACHING,this.onMediaDetaching),this.hls.off(m.a.MANIFEST_LOADING,this.onManifestLoading),this.hls.off(m.a.LEVEL_UPDATED,this.onLevelUpdated),this.hls.off(m.a.ERROR,this.onError)},uo.onMediaAttached=function(e,t){this.media=t.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)},uo.onMediaDetaching=function(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)},uo.onManifestLoading=function(){this.levelDetails=null,this._latency=null,this.stallCount=0},uo.onLevelUpdated=function(e,t){t=t.details;(this.levelDetails=t).advanced&&this.timeupdate(),!t.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)},uo.onError=function(e,t){t.details===v.a.BUFFER_STALLED_ERROR&&(this.stallCount++,H.b.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))},uo.timeupdate=function(){var e,t,i,o=this.media,s=this.levelDetails;o&&s&&(this.currentTime=o.currentTime,null!==(i=this.computeLatency())&&(this._latency=i,e=(t=this.config).lowLatencyMode,t=t.maxLiveSyncPlaybackRate,!e||1===t||null!==(e=this.targetLatency)&&(e=(i=i-e)<Math.min(this.maxLatency,e+s.targetduration),s.live&&e&&.05<i&&1<this.forwardBufferLength?(t=Math.min(2,Math.max(1,t)),i=Math.round(2/(1+Math.exp(-.75*i-this.edgeStalled))*20)/20,o.playbackRate=Math.min(t,Math.max(1,i))):1!==o.playbackRate&&0!==o.playbackRate&&(o.playbackRate=1))))},uo.estimateLiveEdge=function(){var e=this.levelDetails;return null===e?null:e.edge+e.age},uo.computeLatency=function(){var e=this.estimateLiveEdge();return null===e?null:e-this.currentTime},P(M.prototype,[{key:"latency",get:function(){return this._latency||0}},{key:"maxLatency",get:function(){var e=this.config,t=this.levelDetails;return void 0!==e.liveMaxLatencyDuration?e.liveMaxLatencyDuration:t?e.liveMaxLatencyDurationCount*t.targetduration:0}},{key:"targetLatency",get:function(){var e=this.levelDetails;if(null===e)return null;var t=e.holdBack,i=e.partHoldBack,o=e.targetduration,s=this.config,r=s.liveSyncDuration,n=s.liveSyncDurationCount,e=s.lowLatencyMode,s=this.hls.userConfig,t=e&&i||t;(s.liveSyncDuration||s.liveSyncDurationCount||0===t)&&(t=void 0!==r?r:n*o);return t+Math.min(+this.stallCount,o)}},{key:"liveSyncPosition",get:function(){var e=this.estimateLiveEdge(),t=this.targetLatency,i=this.levelDetails;if(null===e||null===t||null===i)return null;var o=i.edge,e=e-t-this.edgeStalled,t=o-i.totalduration,i=o-(this.config.lowLatencyMode&&i.partTarget||i.targetduration);return Math.min(Math.max(t,e),i)}},{key:"drift",get:function(){var e=this.levelDetails;return null===e?1:e.drift}},{key:"edgeStalled",get:function(){var e=this.levelDetails;if(null===e)return 0;var t=3*(this.config.lowLatencyMode&&e.partTarget||e.targetduration);return Math.max(e.age-t,0)}},{key:"forwardBufferLength",get:function(){var e=this.media,t=this.levelDetails;if(!e||!t)return 0;var i=e.buffered.length;return i?e.buffered.end(i-1):t.edge-this.currentTime}}]),M);function M(e){var t=this;this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=function(){return t.timeupdate()},this.hls=e,this.config=e.config,this.registerListeners()}function B(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}(eo=j=j||{}).No="",eo.Yes="YES",eo.v2="v2";var D=(W.prototype.addDirectives=function(e){e=new self.URL(e);return void 0!==this.msn&&e.searchParams.set("_HLS_msn",this.msn.toString()),void 0!==this.part&&e.searchParams.set("_HLS_part",this.part.toString()),this.skip&&e.searchParams.set("_HLS_skip",this.skip),e.toString()},W),R=(B(K.prototype,[{key:"maxBitrate",get:function(){return Math.max(this.realBitrate,this.bitrate)}},{key:"uri",get:function(){return this.url[this._urlId]||""}},{key:"urlId",get:function(){return this._urlId},set:function(e){e%=this.url.length;this._urlId!==e&&(this.details=void 0,this._urlId=e)}}]),K);function K(e){this.attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.unknownCodecs=void 0,this.audioGroupIds=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.textGroupIds=void 0,this.url=void 0,this._urlId=0,this.url=[e.url],this.attrs=e.attrs,this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.unknownCodecs=e.unknownCodecs,this.codecSet=[e.videoCodec,e.audioCodec].filter(function(e){return e}).join(",").replace(/\.[^.,]+/g,"")}function W(e,t,i){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=t,this.skip=i}function Q(e,t,i){switch(t){case"audio":e.audioGroupIds||(e.audioGroupIds=[]),e.audioGroupIds.push(i);break;case"text":e.textGroupIds||(e.textGroupIds=[]),e.textGroupIds.push(i)}}function J(e){var i={};e.forEach(function(e){var t=e.groupId||"";e.id=i[t]=i[t]||0,i[t]++})}function $(e,t){var i,o=t.startPTS;Object(F.a)(o)?(i=0,(o=t.sn>e.sn?(i=o-e.start,e):(i=e.start-o,t)).duration!==i&&(o.duration=i)):t.sn>e.sn?e.cc===t.cc&&e.minEndPTS?t.start=e.start+(e.minEndPTS-e.start):t.start=e.start+e.duration:t.start=Math.max(e.start-t.duration,0)}function ee(e,t,i,o,s,r){o-i<=0&&(H.b.warn("Fragment should have a positive duration",t),o=i+t.duration,r=s+t.duration);var n,a=i,l=o,c=t.startPTS,d=t.endPTS;Object(F.a)(c)&&(n=Math.abs(c-i),Object(F.a)(t.deltaPTS)?t.deltaPTS=Math.max(n,t.deltaPTS):t.deltaPTS=n,a=Math.max(i,c),i=Math.min(i,c),s=Math.min(s,t.startDTS),l=Math.min(o,d),o=Math.max(o,d),r=Math.max(r,t.endDTS)),t.duration=o-i;d=i-t.start;t.appendedPTS=o,t.start=t.startPTS=i,t.maxStartPTS=a,t.startDTS=s,t.endPTS=o,t.minEndPTS=l,t.endDTS=r;var u,r=t.sn;if(!e||r<e.startSN||r>e.endSN)return 0;var r=r-e.startSN,h=e.fragments;for(h[r]=t,u=r;0<u;u--)$(h[u],h[u-1]);for(u=r;u<h.length-1;u++)$(h[u],h[u+1]);return e.fragmentHint&&$(h[h.length-1],e.fragmentHint),e.PTSKnown=e.alignedSliding=!0,d}function te(e,u){for(var h=null,t=e.fragments,i=t.length-1;0<=i;i--){var o=t[i].initSegment;if(o){h=o;break}}e.fragmentHint&&delete e.fragmentHint.endPTS;var f,p=0;if(function(e,t){for(var i=t.skippedSegments,o=Math.max(e.startSN,t.startSN)-t.startSN,s=(e.fragmentHint?1:0)+(i?t.endSN:Math.min(e.endSN,t.endSN))-t.startSN,r=t.startSN-e.startSN,n=t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments,a=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,l=o;l<=s;l++){var c=a[r+l],d=n[l];i&&!d&&l<i&&(d=t.fragments[l]=c),c&&d&&(d=d,(c=c).relurl&&(p=c.cc-d.cc),Object(F.a)(c.startPTS)&&Object(F.a)(c.endPTS)&&(d.start=d.startPTS=c.startPTS,d.startDTS=c.startDTS,d.appendedPTS=c.appendedPTS,d.maxStartPTS=c.maxStartPTS,d.endPTS=c.endPTS,d.endDTS=c.endDTS,d.minEndPTS=c.minEndPTS,d.duration=c.endPTS-c.startPTS,d.duration&&(f=d),u.PTSKnown=u.alignedSliding=!0),d.elementaryStreams=c.elementaryStreams,d.loader=c.loader,d.stats=c.stats,d.urlId=c.urlId,c.initSegment&&(d.initSegment=c.initSegment,h=c.initSegment))}}(e,u),h&&(u.fragmentHint?u.fragments.concat(u.fragmentHint):u.fragments).forEach(function(e){e.initSegment&&e.initSegment.relurl!==(null===h||void 0===h?void 0:h.relurl)||(e.initSegment=h)}),u.skippedSegments&&(u.deltaUpdateFailed=u.fragments.some(function(e){return!e}),u.deltaUpdateFailed)){H.b.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(var s=u.skippedSegments;s--;)u.fragments.shift();u.startSN=u.fragments[0].sn,u.startCC=u.fragments[0].cc}var r=u.fragments;if(p){H.b.warn("discontinuity sliding from playlist, take drift into account");for(var n=0;n<r.length;n++)r[n].cc+=p}u.skippedSegments&&(u.startCC=u.fragments[0].cc),function(e,t){if(e&&t)for(var i=0,o=0,s=e.length;o<=s;o++){var r=e[o],n=t[o+i];r&&n&&r.index===n.index&&r.fragment.sn===n.fragment.sn?(r=r,(n=n).elementaryStreams=r.elementaryStreams,n.stats=r.stats):i--}}(e.partList,u.partList),f?ee(u,f,f.startPTS,f.endPTS,f.startDTS,f.endDTS):ie(e,u),r.length&&(u.totalduration=u.edge-r[0].start),u.driftStartTime=e.driftStartTime,u.driftStart=e.driftStart;var a,l=u.advancedDateTime;u.advanced&&l?(a=u.edge,u.driftStart||(u.driftStartTime=l,u.driftStart=a),u.driftEndTime=l,u.driftEnd=a):(u.driftEndTime=e.driftEndTime,u.driftEnd=e.driftEnd,u.advancedDateTime=e.advancedDateTime)}function ie(e,t){var i=t.startSN+t.skippedSegments-e.startSN,e=e.fragments;i<0||i>=e.length||oe(t,e[i].start)}function oe(e,t){if(t){for(var i=e.fragments,o=e.skippedSegments;o<i.length;o++)i[o].start+=t;e.fragmentHint&&(e.fragmentHint.start+=t)}}var se=((Yi=re.prototype).destroy=function(){this.clearTimer(),this.hls=this.log=this.warn=null},Yi.onError=function(e,t){t.fatal&&t.type===v.b.NETWORK_ERROR&&this.clearTimer()},Yi.clearTimer=function(){clearTimeout(this.timer),this.timer=-1},Yi.startLoad=function(){this.canLoad=!0,this.retryCount=0,this.loadPlaylist()},Yi.stopLoad=function(){this.canLoad=!1,this.clearTimer()},Yi.switchParams=function(e,t){var i=null==t?void 0:t.renditionReports;if(i)for(var o=0;o<i.length;o++){var s=i[o],r=""+s.URI;if(r===e.substr(-r.length)){var n=parseInt(s["LAST-MSN"]),r=parseInt(s["LAST-PART"]);if(t&&this.hls.config.lowLatencyMode&&(s=Math.min(t.age-t.partTarget,t.targetduration),void 0!==r&&s>t.partTarget&&(r+=1)),Object(F.a)(n))return new D(n,Object(F.a)(r)?r:void 0,j.No)}}},Yi.loadPlaylist=function(e){},Yi.shouldLoadTrack=function(e){return this.canLoad&&e&&!!e.url&&(!e.details||e.details.live)},Yi.playlistLoaded=function(e,t,i){var o=this,s=t.details,r=t.stats,n=r.loading.end?Math.max(0,self.performance.now()-r.loading.end):0;if(s.advancedDateTime=Date.now()-n,s.live||null!=i&&i.live){if(s.reloaded(i),i&&this.log("live playlist "+e+" "+(s.advanced?"REFRESHED "+s.lastPartSn+"-"+s.lastPartIndex:"MISSED")),i&&0<s.fragments.length&&te(i,s),this.canLoad&&s.live){var a,l=void 0,c=void 0;if(s.canBlockReload&&s.endSN&&s.advanced){var d=this.hls.config.lowLatencyMode,u=s.lastPartSn,h=s.endSN,n=s.lastPartIndex,f=u===h;-1!==n?(l=f?h+1:u,c=f?d?0:n:n+1):l=h+1;var p,n=s.age,h=n+s.ageHeader,h=Math.min(h-s.partTarget,1.5*s.targetduration);if(0<h&&(i&&h>i.tuneInGoal?(this.warn("CDN Tune-in goal increased from: "+i.tuneInGoal+" to: "+h+" with playlist age: "+s.age),h=0):(l+=p=Math.floor(h/s.targetduration),void 0!==c&&(c+=Math.round(h%s.targetduration/s.partTarget)),this.log("CDN Tune-in age: "+s.ageHeader+"s last advanced "+n.toFixed(2)+"s goal: "+h+" skip sn "+p+" to part "+c)),s.tuneInGoal=h),a=this.getDeliveryDirectives(s,t.deliveryDirectives,l,c),d||!f)return void this.loadPlaylist(a)}else a=this.getDeliveryDirectives(s,t.deliveryDirectives,l,c);var v=(h=1e3*(p=s).levelTargetDuration,d=h/2,f=p.age,t=0<f&&f<3*h,c=r.loading.end-r.loading.start,r=p.availabilityDelay,!1===p.updated?t?(v=333*p.misses,v=Math.max(Math.min(d,2*c),v),p.availabilityDelay=(p.availabilityDelay||0)+v):v=d:v=t?(r=Math.min(r||h/2,f),(p.availabilityDelay=r)+h-f):h-c,Math.round(v));void 0!==l&&s.canBlockReload&&(v-=s.partTarget||1),this.log("reload live playlist "+e+" in "+Math.round(v)+" ms"),this.timer=self.setTimeout(function(){return o.loadPlaylist(a)},v)}}else this.clearTimer()},Yi.getDeliveryDirectives=function(e,t,i,o){var s,r,n,r=(s=e.canSkipUntil,r=e.canSkipDateRanges,n=e.endSN,s&&(void 0!==i?i-n:0)<s?r?j.v2:j.Yes:j.No);return null!=t&&t.skip&&e.deltaUpdateFailed&&(i=t.msn,o=t.part,r=j.No),new D(i,o,r)},Yi.retryLoadingOrFail=function(e){var t,i=this,o=this.hls.config,s=this.retryCount<o.levelLoadingMaxRetry;return s?(this.retryCount++,-1<e.details.indexOf("LoadTimeOut")&&null!==(t=e.context)&&void 0!==t&&t.deliveryDirectives?(this.warn("retry playlist loading #"+this.retryCount+' after "'+e.details+'"'),this.loadPlaylist()):(o=Math.min(Math.pow(2,this.retryCount)*o.levelLoadingRetryDelay,o.levelLoadingMaxRetryTimeout),this.timer=self.setTimeout(function(){return i.loadPlaylist()},o),this.warn("retry playlist loading #"+this.retryCount+" in "+o+' ms after "'+e.details+'"'))):(this.warn('cannot recover from error "'+e.details+'"'),this.clearTimer(),e.fatal=!0),s},re);function re(e,t){this.hls=void 0,this.timer=-1,this.canLoad=!1,this.retryCount=0,this.log=void 0,this.warn=void 0,this.log=H.b.log.bind(H.b,t+":"),this.warn=H.b.warn.bind(H.b,t+":"),this.hls=e}function ne(){return(ne=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i,o=arguments[t];for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i])}return e}).apply(this,arguments)}function ae(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function le(e,t){return(le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ce,de=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),ue=function(a){var e;function t(e){return(e=a.call(this,e,"[level-controller]")||this)._levels=[],e._firstLevel=-1,e._startLevel=void 0,e.currentLevelIndex=-1,e.manualLevelIndex=-1,e.onParsedComplete=void 0,e._registerListeners(),e}i=a,(e=t).prototype=Object.create(i.prototype),le(e.prototype.constructor=e,i);var i=t.prototype;return i._registerListeners=function(){var e=this.hls;e.on(m.a.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(m.a.LEVEL_LOADED,this.onLevelLoaded,this),e.on(m.a.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(m.a.FRAG_LOADED,this.onFragLoaded,this),e.on(m.a.ERROR,this.onError,this)},i._unregisterListeners=function(){var e=this.hls;e.off(m.a.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(m.a.LEVEL_LOADED,this.onLevelLoaded,this),e.off(m.a.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(m.a.FRAG_LOADED,this.onFragLoaded,this),e.off(m.a.ERROR,this.onError,this)},i.destroy=function(){this._unregisterListeners(),this.manualLevelIndex=-1,this._levels.length=0,a.prototype.destroy.call(this)},i.startLoad=function(){this._levels.forEach(function(e){e.loadError=0}),a.prototype.startLoad.call(this)},i.onManifestLoaded=function(e,t){var i,o,s=[],r=[],n=[],a={},l=!1,c=!1,d=!1;if(t.levels.forEach(function(e){var t=e.attrs;l=l||!(!e.width||!e.height),c=c||!!e.videoCodec,d=d||!!e.audioCodec,de&&e.audioCodec&&-1!==e.audioCodec.indexOf("mp4a.40.34")&&(e.audioCodec=void 0);var i=e.bitrate+"-"+e.attrs.RESOLUTION+"-"+e.attrs.CODECS;(o=a[i])?o.url.push(e.url):(o=new R(e),a[i]=o,s.push(o)),t&&(t.AUDIO&&Q(o,"audio",t.AUDIO),t.SUBTITLES&&Q(o,"text",t.SUBTITLES))}),(l||c)&&d&&(s=s.filter(function(e){var t=e.videoCodec,i=e.width,e=e.height;return!!t||!(!i||!e)})),s=s.filter(function(e){var t=e.audioCodec,e=e.videoCodec;return(!t||f(t,"audio"))&&(!e||f(e,"video"))}),t.audioTracks&&J(r=t.audioTracks.filter(function(e){return!e.audioCodec||f(e.audioCodec,"audio")})),t.subtitles&&J(n=t.subtitles),0<s.length){i=s[0].bitrate,s.sort(function(e,t){return e.bitrate-t.bitrate}),this._levels=s;for(var u=0;u<s.length;u++)if(s[u].bitrate===i){this._firstLevel=u,this.log("manifest loaded, "+s.length+" level(s) found, first bitrate: "+i);break}var h=d&&!c,r={levels:s,audioTracks:r,subtitleTracks:n,firstLevel:this._firstLevel,stats:t.stats,audio:d,video:c,altAudio:!h&&r.some(function(e){return!!e.url})};this.hls.trigger(m.a.MANIFEST_PARSED,r),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}else this.hls.trigger(m.a.ERROR,{type:v.b.MEDIA_ERROR,details:v.a.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:t.url,reason:"no level with compatible codecs found in manifest"})},i.onError=function(e,t){if(a.prototype.onError.call(this,e,t),!t.fatal){var i=t.context,e=this._levels[this.currentLevelIndex];if(i&&(i.type===y.a.AUDIO_TRACK&&e.audioGroupIds&&i.groupId===e.audioGroupIds[e.urlId]||i.type===y.a.SUBTITLE_TRACK&&e.textGroupIds&&i.groupId===e.textGroupIds[e.urlId]))this.redundantFailover(this.currentLevelIndex);else{var o,s,r=!1,n=!0;switch(t.details){case v.a.FRAG_LOAD_ERROR:case v.a.FRAG_LOAD_TIMEOUT:case v.a.KEY_LOAD_ERROR:case v.a.KEY_LOAD_TIMEOUT:t.frag&&((s=this._levels[t.frag.level])?(s.fragmentError++,s.fragmentError>this.hls.config.fragLoadingMaxRetry&&(o=t.frag.level)):o=t.frag.level);break;case v.a.LEVEL_LOAD_ERROR:case v.a.LEVEL_LOAD_TIMEOUT:i&&(i.deliveryDirectives&&(n=!1),o=i.level),r=!0;break;case v.a.REMUX_ALLOC_ERROR:o=t.level,r=!0}void 0!==o&&this.recoverLevel(t,o,r,n)}}},i.recoverLevel=function(e,t,i,o){var s=e.details,r=this._levels[t];if(r.loadError++,i){if(!this.retryLoadingOrFail(e))return void(this.currentLevelIndex=-1);e.levelRetry=!0}o&&(1<(o=r.url.length)&&r.loadError<o?(e.levelRetry=!0,this.redundantFailover(t)):-1===this.manualLevelIndex&&(t=0===t?this._levels.length-1:t-1,this.currentLevelIndex!==t&&0===this._levels[t].loadError&&(this.warn(s+": switch to "+t),e.levelRetry=!0,this.hls.nextAutoLevel=t)))},i.redundantFailover=function(e){var t,i=this._levels[e],o=i.url.length;1<o&&(t=(i.urlId+1)%o,this.warn("Switching to redundant URL-id "+t),this._levels.forEach(function(e){e.urlId=t}),this.level=e)},i.onFragLoaded=function(e,t){t=t.frag;void 0===t||t.type!==y.b.MAIN||void 0!==(t=this._levels[t.level])&&(t.fragmentError=0,t.loadError=0)},i.onLevelLoaded=function(e,t){var i,o=t.level,s=t.details,r=this._levels[o];if(!r)return this.warn("Invalid level index "+o),void(null!==(i=t.deliveryDirectives)&&void 0!==i&&i.skip&&(s.deltaUpdateFailed=!0));o===this.currentLevelIndex?(0===r.fragmentError&&(r.loadError=0,this.retryCount=0),this.playlistLoaded(o,t,r.details)):null!==(t=t.deliveryDirectives)&&void 0!==t&&t.skip&&(s.deltaUpdateFailed=!0)},i.onAudioTrackSwitched=function(e,t){var i=this.hls.levels[this.currentLevelIndex];if(i&&i.audioGroupIds){for(var o=-1,s=this.hls.audioTracks[t.id].groupId,r=0;r<i.audioGroupIds.length;r++)if(i.audioGroupIds[r]===s){o=r;break}o!==i.urlId&&(i.urlId=o,this.startLoad())}},i.loadPlaylist=function(e){var t=this.currentLevelIndex,i=this._levels[t];if(this.canLoad&&i&&0<i.url.length){var o=i.urlId,s=i.url[o];if(e)try{s=e.addDirectives(s)}catch(e){this.warn("Could not construct new URL with HLS Delivery Directives: "+e)}this.log("Attempt loading level index "+t+(e?" at sn "+e.msn+" part "+e.part:"")+" with URL-id "+o+" "+s),this.clearTimer(),this.hls.trigger(m.a.LEVEL_LOADING,{url:s,level:t,id:o,deliveryDirectives:e||null})}},i.removeLevel=function(i,o){function s(e,t){return t!==o}var e=this._levels.filter(function(e,t){return t!==i||1<e.url.length&&void 0!==o&&(e.url=e.url.filter(s),e.audioGroupIds&&(e.audioGroupIds=e.audioGroupIds.filter(s)),e.textGroupIds&&(e.textGroupIds=e.textGroupIds.filter(s)),!(e.urlId=0))}).map(function(e,t){var i=e.details;return null!=i&&i.fragments&&i.fragments.forEach(function(e){e.level=t}),e});this._levels=e,this.hls.trigger(m.a.LEVELS_UPDATED,{levels:e})},ae(t.prototype,[{key:"levels",get:function(){return 0===this._levels.length?null:this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(e){var t=this._levels;if(0!==t.length&&(this.currentLevelIndex!==e||null===(o=t[e])||void 0===o||!o.details)){if(e<0||e>=t.length){var i=e<0;if(this.hls.trigger(m.a.ERROR,{type:v.b.OTHER_ERROR,details:v.a.LEVEL_SWITCH_ERROR,level:e,fatal:i,reason:"invalid level idx"}),i)return;e=Math.min(e,t.length-1)}this.clearTimer();var o=this.currentLevelIndex,i=t[o],t=t[e];this.log("switching to level "+e+" from "+o);e=ne({},t,{level:this.currentLevelIndex=e,maxBitrate:t.maxBitrate,uri:t.uri,urlId:t.urlId});delete e._urlId,this.hls.trigger(m.a.LEVEL_SWITCHING,e);e=t.details;e&&!e.live||(i=this.switchParams(t.uri,null==i?void 0:i.details),this.loadPlaylist(i))}}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(e){this.manualLevelIndex=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(e){this._firstLevel=e}},{key:"startLevel",get:function(){if(void 0!==this._startLevel)return this._startLevel;var e=this.hls.config.startLevel;return void 0!==e?e:this._firstLevel},set:function(e){this._startLevel=e}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(e){this.level=e,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=e)}}]),t}(se);(At=ce=ce||{}).NOT_LOADED="NOT_LOADED",At.BACKTRACKED="BACKTRACKED",At.APPENDING="APPENDING",At.PARTIAL="PARTIAL",At.OK="OK";var he=((Lt=fe.prototype)._registerListeners=function(){var e=this.hls;e.on(m.a.BUFFER_APPENDED,this.onBufferAppended,this),e.on(m.a.FRAG_BUFFERED,this.onFragBuffered,this),e.on(m.a.FRAG_LOADED,this.onFragLoaded,this)},Lt._unregisterListeners=function(){var e=this.hls;e.off(m.a.BUFFER_APPENDED,this.onBufferAppended,this),e.off(m.a.FRAG_BUFFERED,this.onFragBuffered,this),e.off(m.a.FRAG_LOADED,this.onFragLoaded,this)},Lt.destroy=function(){this._unregisterListeners(),this.fragments=this.timeRanges=null},Lt.getAppendedFrag=function(e,t){if(t===y.b.MAIN){var i=this.activeFragment,o=this.activeParts;if(!i)return null;if(o)for(var s=o.length;s--;){var r=o[s],n=r?r.end:i.appendedPTS;if(r.start<=e&&void 0!==n&&e<=n)return 9<s&&(this.activeParts=o.slice(s-9)),r}else if(i.start<=e&&void 0!==i.appendedPTS&&e<=i.appendedPTS)return i}return this.getBufferedFrag(e,t)},Lt.getBufferedFrag=function(e,t){for(var i=this.fragments,o=Object.keys(i),s=o.length;s--;){var r=i[o[s]];if((null==r?void 0:r.body.type)===t&&r.buffered){r=r.body;if(r.start<=e&&e<=r.end)return r}}return null},Lt.detectEvictedFragments=function(i,o,s){var r=this;Object.keys(this.fragments).forEach(function(e){var t=r.fragments[e];t&&(t.buffered?(e=t.range[i])&&e.time.some(function(e){e=!r.isTimeBuffered(e.startPTS,e.endPTS,o);return e&&r.removeFragment(t.body),e}):t.body.type===s&&r.removeFragment(t.body))})},Lt.detectPartialFragments=function(e){var o,s=this,r=this.timeRanges,n=e.frag,a=e.part;r&&"initSegment"!==n.sn&&(e=ve(n),(o=this.fragments[e])&&(Object.keys(r).forEach(function(e){var t,i=n.elementaryStreams[e];i&&(t=r[e],i=null!==a||!0===i.partial,o.range[e]=s.getBufferedTimes(n,a,i,t))}),o.backtrack=o.loaded=null,Object.keys(o.range).length?o.buffered=!0:this.removeFragment(o.body)))},Lt.fragBuffered=function(e){e=ve(e),e=this.fragments[e];e&&(e.backtrack=e.loaded=null,e.buffered=!0)},Lt.getBufferedTimes=function(e,t,i,o){for(var s={time:[],partial:i},r=(t||e).start,n=(t||e).end,a=e.minEndPTS||n,l=e.maxStartPTS||r,c=0;c<o.length;c++){var d=o.start(c)-this.bufferPadding,u=o.end(c)+this.bufferPadding;if(d<=l&&a<=u){s.time.push({startPTS:Math.max(r,o.start(c)),endPTS:Math.min(n,o.end(c))});break}if(r<u&&d<n)s.partial=!0,s.time.push({startPTS:Math.max(r,o.start(c)),endPTS:Math.min(n,o.end(c))});else if(n<=d)break}return s},Lt.getPartialFragment=function(t){var i,o,s=null,r=0,n=this.bufferPadding,a=this.fragments;return Object.keys(a).forEach(function(e){e=a[e];e&&pe(e)&&(i=e.body.start-n,o=e.body.end+n,i<=t&&t<=o&&(o=Math.min(t-i,o-t),r<=o&&(s=e.body,r=o)))}),s},Lt.getState=function(e){e=ve(e),e=this.fragments[e];return e?e.buffered?pe(e)?ce.PARTIAL:ce.OK:e.backtrack?ce.BACKTRACKED:ce.APPENDING:ce.NOT_LOADED},Lt.backtrack=function(e,t){e=ve(e),e=this.fragments[e];if(!e||e.backtrack)return null;t=e.backtrack=t||e.loaded;return e.loaded=null,t},Lt.getBacktrackData=function(e){var t=ve(e),t=this.fragments[t];if(t){var i,t=t.backtrack;if(null!=t&&null!==(i=t.payload)&&void 0!==i&&i.byteLength)return t;this.removeFragment(e)}return null},Lt.isTimeBuffered=function(e,t,i){for(var o,s,r=0;r<i.length;r++){if(o=i.start(r)-this.bufferPadding,s=i.end(r)+this.bufferPadding,o<=e&&t<=s)return!0;if(t<=o)return!1}return!1},Lt.onFragLoaded=function(e,t){var i=t.frag,o=t.part;"initSegment"===i.sn||i.bitrateTest||o||(o=ve(i),this.fragments[o]={body:i,loaded:t,backtrack:null,buffered:!1,range:Object.create(null)})},Lt.onBufferAppended=function(e,t){var o=this,s=t.frag,r=t.part,n=t.timeRanges;s.type===y.b.MAIN&&(this.activeFragment=s,r?((t=this.activeParts)||(this.activeParts=t=[]),t.push(r)):this.activeParts=null),this.timeRanges=n,Object.keys(n).forEach(function(e){var t=n[e];if(o.detectEvictedFragments(e,t),!r)for(var i=0;i<t.length;i++)s.appendedPTS=Math.max(t.end(i),s.appendedPTS||0)})},Lt.onFragBuffered=function(e,t){this.detectPartialFragments(t)},Lt.hasFragment=function(e){e=ve(e);return!!this.fragments[e]},Lt.removeFragmentsInRange=function(t,i,o){var s=this;Object.keys(this.fragments).forEach(function(e){e=s.fragments[e];e&&e.buffered&&((e=e.body).type===o&&e.start<i&&e.end>t&&s.removeFragment(e))})},Lt.removeFragment=function(e){var t=ve(e);e.stats.loaded=0,e.clearElementaryStreamInfo(),delete this.fragments[t]},Lt.removeAllFragments=function(){this.fragments=Object.create(null),this.activeFragment=null,this.activeParts=null},fe);function fe(e){this.activeFragment=null,this.activeParts=null,this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hls=e,this._registerListeners()}function pe(e){var t;return e.buffered&&(null!==(t=e.range.video)&&void 0!==t&&t.partial||null!==(e=e.range.audio)&&void 0!==e&&e.partial)}function ve(e){return e.type+"_"+e.level+"_"+e.urlId+"_"+e.sn}function ge(e,t,i,o,s,r){void 0===o&&(o=0),void 0===s&&(s=-1),void 0===r&&(r=!1),this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing={start:0,executeStart:0,executeEnd:0,end:0},this.buffering={audio:{start:0,executeStart:0,executeEnd:0,end:0},video:{start:0,executeStart:0,executeEnd:0,end:0},audiovideo:{start:0,executeStart:0,executeEnd:0,end:0}},this.level=e,this.sn=t,this.id=i,this.size=o,this.part=s,this.partial=r}var me=((Pt=ke.prototype).destroy=function(){this.onHandlerDestroying(),this.onHandlerDestroyed()},Pt.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},Pt.onHandlerDestroyed=function(){},Pt.hasInterval=function(){return!!this._tickInterval},Pt.hasNextTick=function(){return!!this._tickTimer},Pt.setInterval=function(e){return!this._tickInterval&&(this._tickInterval=self.setInterval(this._boundTick,e),!0)},Pt.clearInterval=function(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),!(this._tickInterval=null))},Pt.clearNextTick=function(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),!(this._tickTimer=null))},Pt.tick=function(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),1<this._tickCallCount&&this.tickImmediate(),this._tickCallCount=0)},Pt.tickImmediate=function(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)},Pt.doTick=function(){},ke),ye={length:0,start:function(){return 0},end:function(){return 0}},be=(we.isBuffered=function(e,t){try{if(e)for(var i=we.getBuffered(e),o=0;o<i.length;o++)if(t>=i.start(o)&&t<=i.end(o))return!0}catch(e){}return!1},we.bufferInfo=function(e,t,i){try{if(e){for(var o=we.getBuffered(e),s=[],r=0;r<o.length;r++)s.push({start:o.start(r),end:o.end(r)});return this.bufferedInfo(s,t,i)}}catch(e){}return{len:0,start:t,end:t,nextStart:void 0}},we.bufferedInfo=function(e,t,i){t=Math.max(0,t),e.sort(function(e,t){return e.start-t.start||t.end-e.end});var o=[];if(i)for(var s=0;s<e.length;s++){var r,n=o.length;n?(r=o[n-1].end,e[s].start-r<i?e[s].end>r&&(o[n-1].end=e[s].end):o.push(e[s])):o.push(e[s])}else o=e;for(var a,l=0,c=t,d=t,u=0;u<o.length;u++){var h=o[u].start,f=o[u].end;if(h<=t+i&&t<f)c=h,l=(d=f)-t;else if(t+i<h){a=h;break}}return{len:l,start:c||0,end:d||0,nextStart:a}},we.getBuffered=function(e){try{return e.buffered}catch(e){return H.b.log("failed to get media.buffered",e),ye}},we);function we(){}function ke(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}function xe(e,t){e&&(t=e.start+t,e.start=e.startPTS=t,e.endPTS=t+e.duration)}function Ae(e,t){for(var i=t.fragments,o=0,s=i.length;o<s;o++)xe(i[o],e);t.fragmentHint&&xe(t.fragmentHint,e),t.alignedSliding=!0}function Te(e,t){var i=e.programDateTime;i&&(t=(i-t)/1e3,e.start=e.startPTS=t,e.endPTS=t+e.duration)}function _e(e,t){var i;t.fragments.length&&e.hasProgramDateTime&&t.hasProgramDateTime&&(i=t.fragments[0].programDateTime-1e3*t.fragments[0].start,e.fragments.forEach(function(e){Te(e,i)}),e.fragmentHint&&Te(e.fragmentHint,i),e.alignedSliding=!0)}var Ee=function(e,t){for(var i,o,s=0,r=e.length-1;s<=r;){var n=t(o=e[i=(s+r)/2|0]);if(0<n)s=1+i;else{if(!(n<0))return o;r=i-1}}return null};function Se(e,t,i){if(null===t||!Array.isArray(e)||!e.length||!Object(F.a)(t))return null;if(t<(e[0].programDateTime||0))return null;if(t>=(e[e.length-1].endProgramDateTime||0))return null;i=i||0;for(var o=0;o<e.length;++o){var s=e[o];if(function(e,t,i){t=1e3*Math.min(t,i.duration+(i.deltaPTS||0));return(i.endProgramDateTime||0)-t>e}(t,i,s))return s}return null}function Le(e,t,i,o){void 0===i&&(i=0),void 0===o&&(o=0);var s=null;return e?s=t[e.sn-t[0].sn+1]||null:0===i&&0===t[0].start&&(s=t[0]),(!s||0!==Ce(i,o,s))&&Ee(t,Ce.bind(null,i,o))||s}function Ce(e,t,i){void 0===e&&(e=0),void 0===t&&(t=0);t=Math.min(t,i.duration+(i.deltaPTS||0));return i.start+i.duration-t<=e?1:i.start-t>e&&i.start?-1:0}function Oe(e){var i="function"==typeof Map?new Map:void 0;return(Oe=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==i){if(i.has(e))return i.get(e);i.set(e,t)}function t(){return Pe(e,arguments,Ie(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),je(t,e)})(e)}function Pe(e,t,i){return(Pe=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,i){var o=[null];o.push.apply(o,t);o=new(Function.bind.apply(e,o));return i&&je(o,i.prototype),o}).apply(null,arguments)}function je(e,t){return(je=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ie(e){return(Ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Me=Math.pow(2,17),Be=((Mt=De.prototype).destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},Mt.abort=function(){this.loader&&this.loader.abort()},Mt.load=function(n,a){var l=this,e=n.url;if(!e)return Promise.reject(new Fe({type:v.b.NETWORK_ERROR,details:v.a.FRAG_LOAD_ERROR,fatal:!1,frag:n,networkDetails:null},"Fragment does not have a "+(e?"part list":"url")));this.abort();var i=this.config,c=i.fLoader,d=i.loader;return new Promise(function(s,o){l.loader&&l.loader.destroy();var r=l.loader=n.loader=new(c||d)(i),e=Re(n),t={timeout:i.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:i.fragLoadingMaxRetryTimeout,highWaterMark:Me};n.stats=r.stats,r.load(e,t,{onSuccess:function(e,t,i,o){l.resetLoader(n,r),s({frag:n,part:null,payload:e.data,networkDetails:o})},onError:function(e,t,i){l.resetLoader(n,r),o(new Fe({type:v.b.NETWORK_ERROR,details:v.a.FRAG_LOAD_ERROR,fatal:!1,frag:n,response:e,networkDetails:i}))},onAbort:function(e,t,i){l.resetLoader(n,r),o(new Fe({type:v.b.NETWORK_ERROR,details:v.a.INTERNAL_ABORTED,fatal:!1,frag:n,networkDetails:i}))},onTimeout:function(e,t,i){l.resetLoader(n,r),o(new Fe({type:v.b.NETWORK_ERROR,details:v.a.FRAG_LOAD_TIMEOUT,fatal:!1,frag:n,networkDetails:i}))},onProgress:function(e,t,i,o){a&&a({frag:n,part:null,payload:i,networkDetails:o})}})})},Mt.loadPart=function(n,a,l){var c=this;this.abort();var i=this.config,d=i.fLoader,u=i.loader;return new Promise(function(s,o){c.loader&&c.loader.destroy();var r=c.loader=n.loader=new(d||u)(i),e=Re(n,a),t={timeout:i.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:i.fragLoadingMaxRetryTimeout,highWaterMark:Me};a.stats=r.stats,r.load(e,t,{onSuccess:function(e,t,i,o){c.resetLoader(n,r),c.updateStatsFromPart(n,a);o={frag:n,part:a,payload:e.data,networkDetails:o};l(o),s(o)},onError:function(e,t,i){c.resetLoader(n,r),o(new Fe({type:v.b.NETWORK_ERROR,details:v.a.FRAG_LOAD_ERROR,fatal:!1,frag:n,part:a,response:e,networkDetails:i}))},onAbort:function(e,t,i){n.stats.aborted=a.stats.aborted,c.resetLoader(n,r),o(new Fe({type:v.b.NETWORK_ERROR,details:v.a.INTERNAL_ABORTED,fatal:!1,frag:n,part:a,networkDetails:i}))},onTimeout:function(e,t,i){c.resetLoader(n,r),o(new Fe({type:v.b.NETWORK_ERROR,details:v.a.FRAG_LOAD_TIMEOUT,fatal:!1,frag:n,part:a,networkDetails:i}))}})})},Mt.updateStatsFromPart=function(e,t){var i=e.stats,o=t.stats,s=o.total;i.loaded+=o.loaded,s?(t=((t=Math.round(e.duration/t.duration))-(t=Math.min(Math.round(i.loaded/s),t)))*Math.round(i.loaded/t),i.total=i.loaded+t):i.total=Math.max(i.loaded,i.total);i=i.loading,o=o.loading;i.start?i.first+=o.first-o.start:(i.start=o.start,i.first=o.first),i.end=o.end},Mt.resetLoader=function(e,t){e.loader=null,this.loader===t&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),t.destroy()},De);function De(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}function Re(e,t){void 0===t&&(t=null);var i=t||e,e={frag:e,part:t,responseType:"arraybuffer",url:i.url,headers:{},rangeStart:0,rangeEnd:0},t=i.byteRangeStartOffset,i=i.byteRangeEndOffset;return Object(F.a)(t)&&Object(F.a)(i)&&(e.rangeStart=t,e.rangeEnd=i),e}var Ne,Fe=(Ne=Oe(Error),t=Ne,(Ht=qe).prototype=Object.create(t.prototype),je(Ht.prototype.constructor=Ht,t),qe),He=i(15),ze=function(e){for(var t="",i=e.length,o=0;o<i;o++)t+="["+e.start(o).toFixed(3)+","+e.end(o).toFixed(3)+"]";return t};function qe(e){for(var t,i=arguments.length,o=new Array(1<i?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];return(t=Ne.call.apply(Ne,[this].concat(o))||this).data=void 0,t.data=e,t}function Xe(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Ue(e,t){return(Ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ve="STOPPED",Ge="IDLE",Ye="KEY_LOADING",Ze="FRAG_LOADING",Ke="FRAG_LOADING_WAITING_RETRY",We="WAITING_TRACK",Qe="PARSING",Je="PARSED",$e="BACKTRACKING",et="ENDED",tt="ERROR",it="WAITING_INIT_PTS",ot="WAITING_LEVEL",st=function(s){var e;function t(e,t,i){var o;return(o=s.call(this)||this).hls=void 0,o.fragPrevious=null,o.fragCurrent=null,o.fragmentTracker=void 0,o.transmuxer=null,o._state=Ve,o.media=void 0,o.mediaBuffer=void 0,o.config=void 0,o.bitrateTest=!1,o.lastCurrentTime=0,o.nextLoadPosition=0,o.startPosition=0,o.loadedmetadata=!1,o.fragLoadError=0,o.retryDate=0,o.levels=null,o.fragmentLoader=void 0,o.levelLastLoaded=null,o.startFragRequested=!1,o.decrypter=void 0,o.initPTS=[],o.onvseeking=null,o.onvended=null,o.logPrefix="",o.log=void 0,o.warn=void 0,o.logPrefix=i,o.log=H.b.log.bind(H.b,i+":"),o.warn=H.b.warn.bind(H.b,i+":"),o.hls=e,o.fragmentLoader=new Be(e.config),o.fragmentTracker=t,o.config=e.config,o.decrypter=new He.a(e,e.config),e.on(m.a.KEY_LOADED,o.onKeyLoaded,function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(o)),o}i=s,(e=t).prototype=Object.create(i.prototype),Ue(e.prototype.constructor=e,i);var i=t.prototype;return i.doTick=function(){this.onTickEnd()},i.onTickEnd=function(){},i.startLoad=function(e){},i.stopLoad=function(){this.fragmentLoader.abort();var e=this.fragCurrent;e&&this.fragmentTracker.removeFragment(e),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=Ve},i._streamEnded=function(e,t){var i=this.fragCurrent,o=this.fragmentTracker;if(t.live||!i||i.sn!==t.endSN||e.nextStart)return!1;i=o.getState(i);return i===ce.PARTIAL||i===ce.OK},i.onMediaAttached=function(e,t){t=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("ended",this.onvended);t=this.config;this.levels&&t.autoStartLoad&&this.state===Ve&&this.startLoad(t.startPosition)},i.onMediaDetaching=function(){var e=this.media;null!=e&&e.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},i.onMediaSeeking=function(){var e=this.config,t=this.fragCurrent,i=this.media,o=this.mediaBuffer,s=this.state,r=i?i.currentTime:0,o=be.bufferInfo(o||i,r,e.maxBufferHole);this.log("media seeking to "+(Object(F.a)(r)?r.toFixed(3):r)+", state: "+s),s===et?this.resetLoadingState():t&&!o.len&&(s=e.maxFragLookUpTolerance,e=t.start-s,s=r>t.start+t.duration+s,(r<e||s)&&(s&&t.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),t.loader.abort()),this.resetLoadingState())),i&&(this.lastCurrentTime=r),this.loadedmetadata||o.len||(this.nextLoadPosition=this.startPosition=r),this.tickImmediate()},i.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},i.onKeyLoaded=function(e,t){var i;this.state===Ye&&t.frag===this.fragCurrent&&this.levels&&(this.state=Ge,(i=this.levels[t.frag.level].details)&&this.loadFragment(t.frag,i,t.frag.start))},i.onHandlerDestroying=function(){this.stopLoad(),s.prototype.onHandlerDestroying.call(this)},i.onHandlerDestroyed=function(){this.state=Ve,this.hls.off(m.a.KEY_LOADED,this.onKeyLoaded,this),this.fragmentLoader&&this.fragmentLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.fragmentLoader=this.fragmentTracker=null,s.prototype.onHandlerDestroyed.call(this)},i.loadKey=function(e,t){this.log("Loading key for "+e.sn+" of ["+t.startSN+"-"+t.endSN+"], "+("[stream-controller]"===this.logPrefix?"level":"track")+" "+e.level),this.state=Ye,this.fragCurrent=e,this.hls.trigger(m.a.KEY_LOADING,{frag:e})},i.loadFragment=function(e,t,i){this._loadFragForPlayback(e,t,i)},i._loadFragForPlayback=function(i,e,t){var o=this;this._doFragLoad(i,e,t,function(e){return o.fragContextChanged(i)?(o.warn("Fragment "+i.sn+(e.part?" p: "+e.part.index:"")+" of level "+i.level+" was dropped during download."),void o.fragmentTracker.removeFragment(i)):(i.stats.chunkCount++,void o._handleFragmentLoadProgress(e))}).then(function(e){if(e){o.fragLoadError=0;var t=o.state;if(!o.fragContextChanged(i))return"payload"in e&&(o.log("Loaded fragment "+i.sn+" of level "+i.level),o.hls.trigger(m.a.FRAG_LOADED,e),o.state===$e)?(o.fragmentTracker.backtrack(i,e),void o.resetFragmentLoading(i)):void o._handleFragmentLoadComplete(e);t!==Ze&&t!==$e&&(o.fragCurrent||t!==Qe)||(o.fragmentTracker.removeFragment(i),o.state=Ge)}}).catch(function(e){o.warn(e),o.resetFragmentLoading(i)})},i.flushMainBuffer=function(e,t,i){void 0===i&&(i=null),e-t&&(i={startOffset:e,endOffset:t,type:i},this.fragLoadError=0,this.hls.trigger(m.a.BUFFER_FLUSHING,i))},i._loadInitSegment=function(r){var n=this;this._doFragLoad(r).then(function(e){if(!e||n.fragContextChanged(r)||!n.levels)throw new Error("init load aborted");return e}).then(function(i){var o=n.hls,e=i.payload,t=r.decryptdata;if(e&&0<e.byteLength&&t&&t.key&&t.iv&&"AES-128"===t.method){var s=self.performance.now();return n.decrypter.webCryptoDecrypt(new Uint8Array(e),t.key.buffer,t.iv.buffer).then(function(e){var t=self.performance.now();return o.trigger(m.a.FRAG_DECRYPTED,{frag:r,payload:e,stats:{tstart:s,tdecrypt:t}}),i.payload=e,i})}return i}).then(function(e){var t=n.fragCurrent,i=n.hls,o=n.levels;if(!o)throw new Error("init load aborted, missing levels");o[r.level].details;o=r.stats;n.state=Ge,n.fragLoadError=0,r.data=new Uint8Array(e.payload),o.parsing.start=o.buffering.start=self.performance.now(),o.parsing.end=o.buffering.end=self.performance.now(),e.frag===t&&i.trigger(m.a.FRAG_BUFFERED,{stats:o,frag:t,part:null,id:r.type}),n.tick()}).catch(function(e){n.warn(e),n.resetFragmentLoading(r)})},i.fragContextChanged=function(e){var t=this.fragCurrent;return!e||!t||e.level!==t.level||e.sn!==t.sn||e.urlId!==t.urlId},i.fragBufferedComplete=function(e,t){var i=this.mediaBuffer||this.media;this.log("Buffered "+e.type+" sn: "+e.sn+(t?" part: "+t.index:"")+" of "+("[stream-controller]"===this.logPrefix?"level":"track")+" "+e.level+" "+ze(be.getBuffered(i))),this.state=Ge,this.tick()},i._handleFragmentLoadComplete=function(e){var t,i,o=this.transmuxer;o&&(t=e.frag,i=e.part,e=!(e=e.partsLoaded)||0===e.length||e.some(function(e){return!e}),e=new ge(t.level,t.sn,t.stats.chunkCount+1,0,i?i.index:-1,!e),o.flush(e))},i._handleFragmentLoadProgress=function(e){},i._doFragLoad=function(e,t,i,o){var s=this;if(void 0===i&&(i=null),!this.levels)throw new Error("frag load aborted, missing levels");if(i=Math.max(e.start,i||0),this.config.lowLatencyMode&&t){var r=t.partList;if(r&&o){i>e.end&&t.fragmentHint&&(e=t.fragmentHint);var n=this.getNextPart(r,e,i);if(-1<n){var a=r[n];return this.log("Loading part sn: "+e.sn+" p: "+a.index+" cc: "+e.cc+" of playlist ["+t.startSN+"-"+t.endSN+"] parts [0-"+n+"-"+(r.length-1)+"] "+("[stream-controller]"===this.logPrefix?"level":"track")+": "+e.level+", target: "+parseFloat(i.toFixed(3))),this.nextLoadPosition=a.start+a.duration,this.state=Ze,this.hls.trigger(m.a.FRAG_LOADING,{frag:e,part:r[n],targetBufferTime:i}),this.doFragPartsLoad(e,r,n,o).catch(function(e){return s.handleFragLoadError(e)})}if(!e.url||this.loadedEndOfParts(r,i))return Promise.resolve(null)}}return this.log("Loading fragment "+e.sn+" cc: "+e.cc+" "+(t?"of ["+t.startSN+"-"+t.endSN+"] ":"")+("[stream-controller]"===this.logPrefix?"level":"track")+": "+e.level+", target: "+parseFloat(i.toFixed(3))),Object(F.a)(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=Ze,this.hls.trigger(m.a.FRAG_LOADING,{frag:e,targetBufferTime:i}),this.fragmentLoader.load(e,o).catch(function(e){return s.handleFragLoadError(e)})},i.doFragPartsLoad=function(a,l,t,c){var d=this;return new Promise(function(r,e){var n=[];!function i(o){var s=l[o];d.fragmentLoader.loadPart(a,s,c).then(function(e){var t=(n[s.index]=e).part;d.hls.trigger(m.a.FRAG_LOADED,e);e=l[o+1];if(!e||e.fragment!==a)return r({frag:a,part:t,partsLoaded:n});i(o+1)}).catch(e)}(t)})},i.handleFragLoadError=function(e){e=e.data;return e&&e.details===v.a.INTERNAL_ABORTED?this.handleFragLoadAborted(e.frag,e.part):this.hls.trigger(m.a.ERROR,e),null},i._handleTransmuxerFlush=function(e){var t,i,o,s=this.getCurrentContext(e);s&&this.state===Qe?(t=s.frag,i=s.part,o=s.level,s=self.performance.now(),t.stats.parsing.end=s,i&&(i.stats.parsing.end=s),this.updateLevelTiming(t,i,o,e.partial)):this.fragCurrent||(this.state=Ge)},i.getCurrentContext=function(e){var t=this.levels,i=e.level,o=e.sn,e=e.part;if(!t||!t[i])return this.warn("Levels object was unset while buffering fragment "+o+" of level "+i+". The current chunk will not be buffered."),null;var r=t[i],i=-1<e?function(e,t){if(!r||!r.details)return null;var i=r.details.partList;if(i)for(var o=i.length;o--;){var s=i[o];if(s.index===t&&s.fragment.sn===e)return s}return null}(o,e):null,e=i?i.fragment:function(e){if(!r||!r.details)return null;var t=r.details,i=t.fragments[o-t.startSN];return i||((i=t.fragmentHint)&&i.sn===o?i:o<t.startSN&&e&&e.sn===o?e:null)}(this.fragCurrent);return e?{frag:e,part:i,level:r}:null},i.bufferFragmentData=function(e,t,i,o){var s,r,n;e&&this.state===Qe&&(s=e.data1,r=e.data2,(n=s)&&r&&(n=Object(l.a)(s,r)),n&&n.length&&(n={type:e.type,frag:t,part:i,chunkMeta:o,parent:t.type,data:n},this.hls.trigger(m.a.BUFFER_APPENDING,n),e.dropped&&e.independent&&!i&&this.flushBufferGap(t)))},i.flushBufferGap=function(e){var t,i,o=this.media;o&&(be.isBuffered(o,o.currentTime)?(i=o.currentTime,t=be.bufferInfo(o,i,0),o=e.duration,o=Math.min(2*this.config.maxFragLookUpTolerance,.25*o),i=Math.max(Math.min(e.start-o,t.end-o),i+o),e.start-i>o&&this.flushMainBuffer(i,e.start)):this.flushMainBuffer(0,e.start))},i.getFwdBufferInfo=function(e,t){var i=this.config,o=this.getLoadPosition();if(!Object(F.a)(o))return null;var s=be.bufferInfo(e,o,i.maxBufferHole);if(0===s.len&&void 0!==s.nextStart){t=this.fragmentTracker.getBufferedFrag(o,t);if(t&&s.nextStart<t.end)return be.bufferInfo(e,o,Math.max(s.nextStart,i.maxBufferHole))}return s},i.getMaxBufferLength=function(e){var t=this.config,e=e?Math.max(8*t.maxBufferSize/e,t.maxBufferLength):t.maxBufferLength;return Math.min(e,t.maxMaxBufferLength)},i.reduceMaxBufferLength=function(e){var t=this.config,e=e||t.maxBufferLength;return t.maxMaxBufferLength>=e&&(t.maxMaxBufferLength/=2,this.warn("Reduce max buffer length to "+t.maxMaxBufferLength+"s"),!0)},i.getNextFragment=function(e,t){var i=t.fragments,o=i.length;if(!o)return null;var s,r=this.config,n=i[0].start;if(t.live){var a=r.initialLiveManifestSize;if(o<a)return this.warn("Not enough fragments to start playback (have: "+o+", need: "+a+")"),null;t.PTSKnown||this.startFragRequested||-1!==this.startPosition||(s=this.getInitialLiveFragment(t,i),this.startPosition=s?this.hls.liveSyncPosition||s.start:e)}else e<=n&&(s=i[0]);return s||(r=r.lowLatencyMode?t.partEnd:t.fragmentEnd,s=this.getFragmentAtPosition(e,r,t)),null===s||void 0===s||!s.initSegment||null!==s&&void 0!==s&&s.initSegment.data||this.bitrateTest||(s=s.initSegment),s},i.getNextPart=function(e,t,i){for(var o=-1,s=!1,r=!0,n=0,a=e.length;n<a;n++){var l=e[n],r=r&&!l.independent;if(-1<o&&i<l.start)break;var c=l.loaded;!c&&(s||l.independent||r)&&l.fragment===t&&(o=n),s=c}return o},i.loadedEndOfParts=function(e,t){e=e[e.length-1];return e&&t>e.start&&e.loaded},i.getInitialLiveFragment=function(e,t){var i,o,s=this.fragPrevious,r=null;return s?(e.hasProgramDateTime&&(this.log("Live playlist, switching playlist, load frag with same PDT: "+s.programDateTime),r=Se(t,s.endProgramDateTime,this.config.maxFragLookUpTolerance)),r||((i=s.sn+1)>=e.startSN&&i<=e.endSN&&(i=t[i-e.startSN],s.cc===i.cc&&(r=i,this.log("Live playlist, switching playlist, load frag with next SN: "+r.sn))),r||(o=s.cc,(r=Ee(t,function(e){return e.cc<o?1:e.cc>o?-1:0}))&&this.log("Live playlist, switching playlist, load frag with same CC: "+r.sn)))):null!==(t=this.hls.liveSyncPosition)&&(r=this.getFragmentAtPosition(t,this.bitrateTest?e.fragmentEnd:e.edge,e)),r},i.getFragmentAtPosition=function(e,t,i){var o,s=this.config,r=this.fragPrevious,n=i.fragments,a=i.endSN,l=i.fragmentHint,c=s.maxFragLookUpTolerance,s=!!(s.lowLatencyMode&&i.partList&&l);if(s&&l&&!this.bitrateTest&&(n=n.concat(l),a=l.sn),o=e<t?Le(r,n,e,t-c<e?0:c):n[n.length-1]){e=o.sn-i.startSN,c=r&&o.level===r.level,i=n[1+e];if(this.fragmentTracker.getState(o)===ce.BACKTRACKED){o=null;for(var d=e;n[d]&&this.fragmentTracker.getState(n[d])===ce.BACKTRACKED;)o=r?n[d--]:n[--d];o=o||i}else r&&o.sn===r.sn&&!s&&c&&(o=o.sn<a&&this.fragmentTracker.getState(i)!==ce.OK?(this.log("SN "+o.sn+" just loaded, load next one: "+i.sn),i):null)}return o},i.synchronizeToLiveEdge=function(e){var t,i,o,s,r=this.config,n=this.media;n&&(t=this.hls.liveSyncPosition,i=n.currentTime,s=e.fragments[0].start,o=e.edge,s=i>=s-r.maxFragLookUpTolerance&&i<=o,null!==t&&n.duration>t&&(i<t||!s)&&(e=void 0!==r.liveMaxLatencyDuration?r.liveMaxLatencyDuration:r.liveMaxLatencyDurationCount*e.targetduration,(!s&&n.readyState<4||i<o-e)&&(this.loadedmetadata||(this.nextLoadPosition=t),n.readyState&&(this.warn("Playback: "+i.toFixed(3)+" is located too far from the end of live sliding playlist: "+o+", reset currentTime to : "+t.toFixed(3)),n.currentTime=t))))},i.alignPlaylists=function(e,t){var i=this.levels,o=this.levelLastLoaded,s=this.fragPrevious,r=null!==o?i[o]:null,n=e.fragments.length;if(!n)return this.warn("No fragments in live playlist"),0;var a,l,c=e.fragments[0].start,d=!t,u=e.alignedSliding&&Object(F.a)(c);if(d||!u&&!c){a=s,i=e,(o=r)&&(d=a,l=i,(u=o).details&&(l.endCC>l.startCC||d&&d.cc<l.startCC)&&((u=function(e){var t=e.fragments,e=l.fragments;if(e.length&&t.length){e=function(e,t){for(var i=null,o=0,s=e.length;o<s;o++){var r=e[o];if(r&&r.cc===t){i=r;break}}return i}(t,e[0].cc);if(e&&(!e||e.startPTS))return e;H.b.log("No frag in previous level to align on")}else H.b.log("No fragments to align")}(u.details))&&Object(F.a)(u.start)&&(H.b.log("Adjusting PTS using last level due to CC increase within current level "+l.url),Ae(u.start,l))),!i.alignedSliding&&o.details&&(r=i,(a=o.details).fragments.length&&r.hasProgramDateTime&&a.hasProgramDateTime&&(d=a.fragments[0].programDateTime,(a=((u=r.fragments[0].programDateTime)-d)/1e3+a.fragments[0].start)&&Object(F.a)(a)&&(H.b.log("Adjusting PTS using programDateTime delta "+(u-d)+"ms, sliding:"+a.toFixed(3)+" "+r.url+" "),Ae(a,r)))),i.alignedSliding||!o.details||i.skippedSegments||ie(o.details,i));i=e.fragments[0].start;return this.log("Live playlist sliding: "+i.toFixed(2)+" start-sn: "+(t?t.startSN:"na")+"->"+e.startSN+" prev-sn: "+(s?s.sn:"na")+" fragments: "+n),i}return c},i.waitForCdnTuneIn=function(e){return e.live&&e.canBlockReload&&e.tuneInGoal>Math.max(e.partHoldBack,3*e.partTarget)},i.setStartPosition=function(e,t){var i,o=this.startPosition;o<t&&(o=-1),-1!==o&&-1!==this.lastCurrentTime||(i=e.startTimeOffset,Object(F.a)(i)?(o=t+i,i<0&&(o+=e.totalduration),o=Math.min(Math.max(t,o),t+e.totalduration),this.log("Start time offset "+i+" found in playlist, adjust startPosition to "+o),this.startPosition=o):e.live?o=this.hls.liveSyncPosition||t:this.startPosition=o=0,this.lastCurrentTime=o),this.nextLoadPosition=o},i.getLoadPosition=function(){var e=this.media,t=0;return this.loadedmetadata&&e?t=e.currentTime:this.nextLoadPosition&&(t=this.nextLoadPosition),t},i.handleFragLoadAborted=function(e,t){this.transmuxer&&"initSegment"!==e.sn&&e.stats.aborted&&(this.warn("Fragment "+e.sn+(t?" part"+t.index:"")+" of level "+e.level+" was aborted"),this.resetFragmentLoading(e))},i.resetFragmentLoading=function(e){this.fragCurrent&&this.fragContextChanged(e)||(this.state=Ge)},i.onFragmentOrKeyLoadError=function(e,t){var i,o;t.fatal||(i=t.frag)&&i.type===e&&(this.fragCurrent,o=this.config,this.fragLoadError+1<=o.fragLoadingMaxRetry?this.resetLiveStartWhenNotLoaded(i.level)||(o=Math.min(Math.pow(2,this.fragLoadError)*o.fragLoadingRetryDelay,o.fragLoadingMaxRetryTimeout),this.warn("Fragment "+i.sn+" of "+e+" "+i.level+" failed to load, retrying in "+o+"ms"),this.retryDate=self.performance.now()+o,this.fragLoadError++,this.state=Ke):t.levelRetry?(e===y.b.AUDIO&&(this.fragCurrent=null),this.fragLoadError=0,this.state=Ge):(H.b.error(t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.hls.stopLoad(),this.state=tt))},i.afterBufferFlushed=function(e,t,i){e&&(e=be.getBuffered(e),this.fragmentTracker.detectEvictedFragments(t,e,i),this.state===et&&this.resetLoadingState())},i.resetLoadingState=function(){this.fragCurrent=null,this.fragPrevious=null,this.state=Ge},i.resetLiveStartWhenNotLoaded=function(e){if(!this.loadedmetadata){this.startFragRequested=!1;e=this.levels?this.levels[e].details:null;if(null!=e&&e.live)return this.startPosition=-1,this.setStartPosition(e,0),this.resetLoadingState(),!0;this.nextLoadPosition=this.startPosition}return!1},i.updateLevelTiming=function(s,e,r,n){var a=this,l=r.details;Object.keys(s.elementaryStreams).reduce(function(e,t){var i=s.elementaryStreams[t];if(i){var o=i.endPTS-i.startPTS;if(o<=0)return a.warn("Could not parse fragment "+s.sn+" "+t+" duration reliably ("+o+") resetting transmuxer to fallback to playlist timing"),a.resetTransmuxer(),e||!1;o=n?0:ee(l,s,i.startPTS,i.endPTS,i.startDTS,i.endDTS);return a.hls.trigger(m.a.LEVEL_PTS_UPDATED,{details:l,level:r,drift:o,type:t,frag:s,start:i.startPTS,end:i.endPTS}),!0}return e},!1)?(this.state=Je,this.hls.trigger(m.a.FRAG_PARSED,{frag:s,part:e})):this.resetLoadingState()},i.resetTransmuxer=function(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)},Xe(t.prototype,[{key:"state",get:function(){return this._state},set:function(e){var t=this._state;t!==e&&(this._state=e,this.log(t+"->"+e))}}]),t}(me);function rt(){return self.MediaSource||self.WebKitMediaSource}function nt(){return self.SourceBuffer||self.WebKitSourceBuffer}var at=i(18),lt=i(10),ct=i(14),dt=rt()||{isTypeSupported:function(){return!1}},ut=((Ut=pt.prototype).destroy=function(){var e=this.worker;e?(e.removeEventListener("message",this.onwmsg),e.terminate(),this.worker=null):(t=this.transmuxer)&&(t.destroy(),this.transmuxer=null);var t=this.observer;t&&t.removeAllListeners(),this.observer=null},Ut.push=function(e,t,i,o,s,r,n,a,l,c){var d=this;l.transmuxing.start=self.performance.now();var u=this.transmuxer,h=this.worker,f=(r||s).start,p=s.decryptdata,v=this.frag,g=!(v&&s.cc===v.cc),m=!(v&&l.level===v.level),y=v?l.sn-v.sn:-1,b=this.part?l.part-this.part.index:1,w=!m&&(1==y||0==y&&1==b),v=self.performance.now();(m||y||0===s.stats.parsing.start)&&(s.stats.parsing.start=v),!r||!b&&w||(r.stats.parsing.start=v);v=new lt.b(g,w,a,m,f);w&&!g||(H.b.log("[transmuxer-interface, "+s.type+"]: Starting new transmux session for sn: "+l.sn+" p: "+l.part+" level: "+l.level+" id: "+l.id+"\n        discontinuity: "+g+"\n        trackSwitch: "+m+"\n        contiguous: "+w+"\n        accurateTimeOffset: "+a+"\n        timeOffset: "+f),c=new lt.a(i,o,t,n,c),this.configureTransmuxer(c)),this.frag=s,this.part=r,h?h.postMessage({cmd:"demux",data:e,decryptdata:p,chunkMeta:l,state:v},e instanceof ArrayBuffer?[e]:[]):u&&(v=u.push(e,p,l,v),Object(lt.d)(v)?v.then(function(e){d.handleTransmuxComplete(e)}):this.handleTransmuxComplete(v))},Ut.flush=function(t){var i=this;t.transmuxing.start=self.performance.now();var e=this.transmuxer,o=this.worker;o?o.postMessage({cmd:"flush",chunkMeta:t}):e&&(e=e.flush(t),Object(lt.d)(e)?e.then(function(e){i.handleFlushResult(e,t)}):this.handleFlushResult(e,t))},Ut.handleFlushResult=function(e,t){var i=this;e.forEach(function(e){i.handleTransmuxComplete(e)}),this.onFlush(t)},Ut.onWorkerMessage=function(e){var t=e.data,i=this.hls;switch(t.event){case"init":self.URL.revokeObjectURL(this.worker.objectURL);break;case"transmuxComplete":this.handleTransmuxComplete(t.data);break;case"flush":this.onFlush(t.data);break;default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,i.trigger(t.event,t.data)}},Ut.configureTransmuxer=function(e){var t=this.worker,i=this.transmuxer;t?t.postMessage({cmd:"configure",config:e}):i&&i.configure(e)},Ut.handleTransmuxComplete=function(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)},pt),ht=((Qi=ft.prototype).destroy=function(){this.hls=this.fragmentTracker=this.media=null},Qi.poll=function(e){var t=this.config,i=this.media,o=this.stalled,s=i.currentTime,r=i.seeking,n=this.seeking&&!r,a=!this.seeking&&r;if(this.seeking=r,s===e){if((a||n)&&(this.stalled=null),!i.paused&&!i.ended&&0!==i.playbackRate&&be.getBuffered(i).length){var l=be.bufferInfo(i,s,0),e=0<l.len,a=l.nextStart||0;if(e||a){if(r){n=2<l.len,e=!a||2<a-s&&!this.fragmentTracker.getPartialFragment(s);if(n||e)return;this.moved=!1}if(!this.moved&&null!==this.stalled){var c,d=Math.max(a,l.start||0)-s,u=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,u=null!=u&&null!==(c=u.details)&&void 0!==c&&c.live?2*u.details.targetduration:2;if(0<d&&d<=u)return void this._trySkipBufferHole(null)}d=self.performance.now();null!==o?(u=d-o,!r&&250<=u&&this._reportStall(l.len),t=be.bufferInfo(i,s,t.maxBufferHole),this._tryFixBufferStall(t,u)):this.stalled=d}}}else this.moved=!0,null!==o&&(this.stallReported&&(o=self.performance.now()-o,H.b.warn("playback not stuck anymore @"+s+", after "+Math.round(o)+"ms"),this.stallReported=!1),this.stalled=null,this.nudgeRetry=0)},Qi._tryFixBufferStall=function(e,t){var i=this.config,o=this.fragmentTracker,s=this.media.currentTime,s=o.getPartialFragment(s);s&&this._trySkipBufferHole(s)||e.len>i.maxBufferHole&&t>1e3*i.highBufferWatchdogPeriod&&(H.b.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())},Qi._reportStall=function(e){var t=this.hls,i=this.media;this.stallReported||(this.stallReported=!0,H.b.warn("Playback stalling at @"+i.currentTime+" due to low buffer (buffer="+e+")"),t.trigger(m.a.ERROR,{type:v.b.MEDIA_ERROR,details:v.a.BUFFER_STALLED_ERROR,fatal:!1,buffer:e}))},Qi._trySkipBufferHole=function(e){for(var t=this.config,i=this.hls,o=this.media,s=o.currentTime,r=0,n=be.getBuffered(o),a=0;a<n.length;a++){var l=n.start(a);if(s+t.maxBufferHole>=r&&s<l){l=Math.max(l+.05,o.currentTime+.1);return H.b.warn("skipping hole, adjusting currentTime from "+s+" to "+l),this.moved=!0,this.stalled=null,o.currentTime=l,e&&i.trigger(m.a.ERROR,{type:v.b.MEDIA_ERROR,details:v.a.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+s+" to "+l,frag:e}),l}r=n.end(a)}return 0},Qi._tryNudgeBuffer=function(){var e=this.config,t=this.hls,i=this.media,o=i.currentTime,s=(this.nudgeRetry||0)+1;(this.nudgeRetry=s)<e.nudgeMaxRetry?(s=o+s*e.nudgeOffset,H.b.warn("Nudging 'currentTime' from "+o+" to "+s),i.currentTime=s,t.trigger(m.a.ERROR,{type:v.b.MEDIA_ERROR,details:v.a.BUFFER_NUDGE_ON_STALL,fatal:!1})):(H.b.error("Playhead still not moving while enough data buffered @"+o+" after "+e.nudgeMaxRetry+" nudges"),t.trigger(m.a.ERROR,{type:v.b.MEDIA_ERROR,details:v.a.BUFFER_STALLED_ERROR,fatal:!0}))},ft);function ft(e,t,i,o){this.config=void 0,this.media=void 0,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=e,this.media=t,this.fragmentTracker=i,this.hls=o}function pt(i,e,t,o){var s=this;this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.worker=void 0,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0,this.hls=i,this.id=e,this.onTransmuxComplete=t,this.onFlush=o;var r=i.config,o=function(e,t){(t=t||{}).frag=s.frag,t.id=s.id,i.trigger(e,t)};this.observer=new ct.EventEmitter,this.observer.on(m.a.FRAG_DECRYPTED,o),this.observer.on(m.a.ERROR,o);var n,a={mp4:dt.isTypeSupported("video/mp4"),mpeg:dt.isTypeSupported("audio/mpeg"),mp3:dt.isTypeSupported('audio/mp4; codecs="mp3"')},l=navigator.vendor;if(r.enableWorker&&"undefined"!=typeof Worker){H.b.log("demuxing in webworker");try{n=this.worker=at(19),this.onwmsg=this.onWorkerMessage.bind(this),n.addEventListener("message",this.onwmsg),n.onerror=function(e){i.trigger(m.a.ERROR,{type:v.b.OTHER_ERROR,details:v.a.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",error:new Error(e.message+"  ("+e.filename+":"+e.lineno+")")})},n.postMessage({cmd:"init",typeSupported:a,vendor:l,id:e,config:JSON.stringify(r)})}catch(i){H.b.warn("Error in worker:",i),H.b.error("Error while initializing DemuxerWorker, fallback to inline"),n&&self.URL.revokeObjectURL(n.objectURL),this.transmuxer=new lt.c(this.observer,a,r,l,e),this.worker=null}}else this.transmuxer=new lt.c(this.observer,a,r,l,e)}function vt(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function gt(e,t){return(gt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var mt=function(r){var e;function t(e,t){return(t=r.call(this,e,t,"[stream-controller]")||this).audioCodecSwap=!1,t.gapController=null,t.level=-1,t._forceStartLoad=!1,t.altAudio=!1,t.audioOnly=!1,t.fragPlaying=null,t.onvplaying=null,t.onvseeked=null,t.fragLastKbps=0,t.stalled=!1,t.couldBacktrack=!1,t.audioCodecSwitch=!1,t.videoBuffer=null,t._registerListeners(),t}i=r,(e=t).prototype=Object.create(i.prototype),gt(e.prototype.constructor=e,i);var i=t.prototype;return i._registerListeners=function(){var e=this.hls;e.on(m.a.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(m.a.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(m.a.MANIFEST_LOADING,this.onManifestLoading,this),e.on(m.a.MANIFEST_PARSED,this.onManifestParsed,this),e.on(m.a.LEVEL_LOADING,this.onLevelLoading,this),e.on(m.a.LEVEL_LOADED,this.onLevelLoaded,this),e.on(m.a.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(m.a.ERROR,this.onError,this),e.on(m.a.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(m.a.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(m.a.BUFFER_CREATED,this.onBufferCreated,this),e.on(m.a.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(m.a.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(m.a.FRAG_BUFFERED,this.onFragBuffered,this)},i._unregisterListeners=function(){var e=this.hls;e.off(m.a.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(m.a.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(m.a.MANIFEST_LOADING,this.onManifestLoading,this),e.off(m.a.MANIFEST_PARSED,this.onManifestParsed,this),e.off(m.a.LEVEL_LOADED,this.onLevelLoaded,this),e.off(m.a.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(m.a.ERROR,this.onError,this),e.off(m.a.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(m.a.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(m.a.BUFFER_CREATED,this.onBufferCreated,this),e.off(m.a.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(m.a.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(m.a.FRAG_BUFFERED,this.onFragBuffered,this)},i.onHandlerDestroying=function(){this._unregisterListeners(),this.onMediaDetaching()},i.startLoad=function(e){var t,i,o;this.levels?(t=this.lastCurrentTime,i=this.hls,this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,this.startFragRequested||(-1===(o=i.startLevel)&&(i.config.testBandwidth?(o=0,this.bitrateTest=!0):o=i.nextAutoLevel),this.level=i.nextLoadLevel=o,this.loadedmetadata=!1),0<t&&-1===e&&(this.log("Override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t),this.state=Ge,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()):(this._forceStartLoad=!0,this.state=Ve)},i.stopLoad=function(){this._forceStartLoad=!1,r.prototype.stopLoad.call(this)},i.doTick=function(){switch(this.state){case Ge:this.doTickIdle();break;case ot:var e=this.levels,t=this.level,t=null==e||null===(i=e[t])||void 0===i?void 0:i.details;if(!t||t.live&&this.levelLastLoaded!==this.level)break;if(this.waitForCdnTuneIn(t))break;this.state=Ge;break;case Ke:var i=self.performance.now(),t=this.retryDate;(!t||t<=i||null!==(i=this.media)&&void 0!==i&&i.seeking)&&(this.log("retryDate reached, switch back to IDLE state"),this.state=Ge)}this.onTickEnd()},i.onTickEnd=function(){r.prototype.onTickEnd.call(this),this.checkBuffer(),this.checkFragmentChanged()},i.doTickIdle=function(){var e=this.hls,t=this.levelLastLoaded,i=this.levels,o=this.media,s=e.config,r=e.nextLoadLevel;if(null!==t&&(o||!this.startFragRequested&&s.startFragPrefetch)&&(!this.altAudio||!this.audioOnly)&&i&&i[r]){i=i[r];this.level=e.nextLoadLevel=r;e=i.details;if(!e||this.state===ot||e.live&&this.levelLastLoaded!==r)this.state=ot;else{r=this.getFwdBufferInfo(this.mediaBuffer||o,y.b.MAIN);if(null!==r&&!(r.len>=this.getMaxBufferLength(i.maxBitrate))){if(this._streamEnded(r,e)){var n={};return this.altAudio&&(n.type="video"),this.hls.trigger(m.a.BUFFER_EOS,n),void(this.state=et)}var a,i=r.end,n=this.getNextFragment(i,e);!this.couldBacktrack||this.fragPrevious||!n||"initSegment"===n.sn||1<(r=n.sn-e.startSN)&&(n=e.fragments[r-1],this.fragmentTracker.removeFragment(n)),n&&this.fragmentTracker.getState(n)===ce.OK&&this.nextLoadPosition>i&&(a=this.audioOnly&&!this.altAudio?z.a.AUDIO:z.a.VIDEO,this.afterBufferFlushed(o,a,y.b.MAIN),n=this.getNextFragment(this.nextLoadPosition,e)),n&&(!n.initSegment||n.initSegment.data||this.bitrateTest||(n=n.initSegment),"identity"!==(null===(a=n.decryptdata)||void 0===a?void 0:a.keyFormat)||null!==(a=n.decryptdata)&&void 0!==a&&a.key?this.loadFragment(n,e,i):this.loadKey(n,e))}}}},i.loadFragment=function(e,t,i){var o=this.fragmentTracker.getState(e);if(this.fragCurrent=e,o===ce.BACKTRACKED){var s=this.fragmentTracker.getBacktrackData(e);if(s)return this._handleFragmentLoadProgress(s),void this._handleFragmentLoadComplete(s);o=ce.NOT_LOADED}o===ce.NOT_LOADED||o===ce.PARTIAL?"initSegment"===e.sn?this._loadInitSegment(e):this.bitrateTest?(e.bitrateTest=!0,this.log("Fragment "+e.sn+" of level "+e.level+" is being downloaded to test bitrate and will not be buffered"),this._loadBitrateTestFrag(e)):(this.startFragRequested=!0,r.prototype.loadFragment.call(this,e,t,i)):o===ce.APPENDING?this.reduceMaxBufferLength(e.duration)&&this.fragmentTracker.removeFragment(e):0===(null===(e=this.media)||void 0===e?void 0:e.buffered.length)&&this.fragmentTracker.removeAllFragments()},i.getAppendedFrag=function(e){e=this.fragmentTracker.getAppendedFrag(e,y.b.MAIN);return e&&"fragment"in e?e.fragment:e},i.getBufferedFrag=function(e){return this.fragmentTracker.getBufferedFrag(e,y.b.MAIN)},i.followingBufferedFrag=function(e){return e?this.getBufferedFrag(e.end+.5):null},i.immediateLevelSwitch=function(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},i.nextLevelSwitch=function(){var e,t,i,o=this.levels,s=this.media;null!=s&&s.readyState&&((e=this.getAppendedFrag(s.currentTime))&&1<e.start&&this.flushMainBuffer(0,e.start-1),i=!s.paused&&o?(i=o[this.hls.nextLoadLevel],(t=this.fragLastKbps)&&this.fragCurrent?this.fragCurrent.duration*i.maxBitrate/(1e3*t)+1:0):0,!(t=this.getBufferedFrag(s.currentTime+i))||(s=this.followingBufferedFrag(t))&&(this.abortCurrentFrag(),i=s.maxStartPTS||s.start,s=s.duration,s=Math.max(t.end,i+Math.min(Math.max(s-this.config.maxFragLookUpTolerance,.5*s),.75*s)),this.flushMainBuffer(s,Number.POSITIVE_INFINITY)))},i.abortCurrentFrag=function(){var e=this.fragCurrent;(this.fragCurrent=null)!=e&&e.loader&&e.loader.abort(),this.state===Ye&&(this.state=Ge),this.nextLoadPosition=this.getLoadPosition()},i.flushMainBuffer=function(e,t){r.prototype.flushMainBuffer.call(this,e,t,this.altAudio?"video":null)},i.onMediaAttached=function(e,t){r.prototype.onMediaAttached.call(this,e,t);t=t.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),t.addEventListener("playing",this.onvplaying),t.addEventListener("seeked",this.onvseeked),this.gapController=new ht(this.config,t,this.fragmentTracker,this.hls)},i.onMediaDetaching=function(){var e=this.media;e&&(e.removeEventListener("playing",this.onvplaying),e.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),r.prototype.onMediaDetaching.call(this)},i.onMediaPlaying=function(){this.tick()},i.onMediaSeeked=function(){var e=this.media,e=e?e.currentTime:null;Object(F.a)(e)&&this.log("Media seeked to "+e.toFixed(3)),this.tick()},i.onManifestLoading=function(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(m.a.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=this.stalled=!1,this.startPosition=this.lastCurrentTime=0,this.fragPlaying=null},i.onManifestParsed=function(e,t){var i,o,s,r=!1,n=!1;t.levels.forEach(function(e){(i=e.audioCodec)&&(-1!==i.indexOf("mp4a.40.2")&&(r=!0),-1!==i.indexOf("mp4a.40.5")&&(n=!0))}),this.audioCodecSwitch=r&&n&&!("function"==typeof(null==(s=nt())||null===(o=s.prototype)||void 0===o?void 0:o.changeType)),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1},i.onLevelLoading=function(e,t){var i=this.levels;!i||this.state!==Ge||(!(i=i[t.level]).details||i.details.live&&this.levelLastLoaded!==t.level||this.waitForCdnTuneIn(i.details))&&(this.state=ot)},i.onLevelLoaded=function(e,t){var i=this.levels,o=t.level,s=t.details,r=s.totalduration;if(i){this.log("Level "+o+" loaded ["+s.startSN+","+s.endSN+"], cc ["+s.startCC+", "+s.endCC+"] duration:"+r);r=this.fragCurrent;!r||this.state!==Ze&&this.state!==Ke||r.level!==t.level&&r.loader&&(this.state=Ge,r.loader.abort());t=i[o],r=0;if(s.live||null!==(i=t.details)&&void 0!==i&&i.live){if(s.fragments[0]||(s.deltaUpdateFailed=!0),s.deltaUpdateFailed)return;r=this.alignPlaylists(s,t.details)}if(t.details=s,this.levelLastLoaded=o,this.hls.trigger(m.a.LEVEL_UPDATED,{details:s,level:o}),this.state===ot){if(this.waitForCdnTuneIn(s))return;this.state=Ge}this.startFragRequested?s.live&&this.synchronizeToLiveEdge(s):this.setStartPosition(s,r),this.tick()}else this.warn("Levels were reset while loading level "+o)},i._handleFragmentLoadProgress=function(e){var t,i,o,s,r,n,a=e.frag,l=e.part,c=e.payload,d=this.levels;d?(t=(n=d[a.level]).details)?(i=n.videoCodec,o=t.PTSKnown||!t.live,s=null===(r=a.initSegment)||void 0===r?void 0:r.data,e=this._getAudioCodec(n),d=this.transmuxer=this.transmuxer||new ut(this.hls,y.b.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),n=-1!==(r=l?l.index:-1),r=new ge(a.level,a.sn,a.stats.chunkCount,c.byteLength,r,n),n=this.initPTS[a.cc],d.push(c,s,e,i,a,l,t.totalduration,o,r,n)):this.warn("Dropping fragment "+a.sn+" of level "+a.level+" after level details were reset"):this.warn("Levels were reset while fragment load was in progress. Fragment "+a.sn+" of level "+a.level+" will not be buffered")},i.onAudioTrackSwitching=function(e,t){var i,o=this.altAudio,s=!!t.url,t=t.id;s||(this.mediaBuffer!==this.media?(this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media,null!=(i=this.fragCurrent)&&i.loader&&(this.log("Switching to main audio track, cancel main fragment load"),i.loader.abort()),this.resetTransmuxer(),this.resetLoadingState()):this.audioOnly&&this.resetTransmuxer(),i=this.hls,o&&i.trigger(m.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),i.trigger(m.a.AUDIO_TRACK_SWITCHED,{id:t}))},i.onAudioTrackSwitched=function(e,t){var i=t.id,t=!!this.hls.audioTracks[i].url;!t||(i=this.videoBuffer)&&this.mediaBuffer!==i&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=i),this.altAudio=t,this.tick()},i.onBufferCreated=function(e,t){var i,o=t.tracks,s=!1;for(i in o){var r,n,a,l=o[i];"main"===l.id?(a=l,"video"===(n=i)&&(r=o[i])&&(this.videoBuffer=r.buffer)):s=!0}s&&a?(this.log("Alternate track found, use "+n+".buffered to schedule main fragment loading"),this.mediaBuffer=a.buffer):this.mediaBuffer=this.media},i.onFragBuffered=function(e,t){var i=t.frag,o=t.part;if(!i||i.type===y.b.MAIN){if(this.fragContextChanged(i))return this.warn("Fragment "+i.sn+(o?" p: "+o.index:"")+" of level "+i.level+" finished buffering, but was aborted. state: "+this.state),void(this.state===Je&&(this.state=Ge));t=(o||i).stats;this.fragLastKbps=Math.round(8*t.total/(t.buffering.end-t.loading.first)),"initSegment"!==i.sn&&(this.fragPrevious=i),this.fragBufferedComplete(i,o)}},i.onError=function(e,t){switch(t.details){case v.a.FRAG_LOAD_ERROR:case v.a.FRAG_LOAD_TIMEOUT:case v.a.KEY_LOAD_ERROR:case v.a.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(y.b.MAIN,t);break;case v.a.LEVEL_LOAD_ERROR:case v.a.LEVEL_LOAD_TIMEOUT:this.state!==tt&&(t.fatal?(this.warn(""+t.details),this.state=tt):t.levelRetry||this.state!==ot||(this.state=Ge));break;case v.a.BUFFER_FULL_ERROR:var i,o;"main"!==t.parent||this.state!==Qe&&this.state!==Je||(i=!0,(o=this.getFwdBufferInfo(this.media,y.b.MAIN))&&.5<o.len&&(i=!this.reduceMaxBufferLength(o.len)),i&&(this.warn("buffer full error also media.currentTime is not buffered, flush main"),this.immediateLevelSwitch()),this.resetLoadingState())}},i.checkBuffer=function(){var e,t=this.media,i=this.gapController;t&&i&&t.readyState&&(e=be.getBuffered(t),!this.loadedmetadata&&e.length?(this.loadedmetadata=!0,this.seekToStartPos()):i.poll(this.lastCurrentTime),this.lastCurrentTime=t.currentTime)},i.onFragLoadEmergencyAborted=function(){this.state=Ge,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()},i.onBufferFlushed=function(e,t){var i=t.type;(i!==z.a.AUDIO||this.audioOnly&&!this.altAudio)&&(t=(i===z.a.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media,this.afterBufferFlushed(t,i,y.b.MAIN))},i.onLevelsUpdated=function(e,t){this.levels=t.levels},i.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},i.seekToStartPos=function(){var e,t=this.media,i=t.currentTime,o=this.startPosition;0<=o&&i<o&&(t.seeking?H.b.log("could not seek to "+o+", already seeking at "+i):(0<(e=((e=be.getBuffered(t)).length?e.start(0):0)-o)&&(e<this.config.maxBufferHole||e<this.config.maxFragLookUpTolerance)&&(H.b.log("adjusting start position by "+e+" to match buffer start"),o+=e,this.startPosition=o),this.log("seek to target start position "+o+" from current time "+i),t.currentTime=o))},i._getAudioCodec=function(e){e=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&e&&(this.log("Swapping audio codec"),e=-1!==e.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),e},i._loadBitrateTestFrag=function(o){var s=this;this._doFragLoad(o).then(function(e){var t,i=s.hls;!e||i.nextLoadLevel||s.fragContextChanged(o)||(s.fragLoadError=0,s.state=Ge,s.startFragRequested=!1,s.bitrateTest=!1,(t=o.stats).parsing.start=t.parsing.end=t.buffering.start=t.buffering.end=self.performance.now(),i.trigger(m.a.FRAG_LOADED,e))})},i._handleTransmuxComplete=function(e){var t,i="main",o=this.hls,s=e.remuxResult,r=e.chunkMeta,n=this.getCurrentContext(r);if(!n)return this.warn("The loading context changed while buffering fragment "+r.sn+" of level "+r.level+". This chunk will not be buffered."),void this.resetLiveStartWhenNotLoaded(r.level);var a=n.frag,l=n.part,c=n.level,d=s.video,u=s.text,h=s.id3,f=s.initSegment,e=this.altAudio?void 0:s.audio;if(!this.fragContextChanged(a)){if(this.state=Qe,f&&(f.tracks&&(this._bufferInitSegment(c,f.tracks,a,r),o.trigger(m.a.FRAG_PARSING_INIT_SEGMENT,{frag:a,id:i,tracks:f.tracks})),n=f.initPTS,p=f.timescale,Object(F.a)(n)&&(this.initPTS[a.cc]=n,o.trigger(m.a.INIT_PTS_FOUND,{frag:a,id:i,initPTS:n,timescale:p}))),d&&!1!==s.independent){if(c.details){var p=d.startPTS,c=d.endPTS,v=d.startDTS,g=d.endDTS;if(l)l.elementaryStreams[d.type]={startPTS:p,endPTS:c,startDTS:v,endDTS:g};else if(d.firstKeyFrame&&d.independent&&(this.couldBacktrack=!0),d.dropped&&d.independent){if(this.getLoadPosition()+this.config.maxBufferHole<p)return void this.backtrack(a);a.setElementaryStreamInfo(d.type,a.start,c,a.start,g,!0)}a.setElementaryStreamInfo(d.type,p,c,v,g),this.bufferFragmentData(d,a,l,r)}}else if(!1===s.independent)return void this.backtrack(a);e&&(v=e.startPTS,g=e.endPTS,d=e.startDTS,s=e.endDTS,l&&(l.elementaryStreams[z.a.AUDIO]={startPTS:v,endPTS:g,startDTS:d,endDTS:s}),a.setElementaryStreamInfo(z.a.AUDIO,v,g,d,s),this.bufferFragmentData(e,a,l,r)),null!=h&&null!==(t=h.samples)&&void 0!==t&&t.length&&(h={frag:a,id:i,samples:h.samples},o.trigger(m.a.FRAG_PARSING_METADATA,h)),u&&(u={frag:a,id:i,samples:u.samples},o.trigger(m.a.FRAG_PARSING_USERDATA,u))}},i._bufferInitSegment=function(e,i,o,s){var t,r,n,a,l,c=this;this.state===Qe&&(this.audioOnly=!!i.audio&&!i.video,this.altAudio&&!this.audioOnly&&delete i.audio,t=i.audio,r=i.video,n=i.audiovideo,t&&(a=e.audioCodec,l=navigator.userAgent.toLowerCase(),this.audioCodecSwitch&&(a=a&&(-1!==a.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),1!==t.metadata.channelCount&&-1===l.indexOf("firefox")&&(a="mp4a.40.5")),-1!==l.indexOf("android")&&"audio/mpeg"!==t.container&&(a="mp4a.40.2",this.log("Android: force audio codec to "+a)),e.audioCodec&&e.audioCodec!==a&&this.log('Swapping manifest audio codec "'+e.audioCodec+'" for "'+a+'"'),t.levelCodec=a,t.id="main",this.log("Init audio buffer, container:"+t.container+", codecs[selected/level/parsed]=["+(a||"")+"/"+(e.audioCodec||"")+"/"+t.codec+"]")),r&&(r.levelCodec=e.videoCodec,r.id="main",this.log("Init video buffer, container:"+r.container+", codecs[level/parsed]=["+(e.videoCodec||"")+"/"+r.codec+"]")),n&&this.log("Init audiovideo buffer, container:"+n.container+", codecs[level/parsed]=["+(e.attrs.CODECS||"")+"/"+n.codec+"]"),this.hls.trigger(m.a.BUFFER_CODECS,i),Object.keys(i).forEach(function(e){var t=i[e].initSegment;null!=t&&t.byteLength&&c.hls.trigger(m.a.BUFFER_APPENDING,{type:e,data:t,frag:o,part:null,chunkMeta:s,parent:o.type})}),this.tick())},i.backtrack=function(e){this.couldBacktrack=!0,this.resetTransmuxer(),this.flushBufferGap(e);var t=this.fragmentTracker.backtrack(e);this.fragPrevious=null,this.nextLoadPosition=e.start,t?this.resetFragmentLoading(e):this.state=$e},i.checkFragmentChanged=function(){var e,t=this.media,i=null;t&&1<t.readyState&&!1===t.seeking&&(e=t.currentTime,be.isBuffered(t,e)?i=this.getAppendedFrag(e):be.isBuffered(t,e+.1)&&(i=this.getAppendedFrag(e+.1)),i&&(t=this.fragPlaying,e=i.level,t&&i.sn===t.sn&&t.level===e&&i.urlId===t.urlId||(this.hls.trigger(m.a.FRAG_CHANGED,{frag:i}),t&&t.level===e||this.hls.trigger(m.a.LEVEL_SWITCHED,{level:e}),this.fragPlaying=i)))},vt(t.prototype,[{key:"nextLevel",get:function(){var e=this.nextBufferedFrag;return e?e.level:-1}},{key:"currentLevel",get:function(){var e=this.media;if(e){e=this.getAppendedFrag(e.currentTime);if(e)return e.level}return-1}},{key:"nextBufferedFrag",get:function(){var e=this.media;if(e){e=this.getAppendedFrag(e.currentTime);return this.followingBufferedFrag(e)}return null}},{key:"forceStartLoad",get:function(){return this._forceStartLoad}}]),t}(st),yt=((uo=kt.prototype).sample=function(e,t){var i=Math.pow(this.alpha_,e);this.estimate_=t*(1-i)+i*this.estimate_,this.totalWeight_+=e},uo.getTotalWeight=function(){return this.totalWeight_},uo.getEstimate=function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_},kt),bt=((eo=wt.prototype).update=function(e,t){var i=this.slow_,o=this.fast_;this.slow_.halfLife!==e&&(this.slow_=new yt(e,i.getEstimate(),i.getTotalWeight())),this.fast_.halfLife!==t&&(this.fast_=new yt(t,o.getEstimate(),o.getTotalWeight()))},eo.sample=function(e,t){e=(e=Math.max(e,this.minDelayMs_))/1e3,t=8*t/e;this.fast_.sample(e,t),this.slow_.sample(e,t)},eo.canEstimate=function(){var e=this.fast_;return e&&e.getTotalWeight()>=this.minWeight_},eo.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},eo.destroy=function(){},wt);function wt(e,t,i){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultEstimate_=i,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new yt(e),this.fast_=new yt(t)}function kt(e,t,i){void 0===t&&(t=0),void 0===i&&(i=0),this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=t,this.totalWeight_=i}function xt(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var At=((Yi=_t.prototype).registerListeners=function(){var e=this.hls;e.on(m.a.FRAG_LOADING,this.onFragLoading,this),e.on(m.a.FRAG_LOADED,this.onFragLoaded,this),e.on(m.a.FRAG_BUFFERED,this.onFragBuffered,this),e.on(m.a.LEVEL_LOADED,this.onLevelLoaded,this),e.on(m.a.ERROR,this.onError,this)},Yi.unregisterListeners=function(){var e=this.hls;e.off(m.a.FRAG_LOADING,this.onFragLoading,this),e.off(m.a.FRAG_LOADED,this.onFragLoaded,this),e.off(m.a.FRAG_BUFFERED,this.onFragBuffered,this),e.off(m.a.LEVEL_LOADED,this.onLevelLoaded,this),e.off(m.a.ERROR,this.onError,this)},Yi.destroy=function(){this.unregisterListeners(),this.clearTimer(),this.hls=this.onCheck=null,this.fragCurrent=this.partCurrent=null},Yi.onFragLoading=function(e,t){var i=t.frag;i.type===y.b.MAIN&&(this.timer||(this.fragCurrent=i,this.partCurrent=null!=(t=t.part)?t:null,this.timer=self.setInterval(this.onCheck,100)))},Yi.onLevelLoaded=function(e,t){var i=this.hls.config;t.details.live?this.bwEstimator.update(i.abrEwmaSlowLive,i.abrEwmaFastLive):this.bwEstimator.update(i.abrEwmaSlowVoD,i.abrEwmaFastVoD)},Yi._abandonRulesCheck=function(){var e=this.fragCurrent,t=this.partCurrent,i=this.hls,o=i.autoLevelEnabled,s=i.config,r=i.media;if(e&&r){var n=(t||e).stats,a=(t||e).duration;if(n.aborted)return H.b.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);if(o&&!r.paused&&r.playbackRate&&r.readyState){var l=performance.now()-n.loading.start,c=Math.abs(r.playbackRate);if(!(l<=500*a/c)){var d=i.levels,u=i.minAutoLevel,h=d[e.level],o=n.total||Math.max(n.loaded,Math.round(a*h.maxBitrate/8)),f=Math.max(1,n.bwEstimate?n.bwEstimate/8:1e3*n.loaded/l),h=(o-n.loaded)/f,o=r.currentTime,p=(be.bufferInfo(r,o,s.maxBufferHole).end-o)/c;if(!(2*a/c<=p||h<=p)){for(var v=Number.POSITIVE_INFINITY,g=e.level-1;u<g&&!((v=a*d[g].maxBitrate/(6.4*f))<p);g--);h<=v||(c=this.bwEstimator.getEstimate(),H.b.warn("Fragment "+e.sn+(t?" part "+t.index:"")+" of level "+e.level+" is loading too slowly and will cause an underbuffer; aborting and switching to level "+g+"\n      Current BW estimate: "+(Object(F.a)(c)?(c/1024).toFixed(3):"Unknown")+" Kb/s\n      Estimated load time for current fragment: "+h.toFixed(3)+" s\n      Estimated load time for the next fragment: "+v.toFixed(3)+" s\n      Time to underbuffer: "+p.toFixed(3)+" s"),i.nextLoadLevel=g,this.bwEstimator.sample(l,n.loaded),this.clearTimer(),e.loader&&(this.fragCurrent=this.partCurrent=null,e.loader.abort()),i.trigger(m.a.FRAG_LOAD_EMERGENCY_ABORTED,{frag:e,part:t,stats:n}))}}}}},Yi.onFragLoaded=function(e,t){var i,o,s,r=t.frag,n=t.part;r.type===y.b.MAIN&&Object(F.a)(r.sn)&&(i=(n||r).stats,s=(n||r).duration,this.clearTimer(),this.lastLoadedFragLevel=r.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate&&(t=((o=this.hls.levels[r.level]).loaded?o.loaded.bytes:0)+i.loaded,s=(o.loaded?o.loaded.duration:0)+s,o.loaded={bytes:t,duration:s},o.realBitrate=Math.round(8*t/s)),r.bitrateTest&&(n={stats:i,frag:r,part:n,id:r.type},this.onFragBuffered(m.a.FRAG_BUFFERED,n),r.bitrateTest=!1))},Yi.onFragBuffered=function(e,t){var i=t.frag,o=t.part,t=(o||i).stats;t.aborted||i.type!==y.b.MAIN||"initSegment"===i.sn||(o=t.parsing.end-t.loading.start,this.bwEstimator.sample(o,t.loaded),t.bwEstimate=this.bwEstimator.getEstimate(),i.bitrateTest?this.bitrateTestDelay=o/1e3:this.bitrateTestDelay=0)},Yi.onError=function(e,t){switch(t.details){case v.a.FRAG_LOAD_ERROR:case v.a.FRAG_LOAD_TIMEOUT:this.clearTimer()}},Yi.clearTimer=function(){self.clearInterval(this.timer),this.timer=void 0},Yi.getNextABRAutoLevel=function(){var e=this.fragCurrent,t=this.partCurrent,i=this.hls,o=i.maxAutoLevel,s=i.config,r=i.minAutoLevel,n=i.media,a=t?t.duration:e?e.duration:0,l=n?n.currentTime:0,c=n&&0!==n.playbackRate?Math.abs(n.playbackRate):1,d=this.bwEstimator?this.bwEstimator.getEstimate():s.abrEwmaDefaultEstimate,i=(be.bufferInfo(n,l,s.maxBufferHole).end-l)/c,t=this.findBestLevel(d,r,o,i,s.abrBandWidthFactor,s.abrBandWidthUpFactor);if(0<=t)return t;H.b.trace((i?"rebuffering expected":"buffer is empty")+", finding optimal quality level");e=a?Math.min(a,s.maxStarvationDelay):s.maxStarvationDelay,n=s.abrBandWidthFactor,l=s.abrBandWidthUpFactor;return i||(c=this.bitrateTestDelay)&&(e=(a?Math.min(a,s.maxLoadingDelay):s.maxLoadingDelay)-c,H.b.trace("bitrate test took "+Math.round(1e3*c)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*e)+" ms"),n=l=1),t=this.findBestLevel(d,r,o,i+e,n,l),Math.max(t,0)},Yi.findBestLevel=function(e,t,i,o,s,r){for(var n,a=this.fragCurrent,l=this.partCurrent,c=this.lastLoadedFragLevel,d=this.hls.levels,u=d[c],h=!(null==u||null===(n=u.details)||void 0===n||!n.live),f=null==u?void 0:u.codecSet,p=l?l.duration:a?a.duration:0,v=i;t<=v;v--){var g=d[v];if(g&&(!f||g.codecSet===f)){var m=g.details,y=(l?null==m?void 0:m.partTarget:null==m?void 0:m.averagetargetduration)||p,b=v<=c?s*e:r*e,g=d[v].maxBitrate,m=g*y/b;if(H.b.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+v+"/"+Math.round(b)+"/"+g+"/"+y+"/"+o+"/"+m),g<b&&(!m||h&&!this.bitrateTestDelay||m<o))return v}}return-1},xt(_t.prototype,[{key:"nextAutoLevel",get:function(){var e=this._nextAutoLevel,t=this.bwEstimator;if(!(-1===e||t&&t.canEstimate()))return e;t=this.getNextABRAutoLevel();return-1!==e&&(t=Math.min(e,t)),t},set:function(e){this._nextAutoLevel=e}}]),_t),Tt=i(13);function _t(e){this.hls=void 0,this.lastLoadedFragLevel=0,this._nextAutoLevel=-1,this.timer=void 0,this.onCheck=this._abandonRulesCheck.bind(this),this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0;e=(this.hls=e).config;this.bwEstimator=new bt(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate),this.registerListeners()}function Et(){return(Et=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i,o=arguments[t];for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i])}return e}).apply(this,arguments)}function St(e,t){return(St=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Lt=function(a){var e;function t(e,t){return(t=a.call(this,e,t,"[audio-stream-controller]")||this).videoBuffer=null,t.videoTrackCC=-1,t.waitingVideoCC=-1,t.audioSwitch=!1,t.trackId=-1,t.waitingData=null,t.mainDetails=null,t.bufferFlushed=!1,t._registerListeners(),t}i=a,(e=t).prototype=Object.create(i.prototype),St(e.prototype.constructor=e,i);var i=t.prototype;return i.onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},i._registerListeners=function(){var e=this.hls;e.on(m.a.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(m.a.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(m.a.MANIFEST_LOADING,this.onManifestLoading,this),e.on(m.a.LEVEL_LOADED,this.onLevelLoaded,this),e.on(m.a.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(m.a.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(m.a.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(m.a.ERROR,this.onError,this),e.on(m.a.BUFFER_RESET,this.onBufferReset,this),e.on(m.a.BUFFER_CREATED,this.onBufferCreated,this),e.on(m.a.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(m.a.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(m.a.FRAG_BUFFERED,this.onFragBuffered,this)},i._unregisterListeners=function(){var e=this.hls;e.off(m.a.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(m.a.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(m.a.MANIFEST_LOADING,this.onManifestLoading,this),e.off(m.a.LEVEL_LOADED,this.onLevelLoaded,this),e.off(m.a.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(m.a.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(m.a.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(m.a.ERROR,this.onError,this),e.off(m.a.BUFFER_RESET,this.onBufferReset,this),e.off(m.a.BUFFER_CREATED,this.onBufferCreated,this),e.off(m.a.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(m.a.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(m.a.FRAG_BUFFERED,this.onFragBuffered,this)},i.onInitPtsFound=function(e,t){var i=t.frag,o=t.id,t=t.initPTS;"main"===o&&(o=i.cc,this.initPTS[i.cc]=t,this.log("InitPTS for cc: "+o+" found from main: "+t),this.videoTrackCC=o,this.state===it&&this.tick())},i.startLoad=function(e){if(!this.levels)return this.startPosition=e,void(this.state=Ve);var t=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),(this.fragLoadError=0)<t&&-1===e?(this.log("Override startPosition with lastCurrentTime @"+t.toFixed(3)),this.state=Ge):(this.loadedmetadata=!1,this.state=We),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()},i.doTick=function(){switch(this.state){case Ge:this.doTickIdle();break;case We:var e=this.levels,t=this.trackId,i=null==e||null===(i=e[t])||void 0===i?void 0:i.details;if(i){if(this.waitForCdnTuneIn(i))break;this.state=it}break;case Ke:var o=performance.now(),s=this.retryDate;(!s||s<=o||null!==(r=this.media)&&void 0!==r&&r.seeking)&&(this.log("RetryDate reached, switch back to IDLE state"),this.state=Ge);break;case it:var r,n,i=this.waitingData;i?(s=i.frag,o=i.part,r=i.cache,i=i.complete,void 0!==this.initPTS[s.cc]?(this.waitingData=null,this.waitingVideoCC=-1,this.state=Ze,n={frag:s,part:o,payload:r.flush(),networkDetails:null},this._handleFragmentLoadProgress(n),i&&a.prototype._handleFragmentLoadComplete.call(this,n)):this.videoTrackCC!==this.waitingVideoCC?(H.b.log("Waiting fragment cc ("+s.cc+") cancelled because video is at cc "+this.videoTrackCC),this.clearWaitingFragment()):(n=this.getLoadPosition(),Ce((n=be.bufferInfo(this.mediaBuffer,n,this.config.maxBufferHole)).end,this.config.maxFragLookUpTolerance,s)<0&&(H.b.log("Waiting fragment cc ("+s.cc+") @ "+s.start+" cancelled because another fragment at "+n.end+" is needed"),this.clearWaitingFragment()))):this.state=Ge}this.onTickEnd()},i.clearWaitingFragment=function(){var e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=Ge)},i.onTickEnd=function(){var e,t=this.media;t&&t.readyState&&(e=(this.mediaBuffer||t).buffered,!this.loadedmetadata&&e.length&&(this.loadedmetadata=!0),this.lastCurrentTime=t.currentTime)},i.doTickIdle=function(){var e=this.hls,t=this.levels,i=this.media,o=this.trackId,s=e.config;if(t&&t[o]&&(i||!this.startFragRequested&&s.startFragPrefetch)){var r=t[o].details;if(!r||r.live&&this.levelLastLoaded!==o||this.waitForCdnTuneIn(r))this.state=We;else{this.bufferFlushed&&(this.bufferFlushed=!1,this.afterBufferFlushed(this.mediaBuffer||this.media,z.a.AUDIO,y.b.AUDIO));var n=this.getFwdBufferInfo(this.mediaBuffer||this.media,y.b.AUDIO);if(null!==n){var s=n.len,t=this.getMaxBufferLength(),o=this.audioSwitch;if(!(t<=s)||o){if(!o&&this._streamEnded(n,r))return e.trigger(m.a.BUFFER_EOS,{type:"audio"}),void(this.state=et);var s=r.fragments[0].start,e=n.end;o&&(e=o=this.getLoadPosition(),r.PTSKnown&&o<s&&(n.end>s||n.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),i.currentTime=s+.05));i=this.getNextFragment(e,r);i?"identity"!==(null===(s=i.decryptdata)||void 0===s?void 0:s.keyFormat)||null!==(s=i.decryptdata)&&void 0!==s&&s.key?this.loadFragment(i,r,e):this.loadKey(i,r):this.bufferFlushed=!0}}}}},i.getMaxBufferLength=function(){var e=a.prototype.getMaxBufferLength.call(this),t=this.getFwdBufferInfo(this.videoBuffer||this.media,y.b.MAIN);return null===t?e:Math.max(e,t.len)},i.onMediaDetaching=function(){this.videoBuffer=null,a.prototype.onMediaDetaching.call(this)},i.onAudioTracksUpdated=function(e,t){t=t.audioTracks;this.resetTransmuxer(),this.levels=t.map(function(e){return new R(e)})},i.onAudioTrackSwitching=function(e,t){var i=!!t.url;this.trackId=t.id;t=this.fragCurrent;null!=t&&t.loader&&t.loader.abort(),this.fragCurrent=null,this.clearWaitingFragment(),i?this.setInterval(100):this.resetTransmuxer(),i?(this.audioSwitch=!0,this.state=Ge):this.state=Ve,this.tick()},i.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=!1},i.onLevelLoaded=function(e,t){this.mainDetails=t.details},i.onAudioTrackLoaded=function(e,t){var i=this.levels,o=t.details,s=t.id;if(i){this.log("Track "+s+" loaded ["+o.startSN+","+o.endSN+"],duration:"+o.totalduration);t=i[s],i=0;if(o.live||null!==(r=t.details)&&void 0!==r&&r.live){var r=this.mainDetails;if(o.fragments[0]||(o.deltaUpdateFailed=!0),o.deltaUpdateFailed||!r)return;i=!t.details&&o.hasProgramDateTime&&r.hasProgramDateTime?(_e(o,r),o.fragments[0].start):this.alignPlaylists(o,t.details)}t.details=o,this.levelLastLoaded=s,this.startFragRequested||!this.mainDetails&&o.live||this.setStartPosition(t.details,i),this.state!==We||this.waitForCdnTuneIn(o)||(this.state=Ge),this.tick()}else this.warn("Audio tracks were reset while loading level "+s)},i._handleFragmentLoadProgress=function(e){var t,i,o,s,r=e.frag,n=e.part,a=e.payload,l=this.config,c=this.trackId,d=this.levels;d?(t=(s=d[c]).details,i=l.defaultAudioCodec||s.audioCodec||"mp4a.40.2",o=(o=this.transmuxer)||(this.transmuxer=new ut(this.hls,y.b.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this))),e=this.initPTS[r.cc],l=null===(d=r.initSegment)||void 0===d?void 0:d.data,void 0!==e?(d=-1!==(s=n?n.index:-1),d=new ge(r.level,r.sn,r.stats.chunkCount,a.byteLength,s,d),o.push(a,l,i,"",r,n,t.totalduration,!1,d,e)):(H.b.log("Unknown video PTS for cc "+r.cc+", waiting for video PTS before demuxing audio frag "+r.sn+" of ["+t.startSN+" ,"+t.endSN+"],track "+c),(this.waitingData=this.waitingData||{frag:r,part:n,cache:new Tt.a,complete:!1}).cache.push(new Uint8Array(a)),this.waitingVideoCC=this.videoTrackCC,this.state=it)):this.warn("Audio tracks were reset while fragment load was in progress. Fragment "+r.sn+" of level "+r.level+" will not be buffered")},i._handleFragmentLoadComplete=function(e){this.waitingData?this.waitingData.complete=!0:a.prototype._handleFragmentLoadComplete.call(this,e)},i.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},i.onBufferCreated=function(e,t){var i=t.tracks.audio;i&&(this.mediaBuffer=i.buffer),t.tracks.video&&(this.videoBuffer=t.tracks.video.buffer)},i.onFragBuffered=function(e,t){var i=t.frag,t=t.part;i.type===y.b.AUDIO&&(this.fragContextChanged(i)?this.warn("Fragment "+i.sn+(t?" p: "+t.index:"")+" of level "+i.level+" finished buffering, but was aborted. state: "+this.state+", audioSwitch: "+this.audioSwitch):("initSegment"!==i.sn&&(this.fragPrevious=i,this.audioSwitch&&(this.audioSwitch=!1,this.hls.trigger(m.a.AUDIO_TRACK_SWITCHED,{id:this.trackId}))),this.fragBufferedComplete(i,t)))},i.onError=function(e,t){switch(t.details){case v.a.FRAG_LOAD_ERROR:case v.a.FRAG_LOAD_TIMEOUT:case v.a.KEY_LOAD_ERROR:case v.a.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(y.b.AUDIO,t);break;case v.a.AUDIO_TRACK_LOAD_ERROR:case v.a.AUDIO_TRACK_LOAD_TIMEOUT:this.state!==tt&&this.state!==Ve&&(this.state=t.fatal?tt:Ge,this.warn(t.details+" while loading frag, switching to "+this.state+" state"));break;case v.a.BUFFER_FULL_ERROR:var i,o;"audio"!==t.parent||this.state!==Qe&&this.state!==Je||(i=!0,(o=this.getFwdBufferInfo(this.mediaBuffer,y.b.AUDIO))&&.5<o.len&&(i=!this.reduceMaxBufferLength(o.len)),i&&(this.warn("Buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,a.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")),this.resetLoadingState())}},i.onBufferFlushed=function(e,t){t.type===z.a.AUDIO&&(this.bufferFlushed=!0)},i._handleTransmuxComplete=function(e){var t,i=this.hls,o=e.remuxResult,s=e.chunkMeta,r=this.getCurrentContext(s);if(!r)return this.warn("The loading context changed while buffering fragment "+s.sn+" of level "+s.level+". This chunk will not be buffered."),void this.resetLiveStartWhenNotLoaded(s.level);var n=r.frag,a=r.part,l=o.audio,c=o.text,d=o.id3,u=o.initSegment;this.fragContextChanged(n)||(this.state=Qe,this.audioSwitch&&l&&this.completeAudioSwitch(),null!=u&&u.tracks&&(this._bufferInitSegment(u.tracks,n,s),i.trigger(m.a.FRAG_PARSING_INIT_SEGMENT,{frag:n,id:"audio",tracks:u.tracks})),l&&(e=l.startPTS,r=l.endPTS,o=l.startDTS,u=l.endDTS,a&&(a.elementaryStreams[z.a.AUDIO]={startPTS:e,endPTS:r,startDTS:o,endDTS:u}),n.setElementaryStreamInfo(z.a.AUDIO,e,r,o,u),this.bufferFragmentData(l,n,a,s)),null!=d&&null!==(t=d.samples)&&void 0!==t&&t.length&&(d=Et({frag:n,id:"audio"},d),i.trigger(m.a.FRAG_PARSING_METADATA,d)),c&&(c=Et({frag:n,id:"audio"},c),i.trigger(m.a.FRAG_PARSING_USERDATA,c)))},i._bufferInitSegment=function(e,t,i){var o;this.state===Qe&&(e.video&&delete e.video,(o=e.audio)&&(o.levelCodec=o.codec,o.id="audio",this.log("Init audio buffer, container:"+o.container+", codecs[parsed]=["+o.codec+"]"),this.hls.trigger(m.a.BUFFER_CODECS,e),null!=(o=o.initSegment)&&o.byteLength&&(o={type:"audio",frag:t,part:null,chunkMeta:i,parent:t.type,data:o},this.hls.trigger(m.a.BUFFER_APPENDING,o)),this.tick()))},i.loadFragment=function(e,t,i){var o=this.fragmentTracker.getState(e);this.fragCurrent=e,!this.audioSwitch&&o!==ce.NOT_LOADED&&o!==ce.PARTIAL||("initSegment"===e.sn?this._loadInitSegment(e):t.live&&!Object(F.a)(this.initPTS[e.cc])?(this.log("Waiting for video PTS in continuity counter "+e.cc+" of live stream before loading audio fragment "+e.sn+" of level "+this.trackId),this.state=it):(this.startFragRequested=!0,a.prototype.loadFragment.call(this,e,t,i)))},i.completeAudioSwitch=function(){var e=this.hls,t=this.media,i=this.trackId;t&&(this.log("Switching audio track : flushing all audio"),a.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")),this.audioSwitch=!1,e.trigger(m.a.AUDIO_TRACK_SWITCHED,{id:i})},t}(st);function Ct(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Ot(e,t){return(Ot=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Pt=function(i){var e;function t(e){return(e=i.call(this,e,"[audio-track-controller]")||this).tracks=[],e.groupId=null,e.tracksInGroup=[],e.trackId=-1,e.trackName="",e.selectDefaultTrack=!0,e.registerListeners(),e}o=i,(e=t).prototype=Object.create(o.prototype),Ot(e.prototype.constructor=e,o);var o=t.prototype;return o.registerListeners=function(){var e=this.hls;e.on(m.a.MANIFEST_LOADING,this.onManifestLoading,this),e.on(m.a.MANIFEST_PARSED,this.onManifestParsed,this),e.on(m.a.LEVEL_LOADING,this.onLevelLoading,this),e.on(m.a.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(m.a.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(m.a.ERROR,this.onError,this)},o.unregisterListeners=function(){var e=this.hls;e.off(m.a.MANIFEST_LOADING,this.onManifestLoading,this),e.off(m.a.MANIFEST_PARSED,this.onManifestParsed,this),e.off(m.a.LEVEL_LOADING,this.onLevelLoading,this),e.off(m.a.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(m.a.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(m.a.ERROR,this.onError,this)},o.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,i.prototype.destroy.call(this)},o.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.trackName="",this.selectDefaultTrack=!0},o.onManifestParsed=function(e,t){this.tracks=t.audioTracks||[]},o.onAudioTrackLoaded=function(e,t){var i,o=t.id,s=t.details,r=this.tracksInGroup[o];r?(i=r.details,r.details=t.details,this.log("audioTrack "+o+" loaded ["+s.startSN+"-"+s.endSN+"]"),o===this.trackId&&(this.retryCount=0,this.playlistLoaded(o,t,i))):this.warn("Invalid audio track id "+o)},o.onLevelLoading=function(e,t){this.switchLevel(t.level)},o.onLevelSwitching=function(e,t){this.switchLevel(t.level)},o.switchLevel=function(e){var t,i=this.hls.levels[e];null!=i&&i.audioGroupIds&&(t=i.audioGroupIds[i.urlId],this.groupId!==t&&(this.groupId=t,e=this.tracks.filter(function(e){return!t||e.groupId===t}),this.selectDefaultTrack&&!e.some(function(e){return e.default})&&(this.selectDefaultTrack=!1),i={audioTracks:this.tracksInGroup=e},this.log("Updating audio tracks, "+e.length+' track(s) found in "'+t+'" group-id'),this.hls.trigger(m.a.AUDIO_TRACKS_UPDATED,i),this.selectInitialTrack()))},o.onError=function(e,t){i.prototype.onError.call(this,e,t),!t.fatal&&t.context&&t.context.type===y.a.AUDIO_TRACK&&t.context.id===this.trackId&&t.context.groupId===this.groupId&&this.retryLoadingOrFail(t)},o.setAudioTrack=function(e){var t,i,o,s,r,n,a=this.tracksInGroup;e<0||e>=a.length?this.warn("Invalid id passed to audio-track controller"):(this.clearTimer(),n=a[this.trackId],this.log("Now switching to audio-track index "+e),i=(t=a[e]).id,o=void 0===(r=t.groupId)?"":r,s=t.name,a=t.type,r=t.url,this.trackId=e,this.trackName=s,this.selectDefaultTrack=!1,this.hls.trigger(m.a.AUDIO_TRACK_SWITCHING,{id:i,groupId:o,name:s,type:a,url:r}),t.details&&!t.details.live||(n=this.switchParams(t.url,null==n?void 0:n.details),this.loadPlaylist(n)))},o.selectInitialTrack=function(){this.tracksInGroup;var e=this.trackName,e=this.findTrackId(e)||this.findTrackId();-1!==e?this.setAudioTrack(e):(this.warn("No track found for running audio group-ID: "+this.groupId),this.hls.trigger(m.a.ERROR,{type:v.b.MEDIA_ERROR,details:v.a.AUDIO_TRACK_LOAD_ERROR,fatal:!0}))},o.findTrackId=function(e){for(var t=this.tracksInGroup,i=0;i<t.length;i++){var o=t[i];if((!this.selectDefaultTrack||o.default)&&(!e||e===o.name))return o.id}return-1},o.loadPlaylist=function(e){var t=this.tracksInGroup[this.trackId];if(this.shouldLoadTrack(t)){var i=t.id,o=t.groupId,s=t.url;if(e)try{s=e.addDirectives(s)}catch(e){this.warn("Could not construct new URL with HLS Delivery Directives: "+e)}this.log("loading audio-track playlist for id: "+i),this.clearTimer(),this.hls.trigger(m.a.AUDIO_TRACK_LOADING,{url:s,id:i,groupId:o,deliveryDirectives:e||null})}},Ct(t.prototype,[{key:"audioTracks",get:function(){return this.tracksInGroup}},{key:"audioTrack",get:function(){return this.trackId},set:function(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}}]),t}(se);function jt(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function It(e,t){return(It=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Mt=function(o){var e;function t(e,t){return(t=o.call(this,e,t,"[subtitle-stream-controller]")||this).levels=[],t.currentTrackId=-1,t.tracksBuffered=[],t.mainDetails=null,t._registerListeners(),t}i=o,(e=t).prototype=Object.create(i.prototype),It(e.prototype.constructor=e,i);var i=t.prototype;return i.onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},i._registerListeners=function(){var e=this.hls;e.on(m.a.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(m.a.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(m.a.MANIFEST_LOADING,this.onManifestLoading,this),e.on(m.a.LEVEL_LOADED,this.onLevelLoaded,this),e.on(m.a.ERROR,this.onError,this),e.on(m.a.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(m.a.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(m.a.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(m.a.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(m.a.BUFFER_FLUSHING,this.onBufferFlushing,this)},i._unregisterListeners=function(){var e=this.hls;e.off(m.a.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(m.a.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(m.a.MANIFEST_LOADING,this.onManifestLoading,this),e.off(m.a.LEVEL_LOADED,this.onLevelLoaded,this),e.off(m.a.ERROR,this.onError,this),e.off(m.a.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(m.a.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(m.a.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(m.a.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(m.a.BUFFER_FLUSHING,this.onBufferFlushing,this)},i.startLoad=function(){this.stopLoad(),this.state=Ge,this.setInterval(500),this.tick()},i.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()},i.onLevelLoaded=function(e,t){this.mainDetails=t.details},i.onSubtitleFragProcessed=function(e,t){var i=t.frag,t=t.success;if(this.fragPrevious=i,this.state=Ge,t){var o=this.tracksBuffered[this.currentTrackId];if(o){for(var s,r=i.start,n=0;n<o.length;n++)if(r>=o[n].start&&r<=o[n].end){s=o[n];break}t=i.start+i.duration;s?s.end=t:(s={start:r,end:t},o.push(s)),this.fragmentTracker.fragBuffered(i)}}},i.onBufferFlushing=function(e,t){var i,o,s,r=t.startOffset,n=t.endOffset;0===r&&n!==Number.POSITIVE_INFINITY&&(i=this.currentTrackId,(o=this.levels).length&&o[i]&&o[i].details&&((s=n-o[i].details.targetduration)<=0||(t.endOffsetSubtitles=Math.max(0,s),this.tracksBuffered.forEach(function(e){for(var t=0;t<e.length;)if(e[t].end<=s)e.shift();else{if(!(e[t].start<s))break;e[t].start=s,t++}}),this.fragmentTracker.removeFragmentsInRange(r,s,y.b.SUBTITLE))))},i.onError=function(e,t){var t=t.frag;t&&t.type===y.b.SUBTITLE&&(null!==(t=this.fragCurrent)&&void 0!==t&&t.loader&&this.fragCurrent.loader.abort(),this.state=Ge)},i.onSubtitleTracksUpdated=function(e,t){var i=this,t=t.subtitleTracks;this.tracksBuffered=[],this.levels=t.map(function(e){return new R(e)}),this.fragmentTracker.removeAllFragments(),this.fragPrevious=null,this.levels.forEach(function(e){i.tracksBuffered[e.id]=[]}),this.mediaBuffer=null},i.onSubtitleTrackSwitch=function(e,t){this.currentTrackId=t.id,this.levels.length&&-1!==this.currentTrackId?(null!=(t=this.levels[this.currentTrackId])&&t.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,t&&this.setInterval(500)):this.clearInterval()},i.onSubtitleTrackLoaded=function(e,t){var i=t.details,o=t.id,s=this.currentTrackId,r=this.levels;if(r.length){t=r[s];if(!(o>=r.length||o!==s)&&t){if(this.mediaBuffer=this.mediaBufferTimeRanges,i.live||null!==(n=t.details)&&void 0!==n&&n.live){s=this.mainDetails;if(i.deltaUpdateFailed||!s)return;var n=s.fragments[0];t.details?0===this.alignPlaylists(i,t.details)&&n&&oe(i,n.start):i.hasProgramDateTime&&s.hasProgramDateTime?_e(i,s):n&&oe(i,n.start)}t.details=i,this.levelLastLoaded=o,this.tick(),i.live&&!this.fragCurrent&&this.media&&this.state===Ge&&(Le(null,i.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),t.details=void 0))}}},i._handleFragmentLoadComplete=function(e){var i,o=e.frag,t=e.payload,e=o.decryptdata,s=this.hls;!this.fragContextChanged(o)&&t&&0<t.byteLength&&e&&e.key&&e.iv&&"AES-128"===e.method&&(i=performance.now(),this.decrypter.webCryptoDecrypt(new Uint8Array(t),e.key.buffer,e.iv.buffer).then(function(e){var t=performance.now();s.trigger(m.a.FRAG_DECRYPTED,{frag:o,payload:e,stats:{tstart:i,tdecrypt:t}})}))},i.doTick=function(){var e,t,i,o,s,r,n,a;this.media?this.state===Ge&&(o=this.currentTrackId,(t=this.levels).length&&t[o]&&t[o].details&&(n=(e=t[o].details).targetduration,a=this.config,s=this.media,t=(r=be.bufferedInfo(this.mediaBufferTimeRanges,s.currentTime-n,a.maxBufferHole)).end,r.len>this.getMaxBufferLength()+n||(s=(o=e.fragments).length,r=e.edge,n=this.fragPrevious,t<r?(a=a.maxFragLookUpTolerance,n&&e.hasProgramDateTime&&(i=Se(o,n.endProgramDateTime,a)),i||!(i=Le(n,o,t,a))&&n&&n.start<o[0].start&&(i=o[0])):i=o[s-1],null!==i&&void 0!==i&&i.encrypted?(H.b.log("Loading key for "+i.sn),this.state=Ye,this.hls.trigger(m.a.KEY_LOADING,{frag:i})):i&&this.fragmentTracker.getState(i)===ce.NOT_LOADED&&this.loadFragment(i,e,t)))):this.state=Ge},i.loadFragment=function(e,t,i){this.fragCurrent=e,o.prototype.loadFragment.call(this,e,t,i)},jt(t.prototype,[{key:"mediaBufferTimeRanges",get:function(){return this.tracksBuffered[this.currentTrackId]||[]}}]),t}(st);function Bt(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Dt(e,t){return(Dt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Rt(e){for(var t=[],i=0;i<e.length;i++){var o=e[i];"subtitles"===o.kind&&o.label&&t.push(e[i])}return t}function Nt(e){var t=e;return Vt.hasOwnProperty(e)&&(t=Vt[e]),String.fromCharCode(t)}var Ft,Ht=function(i){var e;function t(e){var t;return(t=i.call(this,e,"[subtitle-track-controller]")||this).media=null,t.tracks=[],t.groupId=null,t.tracksInGroup=[],t.trackId=-1,t.selectDefaultTrack=!0,t.queuedDefaultTrack=-1,t.trackChangeListener=function(){return t.onTextTracksChanged()},t.asyncPollTrackChange=function(){return t.pollTrackChange(0)},t.useTextTrackPolling=!1,t.subtitlePollingInterval=-1,t.subtitleDisplay=!0,t.registerListeners(),t}o=i,(e=t).prototype=Object.create(o.prototype),Dt(e.prototype.constructor=e,o);var o=t.prototype;return o.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.trackChangeListener=this.asyncPollTrackChange=null,i.prototype.destroy.call(this)},o.registerListeners=function(){var e=this.hls;e.on(m.a.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(m.a.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(m.a.MANIFEST_LOADING,this.onManifestLoading,this),e.on(m.a.MANIFEST_PARSED,this.onManifestParsed,this),e.on(m.a.LEVEL_LOADING,this.onLevelLoading,this),e.on(m.a.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(m.a.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(m.a.ERROR,this.onError,this)},o.unregisterListeners=function(){var e=this.hls;e.off(m.a.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(m.a.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(m.a.MANIFEST_LOADING,this.onManifestLoading,this),e.off(m.a.MANIFEST_PARSED,this.onManifestParsed,this),e.off(m.a.LEVEL_LOADING,this.onLevelLoading,this),e.off(m.a.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(m.a.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(m.a.ERROR,this.onError,this)},o.onMediaAttached=function(e,t){this.media=t.media,this.media&&(-1<this.queuedDefaultTrack&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))},o.pollTrackChange=function(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.trackChangeListener,e)},o.onMediaDetaching=function(){this.media&&(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),-1<this.trackId&&(this.queuedDefaultTrack=this.trackId),Rt(this.media.textTracks).forEach(function(e){E(e)}),this.subtitleTrack=-1,this.media=null)},o.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.selectDefaultTrack=!0},o.onManifestParsed=function(e,t){this.tracks=t.subtitleTracks},o.onSubtitleTrackLoaded=function(e,t){var i=t.id,o=t.details,s=this.trackId,r=this.tracksInGroup[s];r?(s=r.details,r.details=t.details,this.log("subtitle track "+i+" loaded ["+o.startSN+"-"+o.endSN+"]"),i===this.trackId&&(this.retryCount=0,this.playlistLoaded(i,t,s))):this.warn("Invalid subtitle track id "+i)},o.onLevelLoading=function(e,t){this.switchLevel(t.level)},o.onLevelSwitching=function(e,t){this.switchLevel(t.level)},o.switchLevel=function(e){var t,i,o,s=this.hls.levels[e];null!=s&&s.textGroupIds&&(t=s.textGroupIds[s.urlId],this.groupId!==t&&(i=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0,o=this.tracks.filter(function(e){return!t||e.groupId===t}),this.tracksInGroup=o,e=this.findTrackId(null==i?void 0:i.name)||this.findTrackId(),this.groupId=t,s={subtitleTracks:o},this.log("Updating subtitle tracks, "+o.length+' track(s) found in "'+t+'" group-id'),this.hls.trigger(m.a.SUBTITLE_TRACKS_UPDATED,s),-1!==e&&this.setSubtitleTrack(e,i)))},o.findTrackId=function(e){for(var t=this.tracksInGroup,i=0;i<t.length;i++){var o=t[i];if((!this.selectDefaultTrack||o.default)&&(!e||e===o.name))return o.id}return-1},o.onError=function(e,t){i.prototype.onError.call(this,e,t),!t.fatal&&t.context&&t.context.type===y.a.SUBTITLE_TRACK&&t.context.id===this.trackId&&t.context.groupId===this.groupId&&this.retryLoadingOrFail(t)},o.loadPlaylist=function(e){var t=this.tracksInGroup[this.trackId];if(this.shouldLoadTrack(t)){var i=t.id,o=t.groupId,s=t.url;if(e)try{s=e.addDirectives(s)}catch(e){this.warn("Could not construct new URL with HLS Delivery Directives: "+e)}this.log("Loading subtitle playlist for id "+i),this.hls.trigger(m.a.SUBTITLE_TRACK_LOADING,{url:s,id:i,groupId:o,deliveryDirectives:e||null})}},o.toggleTrackModes=function(e){var t,i=this,o=this.media,s=this.subtitleDisplay,r=this.trackId;o&&(o=(t=Rt(o.textTracks)).filter(function(e){return e.groupId===i.groupId}),-1===e?[].slice.call(t).forEach(function(e){e.mode="disabled"}):(r=o[r])&&(r.mode="disabled"),(e=o[e])&&(e.mode=s?"showing":"hidden"))},o.setSubtitleTrack=function(e,t){var i,o,s,r,n,a=this.tracksInGroup;this.media?(this.trackId!==e&&this.toggleTrackModes(e),this.trackId===e&&(-1===e||null!==(r=a[e])&&void 0!==r&&r.details)||e<-1||e>=a.length||(this.clearTimer(),i=a[e],this.log("Switching to subtitle track "+e),this.trackId=e,i?(o=i.id,s=void 0===(n=i.groupId)?"":n,r=i.name,a=i.type,n=i.url,this.hls.trigger(m.a.SUBTITLE_TRACK_SWITCH,{id:o,groupId:s,name:r,type:a,url:n}),t=this.switchParams(i.url,null==t?void 0:t.details),this.loadPlaylist(t)):this.hls.trigger(m.a.SUBTITLE_TRACK_SWITCH,{id:e}))):this.queuedDefaultTrack=e},o.onTextTracksChanged=function(){if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),this.media&&this.hls.config.renderTextTracksNatively){for(var e=-1,t=Rt(this.media.textTracks),i=0;i<t.length;i++)if("hidden"===t[i].mode)e=i;else if("showing"===t[i].mode){e=i;break}this.subtitleTrack!==e&&(this.subtitleTrack=e)}},Bt(t.prototype,[{key:"subtitleTracks",get:function(){return this.tracksInGroup}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(e){this.selectDefaultTrack=!1;var t=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0;this.setSubtitleTrack(e,t)}}]),t}(se),zt=((t=Jt.prototype).append=function(e,t){var i=this.queues[t];i.push(e),1===i.length&&this.buffers[t]&&this.executeNext(t)},t.insertAbort=function(e,t){this.queues[t].unshift(e),this.executeNext(t)},t.appendBlocker=function(e){var t,i=new Promise(function(e){t=e}),o={execute:t,onStart:function(){},onComplete:function(){},onError:function(){}};return this.append(o,e),i},t.executeNext=function(e){var t=this.buffers,i=this.queues,o=t[e],i=i[e];if(i.length){var s=i[0];try{s.execute()}catch(t){H.b.warn("[buffer-operation-queue]: Unhandled exception executing the current operation"),s.onError(t),o&&o.updating||(i.shift(),this.executeNext(e))}}},t.shiftAndExecuteNext=function(e){this.queues[e].shift(),this.executeNext(e)},t.current=function(e){return this.queues[e][0]},Jt),qt=rt(),Xt=/([ha]vc.)(?:\.[^.,]+)+/,Ut=((me=Qt.prototype).hasSourceTypes=function(){return 0<this.getSourceBufferTypes().length||0<Object.keys(this.pendingTracks).length},me.destroy=function(){this.unregisterListeners(),this.details=null},me.registerListeners=function(){var e=this.hls;e.on(m.a.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(m.a.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(m.a.MANIFEST_PARSED,this.onManifestParsed,this),e.on(m.a.BUFFER_RESET,this.onBufferReset,this),e.on(m.a.BUFFER_APPENDING,this.onBufferAppending,this),e.on(m.a.BUFFER_CODECS,this.onBufferCodecs,this),e.on(m.a.BUFFER_EOS,this.onBufferEos,this),e.on(m.a.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(m.a.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(m.a.FRAG_PARSED,this.onFragParsed,this),e.on(m.a.FRAG_CHANGED,this.onFragChanged,this)},me.unregisterListeners=function(){var e=this.hls;e.off(m.a.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(m.a.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(m.a.MANIFEST_PARSED,this.onManifestParsed,this),e.off(m.a.BUFFER_RESET,this.onBufferReset,this),e.off(m.a.BUFFER_APPENDING,this.onBufferAppending,this),e.off(m.a.BUFFER_CODECS,this.onBufferCodecs,this),e.off(m.a.BUFFER_EOS,this.onBufferEos,this),e.off(m.a.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(m.a.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(m.a.FRAG_PARSED,this.onFragParsed,this),e.off(m.a.FRAG_CHANGED,this.onFragChanged,this)},me._initSourceBuffer=function(){this.sourceBuffer={},this.operationQueue=new zt(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]}},me.onManifestParsed=function(e,t){var i=2;(!t.audio||t.video)&&t.altAudio||(i=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=i,this.details=null,H.b.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},me.onMediaAttaching=function(e,t){var i=this.media=t.media;i&&qt&&((t=this.mediaSource=new qt).addEventListener("sourceopen",this._onMediaSourceOpen),t.addEventListener("sourceended",this._onMediaSourceEnded),t.addEventListener("sourceclose",this._onMediaSourceClose),i.src=self.URL.createObjectURL(t),this._objectUrl=i.src)},me.onMediaDetaching=function(){var e=this.media,t=this.mediaSource,i=this._objectUrl;if(t){if(H.b.log("[buffer-controller]: media source detaching"),"open"===t.readyState)try{t.endOfStream()}catch(e){H.b.warn("[buffer-controller]: onMediaDetaching: "+e.message+" while calling endOfStream")}this.onBufferReset(),t.removeEventListener("sourceopen",this._onMediaSourceOpen),t.removeEventListener("sourceended",this._onMediaSourceEnded),t.removeEventListener("sourceclose",this._onMediaSourceClose),e&&(i&&self.URL.revokeObjectURL(i),e.src===i?(e.removeAttribute("src"),e.load()):H.b.warn("[buffer-controller]: media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(m.a.MEDIA_DETACHED,void 0)},me.onBufferReset=function(){var i=this;this.getSourceBufferTypes().forEach(function(t){var e=i.sourceBuffer[t];try{e&&(i.removeBufferListeners(t),i.mediaSource&&i.mediaSource.removeSourceBuffer(e),i.sourceBuffer[t]=void 0)}catch(e){H.b.warn("[buffer-controller]: Failed to reset the "+t+" buffer",e)}}),this._initSourceBuffer()},me.onBufferCodecs=function(e,r){var n=this,a=this.getSourceBufferTypes().length;Object.keys(r).forEach(function(e){var t,i,o,s;a?(t=n.tracks[e])&&"function"==typeof t.buffer.changeType&&(s=(o=r[e]).codec,i=o.levelCodec,o=o.container,(t.levelCodec||t.codec).replace(Xt,"$1")!==(i||s).replace(Xt,"$1")&&(s=o+";codecs="+(i||s),n.appendChangeType(e,s))):n.pendingTracks[e]=r[e]}),a||(this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks())},me.appendChangeType=function(t,i){var o=this,s=this.operationQueue,e={execute:function(){var e=o.sourceBuffer[t];e&&(H.b.log("[buffer-controller]: changing "+t+" sourceBuffer type to "+i),e.changeType(i)),s.shiftAndExecuteNext(t)},onStart:function(){},onComplete:function(){},onError:function(e){H.b.warn("[buffer-controller]: Failed to change "+t+" SourceBuffer type",e)}};s.append(e,t)},me.onBufferAppending=function(e,t){var s=this,i=this.hls,o=this.operationQueue,r=this.tracks,n=t.data,a=t.type,l=t.frag,c=t.part,d=t.chunkMeta,u=d.buffering[a],t=self.performance.now();u.start=t;var h=l.stats.buffering,f=c?c.stats.buffering:null;0===h.start&&(h.start=t),f&&0===f.start&&(f.start=t);var r=r.audio,p="audio"===a&&1===d.id&&"audio/mpeg"===(null==r?void 0:r.container),r={execute:function(){var e,t;u.executeStart=self.performance.now(),p&&(e=s.sourceBuffer[a])&&(t=l.start-e.timestampOffset,.1<=Math.abs(t)&&(H.b.log("[buffer-controller]: Updating audio SourceBuffer timestampOffset to "+l.start+" (delta: "+t+") sn: "+l.sn+")"),e.timestampOffset=l.start)),s.appendExecutor(n,a)},onStart:function(){},onComplete:function(){var e=self.performance.now();u.executeEnd=u.end=e,0===h.first&&(h.first=e),f&&0===f.first&&(f.first=e);var t,i=s.sourceBuffer,o={};for(t in i)o[t]=be.getBuffered(i[t]);s.appendError=0,s.hls.trigger(m.a.BUFFER_APPENDED,{type:a,frag:l,part:c,chunkMeta:d,parent:l.type,timeRanges:o})},onError:function(e){H.b.error("[buffer-controller]: Error encountered while trying to append to the "+a+" SourceBuffer",e);var t={type:v.b.MEDIA_ERROR,parent:l.type,details:v.a.BUFFER_APPEND_ERROR,err:e,fatal:!1};e.code===DOMException.QUOTA_EXCEEDED_ERR?t.details=v.a.BUFFER_FULL_ERROR:(s.appendError++,t.details=v.a.BUFFER_APPEND_ERROR,s.appendError>i.config.appendErrorMaxRetry&&(H.b.error("[buffer-controller]: Failed "+i.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),t.fatal=!0)),i.trigger(m.a.ERROR,t)}};o.append(r,a)},me.onBufferFlushing=function(e,i){function t(t){return{execute:o.removeExecutor.bind(o,t,i.startOffset,i.endOffset),onStart:function(){},onComplete:function(){o.hls.trigger(m.a.BUFFER_FLUSHED,{type:t})},onError:function(e){H.b.warn("[buffer-controller]: Failed to remove from "+t+" SourceBuffer",e)}}}var o=this,s=this.operationQueue;i.type?s.append(t(i.type),i.type):this.getSourceBufferTypes().forEach(function(e){s.append(t(e),e)})},me.onFragParsed=function(e,t){var i=this,o=t.frag,s=t.part,r=[],t=(s||o).elementaryStreams;t[z.a.AUDIOVIDEO]?r.push("audiovideo"):(t[z.a.AUDIO]&&r.push("audio"),t[z.a.VIDEO]&&r.push("video")),0===r.length&&H.b.warn("Fragments must have at least one ElementaryStreamType set. type: "+o.type+" level: "+o.level+" sn: "+o.sn),this.blockBuffers(function(){var e=self.performance.now();o.stats.buffering.end=e,s&&(s.stats.buffering.end=e);e=(s||o).stats;i.hls.trigger(m.a.FRAG_BUFFERED,{frag:o,part:s,stats:e,id:o.type})},r)},me.onFragChanged=function(e,t){this.flushBackBuffer()},me.onBufferEos=function(e,o){var s=this;this.getSourceBufferTypes().reduce(function(e,t){var i=s.sourceBuffer[t];return o.type&&o.type!==t||i&&!i.ended&&(i.ended=!0,H.b.log("[buffer-controller]: "+t+" sourceBuffer now EOS")),e&&!(i&&!i.ended)},!0)&&this.blockBuffers(function(){var e=s.mediaSource;e&&"open"===e.readyState&&e.endOfStream()})},me.onLevelUpdated=function(e,t){t=t.details;t.fragments.length&&(this.details=t,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())},me.flushBackBuffer=function(){var e,t,i,o,s=this.hls,r=this.details,n=this.media,a=this.sourceBuffer;!n||null===r||(e=this.getSourceBufferTypes()).length&&(i=r.live&&null!==s.config.liveBackBufferLength?s.config.liveBackBufferLength:s.config.backBufferLength,!Object(F.a)(i)||i<0||(t=n.currentTime,n=r.levelTargetDuration,i=Math.max(i,n),o=Math.floor(t/n)*n-i,e.forEach(function(e){var t=a[e];!t||0<(t=be.getBuffered(t)).length&&o>t.start(0)&&(s.trigger(m.a.BACK_BUFFER_REACHED,{bufferEnd:o}),r.live&&s.trigger(m.a.LIVE_BACK_BUFFER_REACHED,{bufferEnd:o}),s.trigger(m.a.BUFFER_FLUSHING,{startOffset:0,endOffset:o,type:e}))})))},me.updateMediaElementDuration=function(){var e,t,i,o,s,r;this.details&&this.media&&this.mediaSource&&"open"===this.mediaSource.readyState&&(e=this.details,t=this.hls,r=this.media,i=this.mediaSource,o=e.fragments[0].start+e.totalduration,s=r.duration,r=Object(F.a)(i.duration)?i.duration:0,e.live&&t.config.liveDurationInfinity?(H.b.log("[buffer-controller]: Media Source duration is set to Infinity"),i.duration=1/0,this.updateSeekableRange(e)):(r<o&&s<o||!Object(F.a)(s))&&(H.b.log("[buffer-controller]: Updating Media Source duration to "+o.toFixed(3)),i.duration=o))},me.updateSeekableRange=function(e){var t=this.mediaSource,i=e.fragments;i.length&&e.live&&null!=t&&t.setLiveSeekableRange&&(i=Math.max(0,i[0].start),e=Math.max(i,i+e.totalduration),t.setLiveSeekableRange(i,e))},me.checkPendingTracks=function(){var e=this.bufferCodecEventsExpected,t=this.operationQueue,i=this.pendingTracks,o=Object.keys(i).length;(o&&!e||2===o)&&(this.createSourceBuffers(i),this.pendingTracks={},0!==(i=this.getSourceBufferTypes()).length?i.forEach(function(e){t.executeNext(e)}):this.hls.trigger(m.a.ERROR,{type:v.b.MEDIA_ERROR,details:v.a.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,reason:"could not create source buffer for media codec(s)"}))},me.createSourceBuffers=function(e){var t=this.sourceBuffer,i=this.mediaSource;if(!i)throw Error("createSourceBuffers called when mediaSource was null");var o,s=0;for(o in e)if(!t[o]){var r=e[o];if(!r)throw Error("source buffer exists for track "+o+", however track does not");var n=r.levelCodec||r.codec,a=r.container+";codecs="+n;H.b.log("[buffer-controller]: creating sourceBuffer("+a+")");try{var l=t[o]=i.addSourceBuffer(a),c=o;this.addBufferListener(c,"updatestart",this._onSBUpdateStart),this.addBufferListener(c,"updateend",this._onSBUpdateEnd),this.addBufferListener(c,"error",this._onSBUpdateError),this.tracks[o]={buffer:l,codec:n,container:r.container,levelCodec:r.levelCodec,id:r.id},s++}catch(e){H.b.error("[buffer-controller]: error while trying to add sourceBuffer: "+e.message),this.hls.trigger(m.a.ERROR,{type:v.b.MEDIA_ERROR,details:v.a.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:e,mimeType:a})}}s&&this.hls.trigger(m.a.BUFFER_CREATED,{tracks:this.tracks})},me._onSBUpdateStart=function(e){this.operationQueue.current(e).onStart()},me._onSBUpdateEnd=function(e){var t=this.operationQueue;t.current(e).onComplete(),t.shiftAndExecuteNext(e)},me._onSBUpdateError=function(e,t){H.b.error("[buffer-controller]: "+e+" SourceBuffer error",t),this.hls.trigger(m.a.ERROR,{type:v.b.MEDIA_ERROR,details:v.a.BUFFER_APPENDING_ERROR,fatal:!1});e=this.operationQueue.current(e);e&&e.onError(t)},me.removeExecutor=function(e,t,i){var o=this.media,s=this.mediaSource,r=this.operationQueue,n=this.sourceBuffer[e];if(!o||!s||!n)return H.b.warn("[buffer-controller]: Attempting to remove from the "+e+" SourceBuffer, but it does not exist"),void r.shiftAndExecuteNext(e);o=Object(F.a)(o.duration)?o.duration:1/0,s=Object(F.a)(s.duration)?s.duration:1/0,t=Math.max(0,t),s=Math.min(i,o,s);t<s?(H.b.log("[buffer-controller]: Removing ["+t+","+s+"] from the "+e+" SourceBuffer"),n.remove(t,s)):r.shiftAndExecuteNext(e)},me.appendExecutor=function(e,t){var i=this.operationQueue,o=this.sourceBuffer[t];if(!o)return H.b.warn("[buffer-controller]: Attempting to append to the "+t+" SourceBuffer, but it does not exist"),void i.shiftAndExecuteNext(t);o.ended=!1,o.appendBuffer(e)},me.blockBuffers=function(e,t){var i=this;if(void 0===t&&(t=this.getSourceBufferTypes()),!t.length)return H.b.log("[buffer-controller]: Blocking operation requested, but no SourceBuffers exist"),void Promise.resolve(e);var o=this.operationQueue,s=t.map(function(e){return o.appendBlocker(e)});Promise.all(s).then(function(){e(),t.forEach(function(e){var t=i.sourceBuffer[e];t&&t.updating||o.shiftAndExecuteNext(e)})})},me.getSourceBufferTypes=function(){return Object.keys(this.sourceBuffer)},me.addBufferListener=function(e,t,i){var o=this.sourceBuffer[e];o&&(i=i.bind(this,e),this.listeners[e].push({event:t,listener:i}),o.addEventListener(t,i))},me.removeBufferListeners=function(e){var t=this.sourceBuffer[e];t&&this.listeners[e].forEach(function(e){t.removeEventListener(e.event,e.listener)})},Qt),Vt={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},Gt={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},Yt={17:2,18:4,21:6,22:8,23:10,19:13,20:15},Zt={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},Kt={25:2,26:4,29:6,30:8,31:10,27:13,28:15},Wt=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];function Qt(e){var o=this;this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.appendError=0,this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this._onMediaSourceOpen=function(){var e=o.hls,t=o.media,i=o.mediaSource;H.b.log("[buffer-controller]: Media source opened"),t&&(o.updateMediaElementDuration(),e.trigger(m.a.MEDIA_ATTACHED,{media:t})),i&&i.removeEventListener("sourceopen",o._onMediaSourceOpen),o.checkPendingTracks()},this._onMediaSourceClose=function(){H.b.log("[buffer-controller]: Media source closed")},this._onMediaSourceEnded=function(){H.b.log("[buffer-controller]: Media source ended")},this.hls=e,this._initSourceBuffer(),this.registerListeners()}function Jt(e){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=e}(Qi=Ft=Ft||{})[Qi.ERROR=0]="ERROR",Qi[Qi.TEXT=1]="TEXT",Qi[Qi.WARNING=2]="WARNING",Qi[Qi.INFO=2]="INFO",Qi[Qi.DEBUG=3]="DEBUG",Qi[Qi.DATA=3]="DATA";function $t(e){for(var t=[],i=0;i<e.length;i++)t.push(e[i].toString(16));return t}var ei=(ui.prototype.log=function(e,t){this.verboseLevel>=e&&H.b.log(this.time+" ["+e+"] "+t)},ui),ti=((uo=di.prototype).reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},uo.setStyles=function(e){for(var t=["foreground","underline","italics","background","flash"],i=0;i<t.length;i++){var o=t[i];e.hasOwnProperty(o)&&(this[o]=e[o])}},uo.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},uo.equals=function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},uo.copy=function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},uo.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},di),ii=((eo=ci.prototype).reset=function(){this.uchar=" ",this.penState.reset()},eo.setChar=function(e,t){this.uchar=e,this.penState.copy(t)},eo.setPenState=function(e){this.penState.copy(e)},eo.equals=function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},eo.copy=function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},eo.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},ci),oi=((Yi=li.prototype).equals=function(e){for(var t=!0,i=0;i<100;i++)if(!this.chars[i].equals(e.chars[i])){t=!1;break}return t},Yi.copy=function(e){for(var t=0;t<100;t++)this.chars[t].copy(e.chars[t])},Yi.isEmpty=function(){for(var e=!0,t=0;t<100;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},Yi.setCursor=function(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(Ft.DEBUG,"Negative cursor position "+this.pos),this.pos=0):100<this.pos&&(this.logger.log(Ft.DEBUG,"Too large cursor position "+this.pos),this.pos=100)},Yi.moveCursor=function(e){var t=this.pos+e;if(1<e)for(var i=this.pos+1;i<t+1;i++)this.chars[i].setPenState(this.currPenState);this.setCursor(t)},Yi.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},Yi.insertChar=function(e){144<=e&&this.backSpace();var t=Nt(e);100<=this.pos?this.logger.log(Ft.ERROR,"Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))},Yi.clearFromPos=function(e){for(var t=e;t<100;t++)this.chars[t].reset()},Yi.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},Yi.clearToEndOfRow=function(){this.clearFromPos(this.pos)},Yi.getTextString=function(){for(var e=[],t=!0,i=0;i<100;i++){var o=this.chars[i].uchar;" "!==o&&(t=!1),e.push(o)}return t?"":e.join("")},Yi.setPenStyles=function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)},li),si=((st=ai.prototype).reset=function(){for(var e=0;e<15;e++)this.rows[e].clear();this.currRow=14},st.equals=function(e){for(var t=!0,i=0;i<15;i++)if(!this.rows[i].equals(e.rows[i])){t=!1;break}return t},st.copy=function(e){for(var t=0;t<15;t++)this.rows[t].copy(e.rows[t])},st.isEmpty=function(){for(var e=!0,t=0;t<15;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},st.backSpace=function(){this.rows[this.currRow].backSpace()},st.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},st.insertChar=function(e){this.rows[this.currRow].insertChar(e)},st.setPen=function(e){this.rows[this.currRow].setPenStyles(e)},st.moveCursor=function(e){this.rows[this.currRow].moveCursor(e)},st.setCursor=function(e){this.logger.log(Ft.INFO,"setCursor: "+e),this.rows[this.currRow].setCursor(e)},st.setPAC=function(e){this.logger.log(Ft.INFO,"pacData = "+JSON.stringify(e));var t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(var i=0;i<15;i++)this.rows[i].clear();var o=this.currRow+1-this.nrRollUpRows,s=this.lastOutputScreen;if(s){var r=s.rows[o].cueStartTime,n=this.logger.time;if(r&&null!==n&&r<n)for(var a=0;a<this.nrRollUpRows;a++)this.rows[t-this.nrRollUpRows+a+1].copy(s.rows[o+a])}}this.currRow=t;r=this.rows[this.currRow];null!==e.indent&&(n=e.indent,n=Math.max(n-1,0),r.setCursor(e.indent),e.color=r.chars[n].penState.foreground);e={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(e)},st.setBkgData=function(e){this.logger.log(Ft.INFO,"bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)},st.setRollUpRows=function(e){this.nrRollUpRows=e},st.rollUp=function(){var e;null!==this.nrRollUpRows?(this.logger.log(Ft.TEXT,this.getDisplayText()),e=this.currRow+1-this.nrRollUpRows,(e=this.rows.splice(e,1)[0]).clear(),this.rows.splice(this.currRow,0,e),this.logger.log(Ft.INFO,"Rolling up")):this.logger.log(Ft.DEBUG,"roll_up but nrRollUpRows not set yet")},st.getDisplayText=function(e){e=e||!1;for(var t,i=[],o="",s=0;s<15;s++){var r=this.rows[s].getTextString();r&&(t=s+1,e?i.push("Row "+t+": '"+r+"'"):i.push(r.trim()))}return 0<i.length&&(o=e?"["+i.join(" | ")+"]":i.join("\n")),o},st.getTextAndFormat=function(){return this.rows},ai),ri=((se=ni.prototype).reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},se.getHandler=function(){return this.outputFilter},se.setHandler=function(e){this.outputFilter=e},se.setPAC=function(e){this.writeScreen.setPAC(e)},se.setBkgData=function(e){this.writeScreen.setBkgData(e)},se.setMode=function(e){e!==this.mode&&(this.mode=e,this.logger.log(Ft.INFO,"MODE="+e),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},se.insertChars=function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var i=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(Ft.INFO,i+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(this.logger.log(Ft.TEXT,"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},se.ccRCL=function(){this.logger.log(Ft.INFO,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},se.ccBS=function(){this.logger.log(Ft.INFO,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},se.ccAOF=function(){},se.ccAON=function(){},se.ccDER=function(){this.logger.log(Ft.INFO,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},se.ccRU=function(e){this.logger.log(Ft.INFO,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},se.ccFON=function(){this.logger.log(Ft.INFO,"FON - Flash On"),this.writeScreen.setPen({flash:!0})},se.ccRDC=function(){this.logger.log(Ft.INFO,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},se.ccTR=function(){this.logger.log(Ft.INFO,"TR"),this.setMode("MODE_TEXT")},se.ccRTD=function(){this.logger.log(Ft.INFO,"RTD"),this.setMode("MODE_TEXT")},se.ccEDM=function(){this.logger.log(Ft.INFO,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},se.ccCR=function(){this.logger.log(Ft.INFO,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},se.ccENM=function(){this.logger.log(Ft.INFO,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},se.ccEOC=function(){var e;this.logger.log(Ft.INFO,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode&&(e=this.displayedMemory,this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(Ft.TEXT,"DISP: "+this.displayedMemory.getDisplayText())),this.outputDataUpdate(!0)},se.ccTO=function(e){this.logger.log(Ft.INFO,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},se.ccMIDROW=function(e){var t={flash:!1};t.underline=e%2==1,t.italics=46<=e,t.italics?t.foreground="white":(e=Math.floor(e/2)-16,t.foreground=["white","green","blue","cyan","red","yellow","magenta"][e]),this.logger.log(Ft.INFO,"MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},se.outputDataUpdate=function(e){void 0===e&&(e=!1);var t=this.logger.time;null!==t&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))},se.cueSplitAtTime=function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))},ni);function ni(e,t,i){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new si(i),this.nonDisplayedMemory=new si(i),this.lastOutputScreen=new si(i),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=i}function ai(e){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.logger=void 0,this.rows=[];for(var t=0;t<15;t++)this.rows.push(new oi(e));this.logger=e,this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null,this.reset()}function li(e){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chars=[];for(var t=0;t<100;t++)this.chars.push(new ii);this.logger=e,this.pos=0,this.currPenState=new ti}function ci(e,t,i,o,s,r){this.uchar=void 0,this.penState=void 0,this.uchar=e||" ",this.penState=new ti(t,i,o,s,r)}function di(e,t,i,o,s){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=e||"white",this.underline=t||!1,this.italics=i||!1,this.background=o||"black",this.flash=s||!1}function ui(){this.time=null,this.verboseLevel=Ft.ERROR}function hi(e,t,i){i.a=e,i.b=t}function fi(e,t,i){return i.a===e&&i.b===t}var pi=((t=wi.prototype).getHandler=function(e){return this.channels[e].getHandler()},t.setHandler=function(e,t){this.channels[e].setHandler(t)},t.addData=function(e,t){var i,o=!1;this.logger.time=e;for(var s=0;s<t.length;s+=2){var r,n=127&t[s],a=127&t[s+1];0==n&&0==a||(this.logger.log(Ft.DATA,"["+$t([t[s],t[s+1]])+"] -> ("+$t([n,a])+")"),(i=this.parseCmd(n,a))||(i=this.parseMidrow(n,a)),!(i=(i=i||this.parsePAC(n,a))||this.parseBackgroundAttributes(n,a))&&(o=this.parseChars(n,a))&&((r=this.currentChannel)&&0<r?this.channels[r].insertChars(o):this.logger.log(Ft.WARNING,"No channel found yet. TEXT-MODE?")),i||o||this.logger.log(Ft.WARNING,"Couldn't parse cleaned data "+$t([n,a])+" orig: "+$t([t[s],t[s+1]])))}},t.parseCmd=function(e,t){var i=this.cmdHistory;if(!((20===e||28===e||21===e||29===e)&&32<=t&&t<=47||(23===e||31===e)&&33<=t&&t<=35))return!1;if(fi(e,t,i))return hi(null,null,i),this.logger.log(Ft.DEBUG,"Repeated command ("+$t([e,t])+") is dropped"),!0;var o=20===e||21===e||23===e?1:2,s=this.channels[o];return 20===e||21===e||28===e||29===e?32===t?s.ccRCL():33===t?s.ccBS():34===t?s.ccAOF():35===t?s.ccAON():36===t?s.ccDER():37===t?s.ccRU(2):38===t?s.ccRU(3):39===t?s.ccRU(4):40===t?s.ccFON():41===t?s.ccRDC():42===t?s.ccTR():43===t?s.ccRTD():44===t?s.ccEDM():45===t?s.ccCR():46===t?s.ccENM():47===t&&s.ccEOC():s.ccTO(t-32),hi(e,t,i),this.currentChannel=o,!0},t.parseMidrow=function(e,t){var i=0;if((17===e||25===e)&&32<=t&&t<=47){if((i=17===e?1:2)!==this.currentChannel)return this.logger.log(Ft.ERROR,"Mismatch channel in midrow parsing"),!1;i=this.channels[i];return!!i&&(i.ccMIDROW(t),this.logger.log(Ft.DEBUG,"MIDROW ("+$t([e,t])+")"),!0)}return!1},t.parsePAC=function(e,t){var i=this.cmdHistory;if(!((17<=e&&e<=23||25<=e&&e<=31)&&64<=t&&t<=127||(16===e||24===e)&&64<=t&&t<=95))return!1;if(fi(e,t,i))return hi(null,null,i),!0;var o=e<=23?1:2,s=(64<=t&&t<=95?1==o?Gt:Zt:1==o?Yt:Kt)[e],r=this.channels[o];return!!r&&(r.setPAC(this.interpretPAC(s,t)),hi(e,t,i),this.currentChannel=o,!0)},t.interpretPAC=function(e,t){e={color:null,italics:!1,indent:null,underline:!1,row:e},t=95<t?t-96:t-64;return e.underline=1==(1&t),t<=13?e.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(t/2)]:t<=15?(e.italics=!0,e.color="white"):e.indent=4*Math.floor((t-16)/2),e},t.parseChars=function(e,t){var i,o,s=null,r=null;return 17<=(r=25<=e?(i=2,e-8):(i=1,e))&&r<=19?(o=17===r?t+80:18===r?t+112:t+144,this.logger.log(Ft.INFO,"Special char '"+Nt(o)+"' in channel "+i),s=[o]):32<=e&&e<=127&&(s=0===t?[e]:[e,t]),s&&(o=$t(s),this.logger.log(Ft.DEBUG,"Char codes =  "+o.join(",")),hi(e,t,this.cmdHistory)),s},t.parseBackgroundAttributes=function(e,t){if(!((16===e||24===e)&&32<=t&&t<=47||(23===e||31===e)&&45<=t&&t<=47))return!1;var i={};16===e||24===e?(o=Math.floor((t-32)/2),i.background=Wt[o],t%2==1&&(i.background=i.background+"_semi")):45===t?i.background="transparent":(i.foreground="black",47===t&&(i.underline=!0));var o=e<=23?1:2;return this.channels[o].setBkgData(i),hi(e,t,this.cmdHistory),!0},t.reset=function(){for(var e=0;e<Object.keys(this.channels).length;e++){var t=this.channels[e];t&&t.reset()}this.cmdHistory={a:null,b:null}},t.cueSplitAtTime=function(e){for(var t=0;t<this.channels.length;t++){var i=this.channels[t];i&&i.cueSplitAtTime(e)}},wi),vi=((me=bi.prototype).dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)},me.newCue=function(e,t,i){(null===this.startTime||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=i,this.timelineController.createCaptionsTrack(this.trackName)},me.reset=function(){this.cueRanges=[]},bi),gi=function(){if("undefined"!=typeof self&&self.VTTCue)return self.VTTCue;var b=["","lr","rl"],t=["start","middle","end","left","right"];function w(e,t){if("string"!=typeof t)return!1;if(!Array.isArray(e))return!1;t=t.toLowerCase();return!!~e.indexOf(t)&&t}function k(e){return w(t,e)}function x(e){for(var t=arguments.length,i=new Array(1<t?t-1:0),o=1;o<t;o++)i[o-1]=arguments[o];for(var s=1;s<arguments.length;s++){var r,n=arguments[s];for(r in n)e[r]=n[r]}return e}function e(e,t,i){var o=this,s={enumerable:!0};o.hasBeenReset=!1;var r="",n=!1,a=e,l=t,c=i,d=null,u="",h=!0,f="auto",p="start",v=50,g="middle",m=50,y="middle";Object.defineProperty(o,"id",x({},s,{get:function(){return r},set:function(e){r=""+e}})),Object.defineProperty(o,"pauseOnExit",x({},s,{get:function(){return n},set:function(e){n=!!e}})),Object.defineProperty(o,"startTime",x({},s,{get:function(){return a},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");a=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"endTime",x({},s,{get:function(){return l},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");l=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"text",x({},s,{get:function(){return c},set:function(e){c=""+e,this.hasBeenReset=!0}})),Object.defineProperty(o,"region",x({},s,{get:function(){return d},set:function(e){d=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"vertical",x({},s,{get:function(){return u},set:function(e){e=w(b,e);if(!1===e)throw new SyntaxError("An invalid or illegal string was specified.");u=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"snapToLines",x({},s,{get:function(){return h},set:function(e){h=!!e,this.hasBeenReset=!0}})),Object.defineProperty(o,"line",x({},s,{get:function(){return f},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("An invalid number or illegal string was specified.");f=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"lineAlign",x({},s,{get:function(){return p},set:function(e){e=k(e);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");p=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"position",x({},s,{get:function(){return v},set:function(e){if(e<0||100<e)throw new Error("Position must be between 0 and 100.");v=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"positionAlign",x({},s,{get:function(){return g},set:function(e){e=k(e);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");g=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"size",x({},s,{get:function(){return m},set:function(e){if(e<0||100<e)throw new Error("Size must be between 0 and 100.");m=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"align",x({},s,{get:function(){return y},set:function(e){e=k(e);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");y=e,this.hasBeenReset=!0}})),o.displayState=void 0}return e.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},e}(),mi=(yi.prototype.decode=function(e,t){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))},yi);function yi(){}function bi(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}function wi(e,t,i){this.channels=void 0,this.currentChannel=0,this.cmdHistory=void 0,this.logger=void 0;var o=new ei;this.channels=[null,new ri(e,t,o),new ri(e+1,i,o)],this.cmdHistory={a:null,b:null},this.logger=o}function ki(e){function t(e,t,i,o){return 3600*(0|e)+60*(0|t)+(0|i)+parseFloat(o||0)}e=e.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return e?59<parseFloat(e[2])?t(e[2],e[3],0,e[4]):t(e[1],e[2],e[3],e[4]):null}var xi=((Qi=Ai.prototype).set=function(e,t){this.get(e)||""===t||(this.values[e]=t)},Qi.get=function(e,t,i){return i?this.has(e)?this.values[e]:t[i]:this.has(e)?this.values[e]:t},Qi.has=function(e){return e in this.values},Qi.alt=function(e,t,i){for(var o=0;o<i.length;++o)if(t===i[o]){this.set(e,t);break}},Qi.integer=function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},Qi.percent=function(e,t){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(t)){t=parseFloat(t);if(0<=t&&t<=100)return this.set(e,t),!0}return!1},Ai);function Ai(){this.values=Object.create(null)}function Ti(e,t,i,o){var s,r,n=o?e.split(o):[e];for(s in n)"string"!=typeof n[s]||2===(r=n[s].split(i)).length&&t(r[0],r[1])}var _i=new gi(0,0,""),Ei="middle"===_i.align?"middle":"center";function Si(e){return e.replace(/<br(?: \/)?>/gi,"\n")}function Li(e,t,i){return void 0===i&&(i=0),e.substr(i,t.length)===t}var Ci=((uo=Mi.prototype).parse=function(e){var o=this;function t(){for(var e=0,t=Si(t=o.buffer);e<t.length&&"\r"!==t[e]&&"\n"!==t[e];)++e;var i=t.substr(0,e);return"\r"===t[e]&&++e,"\n"===t[e]&&++e,o.buffer=t.substr(e),i}e&&(o.buffer+=o.decoder.decode(e,{stream:!0}));try{var i="";if("INITIAL"===o.state){if(!/\r\n|\n/.test(o.buffer))return this;var s=(i=t()).match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!s||!s[0])throw new Error("Malformed WebVTT signature.");o.state="HEADER"}for(var r=!1;o.buffer;){if(!/\r\n|\n/.test(o.buffer))return this;switch(r?r=!1:i=t(),o.state){case"HEADER":/:/.test(i)?Ti(i,function(e,t){},/:/):i||(o.state="ID");continue;case"NOTE":i||(o.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(i)){o.state="NOTE";break}if(!i)continue;if(o.cue=new gi(0,0,""),o.state="CUE",-1===i.indexOf("--\x3e")){o.cue.id=i;continue}case"CUE":if(!o.cue){o.state="BADCUE";continue}try{!function(t,e,s){var i,r,o=t;function n(){var e=ki(t);if(null===e)throw new Error("Malformed timestamp: "+o);return t=t.replace(/^[^\sa-zA-Z-]+/,""),e}function a(){t=t.replace(/^\s+/,"")}if(a(),e.startTime=n(),a(),"--\x3e"!==t.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+o);t=t.substr(3),a(),e.endTime=n(),a(),i=t,e=e,r=new xi,Ti(i,function(e,t){var i;switch(e){case"region":for(var o=s.length-1;0<=o;o--)if(s[o].id===t){r.set(e,s[o].region);break}break;case"vertical":r.alt(e,t,["rl","lr"]);break;case"line":i=t.split(","),r.integer(e,i[0]),r.percent(e,i[0])&&r.set("snapToLines",!1),r.alt(e,i[0],["auto"]),2===i.length&&r.alt("lineAlign",i[1],["start",Ei,"end"]);break;case"position":i=t.split(","),r.percent(e,i[0]),2===i.length&&r.alt("positionAlign",i[1],["start",Ei,"end","line-left","line-right","auto"]);break;case"size":r.percent(e,t);break;case"align":r.alt(e,t,["start",Ei,"end","left","right"])}},/:/,/\s/),e.region=r.get("region",null),e.vertical=r.get("vertical",""),"auto"===(i=r.get("line","auto"))&&-1===_i.line&&(i=-1),e.line=i,e.lineAlign=r.get("lineAlign","start"),e.snapToLines=r.get("snapToLines",!0),e.size=r.get("size",100),e.align=r.get("align",Ei),"auto"===(i=r.get("position","auto"))&&50===_i.position&&(i="start"===e.align||"left"===e.align?0:"end"===e.align||"right"===e.align?100:50),e.position=i}(i,o.cue,o.regionList)}catch(e){o.cue=null,o.state="BADCUE";continue}o.state="CUETEXT";continue;case"CUETEXT":var n=-1!==i.indexOf("--\x3e");if(!i||n&&(r=!0)){o.oncue&&o.cue&&o.oncue(o.cue),o.cue=null,o.state="ID";continue}if(null===o.cue)continue;o.cue.text&&(o.cue.text+="\n"),o.cue.text+=i;continue;case"BADCUE":i||(o.state="ID")}}}catch(e){"CUETEXT"===o.state&&o.cue&&o.oncue&&o.oncue(o.cue),o.cue=null,o.state="INITIAL"===o.state?"BADWEBVTT":"BADCUE"}return this},uo.flush=function(){try{if(!this.cue&&"HEADER"!==this.state||(this.buffer+="\n\n",this.parse()),"INITIAL"===this.state||"BADWEBVTT"===this.state)throw new Error("Malformed WebVTT signature.")}catch(e){this.onparsingerror&&this.onparsingerror(e)}return this.onflush&&this.onflush(),this},Mi),Oi=i(8),Pi=i(16),ji=/\r\n|\n\r|\n|\r/g,Ii=function(e){for(var t=5381,i=e.length;i;)t=33*t^e.charCodeAt(--i);return(t>>>0).toString()};function Mi(){this.state="INITIAL",this.buffer="",this.decoder=new mi,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}function Bi(e,t,i){return Ii(e.toString())+Ii(t.toString())+Ii(i)}function Di(e,t,i,r,n,a,o,s){var l,c=new Ci,e=Object(L.f)(new Uint8Array(e)).trim().replace(ji,"\n").split("\n"),d=[],u=Object(Oi.a)(t,i),h="00:00.000",f=0,p=0,v=!0,g=!1;c.oncue=function(e){var t=r[n],i=r.ccOffset,o=(f-u)/9e4;null!=t&&t.new&&(void 0!==p?i=r.ccOffset=t.start:function(e,t){var i=e[n],o=e[i.prevCC];if(!o||!o.new&&i.new)return e.ccOffset=e.presentationOffset=i.start,i.new=!1;for(;null!==o&&void 0!==o&&o.new;)e.ccOffset+=i.start-o.start,i.new=!1,o=e[(i=o).prevCC];e.presentationOffset=t}(r,o)),o&&(i=o-r.presentationOffset),g&&(s=e.endTime-e.startTime,i=Object(Pi.b)(9e4*(e.startTime+i-p),9e4*a)/9e4,e.startTime=i,e.endTime=i+s);var s=e.text.trim();e.text=decodeURIComponent(encodeURIComponent(s)),e.id||(e.id=Bi(e.startTime,e.endTime,s)),0<e.endTime&&d.push(e)},c.onparsingerror=function(e){l=e},c.onflush=function(){l?s(l):o(d)},e.forEach(function(e){if(v){if(Li(e,"X-TIMESTAMP-MAP=")){g=!(v=!1),e.substr(16).split(",").forEach(function(e){Li(e,"LOCAL:")?h=e.substr(6):Li(e,"MPEGTS:")&&(f=parseInt(e.substr(7)))});try{p=function(e){var t=parseInt(e.substr(-3)),i=parseInt(e.substr(-6,2)),o=parseInt(e.substr(-9,2)),s=9<e.length?parseInt(e.substr(0,e.indexOf(":"))):0;if(!(Object(F.a)(t)&&Object(F.a)(i)&&Object(F.a)(o)&&Object(F.a)(s)))throw Error("Malformed X-TIMESTAMP-MAP: Local:"+e);return t+=1e3*i,(t+=6e4*o)+36e5*s}(h)/1e3}catch(e){g=!1,l=e}return}""===e&&(v=!1)}c.parse(e+"\n")}),c.flush()}function Ri(){return(Ri=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i,o=arguments[t];for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i])}return e}).apply(this,arguments)}var Ni=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,Fi=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,Hi={left:"start",center:"center",right:"end",start:"start",end:"end"};function zi(e,t,i,o,s){var r=Object(l.b)(new Uint8Array(e),["mdat"]);if(0!==r.length){var r=r[0],n=Object(L.f)(new Uint8Array(e,r.start,r.end-r.start)),a=Object(Oi.c)(t,1,i);try{o(function(e,l){var i=(new DOMParser).parseFromString(e,"text/xml").getElementsByTagName("tt")[0];if(!i)throw new Error("Invalid ttml");var o={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},c=Object.keys(o).reduce(function(e,t){return e[t]=i.getAttribute("ttp:"+t)||o[t],e},{}),d="preserve"!==i.getAttribute("xml:space"),u=Xi(qi(i,"styling","style")),h=Xi(qi(i,"layout","region")),e=qi(i,"body","[begin]");return[].map.call(e,function(e){var t=function o(e,s){return[].slice.call(e.childNodes).reduce(function(e,t,i){return"br"===t.nodeName&&i?e+"\n":null!==(i=t.childNodes)&&void 0!==i&&i.length?o(t,s):s?e+t.textContent.trim().replace(/\s+/g," "):e+t.textContent},"")}(e,d);if(!t||!e.hasAttribute("begin"))return null;var i=Gi(e.getAttribute("begin"),c),o=Gi(e.getAttribute("dur"),c),s=Gi(e.getAttribute("end"),c);if(null===i)throw Vi(e);if(null===s){if(null===o)throw Vi(e);s=i+o}i=new gi(i-l,s-l,t);i.id=Bi(i.startTime,i.endTime,i.text);s=h[e.getAttribute("region")],t=u[e.getAttribute("style")];i.position=10,i.size=80;var r,n,a,e=(r=s,n=t,a="http://www.w3.org/ns/ttml#styling",["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"].reduce(function(e,t){var i=Ui(n,a,t)||Ui(r,a,t);return i&&(e[t]=i),e},{})),s=e.textAlign;return s&&((t=Hi[s])&&(i.lineAlign=t),i.align=s),Ri(i,e),i}).filter(function(e){return null!==e})}(n,a))}catch(e){s(e)}}else s(new Error("Could not parse IMSC1 mdat"))}function qi(e,t,i){t=e.getElementsByTagName(t)[0];return t?[].slice.call(t.querySelectorAll(i)):[]}function Xi(e){return e.reduce(function(e,t){var i=t.getAttribute("xml:id");return i&&(e[i]=t),e},{})}function Ui(e,t,i){return e.hasAttributeNS(t,i)?e.getAttributeNS(t,i):null}function Vi(e){return new Error("Could not parse ttml timestamp "+e)}function Gi(o,e){if(!o)return null;var t,i,s,r=ki(o);return null===r&&(Ni.test(o)?(t=e,i=Ni.exec(o),s=(0|i[4])+(0|i[5])/t.subFrameRate,r=3600*(0|i[1])+60*(0|i[2])+(0|i[3])+s/t.frameRate):Fi.test(o)&&(r=function(e){var t=Fi.exec(o),i=Number(t[1]);switch(t[2]){case"h":return 3600*i;case"m":return 60*i;case"ms":return 1e3*i;case"f":return i/e.frameRate;case"t":return i/e.tickRate}return i}(e))),r}var Yi=((eo=Zi.prototype).destroy=function(){var e=this.hls;e.off(m.a.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(m.a.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(m.a.MANIFEST_LOADING,this.onManifestLoading,this),e.off(m.a.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(m.a.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(m.a.FRAG_LOADING,this.onFragLoading,this),e.off(m.a.FRAG_LOADED,this.onFragLoaded,this),e.off(m.a.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(m.a.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(m.a.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(m.a.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(m.a.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.cea608Parser1=this.cea608Parser2=null},eo.addCues=function(e,t,i,o,s){for(var r,n,a,l=!1,c=s.length;c--;){var d=s[c],u=(r=d[0],n=d[1],u=t,Math.min(n,i)-Math.max(r,u));if(0<=u&&(d[0]=Math.min(d[0],t),d[1]=Math.max(d[1],i),l=!0,.5<u/(i-t)))return}l||s.push([t,i]),this.config.renderTextTracksNatively?(a=this.captionsTracks[e],this.Cues.newCue(a,t,i,o)):(o=this.Cues.newCue(null,t,i,o),this.hls.trigger(m.a.CUES_PARSED,{type:"captions",cues:o,track:e}))},eo.onInitPtsFound=function(e,t){var i=this,o=t.frag,s=t.id,r=t.initPTS,n=t.timescale,t=this.unparsedVttFrags;"main"===s&&(this.initPTS[o.cc]=r,this.timescale[o.cc]=n),t.length&&(this.unparsedVttFrags=[],t.forEach(function(e){i.onFragLoaded(m.a.FRAG_LOADED,e)}))},eo.getExistingTrack=function(e){var t=this.media;if(t)for(var i=0;i<t.textTracks.length;i++){var o=t.textTracks[i];if(o[e])return o}return null},eo.createCaptionsTrack=function(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)},eo.createNativeTrack=function(e){var t,i,o,s,r;this.captionsTracks[e]||(r=this.captionsProperties,t=this.captionsTracks,i=this.media,o=(s=r[e]).label,r=s.languageCode,(s=this.getExistingTrack(e))?(t[e]=s,E(t[e]),T(t[e],i)):(r=this.createTextTrack("captions",o,r))&&(r[e]=!0,t[e]=r))},eo.createNonNativeTrack=function(e){var t;this.nonNativeCaptionsTracks[e]||(t=this.captionsProperties[e])&&(t={_id:e,label:t.label,kind:"captions",default:!!t.media&&!!t.media.default,closedCaptions:t.media},this.nonNativeCaptionsTracks[e]=t,this.hls.trigger(m.a.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[t]}))},eo.createTextTrack=function(e,t,i){var o=this.media;if(o)return o.addTextTrack(e,t,i)},eo.onMediaAttaching=function(e,t){this.media=t.media,this._cleanTracks()},eo.onMediaDetaching=function(){var t=this.captionsTracks;Object.keys(t).forEach(function(e){E(t[e]),delete t[e]}),this.nonNativeCaptionsTracks={}},eo.onManifestLoading=function(){this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.timescale=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())},eo._cleanTracks=function(){var e=this.media;if(e){var t=e.textTracks;if(t)for(var i=0;i<t.length;i++)E(t[i])}},eo.onSubtitleTracksUpdated=function(e,t){var a=this;this.textTracks=[];var l,i=t.subtitleTracks||[],t=i.some(function(e){return"stpp.ttml.im1t"===e.textCodec});(this.config.enableWebVTT||t&&this.config.enableIMSC1)&&(t=this.tracks&&i&&this.tracks.length===i.length,this.tracks=i||[],this.config.renderTextTracksNatively?(l=this.media?this.media.textTracks:[],this.tracks.forEach(function(e,t){var i,o,s;if(t<l.length){for(var r=null,n=0;n<l.length;n++)if(o=l[n],s=e,o&&o.label===s.name&&!(o.textTrack1||o.textTrack2)){r=l[n];break}r&&(i=r)}i?E(i):(i=a.createTextTrack("subtitles",e.name,e.lang))&&(i.mode="disabled"),i&&(i.groupId=e.groupId,a.textTracks.push(i))})):!t&&this.tracks&&this.tracks.length&&(t=this.tracks.map(function(e){return{label:e.name,kind:e.type.toLowerCase(),default:e.default,subtitleTrack:e}}),this.hls.trigger(m.a.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:t})))},eo.onManifestLoaded=function(e,t){var i=this;this.config.enableCEA708Captions&&t.captions&&t.captions.forEach(function(e){var t=/(?:CC|SERVICE)([1-4])/.exec(e.instreamId);t&&(t="textTrack"+t[1],(t=i.captionsProperties[t])&&(t.label=e.name,e.lang&&(t.languageCode=e.lang),t.media=e))})},eo.onFragLoading=function(e,t){var i,o,s=this.cea608Parser1,r=this.cea608Parser2,n=this.lastSn,a=this.lastPartIndex;this.enabled&&s&&r&&t.frag.type===y.b.MAIN&&(i=t.frag.sn,o=null!=(o=null==t||null===(o=t.part)||void 0===o?void 0:o.index)?o:-1,i===n+1||i===n&&o===a+1||(s.reset(),r.reset()),this.lastSn=i,this.lastPartIndex=o)},eo.onFragLoaded=function(e,t){var i=t.frag,o=t.payload,s=this.initPTS,r=this.unparsedVttFrags;if(i.type===y.b.SUBTITLE)if(o.byteLength){if(!Object(F.a)(s[i.cc]))return r.push(t),void(s.length&&this.hls.trigger(m.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:i,error:new Error("Missing initial subtitle PTS")}));t=i.decryptdata;null!=t&&null!=t.key&&"AES-128"===t.method||(s=this.tracks[i.level],(t=this.vttCCs)[i.cc]||(t[i.cc]={start:i.start,prevCC:this.prevCC,new:!0},this.prevCC=i.cc),s&&"stpp.ttml.im1t"===s.textCodec?this._parseIMSC1(i,o):this._parseVTTs(i,o,t))}else this.hls.trigger(m.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:i,error:new Error("Empty subtitle payload")})},eo._parseIMSC1=function(t,e){var i=this,o=this.hls;zi(e,this.initPTS[t.cc],this.timescale[t.cc],function(e){i._appendCues(e,t.level),o.trigger(m.a.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:t})},function(e){H.b.log("Failed to parse IMSC1: "+e),o.trigger(m.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t,error:e})})},eo._parseVTTs=function(t,i,e){var o=this,s=this.hls;Di(i,this.initPTS[t.cc],this.timescale[t.cc],e,t.cc,t.start,function(e){o._appendCues(e,t.level),s.trigger(m.a.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:t})},function(e){o._fallbackToIMSC1(t,i),H.b.log("Failed to parse VTT cue: "+e),s.trigger(m.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t,error:e})})},eo._fallbackToIMSC1=function(e,t){var i=this,o=this.tracks[e.level];o.textCodec||zi(t,this.initPTS[e.cc],this.timescale[e.cc],function(){o.textCodec="stpp.ttml.im1t",i._parseIMSC1(e,t)},function(){o.textCodec="wvtt"})},eo._appendCues=function(e,t){var i,o=this.hls;this.config.renderTextTracksNatively?"disabled"!==(i=this.textTracks[t]).mode&&e.forEach(function(e){return _(i,e)}):(t=this.tracks[t].default?"default":"subtitles"+t,o.trigger(m.a.CUES_PARSED,{type:"subtitles",cues:e,track:t}))},eo.onFragDecrypted=function(e,t){var i=t.frag;i.type===y.b.SUBTITLE&&(Object(F.a)(this.initPTS[i.cc])?this.onFragLoaded(m.a.FRAG_LOADED,t):this.unparsedVttFrags.push(t))},eo.onSubtitleTracksCleared=function(){this.tracks=[],this.captionsTracks={}},eo.onFragParsingUserdata=function(e,t){var i=this.cea608Parser1,o=this.cea608Parser2;if(this.enabled&&i&&o)for(var s=0;s<t.samples.length;s++){var r=t.samples[s].bytes;r&&(r=this.extractCea608Data(r),i.addData(t.samples[s].pts,r[0]),o.addData(t.samples[s].pts,r[1]))}},eo.onBufferFlushing=function(e,t){var i,o,s=t.startOffset,r=t.endOffset,n=t.endOffsetSubtitles,a=t.type,t=this.media;!t||t.currentTime<r||(a&&"video"!==a||(i=this.captionsTracks,Object.keys(i).forEach(function(e){return S(i[e],s,r)})),this.config.renderTextTracksNatively&&0===s&&void 0!==n&&(o=this.textTracks,Object.keys(o).forEach(function(e){return S(o[e],s,n)})))},eo.extractCea608Data=function(e){for(var t=31&e[0],i=2,o=[[],[]],s=0;s<t;s++){var r=e[i++],n=127&e[i++],a=127&e[i++],l=3&r;0==n&&0==a||0!=(4&r)&&(0!=l&&1!=l||(o[l].push(n),o[l].push(a)))}return o},Zi);function Zi(e){var t,i,o,s;this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.timescale=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},this.config.enableCEA708Captions&&(t=new vi(this,"textTrack1"),i=new vi(this,"textTrack2"),o=new vi(this,"textTrack3"),s=new vi(this,"textTrack4"),this.cea608Parser1=new pi(1,t,i),this.cea608Parser2=new pi(3,o,s)),e.on(m.a.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(m.a.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(m.a.MANIFEST_LOADING,this.onManifestLoading,this),e.on(m.a.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(m.a.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(m.a.FRAG_LOADING,this.onFragLoading,this),e.on(m.a.FRAG_LOADED,this.onFragLoaded,this),e.on(m.a.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(m.a.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(m.a.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(m.a.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(m.a.BUFFER_FLUSHING,this.onBufferFlushing,this)}function Ki(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var Wi,t=((st=$i.prototype).setStreamController=function(e){this.streamController=e},st.destroy=function(){this.unregisterListener(),this.hls.config.capLevelToPlayerSize&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null},st.registerListeners=function(){var e=this.hls;e.on(m.a.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(m.a.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(m.a.MANIFEST_PARSED,this.onManifestParsed,this),e.on(m.a.BUFFER_CODECS,this.onBufferCodecs,this),e.on(m.a.MEDIA_DETACHING,this.onMediaDetaching,this)},st.unregisterListener=function(){var e=this.hls;e.off(m.a.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(m.a.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(m.a.MANIFEST_PARSED,this.onManifestParsed,this),e.off(m.a.BUFFER_CODECS,this.onBufferCodecs,this),e.off(m.a.MEDIA_DETACHING,this.onMediaDetaching,this)},st.onFpsDropLevelCapping=function(e,t){$i.isLevelAllowed(t.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(t.droppedLevel)},st.onMediaAttaching=function(e,t){this.media=t.media instanceof HTMLVideoElement?t.media:null},st.onManifestParsed=function(e,t){var i=this.hls;this.restrictedLevels=[],this.firstLevel=t.firstLevel,i.config.capLevelToPlayerSize&&t.video&&this.startCapping()},st.onBufferCodecs=function(e,t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()},st.onMediaDetaching=function(){this.stopCapping()},st.detectPlayerSize=function(){var e,t;this.media&&0<this.mediaHeight&&0<this.mediaWidth&&((e=this.hls.levels).length&&((t=this.hls).autoLevelCapping=this.getMaxLevel(e.length-1),t.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping))},st.getMaxLevel=function(i){var o=this,e=this.hls.levels;if(!e.length)return-1;e=e.filter(function(e,t){return $i.isLevelAllowed(t,o.restrictedLevels)&&t<=i});return this.clientRect=null,$i.getMaxLevelByMediaSize(e,this.mediaWidth,this.mediaHeight)},st.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},st.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)},st.getDimensions=function(){if(this.clientRect)return this.clientRect;var e,t=this.media,i={width:0,height:0};return t&&(e=t.getBoundingClientRect(),i.width=e.width,i.height=e.height,i.width||i.height||(i.width=e.right-e.left||t.width||0,i.height=e.bottom-e.top||t.height||0)),this.clientRect=i},$i.isLevelAllowed=function(e,t){return void 0===t&&(t=[]),-1===t.indexOf(e)},$i.getMaxLevelByMediaSize=function(e,t,i){if(!e||!e.length)return-1;for(var o,s=e.length-1,r=0;r<e.length;r+=1){var n=e[r];if((n.width>=t||n.height>=i)&&(!(o=e[r+1])||n.width!==o.width||n.height!==o.height)){s=r;break}}return s},se=[{key:"contentScaleFactor",get:function(){var e=1;try{e=self.devicePixelRatio}catch(e){}return e}}],Ki((st=$i).prototype,[{key:"mediaWidth",get:function(){return this.getDimensions().width*$i.contentScaleFactor}},{key:"mediaHeight",get:function(){return this.getDimensions().height*$i.contentScaleFactor}}]),Ki(st,se),$i),Qi=((me=Ji.prototype).setStreamController=function(e){this.streamController=e},me.registerListeners=function(){this.hls.on(m.a.MEDIA_ATTACHING,this.onMediaAttaching,this)},me.unregisterListeners=function(){this.hls.off(m.a.MEDIA_ATTACHING,this.onMediaAttaching)},me.destroy=function(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null},me.onMediaAttaching=function(e,t){var i=this.hls.config;i.capLevelOnFPSDrop&&(t=t.media instanceof self.HTMLVideoElement?t.media:null,(this.media=t)&&"function"==typeof t.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),i.fpsDroppedMonitoringPeriod))},me.checkFPS=function(e,t,i){var o,s,r,n,a=performance.now();t&&(this.lastTime&&(r=a-this.lastTime,o=i-this.lastDroppedFrames,n=t-this.lastDecodedFrames,s=1e3*o/r,(r=this.hls).trigger(m.a.FPS_DROP,{currentDropped:o,currentDecoded:n,totalDroppedFrames:i}),0<s&&o>r.config.fpsDroppedMonitoringThreshold*n&&(n=r.currentLevel,H.b.warn("drop FPS ratio greater than max allowed value for currentLevel: "+n),0<n&&(-1===r.autoLevelCapping||r.autoLevelCapping>=n)&&(--n,r.trigger(m.a.FPS_DROP_LEVEL_CAPPING,{level:n,droppedLevel:r.currentLevel}),r.autoLevelCapping=n,this.streamController.nextLevelSwitch()))),this.lastTime=a,this.lastDroppedFrames=i,this.lastDecodedFrames=t)},me.checkFPSInterval=function(){var e,t=this.media;t&&(this.isVideoPlaybackQualityAvailable?(e=t.getVideoPlaybackQuality(),this.checkFPS(t,e.totalVideoFrames,e.droppedVideoFrames)):this.checkFPS(t,t.webkitDecodedFrameCount,t.webkitDroppedFrameCount))},Ji);function Ji(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}function $i(e){this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.hls=void 0,this.streamController=void 0,this.clientRect=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}(uo=Wi=Wi||{}).WIDEVINE="com.widevine.alpha",uo.PLAYREADY="com.microsoft.playready";var eo="undefined"!=typeof self&&self.navigator&&self.navigator.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null;function to(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var io,oo,se=((st=so.prototype).destroy=function(){this._unregisterListeners(),this.hls=this._onMediaEncrypted=null,this._requestMediaKeySystemAccess=null},st._registerListeners=function(){this.hls.on(m.a.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(m.a.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(m.a.MANIFEST_PARSED,this.onManifestParsed,this)},st._unregisterListeners=function(){this.hls.off(m.a.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(m.a.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(m.a.MANIFEST_PARSED,this.onManifestParsed,this)},st.getLicenseServerUrl=function(e){switch(e){case Wi.WIDEVINE:if(!this._widevineLicenseUrl)break;return this._widevineLicenseUrl}throw new Error('no license server URL configured for key-system "'+e+'"')},st._attemptKeySystemAccess=function(t,e,i){var o=this,i=function(e,t,i,o){if(e!==Wi.WIDEVINE)throw new Error("Unknown key-system: "+e);return i=i,s=o,r={audioCapabilities:[],videoCapabilities:[]},t.forEach(function(e){r.audioCapabilities.push({contentType:'audio/mp4; codecs="'+e+'"',robustness:s.audioRobustness||""})}),i.forEach(function(e){r.videoCapabilities.push({contentType:'video/mp4; codecs="'+e+'"',robustness:s.videoRobustness||""})}),[r];var s,r}(t,e,i,this._drmSystemOptions);H.b.log("Requesting encrypted media key-system access");i=this.requestMediaKeySystemAccess(t,i);this.mediaKeysPromise=i.then(function(e){return o._onMediaKeySystemAccessObtained(t,e)}),i.catch(function(e){H.b.error('Failed to obtain key-system "'+t+'" access:',e)})},st._onMediaKeySystemAccessObtained=function(t,e){var i=this;H.b.log('Access for key-system "'+t+'" obtained');var o={mediaKeysSessionInitialized:!1,mediaKeySystemAccess:e,mediaKeySystemDomain:t};this._mediaKeysList.push(o);var s=Promise.resolve().then(function(){return e.createMediaKeys()}).then(function(e){return o.mediaKeys=e,H.b.log('Media-keys created for key-system "'+t+'"'),i._onMediaKeysCreated(),e});return s.catch(function(e){H.b.error("Failed to create media-keys:",e)}),s},st._onMediaKeysCreated=function(){var t=this;this._mediaKeysList.forEach(function(e){e.mediaKeysSession||(e.mediaKeysSession=e.mediaKeys.createSession(),t._onNewMediaKeySession(e.mediaKeysSession))})},st._onNewMediaKeySession=function(t){var i=this;H.b.log("New key-system session "+t.sessionId),t.addEventListener("message",function(e){i._onKeySessionMessage(t,e.message)},!1)},st._onKeySessionMessage=function(t,e){H.b.log("Got EME message event, creating license request"),this._requestLicense(e,function(e){H.b.log("Received license data (length: "+(e&&e.byteLength)+"), updating key-session"),t.update(e)})},st.onMediaEncrypted=function(t){var i=this;if(H.b.log('Media is encrypted using "'+t.initDataType+'" init data type'),!this.mediaKeysPromise)return H.b.error("Fatal: Media is encrypted but no CDM access or no keys have been requested"),void this.hls.trigger(m.a.ERROR,{type:v.b.KEY_SYSTEM_ERROR,details:v.a.KEY_SYSTEM_NO_KEYS,fatal:!0});function e(e){i._media&&(i._attemptSetMediaKeys(e),i._generateRequestWithPreferredKeySession(t.initDataType,t.initData))}this.mediaKeysPromise.then(e).catch(e)},st._attemptSetMediaKeys=function(e){if(!this._media)throw new Error("Attempted to set mediaKeys without first attaching a media element");if(!this._hasSetMediaKeys){var t=this._mediaKeysList[0];if(!t||!t.mediaKeys)return H.b.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),void this.hls.trigger(m.a.ERROR,{type:v.b.KEY_SYSTEM_ERROR,details:v.a.KEY_SYSTEM_NO_KEYS,fatal:!0});H.b.log("Setting keys for encrypted media"),this._media.setMediaKeys(t.mediaKeys),this._hasSetMediaKeys=!0}},st._generateRequestWithPreferredKeySession=function(e,t){var i=this,o=this._mediaKeysList[0];if(!o)return H.b.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),void this.hls.trigger(m.a.ERROR,{type:v.b.KEY_SYSTEM_ERROR,details:v.a.KEY_SYSTEM_NO_ACCESS,fatal:!0});if(!o.mediaKeysSessionInitialized){var s=o.mediaKeysSession;return s?t?(H.b.log('Generating key-session request for "'+e+'" init data type'),o.mediaKeysSessionInitialized=!0,void s.generateRequest(e,t).then(function(){H.b.debug("Key-session generation succeeded")}).catch(function(e){H.b.error("Error generating key-session request:",e),i.hls.trigger(m.a.ERROR,{type:v.b.KEY_SYSTEM_ERROR,details:v.a.KEY_SYSTEM_NO_SESSION,fatal:!1})})):(H.b.warn("Fatal: initData required for generating a key session is null"),void this.hls.trigger(m.a.ERROR,{type:v.b.KEY_SYSTEM_ERROR,details:v.a.KEY_SYSTEM_NO_INIT_DATA,fatal:!0})):(H.b.error("Fatal: Media is encrypted but no key-session existing"),void this.hls.trigger(m.a.ERROR,{type:v.b.KEY_SYSTEM_ERROR,details:v.a.KEY_SYSTEM_NO_SESSION,fatal:!0}))}H.b.warn("Key-Session already initialized but requested again")},st._createLicenseXhr=function(e,t,i){var o=new XMLHttpRequest;o.responseType="arraybuffer",o.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,o,e,t,i);var s=this._licenseXhrSetup;if(s)try{s.call(this.hls,o,e),s=void 0}catch(e){H.b.error(e)}try{o.readyState||o.open("POST",e,!0),s&&s.call(this.hls,o,e)}catch(e){throw new Error("issue setting up KeySystem license XHR "+e)}return o},st._onLicenseRequestReadyStageChange=function(e,t,i,o){if(4===e.readyState)if(200===e.status){this._requestLicenseFailureCount=0,H.b.log("License request succeeded");var s=e.response,r=this._licenseResponseCallback;if(r)try{s=r.call(this.hls,e,t)}catch(e){H.b.error(e)}o(s)}else{if(H.b.error("License Request XHR failed ("+t+"). Status: "+e.status+" ("+e.statusText+")"),this._requestLicenseFailureCount++,3<this._requestLicenseFailureCount)return void this.hls.trigger(m.a.ERROR,{type:v.b.KEY_SYSTEM_ERROR,details:v.a.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0});var n=3-this._requestLicenseFailureCount+1;H.b.warn("Retrying license request, "+n+" attempts left"),this._requestLicense(i,o)}},st._generateLicenseRequestChallenge=function(e,t){if(e.mediaKeySystemDomain===Wi.WIDEVINE)return t;throw new Error("unsupported key-system: "+e.mediaKeySystemDomain)},st._requestLicense=function(e,t){H.b.log("Requesting content license for key-system");var i=this._mediaKeysList[0];if(!i)return H.b.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),void this.hls.trigger(m.a.ERROR,{type:v.b.KEY_SYSTEM_ERROR,details:v.a.KEY_SYSTEM_NO_ACCESS,fatal:!0});try{var o=this.getLicenseServerUrl(i.mediaKeySystemDomain),s=this._createLicenseXhr(o,e,t);H.b.log("Sending license request to URL: "+o);o=this._generateLicenseRequestChallenge(i,e);s.send(o)}catch(e){H.b.error("Failure requesting DRM license: "+e),this.hls.trigger(m.a.ERROR,{type:v.b.KEY_SYSTEM_ERROR,details:v.a.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}},st.onMediaAttached=function(e,t){this._emeEnabled&&(t=t.media,(this._media=t).addEventListener("encrypted",this._onMediaEncrypted))},st.onMediaDetached=function(){var e=this._media,t=this._mediaKeysList;e&&(e.removeEventListener("encrypted",this._onMediaEncrypted),this._media=null,this._mediaKeysList=[],Promise.all(t.map(function(e){if(e.mediaKeysSession)return e.mediaKeysSession.close().catch(function(){})})).then(function(){return e.setMediaKeys(null)}).catch(function(){}))},st.onManifestParsed=function(e,t){var i;this._emeEnabled&&(i=t.levels.map(function(e){return e.audioCodec}).filter(function(e){return!!e}),t=t.levels.map(function(e){return e.videoCodec}).filter(function(e){return!!e}),this._attemptKeySystemAccess(Wi.WIDEVINE,i,t))},to(so.prototype,[{key:"requestMediaKeySystemAccess",get:function(){if(!this._requestMediaKeySystemAccess)throw new Error("No requestMediaKeySystemAccess function configured");return this._requestMediaKeySystemAccess}}]),so);function so(e){this.hls=void 0,this._widevineLicenseUrl=void 0,this._licenseXhrSetup=void 0,this._licenseResponseCallback=void 0,this._emeEnabled=void 0,this._requestMediaKeySystemAccess=void 0,this._drmSystemOptions=void 0,this._config=void 0,this._mediaKeysList=[],this._media=null,this._hasSetMediaKeys=!1,this._requestLicenseFailureCount=0,this.mediaKeysPromise=null,this._onMediaEncrypted=this.onMediaEncrypted.bind(this),this.hls=e,this._config=e.config,this._widevineLicenseUrl=this._config.widevineLicenseUrl,this._licenseXhrSetup=this._config.licenseXhrSetup,this._licenseResponseCallback=this._config.licenseResponseCallback,this._emeEnabled=this._config.emeEnabled,this._requestMediaKeySystemAccess=this._config.requestMediaKeySystemAccessFunc,this._drmSystemOptions=this._config.drmSystemOptions,this._registerListeners()}function ro(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function no(e,t,i){return t&&ro(e.prototype,t),i&&ro(e,i),e}function ao(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(i)return(i=i.call(e)).next.bind(i);if(Array.isArray(e)||(i=function(e){if(e){if("string"==typeof e)return lo(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?lo(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function lo(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,o=new Array(t);i<t;i++)o[i]=e[i];return o}function co(){return(co=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i,o=arguments[t];for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i])}return e}).apply(this,arguments)}(me=io=io||{}).MANIFEST="m",me.AUDIO="a",me.VIDEO="v",me.MUXED="av",me.INIT="i",me.CAPTION="c",me.TIMED_TEXT="tt",me.KEY="k",me.OTHER="o",(uo=oo=oo||{}).DASH="d",uo.HLS="h",uo.SMOOTH="s",uo.OTHER="o",(st={}).VOD="v",st.LIVE="l";var uo=((me=go.prototype).registerListeners=function(){var e=this.hls;e.on(m.a.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(m.a.MEDIA_DETACHED,this.onMediaDetached,this),e.on(m.a.BUFFER_CREATED,this.onBufferCreated,this)},me.unregisterListeners=function(){var e=this.hls;e.off(m.a.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(m.a.MEDIA_DETACHED,this.onMediaDetached,this),e.off(m.a.BUFFER_CREATED,this.onBufferCreated,this),this.onMediaDetached()},me.destroy=function(){this.unregisterListeners(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null},me.onMediaAttached=function(e,t){this.media=t.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)},me.onMediaDetached=function(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)},me.onBufferCreated=function(e,t){var i;this.audioBuffer=null===(i=t.tracks.audio)||void 0===i?void 0:i.buffer,this.videoBuffer=null===(t=t.tracks.video)||void 0===t?void 0:t.buffer},me.createData=function(){var e;return{v:1,sf:oo.HLS,sid:this.sid,cid:this.cid,pr:null===(e=this.media)||void 0===e?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}},me.apply=function(e,t){void 0===t&&(t={}),co(t,this.createData());var i=t.ot===io.INIT||t.ot===io.VIDEO||t.ot===io.MUXED;this.starved&&i&&(t.bs=!0,t.su=!0,this.starved=!1),null==t.su&&(t.su=this.buffering),this.useHeaders?(i=go.toHeaders(t),Object.keys(i).length&&(e.headers||(e.headers={}),co(e.headers,i))):(t=go.toQuery(t))&&(e.url=go.appendQueryToUri(e.url,t))},me.getObjectType=function(e){var t=e.type;return"subtitle"===t?io.TIMED_TEXT:"initSegment"===e.sn?io.INIT:"audio"===t?io.AUDIO:"main"===t?this.hls.audioTracks.length?io.VIDEO:io.MUXED:void 0},me.getTopBandwidth=function(e){for(var t=0,i=ao(e===io.AUDIO?this.hls.audioTracks:this.hls.levels);!(o=i()).done;){var o=o.value;o.bitrate>t&&(t=o.bitrate)}return 0<t?t:NaN},me.getBufferLength=function(e){var t=this.hls.media,e=e===io.AUDIO?this.audioBuffer:this.videoBuffer;return e&&t?1e3*be.bufferInfo(e,t.currentTime,this.config.maxBufferHole).len:NaN},me.createPlaylistLoader=function(){var e=this.config.pLoader,o=this.applyPlaylistData,t=e||this.config.loader;return(e=i.prototype).destroy=function(){this.loader.destroy()},e.abort=function(){this.loader.abort()},e.load=function(e,t,i){o(e),this.loader.load(e,t,i)},no(i,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),i;function i(e){this.loader=void 0,this.loader=new t(e)}},me.createFragmentLoader=function(){var e=this.config.fLoader,o=this.applyFragmentData,t=e||this.config.loader;return(e=i.prototype).destroy=function(){this.loader.destroy()},e.abort=function(){this.loader.abort()},e.load=function(e,t,i){o(e),this.loader.load(e,t,i)},no(i,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),i;function i(e){this.loader=void 0,this.loader=new t(e)}},go.uuid=function(){var e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.substr(t.lastIndexOf("/")+1)},go.serialize=function(e){for(var t,i=[],o=function(e){return Math.round(e)},s=function(e){return 100*o(e/100)},r={br:o,d:o,bl:s,dl:s,mtp:s,nor:function(e){return encodeURIComponent(e)},rtp:s,tb:o},n=ao(Object.keys(e||{}).sort());!(a=n()).done;){var a,l,c=a.value,d=e[c];t=d,Number.isNaN(t)||null==t||""===t||!1===t||"v"===c&&1===d||"pr"==c&&1===d||((l=r[c])&&(d=l(d)),a=typeof d,l=void 0,l="ot"===c||"sf"===c||"st"===c?c+"="+d:"boolean"==a?c:"number"==a?c+"="+d:c+"="+JSON.stringify(d),i.push(l))}return i.join(",")},go.toHeaders=function(e){for(var t={},i=["Object","Request","Session","Status"],o=[{},{},{},{}],s={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3},r=0,n=Object.keys(e);r<n.length;r++){var a=n[r];o[null!=s[a]?s[a]:1][a]=e[a]}for(var l=0;l<o.length;l++){var c=go.serialize(o[l]);c&&(t["CMCD-"+i[l]]=c)}return t},go.toQuery=function(e){return"CMCD="+encodeURIComponent(go.serialize(e))},go.appendQueryToUri=function(e,t){if(!t)return e;var i=e.includes("?")?"&":"?";return e+i+t},go),ho=i(12),fo=/^age:\s*[\d.]+\s*$/m,po=((st=vo.prototype).destroy=function(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null},st.abortInternal=function(){var e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,4!==e.readyState&&(this.stats.aborted=!0,e.abort()))},st.abort=function(){var e;this.abortInternal(),null!==(e=this.callbacks)&&void 0!==e&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)},st.load=function(e,t,i){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=t,this.callbacks=i,this.retryDelay=t.retryDelay,this.loadInternal()},st.loadInternal=function(){var e=this.config,t=this.context;if(e){var i=this.loader=new self.XMLHttpRequest,o=this.stats;o.loading.first=0,o.loaded=0;var s=this.xhrSetup;try{if(s)try{s(i,t.url)}catch(e){i.open("GET",t.url,!0),s(i,t.url)}i.readyState||i.open("GET",t.url,!0);var r=this.context.headers;if(r)for(var n in r)i.setRequestHeader(n,r[n])}catch(e){return void this.callbacks.onError({code:i.status,text:e.message},t,i)}t.rangeEnd&&i.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),i.onreadystatechange=this.readystatechange.bind(this),i.onprogress=this.loadprogress.bind(this),i.responseType=t.responseType,self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),e.timeout),i.send()}},st.readystatechange=function(){var e,t,i,o,s=this.context,r=this.loader,n=this.stats;s&&r&&(i=r.readyState,e=this.config,!n.aborted&&2<=i&&(self.clearTimeout(this.requestTimeout),0===n.loading.first&&(n.loading.first=Math.max(self.performance.now(),n.loading.start)),4===i?(r.onreadystatechange=null,r.onprogress=null,200<=(t=r.status)&&t<300?(n.loading.end=Math.max(self.performance.now(),n.loading.first),i="arraybuffer"===s.responseType?(o=r.response).byteLength:(o=r.responseText).length,n.loaded=n.total=i,this.callbacks&&((i=this.callbacks.onProgress)&&i(n,s,o,r),this.callbacks&&(o={url:r.responseURL,data:o},this.callbacks.onSuccess(o,n,s,r)))):n.retry>=e.maxRetry||400<=t&&t<499?(H.b.error(t+" while loading "+s.url),this.callbacks.onError({code:t,text:r.statusText},s,r)):(H.b.warn(t+" while loading "+s.url+", retrying in "+this.retryDelay+"..."),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,e.maxRetryDelay),n.retry++)):(self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),e.timeout))))},st.loadtimeout=function(){H.b.warn("timeout while loading "+this.context.url);var e=this.callbacks;e&&(this.abortInternal(),e.onTimeout(this.stats,this.context,this.loader))},st.loadprogress=function(e){var t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total)},st.getCacheAge=function(){var e,t=null;return this.loader&&fo.test(this.loader.getAllResponseHeaders())&&(t=(e=this.loader.getResponseHeader("age"))?parseFloat(e):null),t},vo);function vo(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=void 0,this.loader=null,this.stats=void 0,this.xhrSetup=e?e.xhrSetup:null,this.stats=new ho.a,this.retryDelay=0}function go(e){var s=this;this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=function(){s.initialized&&(s.starved=!0),s.buffering=!0},this.onPlaying=function(){s.initialized||(s.initialized=!0),s.buffering=!1},this.applyPlaylistData=function(e){try{s.apply(e,{ot:io.MANIFEST,su:!s.initialized})}catch(e){H.b.warn("Could not generate manifest CMCD data.",e)}},this.applyFragmentData=function(e){try{var t=e.frag,i=s.hls.levels[t.level],o=s.getObjectType(t),t={d:1e3*t.duration,ot:o};o!==io.VIDEO&&o!==io.AUDIO&&o!=io.MUXED||(t.br=i.bitrate/1e3,t.tb=s.getTopBandwidth(o),t.bl=s.getBufferLength(o)),s.apply(e,t)}catch(e){H.b.warn("Could not generate segment CMCD data.",e)}},this.hls=e;var t=this.config=e.config,e=t.cmcd;null!=e&&(t.pLoader=this.createPlaylistLoader(),t.fLoader=this.createFragmentLoader(),this.sid=e.sessionId||go.uuid(),this.cid=e.contentId,this.useHeaders=!0===e.useHeaders,this.registerListeners())}function mo(e){var i="function"==typeof Map?new Map:void 0;return(mo=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==i){if(i.has(e))return i.get(e);i.set(e,t)}function t(){return yo(e,arguments,wo(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),bo(t,e)})(e)}function yo(e,t,i){return(yo=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,i){var o=[null];o.push.apply(o,t);o=new(Function.bind.apply(e,o));return i&&bo(o,i.prototype),o}).apply(null,arguments)}function bo(e,t){return(bo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wo(e){return(wo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ko(){return(ko=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i,o=arguments[t];for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i])}return e}).apply(this,arguments)}(me=xo.prototype).destroy=function(){this.loader=this.callbacks=null,this.abortInternal()},me.abortInternal=function(){var e=this.response;e&&e.ok||(this.stats.aborted=!0,this.controller.abort())},me.abort=function(){var e;this.abortInternal(),null!==(e=this.callbacks)&&void 0!==e&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)},me.load=function(o,s,r){var n=this,a=this.stats;if(a.loading.start)throw new Error("Loader can only be used once.");a.loading.start=self.performance.now();var e=function(e,t){t={method:"GET",mode:"cors",credentials:"same-origin",signal:t,headers:new self.Headers(ko({},e.headers))};return e.rangeEnd&&t.headers.set("Range","bytes="+e.rangeStart+"-"+String(e.rangeEnd-1)),t}(o,this.controller.signal),l=r.onProgress,c="arraybuffer"===o.responseType,d=c?"byteLength":"length";this.context=o,this.config=s,this.callbacks=r,this.request=this.fetchSetup(o,e),self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(function(){n.abortInternal(),r.onTimeout(a,o,n.response)},s.timeout),self.fetch(this.request).then(function(e){if((n.response=n.loader=e).ok)return a.loading.first=Math.max(self.performance.now(),a.loading.start),a.total=parseInt(e.headers.get("Content-Length")||"0"),l&&Object(F.a)(s.highWaterMark)?n.loadProgressively(e,a,o,s.highWaterMark,l):c?e.arrayBuffer():e.text();var t=e.status,i=e.statusText;throw new _o(i||"fetch, bad network response",t,e)}).then(function(e){var t=n.response;self.clearTimeout(n.requestTimeout),a.loading.end=Math.max(self.performance.now(),a.loading.first),a.loaded=a.total=e[d];var i={url:t.url,data:e};l&&!Object(F.a)(s.highWaterMark)&&l(a,o,e,t),r.onSuccess(i,a,o,t)}).catch(function(e){var t;self.clearTimeout(n.requestTimeout),a.aborted||(t=e.code||0,r.onError({code:t,text:e.message},o,e.details))})},me.getCacheAge=function(){var e,t=null;return this.response&&(t=(e=this.response.headers.get("age"))?parseFloat(e):null),t},me.loadProgressively=function(o,s,r,n,a){void 0===n&&(n=0);var l=new Tt.a,e=o.body.getReader();return function i(){return e.read().then(function(e){if(e.done)return l.dataLength&&a(s,r,l.flush(),o),Promise.resolve(new ArrayBuffer(0));var t=e.value,e=t.length;return s.loaded+=e,e<n||l.dataLength?(l.push(t),l.dataLength>=n&&a(s,r,l.flush(),o)):a(s,r,t,o),i()}).catch(function(){return Promise.reject()})}()},i=xo;function xo(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=void 0,this.response=void 0,this.controller=void 0,this.context=void 0,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||Ao,this.controller=new self.AbortController,this.stats=new ho.a}function Ao(e,t){return new self.Request(e.url,t)}var To,_o=(To=mo(Error),st=To,(me=Lo).prototype=Object.create(st.prototype),bo(me.prototype.constructor=me,st),Lo),Eo=i,So=/\s/;function Lo(e,t,i){return(e=To.call(this,e)||this).code=void 0,e.details=void 0,e.code=t,e.details=i,e}function Co(){return(Co=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i,o=arguments[t];for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i])}return e}).apply(this,arguments)}function Oo(t,e){var i,o=Object.keys(t);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(t),e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),o.push.apply(o,i)),o}function Po(o){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?Oo(Object(s),!0).forEach(function(e){var t,i;t=o,e=s[i=e],i in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(s)):Oo(Object(s)).forEach(function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(s,e))})}return o}var jo=Po(Po({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,maxBufferSize:6e7,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:po,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:At,bufferController:Ut,capLevelController:t,fpsController:Qi,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystemOptions:{},requestMediaKeySystemAccessFunc:eo,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0},{cueHandler:{newCue:function(t,e,i,o){for(var s,r,n,a,l=[],c=self.VTTCue||self.TextTrackCue,d=0;d<o.rows.length;d++)if(r=!0,n=0,a="",!(s=o.rows[d]).isEmpty()){for(var u=0;u<s.chars.length;u++)So.test(s.chars[u].uchar)&&r?n++:(a+=s.chars[u].uchar,r=!1);(s.cueStartTime=e)===i&&(i+=1e-4),16<=n?n--:n++;var h=Si(a.trim()),f=Bi(e,i,h);t&&t.cues&&t.cues.getCueById(f)||((h=new c(e,i,h)).id=f,h.line=d+1,h.align="left",h.position=10+Math.min(80,10*Math.floor(8*n/32)),l.push(h))}return t&&l.length&&(l.sort(function(e,t){return"auto"===e.line||"auto"===t.line?0:8<e.line&&8<t.line?t.line-e.line:e.line-t.line}),l.forEach(function(e){return _(t,e)})),l}},enableCEA708Captions:!0,enableWebVTT:!0,enableIMSC1:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}),{},{subtitleStreamController:Mt,subtitleTrackController:Ht,timelineController:Yi,audioStreamController:Lt,audioTrackController:Pt,emeController:se,cmcdController:uo});function Io(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var Mo=function(){function u(e){void 0===e&&(e={}),this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new ct.EventEmitter,this._autoLevelCapping=void 0,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null;var t=this.config=function(e,t){if((t.liveSyncDurationCount||t.liveMaxLatencyDurationCount)&&(t.liveSyncDuration||t.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(void 0!==t.liveMaxLatencyDurationCount&&(void 0===t.liveSyncDurationCount||t.liveMaxLatencyDurationCount<=t.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(void 0!==t.liveMaxLatencyDuration&&(void 0===t.liveSyncDuration||t.liveMaxLatencyDuration<=t.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');return Co({},e,t)}(u.DefaultConfig,e);this.userConfig=e,Object(H.a)(t.debug),this._autoLevelCapping=-1,t.progressive&&((c=(d=t).loader)!==Eo&&c!==po?(H.b.log("[config]: Custom loader detected, cannot enable progressive streaming"),d.progressive=!1):function(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),1}catch(e){}}()&&(d.loader=Eo,d.progressive=!0,d.enableSoftwareAES=!0,H.b.log("[config]: Progressive streaming enabled, using FetchLoader")));var i=t.abrController,o=t.bufferController,s=t.capLevelController,r=t.fpsController,n=this.abrController=new i(this),a=this.bufferController=new o(this),l=this.capLevelController=new s(this),e=new r(this),c=new w(this),d=new k(this),i=new C(this),o=this.levelController=new ue(this),s=new he(this),r=this.streamController=new mt(this,s);l.setStreamController(r),e.setStreamController(r);r=[o,r];this.networkControllers=r;i=[c,d,n,a,l,e,i,s];this.audioTrackController=this.createController(t.audioTrackController,null,r),this.createController(t.audioStreamController,s,r),this.subtitleTrackController=this.createController(t.subtitleTrackController,null,r),this.createController(t.subtitleStreamController,s,r),this.createController(t.timelineController,null,i),this.emeController=this.createController(t.emeController,null,i),this.cmcdController=this.createController(t.cmcdController,null,i),this.latencyController=this.createController(I,null,i),this.coreComponents=i}u.isSupported=function(){var e=rt();if(!e)return!1;var t=nt(),e=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),t=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return!!e&&!!t};var e,t=u.prototype;return t.createController=function(e,t,i){if(e){e=t?new e(this,t):new e(this);return i&&i.push(e),e}return null},t.on=function(e,t,i){void 0===i&&(i=this),this._emitter.on(e,t,i)},t.once=function(e,t,i){void 0===i&&(i=this),this._emitter.once(e,t,i)},t.removeAllListeners=function(e){this._emitter.removeAllListeners(e)},t.off=function(e,t,i,o){void 0===i&&(i=this),this._emitter.off(e,t,i,o)},t.listeners=function(e){return this._emitter.listeners(e)},t.emit=function(e,t,i){return this._emitter.emit(e,t,i)},t.trigger=function(e,t){if(this.config.debug)return this.emit(e,e,t);try{return this.emit(e,e,t)}catch(t){H.b.error("An internal error happened while handling event "+e+'. Error message: "'+t.message+'". Here is a stacktrace:',t),this.trigger(m.a.ERROR,{type:v.b.OTHER_ERROR,details:v.a.INTERNAL_EXCEPTION,fatal:!1,event:e,error:t})}return!1},t.listenerCount=function(e){return this._emitter.listenerCount(e)},t.destroy=function(){H.b.log("destroy"),this.trigger(m.a.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach(function(e){return e.destroy()}),this.networkControllers.length=0,this.coreComponents.forEach(function(e){return e.destroy()}),this.coreComponents.length=0},t.attachMedia=function(e){H.b.log("attachMedia"),this._media=e,this.trigger(m.a.MEDIA_ATTACHING,{media:e})},t.detachMedia=function(){H.b.log("detachMedia"),this.trigger(m.a.MEDIA_DETACHING,void 0),this._media=null},t.loadSource=function(e){this.stopLoad();var t=this.media,i=this.url,o=this.url=N.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});H.b.log("loadSource:"+o),t&&i&&i!==o&&this.bufferController.hasSourceTypes()&&(this.detachMedia(),this.attachMedia(t)),this.trigger(m.a.MANIFEST_LOADING,{url:e})},t.startLoad=function(t){void 0===t&&(t=-1),H.b.log("startLoad("+t+")"),this.networkControllers.forEach(function(e){e.startLoad(t)})},t.stopLoad=function(){H.b.log("stopLoad"),this.networkControllers.forEach(function(e){e.stopLoad()})},t.swapAudioCodec=function(){H.b.log("swapAudioCodec"),this.streamController.swapAudioCodec()},t.recoverMediaError=function(){H.b.log("recoverMediaError");var e=this._media;this.detachMedia(),e&&this.attachMedia(e)},t.removeLevel=function(e,t){void 0===t&&(t=0),this.levelController.removeLevel(e,t)},e=[{key:"version",get:function(){return"1.1.2"}},{key:"Events",get:function(){return m.a}},{key:"ErrorTypes",get:function(){return v.b}},{key:"ErrorDetails",get:function(){return v.a}},{key:"DefaultConfig",get:function(){return u.defaultConfig||jo},set:function(e){u.defaultConfig=e}}],Io((t=u).prototype,[{key:"levels",get:function(){return this.levelController.levels||[]}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(e){H.b.log("set currentLevel:"+e),this.loadLevel=e,this.abrController.clearTimer(),this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(e){H.b.log("set nextLevel:"+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(e){H.b.log("set loadLevel:"+e),this.levelController.manualLevel=e}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelController.nextLoadLevel=e}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(e){H.b.log("set firstLevel:"+e),this.levelController.firstLevel=e}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(e){H.b.log("set startLevel:"+e),-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}},{key:"capLevelToPlayerSize",get:function(){return this.config.capLevelToPlayerSize},set:function(e){e=!!e;e!==this.config.capLevelToPlayerSize&&(e?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=e)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(e){this._autoLevelCapping!==e&&(H.b.log("set autoLevelCapping:"+e),this._autoLevelCapping=e)}},{key:"bandwidthEstimate",get:function(){var e=this.abrController.bwEstimator;return e?e.getEstimate():NaN}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){var e=this.levels,t=this.config.minAutoBitrate;if(!e)return 0;for(var i=e.length,o=0;o<i;o++)if(e[o].maxBitrate>t)return o;return 0}},{key:"maxAutoLevel",get:function(){var e=this.levels,t=this.autoLevelCapping;return-1===t&&e&&e.length?e.length-1:t}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(e){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,e)}},{key:"audioTracks",get:function(){var e=this.audioTrackController;return e?e.audioTracks:[]}},{key:"audioTrack",get:function(){var e=this.audioTrackController;return e?e.audioTrack:-1},set:function(e){var t=this.audioTrackController;t&&(t.audioTrack=e)}},{key:"subtitleTracks",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTrack:-1},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}},{key:"media",get:function(){return this._media}},{key:"subtitleDisplay",get:function(){var e=this.subtitleTrackController;return!!e&&e.subtitleDisplay},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}},{key:"lowLatencyMode",get:function(){return this.config.lowLatencyMode},set:function(e){this.config.lowLatencyMode=e}},{key:"liveSyncPosition",get:function(){return this.latencyController.liveSyncPosition}},{key:"latency",get:function(){return this.latencyController.latency}},{key:"maxLatency",get:function(){return this.latencyController.maxLatency}},{key:"targetLatency",get:function(){return this.latencyController.targetLatency}},{key:"drift",get:function(){return this.latencyController.drift}},{key:"forceStartLoad",get:function(){return this.streamController.forceStartLoad}}]),Io(t,e),u}();Mo.defaultConfig=void 0}],s.c=o,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(i,o,function(e){return t[e]}.bind(null,o));return i},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/dist/",s(s.s=20).default;function s(e){if(o[e])return o[e].exports;var t=o[e]={i:e,l:!1,exports:{}};return i[e].call(t.exports,t,t.exports,s),t.l=!0,t.exports}var i,o});
